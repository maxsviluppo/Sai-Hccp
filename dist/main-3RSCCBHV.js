var w_=Object.defineProperty,I_=Object.defineProperties;var S_=Object.getOwnPropertyDescriptors;var up=Object.getOwnPropertySymbols;var D_=Object.prototype.hasOwnProperty,T_=Object.prototype.propertyIsEnumerable;var fp=(n,e,t)=>e in n?w_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R=(n,e)=>{for(var t in e||={})D_.call(e,t)&&fp(n,t,e[t]);if(up)for(var t of up(e))T_.call(e,t)&&fp(n,t,e[t]);return n},O=(n,e)=>I_(n,S_(e));var Qe=null,Tr=!1,Gl=1,M_=null,ot=Symbol("SIGNAL");function ne(n){let e=Qe;return Qe=n,e}function Ar(){return Qe}var ki={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yo(n){if(Tr)throw new Error("");if(Qe===null)return;Qe.consumerOnSignalRead(n);let e=Qe.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=Qe.recomputing;if(i&&(t=e!==void 0?e.nextProducer:Qe.producers,t!==void 0&&t.producer===n)){Qe.producersTail=t,t.lastReadVersion=n.version;return}let o=n.consumersTail;if(o!==void 0&&o.consumer===Qe&&(!i||k_(o,Qe)))return;let r=Ri(Qe),s={producer:n,consumer:Qe,nextProducer:t,prevConsumer:o,lastReadVersion:n.version,nextConsumer:void 0};Qe.producersTail=s,e!==void 0?e.nextProducer=s:Qe.producers=s,r&&gp(n,s)}function pp(){Gl++}function zl(n){if(!(Ri(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Gl)){if(!n.producerMustRecompute(n)&&!Eo(n)){$l(n);return}n.producerRecomputeValue(n),$l(n)}}function ql(n){if(n.consumers===void 0)return;let e=Tr;Tr=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||A_(i)}}finally{Tr=e}}function jl(){return Qe?.consumerAllowSignalWrites!==!1}function A_(n){n.dirty=!0,ql(n),n.consumerMarkedDirty?.(n)}function $l(n){n.dirty=!1,n.lastCleanEpoch=Gl}function Ni(n){return n&&mp(n),ne(n)}function mp(n){n.producersTail=void 0,n.recomputing=!0}function xo(n,e){ne(e),n&&hp(n)}function hp(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ri(n))do t=Wl(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Eo(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(zl(t),i!==t.version))return!0}return!1}function Kn(n){if(Ri(n)){let e=n.producers;for(;e!==void 0;)e=Wl(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function gp(n,e){let t=n.consumersTail,i=Ri(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let o=n.producers;o!==void 0;o=o.nextProducer)gp(o.producer,o)}function Wl(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,o=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=o:e.consumersTail=o,o!==void 0)o.nextConsumer=i;else if(e.consumers=i,!Ri(e)){let r=e.producers;for(;r!==void 0;)r=Wl(r)}return t}function Ri(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Yl(n){M_?.(n)}function k_(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function Jl(n,e){return Object.is(n,e)}function kr(n,e){let t=Object.create(N_);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(zl(t),yo(t),t.value===Mr)throw t.error;return t.value};return i[ot]=t,Yl(t),i}var Bl=Symbol("UNSET"),Hl=Symbol("COMPUTING"),Mr=Symbol("ERRORED"),N_=O(R({},ki),{value:Bl,dirty:!0,error:null,equal:Jl,kind:"computed",producerMustRecompute(n){return n.value===Bl||n.value===Hl},producerRecomputeValue(n){if(n.value===Hl)throw new Error("");let e=n.value;n.value=Hl;let t=Ni(n),i,o=!1;try{i=n.computation(),ne(null),o=e!==Bl&&e!==Mr&&i!==Mr&&n.equal(e,i)}catch(r){i=Mr,n.error=r}finally{xo(n,t)}if(o){n.value=e;return}n.value=i,n.version++}});function R_(){throw new Error}var vp=R_;function _p(n){vp(n)}function Kl(n){vp=n}var P_=null;function Zl(n,e){let t=Object.create(Nr);t.value=n,e!==void 0&&(t.equal=e);let i=()=>yp(t);return i[ot]=t,Yl(t),[i,s=>Co(t,s),s=>xp(t,s)]}function yp(n){return yo(n),n.value}function Co(n,e){jl()||_p(n),n.equal(n.value,e)||(n.value=e,F_(n))}function xp(n,e){jl()||_p(n),Co(n,e(n.value))}var Nr=O(R({},ki),{equal:Jl,value:void 0,kind:"signal"});function F_(n){n.version++,pp(),ql(n),P_?.(n)}function Ql(n){let e=ne(null);try{return n()}finally{ne(e)}}var Xl=O(R({},ki),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function ed(n){if(n.dirty=!1,n.version>0&&!Eo(n))return;n.version++;let e=Ni(n);try{n.cleanup(),n.fn()}finally{xo(n,e)}}function we(n){return typeof n=="function"}function Rr(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Pr=Rr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,o)=>`${o+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function bo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let r of t)r.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(we(i))try{i()}catch(r){e=r instanceof Pr?r.errors:[r]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let r of o)try{Ep(r)}catch(s){e=e??[],s instanceof Pr?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Pr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ep(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&bo(t,e)}remove(e){let{_finalizers:t}=this;t&&bo(t,e),e instanceof n&&e._removeParent(this)}};rt.EMPTY=(()=>{let n=new rt;return n.closed=!0,n})();var td=rt.EMPTY;function Fr(n){return n instanceof rt||n&&"closed"in n&&we(n.remove)&&we(n.add)&&we(n.unsubscribe)}function Ep(n){we(n)?n():n.unsubscribe()}var Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Pi={setTimeout(n,e,...t){let{delegate:i}=Pi;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Pi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Or(n){Pi.setTimeout(()=>{let{onUnhandledError:e}=Rt;if(e)e(n);else throw n})}function nd(){}var Cp=id("C",void 0,void 0);function bp(n){return id("E",void 0,n)}function wp(n){return id("N",n,void 0)}function id(n,e,t){return{kind:n,value:e,error:t}}var Zn=null;function Fi(n){if(Rt.useDeprecatedSynchronousErrorHandling){let e=!Zn;if(e&&(Zn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Zn;if(Zn=null,t)throw i}}else n()}function Ip(n){Rt.useDeprecatedSynchronousErrorHandling&&Zn&&(Zn.errorThrown=!0,Zn.error=n)}var Qn=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Fr(e)&&e.add(this)):this.destination=L_}static create(e,t,i){return new Oi(e,t,i)}next(e){this.isStopped?rd(wp(e),this):this._next(e)}error(e){this.isStopped?rd(bp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rd(Cp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},O_=Function.prototype.bind;function od(n,e){return O_.call(n,e)}var sd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Vr(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Vr(i)}else Vr(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Vr(t)}}},Oi=class extends Qn{constructor(e,t,i){super();let o;if(we(e)||!e)o={next:e??void 0,error:t??void 0,complete:i??void 0};else{let r;this&&Rt.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&od(e.next,r),error:e.error&&od(e.error,r),complete:e.complete&&od(e.complete,r)}):o=e}this.destination=new sd(o)}};function Vr(n){Rt.useDeprecatedSynchronousErrorHandling?Ip(n):Or(n)}function V_(n){throw n}function rd(n,e){let{onStoppedNotification:t}=Rt;t&&Pi.setTimeout(()=>t(n,e))}var L_={closed:!0,next:nd,error:V_,complete:nd};var Vi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Sp(n){return n}function Dp(n){return n.length===0?Sp:n.length===1?n[0]:function(t){return n.reduce((i,o)=>o(i),t)}}var He=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,o){let r=B_(t)?t:new Oi(t,i,o);return Fi(()=>{let{operator:s,source:a}=this;r.add(s?s.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=Tp(i),new i((o,r)=>{let s=new Oi({next:a=>{try{t(a)}catch(c){r(c),s.unsubscribe()}},error:r,complete:o});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Vi](){return this}pipe(...t){return Dp(t)(this)}toPromise(t){return t=Tp(t),new t((i,o)=>{let r;this.subscribe(s=>r=s,s=>o(s),()=>i(r))})}}return n.create=e=>new n(e),n})();function Tp(n){var e;return(e=n??Rt.Promise)!==null&&e!==void 0?e:Promise}function U_(n){return n&&we(n.next)&&we(n.error)&&we(n.complete)}function B_(n){return n&&n instanceof Qn||U_(n)&&Fr(n)}function H_(n){return we(n?.lift)}function Li(n){return e=>{if(H_(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ui(n,e,t,i,o){return new ad(n,e,t,i,o)}var ad=class extends Qn{constructor(e,t,i,o,r,s){super(e),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Mp=Rr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Kt=(()=>{class n extends He{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Lr(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Mp}next(t){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:o,observers:r}=this;return i||o?td:(this.currentObservers=null,r.push(t),new rt(()=>{this.currentObservers=null,bo(r,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:o,isStopped:r}=this;i?t.error(o):r&&t.complete()}asObservable(){let t=new He;return t.source=this,t}}return n.create=(e,t)=>new Lr(e,t),n})(),Lr=class extends Kt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:td}};var wo=class extends Kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};function $_(n){return n[n.length-1]}function Ap(n){return we($_(n))?n.pop():void 0}function Np(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(f){try{u(i.next(f))}catch(g){s(g)}}function c(f){try{u(i.throw(f))}catch(g){s(g)}}function u(f){f.done?r(f.value):o(f.value).then(a,c)}u((i=i.apply(n,e||[])).next())})}function kp(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xn(n){return this instanceof Xn?(this.v=n,this):new Xn(n)}function Rp(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(E){return function(w){return Promise.resolve(w).then(E,g)}}function a(E,w){i[E]&&(o[E]=function(A){return new Promise(function(F,P){r.push([E,A,F,P])>1||c(E,A)})},w&&(o[E]=w(o[E])))}function c(E,w){try{u(i[E](w))}catch(A){x(r[0][3],A)}}function u(E){E.value instanceof Xn?Promise.resolve(E.value.v).then(f,g):x(r[0][2],E)}function f(E){c("next",E)}function g(E){c("throw",E)}function x(E,w){E(w),r.shift(),r.length&&c(r[0][0],r[0][1])}}function Pp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof kp=="function"?kp(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(s){return new Promise(function(a,c){s=n[r](s),o(a,c,s.done,s.value)})}}function o(r,s,a,c){Promise.resolve(c).then(function(u){r({value:u,done:a})},s)}}var Ur=n=>n&&typeof n.length=="number"&&typeof n!="function";function Br(n){return we(n?.then)}function Hr(n){return we(n[Vi])}function $r(n){return Symbol.asyncIterator&&we(n?.[Symbol.asyncIterator])}function Gr(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function G_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zr=G_();function qr(n){return we(n?.[zr])}function jr(n){return Rp(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:o}=yield Xn(t.read());if(o)return yield Xn(void 0);yield yield Xn(i)}}finally{t.releaseLock()}})}function Wr(n){return we(n?.getReader)}function Tn(n){if(n instanceof He)return n;if(n!=null){if(Hr(n))return z_(n);if(Ur(n))return q_(n);if(Br(n))return j_(n);if($r(n))return Fp(n);if(qr(n))return W_(n);if(Wr(n))return Y_(n)}throw Gr(n)}function z_(n){return new He(e=>{let t=n[Vi]();if(we(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function q_(n){return new He(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function j_(n){return new He(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Or)})}function W_(n){return new He(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Fp(n){return new He(e=>{J_(n,e).catch(t=>e.error(t))})}function Y_(n){return Fp(jr(n))}function J_(n,e){var t,i,o,r;return Np(this,void 0,void 0,function*(){try{for(t=Pp(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=t.return)&&(yield r.call(t))}finally{if(o)throw o.error}}e.complete()})}function Zt(n,e,t,i=0,o=!1){let r=e.schedule(function(){t(),o?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!o)return r}function Yr(n,e=0){return Li((t,i)=>{t.subscribe(Ui(i,o=>Zt(i,n,()=>i.next(o),e),()=>Zt(i,n,()=>i.complete(),e),o=>Zt(i,n,()=>i.error(o),e)))})}function Jr(n,e=0){return Li((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Op(n,e){return Tn(n).pipe(Jr(e),Yr(e))}function Vp(n,e){return Tn(n).pipe(Jr(e),Yr(e))}function Lp(n,e){return new He(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function Up(n,e){return new He(t=>{let i;return Zt(t,e,()=>{i=n[zr](),Zt(t,e,()=>{let o,r;try{({value:o,done:r}=i.next())}catch(s){t.error(s);return}r?t.complete():t.next(o)},0,!0)}),()=>we(i?.return)&&i.return()})}function Kr(n,e){if(!n)throw new Error("Iterable cannot be null");return new He(t=>{Zt(t,e,()=>{let i=n[Symbol.asyncIterator]();Zt(t,e,()=>{i.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function Bp(n,e){return Kr(jr(n),e)}function Hp(n,e){if(n!=null){if(Hr(n))return Op(n,e);if(Ur(n))return Lp(n,e);if(Br(n))return Vp(n,e);if($r(n))return Kr(n,e);if(qr(n))return Up(n,e);if(Wr(n))return Bp(n,e)}throw Gr(n)}function ld(n,e){return e?Hp(n,e):Tn(n)}function ei(n,e){return Li((t,i)=>{let o=0;t.subscribe(Ui(i,r=>{i.next(n.call(e,r,o++))}))})}var{isArray:K_}=Array;function Z_(n,e){return K_(e)?n(...e):n(e)}function $p(n){return ei(e=>Z_(n,e))}var{isArray:Q_}=Array,{getPrototypeOf:X_,prototype:ey,keys:ty}=Object;function Gp(n){if(n.length===1){let e=n[0];if(Q_(e))return{args:e,keys:null};if(ny(e)){let t=ty(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function ny(n){return n&&typeof n=="object"&&X_(n)===ey}function zp(n,e){return n.reduce((t,i,o)=>(t[i]=e[o],t),{})}function dd(...n){let e=Ap(n),{args:t,keys:i}=Gp(n),o=new He(r=>{let{length:s}=t;if(!s){r.complete();return}let a=new Array(s),c=s,u=s;for(let f=0;f<s;f++){let g=!1;Tn(t[f]).subscribe(Ui(r,x=>{g||(g=!0,u--),a[f]=x},()=>c--,void 0,()=>{(!c||!g)&&(u||r.next(i?zp(i,a):a),r.complete())}))}});return e?o.pipe($p(e)):o}var cd;function Zr(){return cd}function Qt(n){let e=cd;return cd=n,e}var qp=Symbol("NotFound");function Bi(n){return n===qp||n?.name==="\u0275NotFound"}var os="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(e,t){super(rs(e,t)),this.code=e}};function iy(n){return`NG0${Math.abs(n)}`}function rs(n,e){return`${iy(n)}${e?": "+e:""}`}var ri=globalThis;function Te(n){for(let e in n)if(n[e]===Te)return e;throw Error("")}function Kp(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Mn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function ss(n,e){return n?e?`${n} ${e}`:n:e||""}var oy=Te({__forward_ref__:Te});function bt(n){return n.__forward_ref__=bt,n.toString=function(){return Mn(this())},n}function Ke(n){return bd(n)?n():n}function bd(n){return typeof n=="function"&&n.hasOwnProperty(oy)&&n.__forward_ref__===bt}function be(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mn(n){return{providers:n.providers||[],imports:n.imports||[]}}function as(n){return ry(n,ls)}function ry(n,e){return n.hasOwnProperty(e)&&n[e]||null}function sy(n){let e=n?.[ls]??null;return e||null}function fd(n){return n&&n.hasOwnProperty(Xr)?n[Xr]:null}var ls=Te({\u0275prov:Te}),Xr=Te({\u0275inj:Te}),fe=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=be({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wd(n){return n&&!!n.\u0275providers}var Id=Te({\u0275cmp:Te}),Sd=Te({\u0275dir:Te}),Dd=Te({\u0275pipe:Te});var So=Te({\u0275fac:Te}),si=Te({__NG_ELEMENT_ID__:Te}),jp=Te({__NG_ENV_ID__:Te});function ko(n){return Md(n,"@Component"),n[Id]||null}function Td(n){return Md(n,"@Directive"),n[Sd]||null}function Zp(n){return Md(n,"@Pipe"),n[Dd]||null}function Md(n,e){if(n==null)throw new te(-919,!1)}function ai(n){return typeof n=="string"?n:n==null?"":String(n)}var Qp=Te({ngErrorCode:Te}),ay=Te({ngErrorMessage:Te}),ly=Te({ngTokenPath:Te});function Ad(n,e){return Xp("",-200,e)}function ds(n,e){throw new te(-201,!1)}function Xp(n,e,t){let i=new te(e,n);return i[Qp]=e,i[ay]=n,t&&(i[ly]=t),i}function dy(n){return n[Qp]}var pd;function em(){return pd}function st(n){let e=pd;return pd=n,e}function kd(n,e,t){let i=as(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;ds(n,"")}var cy={},ti=cy,uy="__NG_DI_FLAG__",md=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=ni(t)||0;try{return this.injector.get(e,i&8?null:ti,i)}catch(o){if(Bi(o))return o;throw o}}};function fy(n,e=0){let t=Zr();if(t===void 0)throw new te(-203,!1);if(t===null)return kd(n,void 0,e);{let i=py(e),o=t.retrieve(n,i);if(Bi(o)){if(i.optional)return null;throw o}return o}}function Se(n,e=0){return(em()||fy)(Ke(n),e)}function $(n,e){return Se(n,ni(e))}function ni(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function py(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function hd(n){let e=[];for(let t=0;t<n.length;t++){let i=Ke(n[t]);if(Array.isArray(i)){if(i.length===0)throw new te(900,!1);let o,r=0;for(let s=0;s<i.length;s++){let a=i[s],c=my(a);typeof c=="number"?c===-1?o=a.token:r|=c:o=a}e.push(Se(o,r))}else e.push(Se(i))}return e}function my(n){return n[uy]}function An(n,e){let t=n.hasOwnProperty(So);return t?n[So]:null}function cs(n,e){n.forEach(t=>Array.isArray(t)?cs(t,e):e(t))}function tm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function nm(n,e,t,i){let o=n.length;if(o==e)n.push(t,i);else if(o===1)n.push(i,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let r=o-2;n[o]=n[r],o--}n[e]=t,n[e+1]=i}}function us(n,e,t){let i=$i(n,e);return i>=0?n[i|1]=t:(i=~i,nm(n,i,e,t)),i}function fs(n,e){let t=$i(n,e);if(t>=0)return n[t|1]}function $i(n,e){return hy(n,e,1)}function hy(n,e,t){let i=0,o=n.length>>t;for(;o!==i;){let r=i+(o-i>>1),s=n[r<<t];if(e===s)return r<<t;s>e?o=r:i=r+1}return~(o<<t)}var Pn={},lt=[],No=new fe(""),Rd=new fe("",-1),Pd=new fe(""),Do=class{get(e,t=ti){if(t===ti){let o=Xp("",-201);throw o.name="\u0275NotFound",o}return t}};function Fd(n){return{\u0275providers:n}}function im(...n){return{\u0275providers:Od(!0,n),\u0275fromNgModule:!0}}function Od(n,...e){let t=[],i=new Set,o,r=s=>{t.push(s)};return cs(e,s=>{let a=s;es(a,r,[],i)&&(o||=[],o.push(a))}),o!==void 0&&om(o,r),t}function om(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:o}=n[t];Vd(o,r=>{e(r,i)})}}function es(n,e,t,i){if(n=Ke(n),!n)return!1;let o=null,r=fd(n),s=!r&&ko(n);if(!r&&!s){let c=n.ngModule;if(r=fd(c),r)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=i.has(o);if(s){if(a)return!1;if(i.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)es(u,e,t,i)}}else if(r){if(r.imports!=null&&!a){i.add(o);let u;cs(r.imports,f=>{es(f,e,t,i)&&(u||=[],u.push(f))}),u!==void 0&&om(u,e)}if(!a){let u=An(o)||(()=>new o);e({provide:o,useFactory:u,deps:lt},o),e({provide:Pd,useValue:o,multi:!0},o),e({provide:No,useValue:()=>Se(o),multi:!0},o)}let c=r.providers;if(c!=null&&!a){let u=n;Vd(c,f=>{e(f,u)})}}else return!1;return o!==n&&n.providers!==void 0}function Vd(n,e){for(let t of n)wd(t)&&(t=t.\u0275providers),Array.isArray(t)?Vd(t,e):e(t)}var gy=Te({provide:String,useValue:Te});function rm(n){return n!==null&&typeof n=="object"&&gy in n}function vy(n){return!!(n&&n.useExisting)}function _y(n){return!!(n&&n.useFactory)}function ii(n){return typeof n=="function"}function sm(n){return!!n.useClass}var Ro=new fe(""),Qr={},Wp={},ud;function Po(){return ud===void 0&&(ud=new Do),ud}var Pt=class{},oi=class extends Pt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,o){super(),this.parent=t,this.source=i,this.scopes=o,vd(e,s=>this.processProvider(s)),this.records.set(Rd,Hi(void 0,this)),o.has("environment")&&this.records.set(Pt,Hi(void 0,this));let r=this.records.get(Ro);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(Pd,lt,{self:!0}))}retrieve(e,t){let i=ni(t)||0;try{return this.get(e,ti,i)}catch(o){if(Bi(o))return o;throw o}}destroy(){Io(this),this._destroyed=!0;let e=ne(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ne(e)}}onDestroy(e){return Io(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Io(this);let t=Qt(this),i=st(void 0),o;try{return e()}finally{Qt(t),st(i)}}get(e,t=ti,i){if(Io(this),e.hasOwnProperty(jp))return e[jp](this);let o=ni(i),r,s=Qt(this),a=st(void 0);try{if(!(o&4)){let u=this.records.get(e);if(u===void 0){let f=by(e)&&as(e);f&&this.injectableDefInScope(f)?u=Hi(gd(e),Qr):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,o)}let c=o&2?Po():this.parent;return t=o&8&&t===ti?null:t,c.get(e,t)}catch(c){let u=dy(c);throw u===-200||u===-201?new te(u,null):c}finally{st(a),Qt(s)}}resolveInjectorInitializers(){let e=ne(null),t=Qt(this),i=st(void 0),o;try{let r=this.get(No,lt,{self:!0});for(let s of r)s()}finally{Qt(t),st(i),ne(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Mn(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ke(e);let t=ii(e)?e:Ke(e&&e.provide),i=xy(e);if(!ii(e)&&e.multi===!0){let o=this.records.get(t);o||(o=Hi(void 0,Qr,!0),o.factory=()=>hd(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let o=ne(null);try{if(t.value===Wp)throw Ad(Mn(e));return t.value===Qr&&(t.value=Wp,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&Cy(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ne(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ke(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function gd(n){let e=as(n),t=e!==null?e.factory:An(n);if(t!==null)return t;if(n instanceof fe)throw new te(204,!1);if(n instanceof Function)return yy(n);throw new te(204,!1)}function yy(n){if(n.length>0)throw new te(204,!1);let t=sy(n);return t!==null?()=>t.factory(n):()=>new n}function xy(n){if(rm(n))return Hi(void 0,n.useValue);{let e=Ld(n);return Hi(e,Qr)}}function Ld(n,e,t){let i;if(ii(n)){let o=Ke(n);return An(o)||gd(o)}else if(rm(n))i=()=>Ke(n.useValue);else if(_y(n))i=()=>n.useFactory(...hd(n.deps||[]));else if(vy(n))i=(o,r)=>Se(Ke(n.useExisting),r!==void 0&&r&8?8:void 0);else{let o=Ke(n&&(n.useClass||n.provide));if(Ey(n))i=()=>new o(...hd(n.deps));else return An(o)||gd(o)}return i}function Io(n){if(n.destroyed)throw new te(205,!1)}function Hi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Ey(n){return!!n.deps}function Cy(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function by(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function vd(n,e){for(let t of n)Array.isArray(t)?vd(t,e):t&&wd(t)?vd(t.\u0275providers,e):e(t)}function ps(n,e){let t;n instanceof oi?(Io(n),t=n):t=new md(n);let i,o=Qt(t),r=st(void 0);try{return e()}finally{Qt(o),st(r)}}function am(){return em()!==void 0||Zr()!=null}var Ot=0,de=1,le=2,dt=3,Dt=4,Vt=5,Gi=6,zi=7,$e=8,hn=9,en=10,Re=11,qi=12,Ud=13,li=14,wt=15,di=16,ci=17,ui=18,gn=19,Bd=20,pn=21,ms=22,kn=23,It=24,fi=25,pi=26,Le=27,lm=1,Hd=6,ji=7,dm=8,Fo=9,qe=10;function tn(n){return Array.isArray(n)&&typeof n[lm]=="object"}function vn(n){return Array.isArray(n)&&n[lm]===!0}function $d(n){return(n.flags&4)!==0}function Fn(n){return n.componentOffset>-1}function hs(n){return(n.flags&1)===1}function nn(n){return!!n.template}function Wi(n){return(n[le]&512)!==0}function mi(n){return(n[le]&256)===256}var cm="svg",um="math";function Lt(n){for(;Array.isArray(n);)n=n[Ot];return n}function Gd(n,e){return Lt(e[n])}function on(n,e){return Lt(e[n.index])}function Oo(n,e){return n.data[e]}function gs(n,e){return n[e]}function Vo(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Tt(n,e){let t=e[n];return tn(t)?t:t[Ot]}function vs(n){return(n[le]&128)===128}function rn(n,e){return e==null?null:n[e]}function zd(n){n[ci]=0}function qd(n){n[le]&1024||(n[le]|=1024,vs(n)&&hi(n))}function fm(n,e){for(;n>0;)e=e[li],n--;return e}function Lo(n){return!!(n[le]&9216||n[It]?.dirty)}function _s(n){n[en].changeDetectionScheduler?.notify(8),n[le]&64&&(n[le]|=1024),Lo(n)&&hi(n)}function hi(n){n[en].changeDetectionScheduler?.notify(0);let e=Nn(n);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!vs(e)));)e=Nn(e)}function jd(n,e){if(mi(n))throw new te(911,!1);n[pn]===null&&(n[pn]=[]),n[pn].push(e)}function pm(n,e){if(n[pn]===null)return;let t=n[pn].indexOf(e);t!==-1&&n[pn].splice(t,1)}function Nn(n){let e=n[dt];return vn(e)?e[dt]:e}function mm(n){return n[zi]??=[]}function hm(n){return n.cleanup??=[]}var he={lFrame:Mm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _d=!1;function gm(){return he.lFrame.elementDepthCount}function vm(){he.lFrame.elementDepthCount++}function Wd(){he.lFrame.elementDepthCount--}function _m(){return he.bindingsEnabled}function ym(){return he.skipHydrationRootTNode!==null}function Yd(n){return he.skipHydrationRootTNode===n}function Jd(){he.skipHydrationRootTNode=null}function pe(){return he.lFrame.lView}function Ge(){return he.lFrame.tView}function I(n){return he.lFrame.contextLView=n,n[$e]}function S(n){return he.lFrame.contextLView=null,n}function ft(){let n=Kd();for(;n!==null&&n.type===64;)n=n.parent;return n}function Kd(){return he.lFrame.currentTNode}function xm(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function gi(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function Zd(){return he.lFrame.isParent}function Em(){he.lFrame.isParent=!1}function Qd(){return he.lFrame.contextLView}function Xd(){return _d}function To(n){let e=_d;return _d=n,e}function ec(){let n=he.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Cm(){return he.lFrame.bindingIndex}function bm(n){return he.lFrame.bindingIndex=n}function _n(){return he.lFrame.bindingIndex++}function ys(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function wm(){return he.lFrame.inI18n}function Im(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,xs(e)}function Sm(){return he.lFrame.currentDirectiveIndex}function xs(n){he.lFrame.currentDirectiveIndex=n}function Dm(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function tc(n){he.lFrame.currentQueryIndex=n}function wy(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[Vt]:null}function nc(n,e,t){if(t&4){let o=e,r=n;for(;o=o.parent,o===null&&!(t&1);)if(o=wy(r),o===null||(r=r[li],o.type&10))break;if(o===null)return!1;e=o,n=r}let i=he.lFrame=Tm();return i.currentTNode=e,i.lView=n,!0}function Es(n){let e=Tm(),t=n[de];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Tm(){let n=he.lFrame,e=n===null?null:n.child;return e===null?Mm(n):e}function Mm(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Am(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ic=Am;function Cs(){let n=Am();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function km(n){return(he.lFrame.contextLView=fm(n,he.lFrame.contextLView))[$e]}function Ut(){return he.lFrame.selectedIndex}function On(n){he.lFrame.selectedIndex=n}function Uo(){let n=he.lFrame;return Oo(n.tView,n.selectedIndex)}function Nm(){return he.lFrame.currentNamespace}var Rm=!0;function bs(){return Rm}function ws(n){Rm=n}function yd(n,e=null,t=null,i){let o=Pm(n,e,t,i);return o.resolveInjectorInitializers(),o}function Pm(n,e=null,t=null,i,o=new Set){let r=[t||lt,im(n)];return i=i||(typeof n=="object"?void 0:Mn(n)),new oi(r,e||Po(),i||null,o)}var Ft=class n{static THROW_IF_NOT_FOUND=ti;static NULL=new Do;static create(e,t){if(Array.isArray(e))return yd({name:""},t,e,"");{let i=e.name??"";return yd({name:i},e.parent,e.providers,i)}}static \u0275prov=be({token:n,providedIn:"any",factory:()=>Se(Rd)});static __NG_ELEMENT_ID__=-1},Bt=new fe(""),Vn=(()=>{class n{static __NG_ELEMENT_ID__=Iy;static __NG_ENV_ID__=t=>t}return n})(),ts=class extends Vn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return mi(this._lView)}onDestroy(e){let t=this._lView;return jd(t,e),()=>pm(t,e)}};function Iy(){return new ts(pe())}var Fm=!1,Om=new fe(""),Yi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new wo(!1);debugTaskTracker=$(Om,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new He(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=be({token:n,providedIn:"root",factory:()=>new n})}return n})(),xd=class extends Kt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,am()&&(this.destroyRef=$(Vn,{optional:!0})??void 0,this.pendingTasks=$(Yi,{optional:!0})??void 0)}emit(e){let t=ne(null);try{super.next(e)}finally{ne(t)}}subscribe(e,t,i){let o=e,r=t||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),r=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(r=this.wrapInTimeout(r),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:r,complete:s});return e instanceof rt&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},at=xd;function ns(...n){}function oc(n){let e,t;function i(){n=ns;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function Vm(n){return queueMicrotask(()=>n()),()=>{n=ns}}var rc="isAngularZone",Mo=rc+"_ID",Sy=0,Ct=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new at(!1);onMicrotaskEmpty=new at(!1);onStable=new at(!1);onError=new at(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:r=Fm}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&i,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=r,My(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rc)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,o){let r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+o,e,Dy,ns,ns);try{return r.runTask(s,t,i)}finally{r.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},Dy={};function sc(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ty(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){oc(()=>{n.callbackScheduled=!1,Ed(n),n.isCheckStableRunning=!0,sc(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ed(n)}function My(n){let e=()=>{Ty(n)},t=Sy++;n._inner=n._inner.fork({name:"angular",properties:{[rc]:!0,[Mo]:t,[Mo+t]:!0},onInvokeTask:(i,o,r,s,a,c)=>{if(Ay(c))return i.invokeTask(r,s,a,c);try{return Yp(n),i.invokeTask(r,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Jp(n)}},onInvoke:(i,o,r,s,a,c,u)=>{try{return Yp(n),i.invoke(r,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ky(c)&&e(),Jp(n)}},onHasTask:(i,o,r,s)=>{i.hasTask(r,s),o===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ed(n),sc(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,o,r,s)=>(i.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ed(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Yp(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Jp(n){n._nesting--,sc(n)}var Ao=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new at;onMicrotaskEmpty=new at;onStable=new at;onError=new at;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,o){return e.apply(t,i)}};function Ay(n){return Lm(n,"__ignore_ng_zone__")}function ky(n){return Lm(n,"__scheduler_tick__")}function Lm(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Xt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},vi=new fe("",{factory:()=>{let n=$(Ct),e=$(Pt),t;return i=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw i}):(t??=e.get(Xt),t.handleError(i))})}}}),Um={provide:No,useValue:()=>{let n=$(Xt,{optional:!0})},multi:!0};function B(n,e){let[t,i,o]=Zl(n,e?.equal),r=t,s=r[ot];return r.set=i,r.update=o,r.asReadonly=Bm.bind(r),r}function Bm(){let n=this[ot];if(n.readonlyFn===void 0){let e=()=>this();e[ot]=n,n.readonlyFn=e}return n.readonlyFn}var Bo=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=Ny}return n})();function Ny(){return new Bo(pe(),ft())}var Rn=class{},Ho=new fe("",{factory:()=>!0});var ac=new fe("");var Is=(()=>{class n{static \u0275prov=be({token:n,providedIn:"root",factory:()=>new Cd})}return n})(),Cd=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}},is=class{[ot];constructor(e){this[ot]=e}destroy(){this[ot].destroy()}};function ye(n,e){let t=e?.injector??$(Ft),i=e?.manualCleanup!==!0?t.get(Vn):null,o,r=t.get(Bo,null,{optional:!0}),s=t.get(Rn);return r!==null?(o=Fy(r.view,s,n),i instanceof ts&&i._lView===r.view&&(i=null)):o=Oy(n,t.get(Is),s),o.injector=t,i!==null&&(o.onDestroyFns=[i.onDestroy(()=>o.destroy())]),new is(o)}var Hm=O(R({},Xl),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=To(!1);try{ed(this)}finally{To(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=ne(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ne(n)}}}),Ry=O(R({},Hm),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Kn(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),Py=O(R({},Hm),{consumerMarkedDirty(){this.view[le]|=8192,hi(this.view),this.notifier.notify(13)},destroy(){if(Kn(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[kn]?.delete(this)}});function Fy(n,e,t){let i=Object.create(Py);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=$m(i,t),n[kn]??=new Set,n[kn].add(i),i.consumerMarkedDirty(i),i}function Oy(n,e,t){let i=Object.create(Ry);return i.fn=$m(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function $m(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Ht(n){return Ql(n)}function Jo(n){return{toString:n}.toString()}function mh(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var ks=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}},to=(()=>{let n=()=>hh;return n.ngInherit=!0,n})();function hh(n){return n.type.prototype.ngOnChanges&&(n.setInput=Yy),Wy}function Wy(){let n=vh(this),e=n?.current;if(e){let t=n.previous;if(t===Pn)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Yy(n,e,t,i,o){let r=this.declaredInputs[i],s=vh(n)||Jy(n,{previous:Pn,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[r];a[r]=new ks(u&&u.currentValue,t,c===Pn),mh(n,e,o,t)}var gh="__ngSimpleChanges__";function vh(n){return n[gh]||null}function Jy(n,e){return n[gh]=e}var Gm=[];var Ie=function(n,e=null,t){for(let i=0;i<Gm.length;i++){let o=Gm[i];o(n,e,t)}},Ee=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ee||{});function Ky(n,e,t){let{ngOnChanges:i,ngOnInit:o,ngDoCheck:r}=e.type.prototype;if(i){let s=hh(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),r&&((t.preOrderHooks??=[]).push(n,r),(t.preOrderCheckHooks??=[]).push(n,r))}function Zy(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let r=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=r;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Ds(n,e,t){_h(n,e,3,t)}function Ts(n,e,t,i){(n[le]&3)===t&&_h(n,e,t,i)}function lc(n,e){let t=n[le];(t&3)===e&&(t&=16383,t+=1,n[le]=t)}function _h(n,e,t,i){let o=i!==void 0?n[ci]&65535:0,r=i??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[ci]+=65536),(a<r||r==-1)&&(Qy(n,t,e,c),n[ci]=(n[ci]&4294901760)+c+2),c++}function zm(n,e){Ie(Ee.LifecycleHookStart,n,e);let t=ne(null);try{e.call(n)}finally{ne(t),Ie(Ee.LifecycleHookEnd,n,e)}}function Qy(n,e,t,i){let o=t[i]<0,r=t[i+1],s=o?-t[i]:t[i],a=n[s];o?n[le]>>14<n[ci]>>16&&(n[le]&3)===e&&(n[le]+=16384,zm(a,r)):zm(a,r)}var Ki=-1,_i=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,o){this.factory=e,this.name=o,this.canSeeViewProviders=t,this.injectImpl=i}};function Xy(n){return(n.flags&8)!==0}function ex(n){return(n.flags&16)!==0}function tx(n,e,t){let i=0;for(;i<t.length;){let o=t[i];if(typeof o=="number"){if(o!==0)break;i++;let r=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,r)}else{let r=o,s=t[++i];ix(r)?n.setProperty(e,r,s):n.setAttribute(e,r,s),i++}}return i}function nx(n){return n===3||n===4||n===6}function ix(n){return n.charCodeAt(0)===64}function Zi(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let o=e[i];typeof o=="number"?t=o:t===0||(t===-1||t===2?qm(n,t,o,null,e[++i]):qm(n,t,o,null,null))}}return n}function qm(n,e,t,i,o){let r=0,s=n.length;if(e===-1)s=-1;else for(;r<n.length;){let a=n[r++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=r-1;break}}}for(;r<n.length;){let a=n[r];if(typeof a=="number")break;if(a===t){o!==null&&(n[r+1]=o);return}r++,o!==null&&r++}s!==-1&&(n.splice(s,0,e),r=s+1),n.splice(r++,0,t),o!==null&&n.splice(r++,0,o)}function ox(n){return n!==Ki}function _c(n){return n&32767}function rx(n){return n>>16}function yc(n,e){let t=rx(n),i=e;for(;t>0;)i=i[li],t--;return i}var xc=!0;function Ns(n){let e=xc;return xc=n,e}var sx=256,yh=sx-1,xh=5,ax=0,sn={};function lx(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(si)&&(i=t[si]),i==null&&(i=t[si]=ax++);let o=i&yh,r=1<<o;e.data[n+(o>>xh)]|=r}function Rs(n,e){let t=Eh(n,e);if(t!==-1)return t;let i=e[de];i.firstCreatePass&&(n.injectorIndex=e.length,dc(i.data,n),dc(e,null),dc(i.blueprint,null));let o=Ch(n,e),r=n.injectorIndex;if(ox(o)){let s=_c(o),a=yc(o,e),c=a[de].data;for(let u=0;u<8;u++)e[r+u]=a[s+u]|c[s+u]}return e[r+8]=o,r}function dc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Eh(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ch(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,o=e;for(;o!==null;){if(i=Dh(o),i===null)return Ki;if(t++,o=o[li],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Ki}function Ec(n,e,t){lx(n,e,t)}function bh(n,e,t){if(t&8||n!==void 0)return n;ds(e,"NodeInjector")}function wh(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let o=n[hn],r=st(void 0);try{return o?o.get(e,i,t&8):kd(e,i,t&8)}finally{st(r)}}return bh(i,e,t)}function Ih(n,e,t,i=0,o){if(n!==null){if(e[le]&2048&&!(i&2)){let s=px(n,e,t,i,sn);if(s!==sn)return s}let r=Sh(n,e,t,i,sn);if(r!==sn)return r}return wh(e,t,i,o)}function Sh(n,e,t,i,o){let r=ux(t);if(typeof r=="function"){if(!nc(e,n,i))return i&1?bh(o,t,i):wh(e,t,i,o);try{let s;if(s=r(i),s==null&&!(i&8))ds(t);else return s}finally{ic()}}else if(typeof r=="number"){let s=null,a=Eh(n,e),c=Ki,u=i&1?e[wt][Vt]:null;for((a===-1||i&4)&&(c=a===-1?Ch(n,e):e[a+8],c===Ki||!Wm(i,!1)?a=-1:(s=e[de],a=_c(c),e=yc(c,e)));a!==-1;){let f=e[de];if(jm(r,a,f.data)){let g=dx(a,e,t,s,i,u);if(g!==sn)return g}c=e[a+8],c!==Ki&&Wm(i,e[de].data[a+8]===u)&&jm(r,a,e)?(s=f,a=_c(c),e=yc(c,e)):a=-1}}return o}function dx(n,e,t,i,o,r){let s=e[de],a=s.data[n+8],c=i==null?Fn(a)&&xc:i!=s&&(a.type&3)!==0,u=o&1&&r===a,f=cx(a,s,t,c,u);return f!==null?Ps(e,s,f,a,o):sn}function cx(n,e,t,i,o){let r=n.providerIndexes,s=e.data,a=r&1048575,c=n.directiveStart,u=n.directiveEnd,f=r>>20,g=i?a:a+f,x=o?a+f:u;for(let E=g;E<x;E++){let w=s[E];if(E<c&&t===w||E>=c&&w.type===t)return E}if(o){let E=s[c];if(E&&nn(E)&&E.type===t)return c}return null}function Ps(n,e,t,i,o){let r=n[t],s=e.data;if(r instanceof _i){let a=r;if(a.resolving)throw Ad("");let c=Ns(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],f,g=a.injectImpl?st(a.injectImpl):null,x=nc(n,i,0);try{r=n[t]=a.factory(void 0,o,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&Ky(t,s[t],e)}finally{g!==null&&st(g),Ns(c),a.resolving=!1,ic()}}return r}function ux(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(si)?n[si]:void 0;return typeof e=="number"?e>=0?e&yh:fx:e}function jm(n,e,t){let i=1<<n;return!!(t[e+(n>>xh)]&i)}function Wm(n,e){return!(n&2)&&!(n&1&&e)}var Fs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Ih(this._tNode,this._lView,e,ni(i),t)}};function fx(){return new Fs(ft(),pe())}function Ci(n){return Jo(()=>{let e=n.prototype.constructor,t=e[So]||Cc(e),i=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==i;){let r=o[So]||Cc(o);if(r&&r!==t)return r;o=Object.getPrototypeOf(o)}return r=>new r})}function Cc(n){return bd(n)?()=>{let e=Cc(Ke(n));return e&&e()}:An(n)}function px(n,e,t,i,o){let r=n,s=e;for(;r!==null&&s!==null&&s[le]&2048&&!Wi(s);){let a=Sh(r,s,t,i|2,sn);if(a!==sn)return a;let c=r.parent;if(!c){let u=s[Bd];if(u){let f=u.get(t,sn,i);if(f!==sn)return f}c=Dh(s),s=s[li]}r=c}return o}function Dh(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[Vt]:null}function mx(){return Th(ft(),pe())}function Th(n,e){return new yn(on(n,e))}var yn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=mx}return n})();function Mh(n){return(n.flags&128)===128}var Gc=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Gc||{}),Ah=new Map,hx=0;function gx(){return hx++}function vx(n){Ah.set(n[gn],n)}function bc(n){Ah.delete(n[gn])}var Ym="__ngContext__";function Qi(n,e){tn(e)?(n[Ym]=e[gn],vx(e)):n[Ym]=e}function kh(n){return Rh(n[qi])}function Nh(n){return Rh(n[Dt])}function Rh(n){for(;n!==null&&!vn(n);)n=n[Dt];return n}var _x;function zc(n){_x=n}var qs=new fe("",{factory:()=>yx}),yx="ng";var js=new fe(""),Ko=new fe("",{providedIn:"platform",factory:()=>"unknown"});var Ws=new fe("",{factory:()=>$(Bt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ph="r";var Fh="di";var Oh=!1,Vh=new fe("",{factory:()=>Oh});var xx=(n,e,t,i)=>{};function Ex(n,e,t,i){xx(n,e,t,i)}function qc(n){return(n.flags&32)===32}var Cx=()=>null;function Lh(n,e,t=!1){return Cx(n,e,t)}function Uh(n,e){let t=n.contentQueries;if(t!==null){let i=ne(null);try{for(let o=0;o<t.length;o+=2){let r=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];tc(r),a.contentQueries(2,e[s],s)}}}finally{ne(i)}}}function wc(n,e,t){tc(0);let i=ne(null);try{e(n,t)}finally{ne(i)}}function Bh(n,e,t){if($d(e)){let i=ne(null);try{let o=e.directiveStart,r=e.directiveEnd;for(let s=o;s<r;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ne(i)}}}var zt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(zt||{});var Os=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${os})`}};function Ys(n){return n instanceof Os?n.changingThisBreaksApplicationSecurity:n}function Hh(n,e){let t=$h(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${os})`)}return t===e}function $h(n){return n instanceof Os&&n.getTypeName()||null}var bx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gh(n){return n=String(n),n.match(bx)?n:"unsafe:"+n}function wx(n,e){return n.createText(e)}function Ix(n,e,t){n.setValue(e,t)}function zh(n,e,t){return n.createElement(e,t)}function Ic(n,e,t,i,o){n.insertBefore(e,t,i,o)}function qh(n,e,t){n.appendChild(e,t)}function Jm(n,e,t,i,o){i!==null?Ic(n,e,t,i,o):qh(n,e,t)}function jh(n,e,t,i){n.removeChild(null,e,t,i)}function Sx(n,e,t){n.setAttribute(e,"style",t)}function Dx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Wh(n,e,t){let{mergedAttrs:i,classes:o,styles:r}=t;i!==null&&tx(n,e,i),o!==null&&Dx(n,e,o),r!==null&&Sx(n,e,r)}var jc=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(jc||{});function Xe(n){let e=Tx();return e?e.sanitize(jc.URL,n)||"":Hh(n,"URL")?Ys(n):Gh(ai(n))}function Tx(){let n=pe();return n&&n[en].sanitizer}function Mx(n,e,t){let i=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let r=e.length;if(o+r===i||n.charCodeAt(o+r)<=32)return o}t=o+1}}var Yh="ng-template";function Ax(n,e,t,i){let o=0;if(i){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&Mx(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(Wc(n))return!1;if(o=e.indexOf(1,o),o>-1){let r;for(;++o<e.length&&typeof(r=e[o])=="string";)if(r.toLowerCase()===t)return!0}return!1}function Wc(n){return n.type===4&&n.value!==Yh}function kx(n,e,t){let i=n.type===4&&!t?Yh:n.value;return e===i}function Nx(n,e,t){let i=4,o=n.attrs,r=o!==null?Fx(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!$t(i)&&!$t(c))return!1;if(s&&$t(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!kx(n,c,t)||c===""&&e.length===1){if($t(i))return!1;s=!0}}else if(i&8){if(o===null||!Ax(n,o,c,t)){if($t(i))return!1;s=!0}}else{let u=e[++a],f=Rx(c,o,Wc(n),t);if(f===-1){if($t(i))return!1;s=!0;continue}if(u!==""){let g;if(f>r?g="":g=o[f+1].toLowerCase(),i&2&&u!==g){if($t(i))return!1;s=!0}}}}return $t(i)||s}function $t(n){return(n&1)===0}function Rx(n,e,t,i){if(e===null)return-1;let o=0;if(i||!t){let r=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)r=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=r?1:2}return-1}else return Ox(e,n)}function Px(n,e,t=!1){for(let i=0;i<e.length;i++)if(Nx(n,e[i],t))return!0;return!1}function Fx(n){for(let e=0;e<n.length;e++){let t=n[e];if(nx(t))return e}return n.length}function Ox(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function Km(n,e){return n?":not("+e.trim()+")":e}function Vx(n){let e=n[0],t=1,i=2,o="",r=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?o+="."+s:i&4&&(o+=" "+s);else o!==""&&!$t(s)&&(e+=Km(r,o),o=""),i=s,r=r||!$t(i);t++}return o!==""&&(e+=Km(r,o)),e}function Lx(n){return n.map(Vx).join(",")}function Ux(n){let e=[],t=[],i=1,o=2;for(;i<n.length;){let r=n[i];if(typeof r=="string")o===2?r!==""&&e.push(r,n[++i]):o===8&&t.push(r);else{if(!$t(o))break;o=r}i++}return t.length&&e.push(1,...t),e}var et={};function Yc(n,e,t,i,o,r,s,a,c,u,f){let g=Le+i,x=g+o,E=Bx(g,x),w=typeof u=="function"?u():u;return E[de]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:f}}function Bx(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:et);return t}function Hx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Yc(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Jc(n,e,t,i,o,r,s,a,c,u,f){let g=e.blueprint.slice();return g[Ot]=o,g[le]=i|4|128|8|64|1024,(u!==null||n&&n[le]&2048)&&(g[le]|=2048),zd(g),g[dt]=g[li]=n,g[$e]=t,g[en]=s||n&&n[en],g[Re]=a||n&&n[Re],g[hn]=c||n&&n[hn]||null,g[Vt]=r,g[gn]=gx(),g[Gi]=f,g[Bd]=u,g[wt]=e.type==2?n[wt]:g,g}function $x(n,e,t){let i=on(e,n),o=Hx(t),r=n[en].rendererFactory,s=Zh(n,Jc(n,o,null,Jh(t),i,e,null,r.createRenderer(i,t),null,null,null));return n[e.index]=s}function Jh(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Kh(n,e,t,i){if(t===0)return-1;let o=e.length;for(let r=0;r<t;r++)e.push(i),n.blueprint.push(i),n.data.push(null);return o}function Zh(n,e){return n[qi]?n[Ud][Dt]=e:n[qi]=e,n[Ud]=e,e}function m(n=1){Qh(Ge(),pe(),Ut()+n,!1)}function Qh(n,e,t,i){if(!i)if((e[le]&3)===3){let r=n.preOrderCheckHooks;r!==null&&Ds(e,r,t)}else{let r=n.preOrderHooks;r!==null&&Ts(e,r,0,t)}On(t)}var Js=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Js||{});function Sc(n,e,t,i){let o=ne(null);try{let[r,s,a]=n.inputs[t],c=null;(s&Js.SignalBased)!==0&&(c=e[r][ot]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,r):mh(e,c,r,i)}finally{ne(o)}}var an=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(an||{}),Gx;function Kc(n,e){return Gx(n,e)}var yi=new Set,Ks=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ks||{}),bi=new fe(""),Zm=new Set;function xn(n){Zm.has(n)||(Zm.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Zc=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=be({token:n,providedIn:"root",factory:()=>new n})}return n})(),Xh=[0,1,2,3],e0=(()=>{class n{ngZone=$(Ct);scheduler=$(Rn);errorHandler=$(Xt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){$(bi,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ie(Ee.AfterRenderHooksStart),this.executing=!0;for(let i of Xh)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[i]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let r=o.hooks[i];return r(o.pipelinedValue)},o.snapshot))}catch(r){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ie(Ee.AfterRenderHooksEnd)}register(t){let{view:i}=t;i!==void 0?((i[fi]??=[]).push(t),hi(i),i[le]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Ks.AFTER_NEXT_RENDER,t):t()}static \u0275prov=be({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vs=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,o,r,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=o,this.snapshot=s,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[fi];e&&(this.view[fi]=e.filter(t=>t!==this))}};function Qc(n,e){let t=e?.injector??$(Ft);return xn("NgAfterNextRender"),qx(n,t,e,!0)}function zx(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function qx(n,e,t,i){let o=e.get(Zc);o.impl??=e.get(e0);let r=e.get(bi,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Vn):null,a=e.get(Bo,null,{optional:!0}),c=new Vs(o.impl,zx(n),a?.view,i,s,r?.snapshot(null));return o.impl.register(c),c}var t0=new fe("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:$(Pt)})});function n0(n,e,t){let i=n.get(t0);if(Array.isArray(e))for(let o of e)i.queue.add(o),t?.detachedLeaveAnimationFns?.push(o);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function jx(n,e){let t=n.get(t0);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function Wx(n,e){for(let[t,i]of e)n0(n,i.animateFns)}function Qm(n,e,t,i){let o=n?.[pi]?.enter;e!==null&&o&&o.has(t.index)&&Wx(i,o)}function Ji(n,e,t,i,o,r,s,a){if(o!=null){let c,u=!1;vn(o)?c=o:tn(o)&&(u=!0,o=o[Ot]);let f=Lt(o);n===0&&i!==null?(Qm(a,i,r,t),s==null?qh(e,i,f):Ic(e,i,f,s||null,!0)):n===1&&i!==null?(Qm(a,i,r,t),Ic(e,i,f,s||null,!0)):n===2?Xm(a,r,t,g=>{jh(e,f,u,g)}):n===3&&Xm(a,r,t,()=>{e.destroyNode(f)}),c!=null&&sE(e,n,t,c,r,i,s)}}function Yx(n,e){i0(n,e),e[Ot]=null,e[Vt]=null}function Jx(n,e,t,i,o,r){i[Ot]=o,i[Vt]=e,Zs(n,i,t,1,o,r)}function i0(n,e){e[en].changeDetectionScheduler?.notify(9),Zs(n,e,e[Re],2,null,null)}function Kx(n){let e=n[qi];if(!e)return cc(n[de],n);for(;e;){let t=null;if(tn(e))t=e[qi];else{let i=e[qe];i&&(t=i)}if(!t){for(;e&&!e[Dt]&&e!==n;)tn(e)&&cc(e[de],e),e=e[dt];e===null&&(e=n),tn(e)&&cc(e[de],e),t=e&&e[Dt]}e=t}}function Xc(n,e){let t=n[Fo],i=t.indexOf(e);t.splice(i,1)}function eu(n,e){if(mi(e))return;let t=e[Re];t.destroyNode&&Zs(n,e,t,3,null,null),Kx(e)}function cc(n,e){if(mi(e))return;let t=ne(null);try{e[le]&=-129,e[le]|=256,e[It]&&Kn(e[It]),Xx(n,e),Qx(n,e),e[de].type===1&&e[Re].destroy();let i=e[di];if(i!==null&&vn(e[dt])){i!==e[dt]&&Xc(i,e);let o=e[ui];o!==null&&o.detachView(n)}bc(e)}finally{ne(t)}}function Xm(n,e,t,i){let o=n?.[pi];if(o==null||o.leave==null||!o.leave.has(e.index))return i(!1);n&&yi.add(n[gn]),n0(t,()=>{if(o.leave&&o.leave.has(e.index)){let s=o.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:f}=u();a.push(f)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),Zx(n,i)}else n&&yi.delete(n[gn]),i(!1)},o)}function Zx(n,e){let t=n[pi]?.running;if(t){t.then(()=>{n[pi].running=void 0,yi.delete(n[gn]),e(!0)});return}e(!1)}function Qx(n,e){let t=n.cleanup,i=e[zi];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[zi]=null);let o=e[pn];if(o!==null){e[pn]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let r=e[kn];if(r!==null){e[kn]=null;for(let s of r)s.destroy()}}function Xx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let o=e[t[i]];if(!(o instanceof _i)){let r=t[i+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){let a=o[r[s]],c=r[s+1];Ie(Ee.LifecycleHookStart,a,c);try{c.call(a)}finally{Ie(Ee.LifecycleHookEnd,a,c)}}else{Ie(Ee.LifecycleHookStart,o,r);try{r.call(o)}finally{Ie(Ee.LifecycleHookEnd,o,r)}}}}}function eE(n,e,t){return tE(n,e.parent,t)}function tE(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Ot];if(Fn(i)){let{encapsulation:o}=n.data[i.directiveStart+i.componentOffset];if(o===zt.None||o===zt.Emulated)return null}return on(i,t)}function nE(n,e,t){return oE(n,e,t)}function iE(n,e,t){return n.type&40?on(n,t):null}var oE=iE,eh;function tu(n,e,t,i){let o=eE(n,i,e),r=e[Re],s=i.parent||e[Vt],a=nE(s,i,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Jm(r,o,t[c],a,!1);else Jm(r,o,t,a,!1);eh!==void 0&&eh(r,i,e,t,o)}function Go(n,e){if(e!==null){let t=e.type;if(t&3)return on(e,n);if(t&4)return Dc(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Go(n,i);{let o=n[e.index];return vn(o)?Dc(-1,o):Lt(o)}}else{if(t&128)return Go(n,e.next);if(t&32)return Kc(e,n)()||Lt(n[e.index]);{let i=o0(n,e);if(i!==null){if(Array.isArray(i))return i[0];let o=Nn(n[wt]);return Go(o,i)}else return Go(n,e.next)}}}return null}function o0(n,e){if(e!==null){let i=n[wt][Vt],o=e.projection;return i.projection[o]}return null}function Dc(n,e){let t=qe+n+1;if(t<e.length){let i=e[t],o=i[de].firstChild;if(o!==null)return Go(i,o)}return e[ji]}function nu(n,e,t,i,o,r,s){for(;t!=null;){let a=i[hn];if(t.type===128){t=t.next;continue}let c=i[t.index],u=t.type;if(s&&e===0&&(c&&Qi(Lt(c),i),t.flags|=2),!qc(t))if(u&8)nu(n,e,t.child,i,o,r,!1),Ji(e,n,a,o,c,t,r,i);else if(u&32){let f=Kc(t,i),g;for(;g=f();)Ji(e,n,a,o,g,t,r,i);Ji(e,n,a,o,c,t,r,i)}else u&16?rE(n,e,i,t,o,r):Ji(e,n,a,o,c,t,r,i);t=s?t.projectionNext:t.next}}function Zs(n,e,t,i,o,r){nu(t,i,n.firstChild,e,o,r,!1)}function rE(n,e,t,i,o,r){let s=t[wt],c=s[Vt].projection[i.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let f=c[u];Ji(e,n,t[hn],o,f,i,r,t)}else{let u=c,f=s[dt];Mh(i)&&(u.flags|=128),nu(n,e,u,f,o,r,!0)}}function sE(n,e,t,i,o,r,s){let a=i[ji],c=Lt(i);a!==c&&Ji(e,n,t,r,a,o,s);for(let u=qe;u<i.length;u++){let f=i[u];Zs(f[de],f,n,e,r,a)}}function aE(n,e,t,i,o){if(e)o?n.addClass(t,i):n.removeClass(t,i);else{let r=i.indexOf("-")===-1?void 0:an.DashCase;o==null?n.removeStyle(t,i,r):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),r|=an.Important),n.setStyle(t,i,o,r))}}function r0(n,e,t,i,o){let r=Ut(),s=i&2;try{On(-1),s&&e.length>Le&&Qh(n,e,Le,!1);let a=s?Ee.TemplateUpdateStart:Ee.TemplateCreateStart;Ie(a,o,t),t(i,o)}finally{On(r);let a=s?Ee.TemplateUpdateEnd:Ee.TemplateCreateEnd;Ie(a,o,t)}}function s0(n,e,t){pE(n,e,t),(t.flags&64)===64&&mE(n,e,t)}function iu(n,e,t=on){let i=e.localNames;if(i!==null){let o=e.index+1;for(let r=0;r<i.length;r+=2){let s=i[r+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function lE(n,e,t,i){let r=i.get(Vh,Oh)||t===zt.ShadowDom||t===zt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,r);return dE(s),s}function dE(n){cE(n)}var cE=()=>null;function uE(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function a0(n,e,t,i,o,r){let s=e[de];if(ou(n,s,e,t,i)){Fn(n)&&fE(e,n.index);return}n.type&3&&(t=uE(t)),l0(n,e,t,i,o,r)}function l0(n,e,t,i,o,r){if(n.type&3){let s=on(n,e);i=r!=null?r(i,n.value||"",t):i,o.setProperty(s,t,i)}else n.type&12}function fE(n,e){let t=Tt(e,n);t[le]&16||(t[le]|=64)}function pE(n,e,t){let i=t.directiveStart,o=t.directiveEnd;Fn(t)&&$x(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Rs(t,e);let r=t.initialInputs;for(let s=i;s<o;s++){let a=n.data[s],c=Ps(e,n,s,t);if(Qi(c,e),r!==null&&yE(e,s-i,c,a,t,r),nn(a)){let u=Tt(t.index,e);u[$e]=Ps(e,n,s,t)}}}function mE(n,e,t){let i=t.directiveStart,o=t.directiveEnd,r=t.index,s=Sm();try{On(r);for(let a=i;a<o;a++){let c=n.data[a],u=e[a];xs(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&hE(c,u)}}finally{On(-1),xs(s)}}function hE(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function gE(n,e){let t=n.directiveRegistry,i=null;if(t)for(let o=0;o<t.length;o++){let r=t[o];Px(e,r.selectors,!1)&&(i??=[],nn(r)?i.unshift(r):i.push(r))}return i}function vE(n,e,t,i,o,r){let s=on(n,e);_E(e[Re],s,r,n.value,t,i,o)}function _E(n,e,t,i,o,r,s){if(r==null)n.removeAttribute(e,o,t);else{let a=s==null?ai(r):s(r,i||"",o);n.setAttribute(e,o,a,t)}}function yE(n,e,t,i,o,r){let s=r[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Sc(i,t,c,u)}}function d0(n,e,t,i,o){let r=Le+t,s=e[de],a=o(s,e,n,i,t);e[r]=a,gi(n,!0);let c=n.type===2;return c?(Wh(e[Re],a,n),(gm()===0||hs(n))&&Qi(a,e),vm()):Qi(a,e),bs()&&(!c||!qc(n))&&tu(s,e,a,n),n}function c0(n){let e=n;return Zd()?Em():(e=e.parent,gi(e,!1)),e}function xE(n,e){let t=n[hn];if(!t)return;let i;try{i=t.get(vi,null)}catch{i=null}i?.(e)}function ou(n,e,t,i,o){let r=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],f=s[c+1],g=e.data[u];Sc(g,t[u],f,o),a=!0}if(r)for(let c of r){let u=t[c],f=e.data[c];Sc(f,u,i,o),a=!0}return a}function EE(n,e){let t=Tt(e,n),i=t[de];CE(i,t);let o=t[Ot];o!==null&&t[Gi]===null&&(t[Gi]=Lh(o,t[hn])),Ie(Ee.ComponentStart);try{ru(i,t,t[$e])}finally{Ie(Ee.ComponentEnd,t[$e])}}function CE(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ru(n,e,t){Es(e);try{let i=n.viewQuery;i!==null&&wc(1,i,t);let o=n.template;o!==null&&r0(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ui]?.finishViewCreation(n),n.staticContentQueries&&Uh(n,e),n.staticViewQueries&&wc(2,n.viewQuery,t);let r=n.components;r!==null&&bE(e,r)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[le]&=-5,Cs()}}function bE(n,e){for(let t=0;t<e.length;t++)EE(n,e[t])}function su(n,e,t,i){let o=ne(null);try{let r=e.tView,a=n[le]&4096?4096:16,c=Jc(n,r,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[e.index];c[di]=u;let f=n[ui];return f!==null&&(c[ui]=f.createEmbeddedView(r)),ru(r,c,t),c}finally{ne(o)}}function au(n,e){return!e||e.firstChild===null||Mh(n)}function qo(n,e,t,i,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let r=e[t.index];r!==null&&i.push(Lt(r)),vn(r)&&u0(r,i);let s=t.type;if(s&8)qo(n,e,t.child,i);else if(s&32){let a=Kc(t,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=o0(e,t);if(Array.isArray(a))i.push(...a);else{let c=Nn(e[wt]);qo(c[de],c,a,i,!0)}}t=o?t.projectionNext:t.next}return i}function u0(n,e){for(let t=qe;t<n.length;t++){let i=n[t],o=i[de].firstChild;o!==null&&qo(i[de],i,o,e)}n[ji]!==n[Ot]&&e.push(n[ji])}function f0(n){if(n[fi]!==null){for(let e of n[fi])e.impl.addSequence(e);n[fi].length=0}}var p0=[];function wE(n){return n[It]??IE(n)}function IE(n){let e=p0.pop()??Object.create(DE);return e.lView=n,e}function SE(n){n.lView[It]!==n&&(n.lView=null,p0.push(n))}var DE=O(R({},ki),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hi(n.lView)},consumerOnSignalRead(){this.lView[It]=this}});function TE(n){let e=n[It]??Object.create(ME);return e.lView=n,e}var ME=O(R({},ki),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Nn(n.lView);for(;e&&!m0(e[de]);)e=Nn(e);e&&qd(e)},consumerOnSignalRead(){this.lView[It]=this}});function m0(n){return n.type!==2}function h0(n){if(n[kn]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[kn])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[le]&8192)}}var AE=100;function g0(n,e=0){let i=n[en].rendererFactory,o=!1;o||i.begin?.();try{kE(n,e)}finally{o||i.end?.()}}function kE(n,e){let t=Xd();try{To(!0),Tc(n,e);let i=0;for(;Lo(n);){if(i===AE)throw new te(103,!1);i++,Tc(n,1)}}finally{To(t)}}function NE(n,e,t,i){if(mi(e))return;let o=e[le],r=!1,s=!1;Es(e);let a=!0,c=null,u=null;r||(m0(n)?(u=wE(e),c=Ni(u)):Ar()===null?(a=!1,u=TE(e),c=Ni(u)):e[It]&&(Kn(e[It]),e[It]=null));try{zd(e),bm(n.bindingStartIndex),t!==null&&r0(n,e,t,2,i);let f=(o&3)===3;if(!r)if(f){let E=n.preOrderCheckHooks;E!==null&&Ds(e,E,null)}else{let E=n.preOrderHooks;E!==null&&Ts(e,E,0,null),lc(e,0)}if(s||RE(e),h0(e),v0(e,0),n.contentQueries!==null&&Uh(n,e),!r)if(f){let E=n.contentCheckHooks;E!==null&&Ds(e,E)}else{let E=n.contentHooks;E!==null&&Ts(e,E,1),lc(e,1)}FE(n,e);let g=n.components;g!==null&&y0(e,g,0);let x=n.viewQuery;if(x!==null&&wc(2,x,i),!r)if(f){let E=n.viewCheckHooks;E!==null&&Ds(e,E)}else{let E=n.viewHooks;E!==null&&Ts(e,E,2),lc(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ms]){for(let E of e[ms])E();e[ms]=null}r||(f0(e),e[le]&=-73)}catch(f){throw r||hi(e),f}finally{u!==null&&(xo(u,c),a&&SE(u)),Cs()}}function v0(n,e){for(let t=kh(n);t!==null;t=Nh(t))for(let i=qe;i<t.length;i++){let o=t[i];_0(o,e)}}function RE(n){for(let e=kh(n);e!==null;e=Nh(e)){if(!(e[le]&2))continue;let t=e[Fo];for(let i=0;i<t.length;i++){let o=t[i];qd(o)}}}function PE(n,e,t){Ie(Ee.ComponentStart);let i=Tt(e,n);try{_0(i,t)}finally{Ie(Ee.ComponentEnd,i[$e])}}function _0(n,e){vs(n)&&Tc(n,e)}function Tc(n,e){let i=n[de],o=n[le],r=n[It],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(r?.dirty&&Eo(r)),s||=!1,r&&(r.dirty=!1),n[le]&=-9217,s)NE(i,n,i.template,n[$e]);else if(o&8192){let a=ne(null);try{h0(n),v0(n,1);let c=i.components;c!==null&&y0(n,c,1),f0(n)}finally{ne(a)}}}function y0(n,e,t){for(let i=0;i<e.length;i++)PE(n,e[i],t)}function FE(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let o=t[i];if(o<0)On(~o);else{let r=o,s=t[++i],a=t[++i];Im(s,r);let c=e[r];Ie(Ee.HostBindingsUpdateStart,c);try{a(2,c)}finally{Ie(Ee.HostBindingsUpdateEnd,c)}}}}finally{On(-1)}}function lu(n,e){let t=Xd()?64:1088;for(n[en].changeDetectionScheduler?.notify(e);n;){n[le]|=t;let i=Nn(n);if(Wi(n)&&!i)return n;n=i}return null}function OE(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function x0(n,e){let t=qe+e;if(t<n.length)return n[t]}function du(n,e,t,i=!0){let o=e[de];if(VE(o,e,n,t),i){let s=Dc(t,n),a=e[Re],c=a.parentNode(n[ji]);c!==null&&Jx(o,n[Vt],a,e,c,s)}let r=e[Gi];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function E0(n,e){let t=cu(n,e);return t!==void 0&&eu(t[de],t),t}function cu(n,e){if(n.length<=qe)return;let t=qe+e,i=n[t];if(i){let o=i[di];o!==null&&o!==n&&Xc(o,i),e>0&&(n[t-1][Dt]=i[Dt]);let r=Nd(n,qe+e);Yx(i[de],i);let s=r[ui];s!==null&&s.detachView(r[de]),i[dt]=null,i[Dt]=null,i[le]&=-129}return i}function VE(n,e,t,i){let o=qe+i,r=t.length;i>0&&(t[o-1][Dt]=e),i<r-qe?(e[Dt]=t[o],tm(t,qe+i,e)):(t.push(e),e[Dt]=null),e[dt]=t;let s=e[di];s!==null&&t!==s&&C0(s,e);let a=e[ui];a!==null&&a.insertView(n),_s(e),e[le]|=128}function C0(n,e){let t=n[Fo],i=e[dt];if(tn(i))n[le]|=2;else{let o=i[dt][wt];e[wt]!==o&&(n[le]|=2)}t===null?n[Fo]=[e]:t.push(e)}var Xi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[de];return qo(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[$e]}set context(e){this._lView[$e]=e}get destroyed(){return mi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dt];if(vn(e)){let t=e[dm],i=t?t.indexOf(this):-1;i>-1&&(cu(e,i),Nd(t,i))}this._attachedToViewContainer=!1}eu(this._lView[de],this._lView)}onDestroy(e){jd(this._lView,e)}markForCheck(){lu(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){_s(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,g0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Wi(this._lView),t=this._lView[di];t!==null&&!e&&Xc(t,this._lView),i0(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=Wi(this._lView),i=this._lView[di];i!==null&&!t&&C0(i,this._lView),_s(this._lView)}};function Zo(n,e,t,i,o){let r=n.data[e];if(r===null)r=LE(n,e,t,i,o),wm()&&(r.flags|=32);else if(r.type&64){r.type=t,r.value=i,r.attrs=o;let s=xm();r.injectorIndex=s===null?-1:s.injectorIndex}return gi(r,!0),r}function LE(n,e,t,i,o){let r=Kd(),s=Zd(),a=s?r:r&&r.parent,c=n.data[e]=BE(n,a,t,e,i,o);return UE(n,c,r,s),c}function UE(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function BE(n,e,t,i,o,r){let s=e?e.injectorIndex:-1,a=0;return ym()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:r,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function HE(n){let e=n[Hd]??[],i=n[dt][Re],o=[];for(let r of e)r.data[Fh]!==void 0?o.push(r):$E(r,i);n[Hd]=o}function $E(n,e){let t=0,i=n.firstChild;if(i){let o=n.data[Ph];for(;t<o;){let r=i.nextSibling;jh(e,i,!1),i=r,t++}}}var GE=()=>null,zE=()=>null;function qE(n,e){return GE(n,e)}function b0(n,e,t){return zE(n,e,t)}var w0=class{},Qs=class{},Mc=class{resolveComponentFactory(e){throw new te(917,!1)}},Xs=class{static NULL=new Mc},xi=class{},Ln=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>jE()}return n})();function jE(){let n=pe(),e=ft(),t=Tt(e.index,n);return(tn(t)?t:n)[Re]}var I0=(()=>{class n{static \u0275prov=be({token:n,providedIn:"root",factory:()=>null})}return n})();var Ms={},Ac=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let o=this.injector.get(e,Ms,i);return o!==Ms||t===Ms?o:this.parentInjector.get(e,t,i)}};function Ls(n,e,t){let i=t?n.styles:null,o=t?n.classes:null,r=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")r=a;else if(r==1)o=ss(o,a);else if(r==2){let c=a,u=e[++s];i=ss(i,c+": "+u+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=o:n.classesWithoutHost=o}function ue(n,e=0){let t=pe();if(t===null)return Se(n,e);let i=ft();return Ih(i,t,Ke(n),e)}function WE(n,e,t,i,o){let r=i===null?null:{"":-1},s=o(n,t);if(s!==null){let a=s,c=null,u=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,c,u]=f.resolveHostDirectives(s);break}KE(n,e,t,a,r,c,u)}r!==null&&i!==null&&YE(t,i,r)}function YE(n,e,t){let i=n.localNames=[];for(let o=0;o<e.length;o+=2){let r=t[e[o+1]];if(r==null)throw new te(-301,!1);i.push(e[o],r)}}function JE(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function KE(n,e,t,i,o,r,s){let a=i.length,c=null;for(let x=0;x<a;x++){let E=i[x];c===null&&nn(E)&&(c=E,JE(n,t,x)),Ec(Rs(t,e),n,E.type)}nC(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let x=0;x<a;x++){let E=i[x];E.providersResolver&&E.providersResolver(E)}let u=!1,f=!1,g=Kh(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let x=0;x<a;x++){let E=i[x];if(t.mergedAttrs=Zi(t.mergedAttrs,E.hostAttrs),QE(n,t,e,g,E),tC(g,E,o),s!==null&&s.has(E)){let[A,F]=s.get(E);t.directiveToIndex.set(E.type,[g,A+t.directiveStart,F+t.directiveStart])}else(r===null||!r.has(E))&&t.directiveToIndex.set(E.type,g);E.contentQueries!==null&&(t.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(t.flags|=64);let w=E.type.prototype;!u&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),g++}ZE(n,t,r)}function ZE(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let o=n.data[i];if(t===null||!t.has(o))th(0,e,o,i),th(1,e,o,i),ih(e,i,!1);else{let r=t.get(o);nh(0,e,r,i),nh(1,e,r,i),ih(e,i,!0)}}}function th(n,e,t,i){let o=n===0?t.inputs:t.outputs;for(let r in o)if(o.hasOwnProperty(r)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[r]??=[],s[r].push(i),S0(e,r)}}function nh(n,e,t,i){let o=n===0?t.inputs:t.outputs;for(let r in o)if(o.hasOwnProperty(r)){let s=o[r],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,r),S0(e,s)}}function S0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ih(n,e,t){let{attrs:i,inputs:o,hostDirectiveInputs:r}=n;if(i===null||!t&&o===null||t&&r===null||Wc(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let c=i[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&o.hasOwnProperty(c)){let u=o[c];for(let f of u)if(f===e){s??=[],s.push(c,i[a+1]);break}}else if(t&&r.hasOwnProperty(c)){let u=r[c];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function QE(n,e,t,i,o){n.data[i]=o;let r=o.factory||(o.factory=An(o.type,!0)),s=new _i(r,nn(o),ue,null);n.blueprint[i]=s,t[i]=s,XE(n,e,i,Kh(n,t,o.hostVars,et),o)}function XE(n,e,t,i,o){let r=o.hostBindings;if(r){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;eC(s)!=a&&s.push(a),s.push(t,i,r)}}function eC(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function tC(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;nn(e)&&(t[""]=n)}}function nC(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function D0(n,e,t,i,o,r,s,a){let c=e[de],u=c.consts,f=rn(u,s),g=Zo(c,n,t,i,f);return r&&WE(c,e,g,rn(u,a),o),g.mergedAttrs=Zi(g.mergedAttrs,g.attrs),g.attrs!==null&&Ls(g,g.attrs,!1),g.mergedAttrs!==null&&Ls(g,g.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,g),g}function T0(n,e){Zy(n,e),$d(e)&&n.queries.elementEnd(e)}function iC(n,e,t,i,o,r){let s=e.consts,a=rn(s,o),c=Zo(e,n,t,i,a);if(c.mergedAttrs=Zi(c.mergedAttrs,c.attrs),r!=null){let u=rn(s,r);c.localNames=[];for(let f=0;f<u.length;f+=2)c.localNames.push(u[f],-1)}return c.attrs!==null&&Ls(c,c.attrs,!1),c.mergedAttrs!==null&&Ls(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function M0(n,e,t){return n[e]=t}function oC(n,e){return n[e]}function Mt(n,e,t){if(t===et)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function A0(n,e,t,i){let o=Mt(n,e,t);return Mt(n,e+1,i)||o}function As(n,e,t){return function i(o){let r=Fn(n)?Tt(n.index,e):e;lu(r,5);let s=e[$e],a=oh(e,s,t,o),c=i.__ngNextListenerFn__;for(;c;)a=oh(e,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function oh(n,e,t,i){let o=ne(null);try{return Ie(Ee.OutputStart,e,t),t(i)!==!1}catch(r){return xE(n,r),!1}finally{Ie(Ee.OutputEnd,e,t),ne(o)}}function k0(n,e,t,i,o,r,s,a){let c=hs(n),u=!1,f=null;if(!i&&c&&(f=sC(e,t,r,n.index)),f!==null){let g=f.__ngLastListenerFn__||f;g.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,u=!0}else{let g=on(n,t),x=i?i(g):g;Ex(t,x,r,a);let E=o.listen(x,r,a);if(!rC(r)){let w=i?A=>i(Lt(A[n.index])):n.index;N0(w,e,t,r,a,E,!1)}}return u}function rC(n){return n.startsWith("animation")||n.startsWith("transition")}function sC(n,e,t,i){let o=n.cleanup;if(o!=null)for(let r=0;r<o.length-1;r+=2){let s=o[r];if(s===t&&o[r+1]===i){let a=e[zi],c=o[r+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(r+=2)}return null}function N0(n,e,t,i,o,r,s){let a=e.firstCreatePass?hm(e):null,c=mm(t),u=c.length;c.push(o,r),a&&a.push(i,n,u,(u+1)*(s?-1:1))}function rh(n,e,t,i,o,r){let s=e[t],a=e[de],u=a.data[t].outputs[i],g=s[u].subscribe(r);N0(n.index,a,e,o,r,g,!0)}var kc=Symbol("BINDING");var Nc=class extends Xs{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ko(e);return new Us(t,this.ngModule)}};function aC(n){return Object.keys(n).map(e=>{let[t,i,o]=n[e],r={propName:t,templateName:e,isSignal:(i&Js.SignalBased)!==0};return o&&(r.transform=o),r})}function lC(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function dC(n,e,t){let i=e instanceof Pt?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new Ac(t,i):t}function cC(n){let e=n.get(xi,null);if(e===null)throw new te(407,!1);let t=n.get(I0,null),i=n.get(Rn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function uC(n,e){let t=R0(n);return zh(e,t,t==="svg"?cm:t==="math"?um:null)}function R0(n){return(n.selectors[0][0]||"div").toLowerCase()}var Us=class extends Qs{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=aC(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=lC(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Lx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,o,r,s){Ie(Ee.DynamicComponentStart);let a=ne(null);try{let c=this.componentDef,u=fC(i,c,s,r),f=dC(c,o||this.ngModule,e),g=cC(f),x=g.rendererFactory.createRenderer(null,c),E=i?lE(x,i,c.encapsulation,f):uC(c,x),w=s?.some(sh)||r?.some(P=>typeof P!="function"&&P.bindings.some(sh)),A=Jc(null,u,null,512|Jh(c),null,null,g,x,f,null,Lh(E,f,!0));A[Le]=E,Es(A);let F=null;try{let P=D0(Le,A,2,"#host",()=>u.directiveRegistry,!0,0);Wh(x,E,P),Qi(E,A),s0(u,A,P),Bh(u,P,A),T0(u,P),t!==void 0&&mC(P,this.ngContentSelectors,t),F=Tt(P.index,A),A[$e]=F[$e],ru(u,A,null)}catch(P){throw F!==null&&bc(F),bc(A),P}finally{Ie(Ee.DynamicComponentEnd),Cs()}return new Bs(this.componentType,A,!!w)}finally{ne(a)}}};function fC(n,e,t,i){let o=n?["ng-version","21.1.2"]:Ux(e.selectors[0]),r=null,s=null,a=0;if(t)for(let f of t)a+=f[kc].requiredVars,f.create&&(f.targetIdx=0,(r??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(i)for(let f=0;f<i.length;f++){let g=i[f];if(typeof g!="function")for(let x of g.bindings){a+=x[kc].requiredVars;let E=f+1;x.create&&(x.targetIdx=E,(r??=[]).push(x)),x.update&&(x.targetIdx=E,(s??=[]).push(x))}}let c=[e];if(i)for(let f of i){let g=typeof f=="function"?f:f.type,x=Td(g);c.push(x)}return Yc(0,null,pC(r,s),1,a,c,null,null,null,[o],null)}function pC(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function sh(n){let e=n[kc].kind;return e==="input"||e==="twoWay"}var Bs=class extends w0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=Oo(t[de],Le),this.location=Th(this._tNode,t),this.instance=Tt(this._tNode.index,t)[$e],this.hostView=this.changeDetectorRef=new Xi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView,r=ou(i,o[de],o,e,t);this.previousInputValues.set(e,t);let s=Tt(i.index,o);lu(s,1)}get injector(){return new Fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function mC(n,e,t){let i=n.projection=[];for(let o=0;o<e.length;o++){let r=t[o];i.push(r!=null&&r.length?Array.from(r):null)}}var hC=()=>!1;function gC(n,e,t){return hC(n,e,t)}var jo=class{};var Wo=class extends jo{injector;componentFactoryResolver=new Nc(this);instance=null;constructor(e){super();let t=new oi([...e.providers,{provide:jo,useValue:this},{provide:Xs,useValue:this.componentFactoryResolver}],e.parent||Po(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function P0(n,e,t=null){return new Wo({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var vC=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=Od(!1,t.type),o=i.length>0?P0([i],this._injector,""):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=be({token:n,providedIn:"environment",factory:()=>new n(Se(Pt))})}return n})();function Q(n){return Jo(()=>{let e=F0(n),t=O(R({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Gc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(vC).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||zt.Emulated,styles:n.styles||lt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&xn("NgStandalone"),O0(t);let i=n.dependencies;return t.directiveDefs=ah(i,_C),t.pipeDefs=ah(i,Zp),t.id=EC(t),t})}function _C(n){return ko(n)||Td(n)}function Un(n){return Jo(()=>({type:n.type,bootstrap:n.bootstrap||lt,declarations:n.declarations||lt,imports:n.imports||lt,exports:n.exports||lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function yC(n,e){if(n==null)return Pn;let t={};for(let i in n)if(n.hasOwnProperty(i)){let o=n[i],r,s,a,c;Array.isArray(o)?(a=o[0],r=o[1],s=o[2]??r,c=o[3]||null):(r=o,s=o,a=Js.None,c=null),t[r]=[i,a,c],e[r]=s}return t}function xC(n){if(n==null)return Pn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ye(n){return Jo(()=>{let e=F0(n);return O0(e),e})}function ea(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function F0(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Pn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:yC(n.inputs,e),outputs:xC(n.outputs),debugInfo:null}}function O0(n){n.features?.forEach(e=>e(n))}function ah(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let o of t){let r=e(o);r!==null&&i.push(r)}return i}:null}function EC(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let r of i.join("|"))e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function CC(n){return Object.getPrototypeOf(n.prototype).constructor}function ct(n){let e=CC(n.type),t=!0,i=[n];for(;e;){let o;if(nn(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);o=e.\u0275dir}if(o){if(t){i.push(o);let s=n;s.inputs=uc(n.inputs),s.declaredInputs=uc(n.declaredInputs),s.outputs=uc(n.outputs);let a=o.hostBindings;a&&DC(n,a);let c=o.viewQuery,u=o.contentQueries;if(c&&IC(n,c),u&&SC(n,u),bC(n,o),Kp(n.outputs,o.outputs),nn(o)&&o.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(o.data.animation)}}let r=o.features;if(r)for(let s=0;s<r.length;s++){let a=r[s];a&&a.ngInherit&&a(n),a===ct&&(t=!1)}}e=Object.getPrototypeOf(e)}wC(i)}function bC(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function wC(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let o=n[i];o.hostVars=e+=o.hostVars,o.hostAttrs=Zi(o.hostAttrs,t=Zi(t,o.hostAttrs))}}function uc(n){return n===Pn?{}:n===lt?[]:n}function IC(n,e){let t=n.viewQuery;t?n.viewQuery=(i,o)=>{e(i,o),t(i,o)}:n.viewQuery=e}function SC(n,e){let t=n.contentQueries;t?n.contentQueries=(i,o,r)=>{e(i,o,r),t(i,o,r)}:n.contentQueries=e}function DC(n,e){let t=n.hostBindings;t?n.hostBindings=(i,o)=>{e(i,o),t(i,o)}:n.hostBindings=e}function TC(n,e,t,i,o,r,s,a){if(t.firstCreatePass){n.mergedAttrs=Zi(n.mergedAttrs,n.attrs);let f=n.tView=Yc(2,n,o,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),gi(n,!1);let c=MC(t,e,n,i);bs()&&tu(t,e,c,n),Qi(c,e);let u=OE(c,e,c,n);e[i+Le]=u,Zh(e,u),gC(u,n,e)}function Hs(n,e,t,i,o,r,s,a,c,u,f){let g=t+Le,x;if(e.firstCreatePass){if(x=Zo(e,g,4,s||null,a||null),u!=null){let E=rn(e.consts,u);x.localNames=[];for(let w=0;w<E.length;w+=2)x.localNames.push(E[w],-1)}}else x=e.data[g];return TC(x,n,e,t,i,o,r,c),u!=null&&iu(n,x,f),x}var MC=AC;function AC(n,e,t,i){return ws(!0),e[Re].createComment("")}function V0(n){return typeof n=="function"&&n[ot]!==void 0}function uu(n){return V0(n)&&typeof n.set=="function"}var fu=new fe("");function no(n){return!!n&&typeof n.then=="function"}function pu(n){return!!n&&typeof n.subscribe=="function"}var L0=new fe("");var mu=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=$(L0,{optional:!0})??[];injector=$(Ft);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let r=ps(this.injector,o);if(no(r))t.push(r);else if(pu(r)){let s=new Promise((a,c)=>{r.subscribe({complete:a,error:c})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(o=>{this.reject(o)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),U0=new fe("");function B0(){Kl(()=>{let n="";throw new te(600,n)})}function H0(n){return n.isBoundToModule}var kC=10;var io=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=$(vi);afterRenderManager=$(Zc);zonelessEnabled=$(Ho);rootEffectScheduler=$(Is);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Kt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=$(Yi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ei(t=>!t))}constructor(){$(bi,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=$(Pt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,o=Ft.NULL){return this._injector.get(Ct).run(()=>{Ie(Ee.BootstrapComponentStart);let s=t instanceof Qs;if(!this._injector.get(mu).done){let w="";throw new te(405,w)}let c;s?c=t:c=this._injector.get(Xs).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=H0(c)?void 0:this._injector.get(jo),f=i||c.selector,g=c.create(o,[],f,u),x=g.location.nativeElement,E=g.injector.get(fu,null);return E?.registerApplication(x),g.onDestroy(()=>{this.detachView(g.hostView),zo(this.components,g),E?.unregisterApplication(x)}),this._loadComponent(g),Ie(Ee.BootstrapComponentEnd,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ie(Ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ks.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Ie(Ee.ChangeDetectionEnd),new te(101,!1);let t=ne(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ne(t),this.afterTick.next(),Ie(Ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<kC;){Ie(Ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Ie(Ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!i&&!Lo(o))continue;let r=i&&!this.zonelessEnabled?0:1;g0(o,r),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Lo(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;zo(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(t),this._injector.get(U0,[]).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zo(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Qo(n,e,t,i){let o=pe(),r=_n();if(Mt(o,r,e)){let s=Ge(),a=Uo();vE(a,o,n,e,t,i)}return Qo}var l4=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Rc=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),o=Math.max(e,t),r=this.detach(o);if(o-i>1){let s=this.detach(i);this.attach(i,r),this.attach(o,s)}else this.attach(i,r)}move(e,t){this.attach(t,this.detach(e))}};function fc(n,e,t,i,o){return n===t&&Object.is(e,i)?1:Object.is(o(n,e),o(t,i))?-1:0}function NC(n,e,t,i){let o,r,s=0,a=n.length-1,c=void 0;if(Array.isArray(e)){ne(i);let u=e.length-1;for(ne(null);s<=a&&s<=u;){let f=n.at(s),g=e[s],x=fc(s,f,s,g,t);if(x!==0){x<0&&n.updateValue(s,g),s++;continue}let E=n.at(a),w=e[u],A=fc(a,E,u,w,t);if(A!==0){A<0&&n.updateValue(a,w),a--,u--;continue}let F=t(s,f),P=t(a,E),q=t(s,g);if(Object.is(q,P)){let Y=t(u,w);Object.is(Y,F)?(n.swap(s,a),n.updateValue(a,w),u--,a--):n.move(a,s),n.updateValue(s,g),s++;continue}if(o??=new $s,r??=dh(n,s,a,t),Pc(n,o,s,q))n.updateValue(s,g),s++,a++;else if(r.has(q))o.set(F,n.detach(s)),a--;else{let Y=n.create(s,e[s]);n.attach(s,Y),s++,a++}}for(;s<=u;)lh(n,o,t,s,e[s]),s++}else if(e!=null){ne(i);let u=e[Symbol.iterator]();ne(null);let f=u.next();for(;!f.done&&s<=a;){let g=n.at(s),x=f.value,E=fc(s,g,s,x,t);if(E!==0)E<0&&n.updateValue(s,x),s++,f=u.next();else{o??=new $s,r??=dh(n,s,a,t);let w=t(s,x);if(Pc(n,o,s,w))n.updateValue(s,x),s++,a++,f=u.next();else if(!r.has(w))n.attach(s,n.create(s,x)),s++,a++,f=u.next();else{let A=t(s,g);o.set(A,n.detach(s)),a--}}}for(;!f.done;)lh(n,o,t,n.length,f.value),f=u.next()}for(;s<=a;)n.destroy(n.detach(a--));o?.forEach(u=>{n.destroy(u)})}function Pc(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function lh(n,e,t,i,o){if(Pc(n,e,i,t(i,o)))n.updateValue(i,o);else{let r=n.create(i,o);n.attach(i,r)}}function dh(n,e,t,i){let o=new Set;for(let r=e;r<=t;r++)o.add(i(r,n.at(r)));return o}var $s=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(i);)i=o.get(i);o.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let o=this._vMap;for(;o.has(i);)i=o.get(i),e(i,t)}}};function T(n,e,t,i,o,r,s,a){xn("NgControlFlow");let c=pe(),u=Ge(),f=rn(u.consts,r);return Hs(c,u,n,e,t,i,o,f,256,s,a),hu}function hu(n,e,t,i,o,r,s,a){xn("NgControlFlow");let c=pe(),u=Ge(),f=rn(u.consts,r);return Hs(c,u,n,e,t,i,o,f,512,s,a),hu}function M(n,e){xn("NgControlFlow");let t=pe(),i=_n(),o=t[i]!==et?t[i]:-1,r=o!==-1?Gs(t,Le+o):void 0,s=0;if(Mt(t,i,n)){let a=ne(null);try{if(r!==void 0&&E0(r,s),n!==-1){let c=Le+n,u=Gs(t,c),f=Lc(t[de],c),g=b0(u,f,t),x=su(t,f,e,{dehydratedView:g});du(u,x,s,au(f,g))}}finally{ne(a)}}else if(r!==void 0){let a=x0(r,s);a!==void 0&&(a[$e]=e)}}var Fc=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-qe}};var Oc=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function j(n,e,t,i,o,r,s,a,c,u,f,g,x){xn("NgControlFlow");let E=pe(),w=Ge(),A=c!==void 0,F=pe(),P=a?s.bind(F[wt][$e]):s,q=new Oc(A,P);F[Le+n]=q,Hs(E,w,n+1,e,t,i,o,rn(w.consts,r),256),A&&Hs(E,w,n+2,c,u,f,g,rn(w.consts,x),512)}var Vc=class extends Rc{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-qe}at(e){return this.getLView(e)[$e].$implicit}attach(e,t){let i=t[Gi];this.needsIndexUpdate||=e!==this.length,du(this.lContainer,t,e,au(this.templateTNode,i)),RC(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,PC(this.lContainer,e),FC(this.lContainer,e)}create(e,t){let i=qE(this.lContainer,this.templateTNode.tView.ssrId);return su(this.hostLView,this.templateTNode,new Fc(this.lContainer,t,e),{dehydratedView:i})}destroy(e){eu(e[de],e)}updateValue(e,t){this.getLView(e)[$e].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[$e].$index=e}getLView(e){return OC(this.lContainer,e)}};function W(n){let e=ne(null),t=Ut();try{let i=pe(),o=i[de],r=i[t],s=t+1,a=Gs(i,s);if(r.liveCollection===void 0){let u=Lc(o,s);r.liveCollection=new Vc(a,i,u)}else r.liveCollection.reset();let c=r.liveCollection;if(NC(c,n,r.trackByFn,e),c.updateIndexes(),r.hasEmptyBlock){let u=_n(),f=c.length===0;if(Mt(i,u,f)){let g=t+2,x=Gs(i,g);if(f){let E=Lc(o,g),w=b0(x,E,i),A=su(i,E,void 0,{dehydratedView:w});du(x,A,0,au(E,w))}else o.firstUpdatePass&&HE(x),E0(x,0)}}}finally{ne(e)}}function Gs(n,e){return n[e]}function RC(n,e){if(n.length<=qe)return;let t=qe+e,i=n[t],o=i?i[pi]:void 0;if(i&&o&&o.detachedLeaveAnimationFns&&o.detachedLeaveAnimationFns.length>0){let r=i[hn];jx(r,o),yi.delete(i[gn]),o.detachedLeaveAnimationFns=void 0}}function PC(n,e){if(n.length<=qe)return;let t=qe+e,i=n[t],o=i?i[pi]:void 0;o&&o.leave&&o.leave.size>0&&(o.detachedLeaveAnimationFns=[])}function FC(n,e){return cu(n,e)}function OC(n,e){return x0(n,e)}function Lc(n,e){return Oo(n,e)}function X(n,e,t){let i=pe(),o=_n();if(Mt(i,o,e)){let r=Ge(),s=Uo();a0(s,i,n,e,i[Re],t)}return X}function Uc(n,e,t,i,o){ou(e,n,t,o?"class":"style",i)}function y(n,e,t,i){let o=pe(),r=o[de],s=n+Le,a=r.firstCreatePass?D0(s,o,2,e,gE,_m(),t,i):r.data[s];if(d0(a,o,n,e,$0),hs(a)){let c=o[de];s0(c,o,a),Bh(c,a,o)}return i!=null&&iu(o,a),y}function _(){let n=Ge(),e=ft(),t=c0(e);return n.firstCreatePass&&T0(n,t),Yd(t)&&Jd(),Wd(),t.classesWithoutHost!=null&&Xy(t)&&Uc(n,t,pe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ex(t)&&Uc(n,t,pe(),t.stylesWithoutHost,!1),_}function D(n,e,t,i){return y(n,e,t,i),_(),D}function h(n,e,t,i){let o=pe(),r=o[de],s=n+Le,a=r.firstCreatePass?iC(s,r,2,e,t,i):r.data[s];return d0(a,o,n,e,$0),i!=null&&iu(o,a),h}function v(){let n=ft(),e=c0(n);return Yd(e)&&Jd(),Wd(),v}function b(n,e,t,i){return h(n,e,t,i),v(),b}var $0=(n,e,t,i,o)=>(ws(!0),zh(e[Re],i,Nm()));function H(){return pe()}function pt(n,e,t){let i=pe(),o=_n();if(Mt(i,o,e)){let r=Ge(),s=Uo();l0(s,i,n,e,i[Re],t)}return pt}var $o=void 0;function VC(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var LC=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$o,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$o,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",$o,$o,$o],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",VC],pc={};function mt(n){let e=UC(n),t=ch(e);if(t)return t;let i=e.split("-")[0];if(t=ch(i),t)return t;if(i==="en")return LC;throw new te(701,!1)}function ch(n){return n in pc||(pc[n]=ri.ng&&ri.ng.common&&ri.ng.common.locales&&ri.ng.common.locales[n]),pc[n]}var Ue=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ue||{});function UC(n){return n.toLowerCase().replace(/_/g,"-")}var Xo="en-US";var BC=Xo;function G0(n){typeof n=="string"&&(BC=n.toLowerCase().replace(/_/g,"-"))}function L(n,e,t){let i=pe(),o=Ge(),r=ft();return z0(o,i,i[Re],r,n,e,t),L}function U(n,e,t){let i=pe(),o=Ge(),r=ft();return(r.type&3||t)&&k0(r,o,i,t,i[Re],n,e,As(r,i,e)),U}function z0(n,e,t,i,o,r,s){let a=!0,c=null;if((i.type&3||s)&&(c??=As(i,e,r),k0(i,n,e,s,t,o,r,c)&&(a=!1)),a){let u=i.outputs?.[o],f=i.hostDirectiveOutputs?.[o];if(f&&f.length)for(let g=0;g<f.length;g+=2){let x=f[g],E=f[g+1];c??=As(i,e,r),rh(i,e,x,E,o,c)}if(u&&u.length)for(let g of u)c??=As(i,e,r),rh(i,e,g,o,o,c)}}function C(n=1){return km(n)}function En(n){let e=Qd();return gs(e,Le+n)}function Ss(n,e){return n<<17|e<<2}function Ei(n){return n>>17&32767}function HC(n){return(n&2)==2}function $C(n,e){return n&131071|e<<17}function Bc(n){return n|2}function eo(n){return(n&131068)>>2}function mc(n,e){return n&-131069|e<<2}function GC(n){return(n&1)===1}function Hc(n){return n|1}function zC(n,e,t,i,o,r){let s=r?e.classBindings:e.styleBindings,a=Ei(s),c=eo(s);n[i]=t;let u=!1,f;if(Array.isArray(t)){let g=t;f=g[1],(f===null||$i(g,f)>0)&&(u=!0)}else f=t;if(o)if(c!==0){let x=Ei(n[a+1]);n[i+1]=Ss(x,a),x!==0&&(n[x+1]=mc(n[x+1],i)),n[a+1]=$C(n[a+1],i)}else n[i+1]=Ss(a,0),a!==0&&(n[a+1]=mc(n[a+1],i)),a=i;else n[i+1]=Ss(c,0),a===0?a=i:n[c+1]=mc(n[c+1],i),c=i;u&&(n[i+1]=Bc(n[i+1])),uh(n,f,i,!0),uh(n,f,i,!1),qC(e,f,n,i,r),s=Ss(a,c),r?e.classBindings=s:e.styleBindings=s}function qC(n,e,t,i,o){let r=o?n.residualClasses:n.residualStyles;r!=null&&typeof e=="string"&&$i(r,e)>=0&&(t[i+1]=Hc(t[i+1]))}function uh(n,e,t,i){let o=n[t+1],r=e===null,s=i?Ei(o):eo(o),a=!1;for(;s!==0&&(a===!1||r);){let c=n[s],u=n[s+1];jC(c,e)&&(a=!0,n[s+1]=i?Hc(u):Bc(u)),s=i?Ei(u):eo(u)}a&&(n[t+1]=i?Bc(o):Hc(o))}function jC(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?$i(n,e)>=0:!1}var Gt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function WC(n){return n.substring(Gt.key,Gt.keyEnd)}function YC(n){return JC(n),q0(n,j0(n,0,Gt.textEnd))}function q0(n,e){let t=Gt.textEnd;return t===e?-1:(e=Gt.keyEnd=KC(n,Gt.key=e,t),j0(n,e,t))}function JC(n){Gt.key=0,Gt.keyEnd=0,Gt.value=0,Gt.valueEnd=0,Gt.textEnd=n.length}function j0(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function KC(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Me(n,e,t){return W0(n,e,t,!1),Me}function N(n,e){return W0(n,e,null,!0),N}function Pe(n){QC(o1,ZC,n,!0)}function ZC(n,e){for(let t=YC(e);t>=0;t=q0(e,t))us(n,WC(e),!0)}function W0(n,e,t,i){let o=pe(),r=Ge(),s=ys(2);if(r.firstUpdatePass&&J0(r,n,s,i),e!==et&&Mt(o,s,e)){let a=r.data[Ut()];K0(r,a,o,o[Re],n,o[s+1]=s1(e,t),i,s)}}function QC(n,e,t,i){let o=Ge(),r=ys(2);o.firstUpdatePass&&J0(o,null,r,i);let s=pe();if(t!==et&&Mt(s,r,t)){let a=o.data[Ut()];if(Z0(a,i)&&!Y0(o,r)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=ss(c,t||"")),Uc(o,a,s,t,i)}else r1(o,a,s,s[Re],s[r+1],s[r+1]=i1(n,e,t),i,r)}}function Y0(n,e){return e>=n.expandoStartIndex}function J0(n,e,t,i){let o=n.data;if(o[t+1]===null){let r=o[Ut()],s=Y0(n,t);Z0(r,i)&&e===null&&!s&&(e=!1),e=XC(o,r,e,i),zC(o,r,e,t,s,i)}}function XC(n,e,t,i){let o=Dm(n),r=i?e.residualClasses:e.residualStyles;if(o===null)(i?e.classBindings:e.styleBindings)===0&&(t=hc(null,n,e,t,i),t=Yo(t,e.attrs,i),r=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=hc(o,n,e,t,i),r===null){let c=e1(n,e,i);c!==void 0&&Array.isArray(c)&&(c=hc(null,n,e,c[1],i),c=Yo(c,e.attrs,i),t1(n,e,i,c))}else r=n1(n,e,i)}return r!==void 0&&(i?e.residualClasses=r:e.residualStyles=r),t}function e1(n,e,t){let i=t?e.classBindings:e.styleBindings;if(eo(i)!==0)return n[Ei(i)]}function t1(n,e,t,i){let o=t?e.classBindings:e.styleBindings;n[Ei(o)]=i}function n1(n,e,t){let i,o=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<o;r++){let s=n[r].hostAttrs;i=Yo(i,s,t)}return Yo(i,e.attrs,t)}function hc(n,e,t,i,o){let r=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(r=e[a],i=Yo(i,r.hostAttrs,o),r!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Yo(n,e,t){let i=t?1:2,o=-1;if(e!==null)for(let r=0;r<e.length;r++){let s=e[r];typeof s=="number"?o=s:o===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),us(n,s,t?!0:e[++r]))}return n===void 0?null:n}function i1(n,e,t){if(t==null||t==="")return lt;let i=[],o=Ys(t);if(Array.isArray(o))for(let r=0;r<o.length;r++)n(i,o[r],!0);else if(o instanceof Set)for(let r of o)n(i,r,!0);else if(typeof o=="object")for(let r in o)o.hasOwnProperty(r)&&n(i,r,o[r]);else typeof o=="string"&&e(i,o);return i}function o1(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&us(n,i,t)}function r1(n,e,t,i,o,r,s,a){o===et&&(o=lt);let c=0,u=0,f=0<o.length?o[0]:null,g=0<r.length?r[0]:null;for(;f!==null||g!==null;){let x=c<o.length?o[c+1]:void 0,E=u<r.length?r[u+1]:void 0,w=null,A;f===g?(c+=2,u+=2,x!==E&&(w=g,A=E)):g===null||f!==null&&f<g?(c+=2,w=f):(u+=2,w=g,A=E),w!==null&&K0(n,e,t,i,w,A,s,a),f=c<o.length?o[c]:null,g=u<r.length?r[u]:null}}function K0(n,e,t,i,o,r,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],f=GC(u)?fh(c,e,t,o,eo(u),s):void 0;if(!zs(f)){zs(r)||HC(u)&&(r=fh(c,null,t,o,a,s));let g=Gd(Ut(),t);aE(i,s,g,o,r)}}function fh(n,e,t,i,o,r){let s=e===null,a;for(;o>0;){let c=n[o],u=Array.isArray(c),f=u?c[1]:c,g=f===null,x=t[o+1];x===et&&(x=g?lt:void 0);let E=g?fs(x,i):f===i?x:void 0;if(u&&!zs(E)&&(E=fs(c,i)),zs(E)&&(a=E,s))return a;let w=n[o+1];o=s?Ei(w):eo(w)}if(e!==null){let c=r?e.residualClasses:e.residualStyles;c!=null&&(a=fs(c,i))}return a}function zs(n){return n!==void 0}function s1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mn(Ys(n)))),n}function Z0(n,e){return(n.flags&(e?8:16))!==0}function p(n,e=""){let t=pe(),i=Ge(),o=n+Le,r=i.firstCreatePass?Zo(i,o,1,e,null):i.data[o],s=a1(i,t,r,e);t[o]=s,bs()&&tu(i,t,s,r),gi(r,!1)}var a1=(n,e,t,i)=>(ws(!0),wx(e[Re],i));function l1(n,e,t,i=""){return Mt(n,_n(),t)?e+ai(t)+i:et}function d1(n,e,t,i,o,r=""){let s=Cm(),a=A0(n,s,t,o);return ys(2),a?e+ai(t)+i+ai(o)+r:et}function V(n){return k("",n),V}function k(n,e,t){let i=pe(),o=l1(i,n,e,t);return o!==et&&Q0(i,Ut(),o),k}function re(n,e,t,i,o){let r=pe(),s=d1(r,n,e,t,i,o);return s!==et&&Q0(r,Ut(),s),re}function Q0(n,e,t){let i=Gd(e,n);Ix(n[Re],i,t)}function Fe(n,e,t){uu(e)&&(e=e());let i=pe(),o=_n();if(Mt(i,o,e)){let r=Ge(),s=Uo();a0(s,i,n,e,i[Re],t)}return Fe}function Ve(n,e){let t=uu(n);return t&&n.set(e),t}function Oe(n,e){let t=pe(),i=Ge(),o=ft();return z0(i,t,t[Re],o,n,e),Oe}var X0={};function oo(n){xn("NgLet");let e=Ge(),t=pe(),i=n+Le,o=Zo(e,i,128,null,null);return gi(o,!1),Vo(e,t,i,X0),oo}function er(n){let e=Ge(),t=pe(),i=Ut();return Vo(e,t,i,n),n}function ro(n){let e=Qd(),t=gs(e,Le+n);if(t===X0)throw new te(314,!1);return t}function gu(n){return Mt(pe(),_n(),n)?ai(n):et}function ph(n,e,t){let i=Ge();i.firstCreatePass&&eg(e,i.data,i.blueprint,nn(n),t)}function eg(n,e,t,i,o){if(n=Ke(n),Array.isArray(n))for(let r=0;r<n.length;r++)eg(n[r],e,t,i,o);else{let r=Ge(),s=pe(),a=ft(),c=ii(n)?n:Ke(n.provide),u=Ld(n),f=a.providerIndexes&1048575,g=a.directiveStart,x=a.providerIndexes>>20;if(ii(n)||!n.multi){let E=new _i(u,o,ue,null),w=vc(c,e,o?f:f+x,g);w===-1?(Ec(Rs(a,s),r,c),gc(r,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(E),s.push(E)):(t[w]=E,s[w]=E)}else{let E=vc(c,e,f+x,g),w=vc(c,e,f,f+x),A=E>=0&&t[E],F=w>=0&&t[w];if(o&&!F||!o&&!A){Ec(Rs(a,s),r,c);let P=f1(o?u1:c1,t.length,o,i,u,n);!o&&F&&(t[w].providerFactory=P),gc(r,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(P),s.push(P)}else{let P=tg(t[o?w:E],u,!o&&i);gc(r,n,E>-1?E:w,P)}!o&&i&&F&&t[w].componentProviders++}}}function gc(n,e,t,i){let o=ii(e),r=sm(e);if(o||r){let c=(r?Ke(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[i,c]):u[f+1].push(i,c)}else u.push(t,c)}}}function tg(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function vc(n,e,t,i){for(let o=t;o<i;o++)if(e[o]===n)return o;return-1}function c1(n,e,t,i,o){return $c(this.multi,[])}function u1(n,e,t,i,o){let r=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Ps(i,i[de],this.providerFactory.index,o);s=c.slice(0,a),$c(r,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],$c(r,s);return s}function $c(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function f1(n,e,t,i,o,r){let s=new _i(n,t,ue,null);return s.multi=[],s.index=e,s.componentProviders=0,tg(s,o,i&&!t),s}function ln(n,e){return t=>{t.providersResolver=(i,o)=>ph(i,o?o(n):n,!1),e&&(t.viewProvidersResolver=(i,o)=>ph(i,o?o(e):e,!0))}}function tr(n,e){let t=ec()+n,i=pe();return i[t]===et?M0(i,t,e()):oC(i,t)}function p1(n,e){let t=n[e];return t===et?void 0:t}function m1(n,e,t,i,o,r,s){let a=e+t;return A0(n,a,o,r)?M0(n,a+2,s?i.call(s,o,r):i(o,r)):p1(n,a+2)}function ie(n,e){let t=Ge(),i,o=n+Le;t.firstCreatePass?(i=h1(e,t.pipeRegistry),t.data[o]=i,i.onDestroy&&(t.destroyHooks??=[]).push(o,i.onDestroy)):i=t.data[o];let r=i.factory||(i.factory=An(i.type,!0)),s,a=st(ue);try{let c=Ns(!1),u=r();return Ns(c),Vo(t,pe(),o,u),u}finally{st(a)}}function h1(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function oe(n,e,t,i){let o=n+Le,r=pe(),s=gs(r,o);return g1(r,o)?m1(r,ec(),e,s.transform,t,i,s):s.transform(t,i)}function g1(n,e){return n[de].data[e].pure}var ng=(()=>{class n{applicationErrorHandler=$(vi);appRef=$(io);taskService=$(Yi);ngZone=$(Ct);zonelessEnabled=$(Ho);tracing=$(bi,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Mo):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(ac,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Vm:oc;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Mo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.applicationErrorHandler(i)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vu(){return xn("NgZoneless"),Fd([..._u(),[]])}function _u(){return[{provide:Rn,useExisting:ng},{provide:Ct,useClass:Ao},{provide:Ho,useValue:!0}]}function v1(){return typeof $localize<"u"&&$localize.locale||Xo}var so=new fe("",{factory:()=>$(so,{optional:!0,skipSelf:!0})||v1()});function z(n,e){return kr(n,e?.equal)}var og=Symbol("InputSignalNode#UNSET"),k1=O(R({},Nr),{transformFn:void 0,applyValueToInputSignal(n,e){Co(n,e)}});function rg(n,e){let t=Object.create(k1);t.value=n,t.transformFn=e?.transform;function i(){if(yo(t),t.value===og){let o=null;throw new te(-950,o)}return t.value}return i[ot]=t,i}function ig(n,e){return rg(n,e)}function N1(n){return rg(og,n)}var sg=(ig.required=N1,ig);var yu=new fe(""),R1=new fe("");function nr(n){return!n.moduleRef}function P1(n){let e=nr(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ct);return t.run(()=>{nr(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(vi),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:i})}),nr(n)){let r=()=>e.destroy(),s=n.platformInjector.get(yu);s.add(r),e.onDestroy(()=>{o.unsubscribe(),s.delete(r)})}else{let r=()=>n.moduleRef.destroy(),s=n.platformInjector.get(yu);s.add(r),n.moduleRef.onDestroy(()=>{zo(n.allPlatformModules,n.moduleRef),o.unsubscribe(),s.delete(r)})}return O1(i,t,()=>{let r=e.get(Yi),s=r.add(),a=e.get(mu);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(so,Xo);if(G0(c||Xo),!e.get(R1,!0))return nr(n)?e.get(io):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(nr(n)){let f=e.get(io);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return F1?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{r.remove(s)})})})}var F1;function O1(n,e,t){try{let i=t();return no(i)?i.catch(o=>{throw e.runOutsideAngular(()=>n(o)),o}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var ta=null;function V1(n=[],e){return Ft.create({name:e,providers:[{provide:Ro,useValue:"platform"},{provide:yu,useValue:new Set([()=>ta=null])},...n]})}function L1(n=[]){if(ta)return ta;let e=V1(n);return ta=e,B0(),U1(e),e}function U1(n){let e=n.get(js,null);ps(n,()=>{e?.forEach(t=>t())})}var B1=1e4;var R7=B1-1e3;var na=(()=>{class n{static __NG_ELEMENT_ID__=H1}return n})();function H1(n){return $1(ft(),pe(),(n&16)===16)}function $1(n,e,t){if(Fn(n)&&!t){let i=Tt(n.index,e);return new Xi(i,i)}else if(n.type&175){let i=e[wt];return new Xi(i,e)}return null}function ag(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:o}=n;Ie(Ee.BootstrapApplicationStart);try{let r=o?.injector??L1(i),s=[_u(),Um,...t||[]],a=new Wo({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return P1({r3Injector:a.injector,platformInjector:r,rootComponent:e})}catch(r){return Promise.reject(r)}finally{Ie(Ee.BootstrapApplicationEnd)}}function lg(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var dg=null;function Bn(){return dg}function xu(n){dg??=n}var ir=class{};var Su=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(Su||{});var tt=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(tt||{}),Ae=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ae||{}),ht=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(ht||{}),gt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function fg(n){return mt(n)[Ue.LocaleId]}function pg(n,e,t){let i=mt(n),o=[i[Ue.DayPeriodsFormat],i[Ue.DayPeriodsStandalone]],r=At(o,e);return At(r,t)}function mg(n,e,t){let i=mt(n),o=[i[Ue.DaysFormat],i[Ue.DaysStandalone]],r=At(o,e);return At(r,t)}function hg(n,e,t){let i=mt(n),o=[i[Ue.MonthsFormat],i[Ue.MonthsStandalone]],r=At(o,e);return At(r,t)}function gg(n,e){let i=mt(n)[Ue.Eras];return At(i,e)}function or(n,e){let t=mt(n);return At(t[Ue.DateFormat],e)}function rr(n,e){let t=mt(n);return At(t[Ue.TimeFormat],e)}function sr(n,e){let i=mt(n)[Ue.DateTimeFormat];return At(i,e)}function dn(n,e){let t=mt(n),i=t[Ue.NumberSymbols][e];if(typeof i>"u"){if(e===gt.CurrencyDecimal)return t[Ue.NumberSymbols][gt.Decimal];if(e===gt.CurrencyGroup)return t[Ue.NumberSymbols][gt.Group]}return i}function vg(n,e){return mt(n)[Ue.NumberFormats][e]}function _g(n){if(!n[Ue.ExtraData])throw new te(2303,!1)}function yg(n){let e=mt(n);return _g(e),(e[Ue.ExtraData][2]||[]).map(i=>typeof i=="string"?Eu(i):[Eu(i[0]),Eu(i[1])])}function xg(n,e,t){let i=mt(n);_g(i);let o=[i[Ue.ExtraData][0],i[Ue.ExtraData][1]],r=At(o,e)||[];return At(r,t)||[]}function At(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new te(2304,!1)}function Eu(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var G1=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ia={},z1=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Eg(n,e,t,i){let o=X1(n);e=Cn(t,e)||e;let s=[],a;for(;e;)if(a=z1.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let c=o.getTimezoneOffset();i&&(c=bg(i,c),o=Q1(o,i));let u="";return s.forEach(f=>{let g=K1(f);u+=g?g(o,t,c):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function la(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Cn(n,e){let t=fg(n);if(ia[t]??={},ia[t][e])return ia[t][e];let i="";switch(e){case"shortDate":i=or(n,ht.Short);break;case"mediumDate":i=or(n,ht.Medium);break;case"longDate":i=or(n,ht.Long);break;case"fullDate":i=or(n,ht.Full);break;case"shortTime":i=rr(n,ht.Short);break;case"mediumTime":i=rr(n,ht.Medium);break;case"longTime":i=rr(n,ht.Long);break;case"fullTime":i=rr(n,ht.Full);break;case"short":let o=Cn(n,"shortTime"),r=Cn(n,"shortDate");i=oa(sr(n,ht.Short),[o,r]);break;case"medium":let s=Cn(n,"mediumTime"),a=Cn(n,"mediumDate");i=oa(sr(n,ht.Medium),[s,a]);break;case"long":let c=Cn(n,"longTime"),u=Cn(n,"longDate");i=oa(sr(n,ht.Long),[c,u]);break;case"full":let f=Cn(n,"fullTime"),g=Cn(n,"fullDate");i=oa(sr(n,ht.Full),[f,g]);break}return i&&(ia[t][e]=i),i}function oa(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function qt(n,e,t="-",i,o){let r="";(n<0||o&&n<=0)&&(o?n=-n+1:(n=-n,r=t));let s=String(n);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),r+s}function q1(n,e){return qt(n,3).substring(0,e)}function je(n,e,t=0,i=!1,o=!1){return function(r,s){let a=j1(n,r);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return q1(a,e);let c=dn(s,gt.MinusSign);return qt(a,e,c,i,o)}}function j1(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new te(2301,!1)}}function ke(n,e,t=tt.Format,i=!1){return function(o,r){return W1(o,r,n,e,t,i)}}function W1(n,e,t,i,o,r){switch(t){case 2:return hg(e,o,i)[n.getMonth()];case 1:return mg(e,o,i)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(r){let u=yg(e),f=xg(e,o,i),g=u.findIndex(x=>{if(Array.isArray(x)){let[E,w]=x,A=s>=E.hours&&a>=E.minutes,F=s<w.hours||s===w.hours&&a<w.minutes;if(E.hours<w.hours){if(A&&F)return!0}else if(A||F)return!0}else if(x.hours===s&&x.minutes===a)return!0;return!1});if(g!==-1)return f[g]}return pg(e,o,i)[s<12?0:1];case 3:return gg(e,i)[n.getFullYear()<=0?0:1];default:let c=t;throw new te(2302,!1)}}function ra(n){return function(e,t,i){let o=-1*i,r=dn(t,gt.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case 0:return(o>=0?"+":"")+qt(s,2,r)+qt(Math.abs(o%60),2,r);case 1:return"GMT"+(o>=0?"+":"")+qt(s,1,r);case 2:return"GMT"+(o>=0?"+":"")+qt(s,2,r)+":"+qt(Math.abs(o%60),2,r);case 3:return i===0?"Z":(o>=0?"+":"")+qt(s,2,r)+":"+qt(Math.abs(o%60),2,r);default:throw new te(2310,!1)}}}var Y1=0,aa=4;function J1(n){let e=la(n,Y1,1).getDay();return la(n,0,1+(e<=aa?aa:aa+7)-e)}function Cg(n){let e=n.getDay(),t=e===0?-3:aa-e;return la(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Cu(n,e=!1){return function(t,i){let o;if(e){let r=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();o=1+Math.floor((s+r)/7)}else{let r=Cg(t),s=J1(r.getFullYear()),a=r.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return qt(o,n,dn(i,gt.MinusSign))}}function sa(n,e=!1){return function(t,i){let r=Cg(t).getFullYear();return qt(r,n,dn(i,gt.MinusSign),e)}}var bu={};function K1(n){if(bu[n])return bu[n];let e;switch(n){case"G":case"GG":case"GGG":e=ke(3,Ae.Abbreviated);break;case"GGGG":e=ke(3,Ae.Wide);break;case"GGGGG":e=ke(3,Ae.Narrow);break;case"y":e=je(0,1,0,!1,!0);break;case"yy":e=je(0,2,0,!0,!0);break;case"yyy":e=je(0,3,0,!1,!0);break;case"yyyy":e=je(0,4,0,!1,!0);break;case"Y":e=sa(1);break;case"YY":e=sa(2,!0);break;case"YYY":e=sa(3);break;case"YYYY":e=sa(4);break;case"M":case"L":e=je(1,1,1);break;case"MM":case"LL":e=je(1,2,1);break;case"MMM":e=ke(2,Ae.Abbreviated);break;case"MMMM":e=ke(2,Ae.Wide);break;case"MMMMM":e=ke(2,Ae.Narrow);break;case"LLL":e=ke(2,Ae.Abbreviated,tt.Standalone);break;case"LLLL":e=ke(2,Ae.Wide,tt.Standalone);break;case"LLLLL":e=ke(2,Ae.Narrow,tt.Standalone);break;case"w":e=Cu(1);break;case"ww":e=Cu(2);break;case"W":e=Cu(1,!0);break;case"d":e=je(2,1);break;case"dd":e=je(2,2);break;case"c":case"cc":e=je(7,1);break;case"ccc":e=ke(1,Ae.Abbreviated,tt.Standalone);break;case"cccc":e=ke(1,Ae.Wide,tt.Standalone);break;case"ccccc":e=ke(1,Ae.Narrow,tt.Standalone);break;case"cccccc":e=ke(1,Ae.Short,tt.Standalone);break;case"E":case"EE":case"EEE":e=ke(1,Ae.Abbreviated);break;case"EEEE":e=ke(1,Ae.Wide);break;case"EEEEE":e=ke(1,Ae.Narrow);break;case"EEEEEE":e=ke(1,Ae.Short);break;case"a":case"aa":case"aaa":e=ke(0,Ae.Abbreviated);break;case"aaaa":e=ke(0,Ae.Wide);break;case"aaaaa":e=ke(0,Ae.Narrow);break;case"b":case"bb":case"bbb":e=ke(0,Ae.Abbreviated,tt.Standalone,!0);break;case"bbbb":e=ke(0,Ae.Wide,tt.Standalone,!0);break;case"bbbbb":e=ke(0,Ae.Narrow,tt.Standalone,!0);break;case"B":case"BB":case"BBB":e=ke(0,Ae.Abbreviated,tt.Format,!0);break;case"BBBB":e=ke(0,Ae.Wide,tt.Format,!0);break;case"BBBBB":e=ke(0,Ae.Narrow,tt.Format,!0);break;case"h":e=je(3,1,-12);break;case"hh":e=je(3,2,-12);break;case"H":e=je(3,1);break;case"HH":e=je(3,2);break;case"m":e=je(4,1);break;case"mm":e=je(4,2);break;case"s":e=je(5,1);break;case"ss":e=je(5,2);break;case"S":e=je(6,1);break;case"SS":e=je(6,2);break;case"SSS":e=je(6,3);break;case"Z":case"ZZ":case"ZZZ":e=ra(0);break;case"ZZZZZ":e=ra(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ra(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=ra(2);break;default:return null}return bu[n]=e,e}function bg(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Z1(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Q1(n,e,t){let o=n.getTimezoneOffset(),r=bg(e,o);return Z1(n,-1*(r-o))}function X1(n){if(cg(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[o,r=1,s=1]=n.split("-").map(a=>+a);return la(o,r-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(G1))return eb(i)}let e=new Date(n);if(!cg(e))throw new te(2311,!1);return e}function eb(n){let e=new Date(0),t=0,i=0,o=n[8]?e.setUTCFullYear:e.setFullYear,r=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return r.call(e,s,a,c,u),e}function cg(n){return n instanceof Date&&!isNaN(n.valueOf())}var tb=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ug=22,da=".",ar="0",nb=";",ib=",",wu="#";function ob(n,e,t,i,o,r,s=!1){let a="",c=!1;if(!isFinite(n))a=dn(t,gt.Infinity);else{let u=ab(n);s&&(u=sb(u));let f=e.minInt,g=e.minFrac,x=e.maxFrac;if(r){let q=r.match(tb);if(q===null)throw new te(2306,!1);let Y=q[1],K=q[3],G=q[5];Y!=null&&(f=Iu(Y)),K!=null&&(g=Iu(K)),G!=null?x=Iu(G):K!=null&&g>x&&(x=g)}lb(u,g,x);let E=u.digits,w=u.integerLen,A=u.exponent,F=[];for(c=E.every(q=>!q);w<f;w++)E.unshift(0);for(;w<0;w++)E.unshift(0);w>0?F=E.splice(w,E.length):(F=E,E=[0]);let P=[];for(E.length>=e.lgSize&&P.unshift(E.splice(-e.lgSize,E.length).join(""));E.length>e.gSize;)P.unshift(E.splice(-e.gSize,E.length).join(""));E.length&&P.unshift(E.join("")),a=P.join(dn(t,i)),F.length&&(a+=dn(t,o)+F.join("")),A&&(a+=dn(t,gt.Exponential)+"+"+A)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function wg(n,e,t){let i=vg(e,Su.Decimal),o=rb(i,dn(e,gt.MinusSign));return ob(n,o,e,gt.Group,gt.Decimal,t)}function rb(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(nb),o=i[0],r=i[1],s=o.indexOf(da)!==-1?o.split(da):[o.substring(0,o.lastIndexOf(ar)+1),o.substring(o.lastIndexOf(ar)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(wu));for(let f=0;f<c.length;f++){let g=c.charAt(f);g===ar?t.minFrac=t.maxFrac=f+1:g===wu?t.maxFrac=f+1:t.posSuf+=g}let u=a.split(ib);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,r){let f=o.length-t.posPre.length-t.posSuf.length,g=r.indexOf(wu);t.negPre=r.substring(0,g).replace(/'/g,""),t.negSuf=r.slice(g+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function sb(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function ab(n){let e=Math.abs(n)+"",t=0,i,o,r,s,a;for((o=e.indexOf(da))>-1&&(e=e.replace(da,"")),(r=e.search(/e/i))>0?(o<0&&(o=r),o+=+e.slice(r+1),e=e.substring(0,r)):o<0&&(o=e.length),r=0;e.charAt(r)===ar;r++);if(r===(a=e.length))i=[0],o=1;else{for(a--;e.charAt(a)===ar;)a--;for(o-=r,i=[],s=0;r<=a;r++,s++)i[s]=Number(e.charAt(r))}return o>ug&&(i=i.splice(0,ug-1),t=o-1,o=1),{digits:i,exponent:t,integerLen:o}}function lb(n,e,t){if(e>t)throw new te(2307,!1);let i=n.digits,o=i.length-n.integerLen,r=Math.min(Math.max(e,o),t),s=r+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let g=s;g<i.length;g++)i[g]=0}else{o=Math.max(0,o),n.integerLen=1,i.length=Math.max(1,s=r+1),i[0]=0;for(let g=1;g<s;g++)i[g]=0}if(a>=5)if(s-1<0){for(let g=0;g>s;g--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;o<Math.max(0,r);o++)i.push(0);let c=r!==0,u=e+n.integerLen,f=i.reduceRight(function(g,x,E,w){return x=x+g,w[E]=x<10?x:x-10,c&&(w[E]===0&&E>=u?w.pop():c=!1),x>=10?1:0},0);f&&(i.unshift(f),n.integerLen++)}function Iu(n){let e=parseInt(n);if(isNaN(e))throw new te(2305,!1);return e}function Ig(n,e){return new te(2100,!1)}var db="mediumDate",Sg=new fe(""),Dg=new fe(""),ge=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,o){this.locale=t,this.defaultTimezone=i,this.defaultOptions=o}transform(t,i,o,r){if(t==null||t===""||t!==t)return null;try{let s=i??this.defaultOptions?.dateFormat??db,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Eg(t,s,r||this.locale,a)}catch(s){throw Ig(n,s.message)}}static \u0275fac=function(i){return new(i||n)(ue(so,16),ue(Sg,24),ue(Dg,24))};static \u0275pipe=ea({name:"date",type:n,pure:!0})}return n})();var Du=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,o){if(!cb(t))return null;o||=this._locale;try{let r=ub(t);return wg(r,o,i)}catch(r){throw Ig(n,r.message)}}static \u0275fac=function(i){return new(i||n)(ue(so,16))};static \u0275pipe=ea({name:"number",type:n,pure:!0})}return n})();function cb(n){return!(n==null||n===""||n!==n)}function ub(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new te(2309,!1);return n}var Z=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=mn({})}return n})();function Tu(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[o,r]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(o.trim()===e)return decodeURIComponent(r)}return null}var lr=class{};var Tg="browser";var dr=class{_doc;constructor(e){this._doc=e}manager},ca=(()=>{class n extends dr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,o,r){return t.addEventListener(i,o,r),()=>this.removeEventListener(t,i,o,r)}removeEventListener(t,i,o,r){return t.removeEventListener(i,o,r)}static \u0275fac=function(i){return new(i||n)(Se(Bt))};static \u0275prov=be({token:n,factory:n.\u0275fac})}return n})(),pa=new fe(""),Nu=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(s=>{s.manager=this});let o=t.filter(s=>!(s instanceof ca));this._plugins=o.slice().reverse();let r=t.find(s=>s instanceof ca);r&&this._plugins.push(r)}addEventListener(t,i,o,r){return this._findPluginFor(i).addEventListener(t,i,o,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(r=>r.supports(t)),!i)throw new te(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Se(pa),Se(Ct))};static \u0275prov=be({token:n,factory:n.\u0275fac})}return n})(),Mu="ng-app-id";function Mg(n){for(let e of n)e.remove()}function Ag(n,e){let t=e.createElement("style");return t.textContent=n,t}function pb(n,e,t,i){let o=n.head?.querySelectorAll(`style[${Mu}="${e}"],link[${Mu}="${e}"]`);if(o)for(let r of o)r.removeAttribute(Mu),r instanceof HTMLLinkElement?i.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&t.set(r.textContent,{usage:0,elements:[r]})}function ku(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Ru=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,o,r={}){this.doc=t,this.appId=i,this.nonce=o,pb(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let o of t)this.addUsage(o,this.inline,Ag);i?.forEach(o=>this.addUsage(o,this.external,ku))}removeStyles(t,i){for(let o of t)this.removeUsage(o,this.inline);i?.forEach(o=>this.removeUsage(o,this.external))}addUsage(t,i,o){let r=i.get(t);r?r.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(t,this.doc)))})}removeUsage(t,i){let o=i.get(t);o&&(o.usage--,o.usage<=0&&(Mg(o.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Mg(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:o}]of this.inline)o.push(this.addElement(t,Ag(i,this.doc)));for(let[i,{elements:o}]of this.external)o.push(this.addElement(t,ku(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Se(Bt),Se(qs),Se(Ws,8),Se(Ko))};static \u0275prov=be({token:n,factory:n.\u0275fac})}return n})(),Au={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Pu=/%COMP%/g;var Ng="%COMP%",mb=`_nghost-${Ng}`,hb=`_ngcontent-${Ng}`,gb=!0,vb=new fe("",{factory:()=>gb});function _b(n){return hb.replace(Pu,n)}function yb(n){return mb.replace(Pu,n)}function Rg(n,e){return e.map(t=>t.replace(Pu,n))}var Fu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,i,o,r,s,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.defaultRenderer=new cr(t,s,a,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let o=this.getOrCreateRenderer(t,i);return o instanceof fa?o.applyToHost(t):o instanceof ur&&o.applyStyles(),o}getOrCreateRenderer(t,i){let o=this.rendererByCompId,r=o.get(i.id);if(!r){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.tracingService;switch(i.encapsulation){case zt.Emulated:r=new fa(c,u,i,this.appId,f,s,a,g);break;case zt.ShadowDom:return new ua(c,t,i,s,a,this.nonce,g,u);case zt.ExperimentalIsolatedShadowDom:return new ua(c,t,i,s,a,this.nonce,g);default:r=new ur(c,u,i,f,s,a,g);break}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Se(Nu),Se(Ru),Se(qs),Se(vb),Se(Bt),Se(Ct),Se(Ws),Se(bi,8))};static \u0275prov=be({token:n,factory:n.\u0275fac})}return n})(),cr=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Au[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(kg(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(kg(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new te(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,o){if(o){t=o+":"+t;let r=Au[o];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let o=Au[i];o?e.removeAttributeNS(o,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,o){o&(an.DashCase|an.Important)?e.style.setProperty(t,i,o&an.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&an.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,o){if(typeof e=="string"&&(e=Bn().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let r=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(e,t,r)),this.eventManager.addEventListener(e,t,r,o)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function kg(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ua=class extends cr{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,i,o,r,s,a,c){super(e,o,r,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Rg(i.id,u);for(let g of u){let x=document.createElement("style");s&&x.setAttribute("nonce",s),x.textContent=g,this.shadowRoot.appendChild(x)}let f=i.getExternalStyles?.();if(f)for(let g of f){let x=ku(g,o);s&&x.setAttribute("nonce",s),this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ur=class extends cr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,o,r,s,a,c){super(e,r,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o;let u=i.styles;this.styles=c?Rg(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&yi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},fa=class extends ur{contentAttr;hostAttr;constructor(e,t,i,o,r,s,a,c){let u=o+"-"+i.id;super(e,t,i,r,s,a,c,u),this.contentAttr=_b(u),this.hostAttr=yb(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var ma=class n extends ir{supportsDOMEvents=!0;static makeCurrent(){xu(new n)}onAndCancel(e,t,i,o){return e.addEventListener(t,i,o),()=>{e.removeEventListener(t,i,o)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=xb();return t==null?null:Eb(t)}resetBaseElement(){fr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Tu(document.cookie,e)}},fr=null;function xb(){return fr=fr||document.head.querySelector("base"),fr?fr.getAttribute("href"):null}function Eb(n){return new URL(n,document.baseURI).pathname}var Cb=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=be({token:n,factory:n.\u0275fac})}return n})(),Pg=["alt","control","meta","shift"],bb={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wb={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Fg=(()=>{class n extends dr{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,o,r){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bn().onAndCancel(t,s.domEventName,a,r))}static parseEventName(t){let i=t.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let r=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),Pg.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=r,i.length!=0||r.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let o=bb[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(o=t.code,r="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Pg.forEach(s=>{if(s!==o){let a=wb[s];a(t)&&(r+=s+".")}}),r+=o,r===i)}static eventCallback(t,i,o){return r=>{n.matchEventFullKeyCode(r,t)&&o.runGuarded(()=>i(r))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Se(Bt))};static \u0275prov=be({token:n,factory:n.\u0275fac})}return n})();async function Ou(n,e,t){let i=R({rootComponent:n},Ib(e,t));return ag(i)}function Ib(n,e){return{platformRef:e?.platformRef,appProviders:[...Ab,...n?.providers??[]],platformProviders:Mb}}function Sb(){ma.makeCurrent()}function Db(){return new Xt}function Tb(){return zc(document),document}var Mb=[{provide:Ko,useValue:Tg},{provide:js,useValue:Sb,multi:!0},{provide:Bt,useFactory:Tb}];var Ab=[{provide:Ro,useValue:"root"},{provide:Xt,useFactory:Db},{provide:pa,useClass:ca,multi:!0},{provide:pa,useClass:Fg,multi:!0},Fu,Ru,Nu,{provide:xi,useExisting:Fu},{provide:lr,useClass:Cb},[]];var Be=class n{constructor(){this.toasts=B([])}show(e){let t=Math.random().toString(36).substr(2,9),i=O(R({},e),{id:t,duration:e.duration||4e3});this.toasts.update(o=>[...o,i]),setTimeout(()=>{this.remove(t)},i.duration)}success(e,t){this.show({type:"success",title:e,message:t})}error(e,t){this.show({type:"error",title:e,message:t,duration:6e3})}warning(e,t){this.show({type:"warning",title:e,message:t,duration:5e3})}info(e,t){this.show({type:"info",title:e,message:t})}remove(e){this.toasts.update(t=>t.filter(i=>i.id!==e))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}};var ee=class n{constructor(){this.currentUser=B(null);this.isLoggedIn=z(()=>this.currentUser()!==null);this.isAdmin=z(()=>this.currentUser()?.role==="ADMIN");this.currentModuleId=B("dashboard");this.filterCollaboratorId=B("");this.filterDate=B(new Date().toISOString().split("T")[0]);this.reportRecipientEmail=B("amministrazione@haccppro.it");this.currentLogo=z(()=>this.isAdmin()?this.adminCompany().logo||"/logo.png":this.companyConfig().logo||"/logo.png");this.adminCompany=B({name:"HACCP PRO - Sede Centrale",piva:"01234567890",address:"Via dell'Innovazione 10, Milano (MI)",phone:"02 99887766",cellphone:"333 1234567",whatsapp:"333 1234567",email:"amministrazione@haccppro.it",pec:"haccppro@legalmail.it",sdi:"M5UXCR1",licenseNumber:"HQ-RE-2024-001",logo:"/logo.png"});this.isContextEditable=z(()=>{if(!this.isAdmin())return!0;let e=this.currentModuleId(),t=this.menuItems.find(i=>i.id===e);return t?.category==="monitoring"||t?.category==="operations"?!!this.filterCollaboratorId():!1});this.toastService=$(Be);this.checklistRecords=B([]);this.clients=B([{id:"c1",name:"Ristorante Da Mario S.r.l.",piva:"12345678901",address:"Via Roma 1, Milano",phone:"02 1234567",email:"info@damario.it",licenseNumber:"HACCP-MI-001",suspended:!1},{id:"c2",name:"Pizzeria Bella Napoli",piva:"98765432109",address:"Corso Italia 50, Napoli",phone:"081 5556667",email:"admin@bellanapoli.it",licenseNumber:"HACCP-NA-999",suspended:!1}]);this.systemUsers=B([{id:"2",name:"Mario Rossi (Capo Sala)",email:"mario@damario.it",role:"COLLABORATOR",department:"Sala",active:!0,avatar:"https://ui-avatars.com/api/?name=Mario+Rossi&background=3b82f6&color=fff",clientId:"c1",username:"mario",password:"password"},{id:"3",name:"Luigi Verdi (Chef)",email:"chef@bellanapoli.it",role:"COLLABORATOR",department:"Cucina",active:!0,avatar:"https://ui-avatars.com/api/?name=Luigi+Verdi&background=10b981&color=fff",clientId:"c2",username:"luigi",password:"password"},{id:"4",name:"Giulia Bianchi (Bar)",email:"giulia@damario.it",role:"COLLABORATOR",department:"Bar",active:!1,avatar:"https://ui-avatars.com/api/?name=Giulia+Bianchi&background=d97706&color=fff",clientId:"c1",username:"giulia",password:"password"}]);this.companyConfig=B({id:"demo",name:"Demo Company S.r.l.",piva:"00000000000",address:"Via Demo 1",phone:"",email:"",licenseNumber:"",suspended:!1});this.recordToEdit=B(null);this.messages=B([{id:"m1",senderId:"1",senderName:"Amministrazione",subject:"Benvenuti nel nuovo sistema HACCP Pro",content:"Siamo lieti di annunciare il lancio della nuova piattaforma. Per qualsiasi assistenza, utilizzate questo modulo di messaggistica.",recipientType:"ALL",timestamp:new Date(Date.now()-864e5*2),read:!0,replies:[]},{id:"m2",senderId:"1",senderName:"Amministrazione",subject:"Aggiornamento Documentazione",content:"Abbiamo caricato i nuovi moduli per il controllo temperature. Si prega di prenderne visione.",recipientType:"SINGLE",recipientId:"c1",timestamp:new Date(Date.now()-36e5*5),read:!1,replies:[]}]);this.unreadMessagesCount=z(()=>{let e=this.currentUser();return e?this.messages().filter(t=>e.role==="ADMIN"?!t.read&&t.senderId!==e.id:!t.read&&t.senderId!==e.id&&(t.recipientType==="ALL"||t.recipientId===e.clientId&&(!t.recipientUserId||t.recipientUserId===e.id))).length:0});this.menuItems=[{id:"dashboard",label:"Dashboard Admin",icon:"fa-chart-pie",category:"dashboard",adminOnly:!0},{id:"reports",label:"Report Controlli",icon:"fa-file-contract",category:"dashboard",adminOnly:!0},{id:"general-checks",label:"Controlli Generali",icon:"fa-list-check",category:"dashboard",adminOnly:!0},{id:"pre-op-checklist",label:"Fase Pre-operativa",icon:"fa-clipboard-check",category:"operations"},{id:"operative-checklist",label:"Fase Operativa",icon:"fa-briefcase",category:"operations"},{id:"post-op-checklist",label:"Fase Post-operativa",icon:"fa-hourglass-end",category:"operations"},{id:"history",label:"Archivio Checklist",icon:"fa-clock-rotate-left",category:"history"},{id:"collaborators",label:"Gestione Collaboratori",icon:"fa-users-gear",category:"config",adminOnly:!0},{id:"messages",label:"Messaggistica",icon:"fa-comments",category:"communication",adminOnly:!1},{id:"accounting",label:"Contabilit\xE0",icon:"fa-calculator",category:"config",adminOnly:!0},{id:"settings",label:"Impostazioni Sistema",icon:"fa-gears",category:"config",adminOnly:!1}]}loginWithCredentials(e,t){if(e==="dev"&&t==="dev")return this.currentUser.set({id:"dev-admin",name:"Sviluppatore (Admin)",role:"ADMIN",avatar:"https://ui-avatars.com/api/?name=Dev&background=000&color=fff",clientId:"demo"}),this.clients().length>0&&this.companyConfig.set(this.clients()[0]),this.currentModuleId.set("dashboard"),!0;let i=this.systemUsers().find(o=>o.username===e&&o.password===t&&o.active);return i?this.clients().find(r=>r.id===i.clientId)?.suspended?(this.toastService.error("Accesso Negato","Servizio sospeso per mancato pagamento. Contattare l'amministrazione."),!1):(this.loginAsUser(i),!0):!1}loginAsUser(e){if(e.active){if(this.currentUser.set({id:e.id,name:e.name,role:e.role,avatar:e.avatar,clientId:e.clientId,department:e.department}),e.role==="ADMIN")this.companyConfig.set(this.clients()[0]);else{let t=this.clients().find(i=>i.id===e.clientId);t&&this.companyConfig.set(t)}this.currentModuleId.set(e.role==="ADMIN"?"dashboard":"operator-dashboard")}}login(e){if(e==="ADMIN"){let t=this.systemUsers().find(i=>i.role==="ADMIN");t&&(this.currentUser.set({id:t.id,name:t.name,role:"ADMIN",avatar:t.avatar,clientId:t.clientId}),this.companyConfig.set(this.clients()[0]))}else{let t=this.systemUsers().find(i=>i.role==="COLLABORATOR"&&i.active);if(t){this.currentUser.set({id:t.id,name:t.name,role:"COLLABORATOR",avatar:t.avatar,clientId:t.clientId,department:t.department});let i=this.clients().find(o=>o.id===t.clientId);i&&this.companyConfig.set(i)}}this.currentModuleId.set(e==="ADMIN"?"dashboard":"operator-dashboard")}logout(){this.currentUser.set(null),this.currentModuleId.set("dashboard"),this.filterCollaboratorId.set(""),this.filterDate.set(new Date().toISOString().split("T")[0])}setModule(e){this.currentModuleId.set(e)}setCollaboratorFilter(e){this.filterCollaboratorId.set(e)}setDateFilter(e){this.filterDate.set(e)}setReportRecipientEmail(e){this.reportRecipientEmail.set(e),this.toastService.success("Indirizzo Aggiornato",`Il nuovo indirizzo per i report \xE8: ${e}`)}updateAdminCompany(e){this.adminCompany.set(e),this.toastService.success("Anagrafica Salvata","I dati dell'azienda amministratore sono stati aggiornati.")}saveRecord(e,t){let i=this.currentUser();if(!i)return;let o=this.filterDate(),r=this.isAdmin()&&this.filterCollaboratorId()?this.filterCollaboratorId():i.id,s=this.checklistRecords().findIndex(c=>c.moduleId===e&&c.userId===r&&c.date===o),a={id:s>=0?this.checklistRecords()[s].id:Math.random().toString(36).substr(2,9),moduleId:e,userId:r,date:o,data:t,timestamp:new Date};if(this.checklistRecords.update(c=>{if(s>=0){let u=[...c];return u[s]=a,u}else return[...c,a]}),s>=0&&this.toastService.info("Dati Aggiornati","La registrazione precedente per questa data \xE8 stata sovrascritta."),this.isAdmin()&&this.filterCollaboratorId()){let c=this.systemUsers().find(f=>f.id===r),u=this.menuItems.find(f=>f.id===e);this.toastService.success("Feedback Inviato",`Le modifiche al modulo "${u?.label}" sono state salvate e notificate a ${c?.name}.`),this.addMessage({id:Date.now().toString(),senderId:i.id,senderName:"Amministrazione (Revisione)",recipientType:"SINGLE",recipientId:c?.clientId,recipientUserId:r,subject:`Aggiornamento: ${u?.label}`,content:`L'amministratore ha revisionato e aggiornato i dati inseriti in data ${o} per il modulo ${u?.label}.`,timestamp:new Date,read:!1,replies:[]})}}saveChecklist(e){let t=this.currentUser();if(!t)return;let i=e.id||Math.random().toString(36).substr(2,9),o=e.date||new Date().toISOString().split("T")[0],r={id:i,moduleId:e.moduleId,userId:t.id,date:o,data:e.data,timestamp:new Date};this.checklistRecords.update(s=>{let a=s.filter(c=>c.id!==i);return[r,...a]})}deleteChecklist(e){this.checklistRecords.update(t=>t.filter(i=>i.id!==e)),this.toastService.success("Record Eliminato","La registrazione \xE8 stata rimossa.")}getChecklistHistory(e){return this.currentUser()?this.checklistRecords().filter(i=>i.moduleId===e).sort((i,o)=>o.timestamp.getTime()-i.timestamp.getTime()):[]}getRecord(e){let t=this.currentUser()?.id,i=this.filterDate();return this.isAdmin()&&this.filterCollaboratorId()&&(t=this.filterCollaboratorId()),t&&this.checklistRecords().find(o=>o.moduleId===e&&o.userId===t&&o.date===i)?.data||null}addClient(e){let t=O(R({},e),{id:Math.random().toString(36).substr(2,9)});this.clients.update(i=>[...i,t])}updateClient(e,t){this.clients.update(i=>i.map(o=>o.id===e?R(R({},o),t):o)),this.companyConfig().id===e&&this.companyConfig.update(i=>R(R({},i),t))}toggleClientSuspension(e,t){if(this.updateClient(e,{suspended:t}),!t){let i=this.systemUsers().filter(o=>o.clientId===e);i.length>0&&i.every(o=>!o.active)&&this.updateSystemUser(i[0].id,{active:!0})}}checkAutoSuspendClient(e){let t=this.systemUsers().filter(i=>i.clientId===e&&i.role!=="ADMIN");t.length>0&&t.every(i=>!i.active)&&this.updateClient(e,{suspended:!0})}addSystemUser(e){let t=O(R({},e),{id:Math.random().toString(36).substr(2,9),avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`});this.systemUsers.update(i=>[...i,t])}updateSystemUser(e,t){if(this.systemUsers.update(i=>i.map(o=>o.id===e?R(R({},o),t):o)),t.active===!1){let i=this.systemUsers().find(o=>o.id===e);i?.clientId&&this.checkAutoSuspendClient(i.clientId)}}deleteSystemUser(e){this.systemUsers.update(t=>t.filter(i=>i.id!==e))}updateCurrentCompany(e){let t=this.companyConfig().id;t&&(this.updateClient(t,e),this.toastService.success("Dati Aggiornati","Le informazioni della tua azienda sono state aggiornate."))}startEditingRecord(e){this.recordToEdit.set(e),this.setModule(e.moduleId),this.toastService.info("Caricamento...","Sto aprendo la registrazione selezionata.")}completeEditing(){this.recordToEdit.set(null)}sendMessage(e,t,i,o,r,s){let a=this.currentUser();if(!a)return;let c={id:Date.now().toString(),senderId:a.id,senderName:a.name,recipientType:i,recipientId:o,recipientUserId:r,subject:e,content:t,attachmentUrl:s?.url,attachmentName:s?.name,timestamp:new Date,read:!1,replies:[]};if(this.messages.update(u=>[...u,c]),i==="ALL")this.toastService.success("Messaggio inviato","Inviato a tutte le aziende");else if(o==="ADMIN_OFFICE")this.toastService.success("Messaggio inviato","Inviato all'Amministrazione");else{let u=this.clients().find(x=>x.id===o),f=this.systemUsers().find(x=>x.id===r),g=f?`${u?.name} (Attr: ${f.name})`:u?.name;this.toastService.success("Messaggio inviato",`Inviato a ${g}`)}}replyToMessage(e,t,i){let o=this.currentUser();if(!o)return;let r={id:Date.now().toString(),senderId:o.id,senderName:o.name,content:t,attachmentUrl:i?.url,attachmentName:i?.name,timestamp:new Date};this.messages.update(s=>s.map(a=>a.id===e?O(R({},a),{replies:[...a.replies,r]}):a)),this.toastService.success("Risposta inviata","La tua risposta \xE8 stata inviata")}markMessageAsRead(e){this.messages.update(t=>t.map(i=>i.id===e?O(R({},i),{read:!0}):i))}getMessagesForCurrentUser(){let e=this.currentUser();return e?e.role==="ADMIN"?this.messages():this.messages().filter(t=>t.senderId===e.id||t.recipientType==="ALL"||t.recipientId===e.clientId&&(!t.recipientUserId||t.recipientUserId===e.id)):[]}addMessage(e){this.messages.update(t=>[e,...t])}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}};var Vu=()=>[],kb=(n,e)=>e.userId,Nb=(n,e)=>e.id;function Rb(n,e){n&1&&(h(0,"div",10),b(1,"i",36),p(2," Filtrato su Unit\xE0 Selezionata "),v())}function Pb(n,e){if(n&1&&(h(0,"span",49),p(1),v()),n&2){let t=C(2);m(),V(t.criticalAlerts().length)}}function Fb(n,e){n&1&&(h(0,"div",85)(1,"div",86)(2,"span"),p(3,"Generazione PDF..."),v(),h(4,"span"),p(5,"75%"),v()(),h(6,"div",87),b(7,"div",88),v()())}function Ob(n,e){if(n&1){let t=H();h(0,"div",89)(1,"button",90),U("click",function(){I(t);let o=C(2);return S(o.sendDailyReport())}),b(2,"i",91),p(3," INVIA REPORT EMAIL "),v(),h(4,"button",92),U("click",function(){I(t);let o=C(2);return S(o.printDailyReport())}),b(5,"i",93),p(6," STAMPA REGISTRO A4 "),v()(),h(7,"div",94),b(8,"i",95),p(9," Destinatario: "),h(10,"span",96),p(11),v()()}if(n&2){let t=C(2);m(11),V(t.state.reportRecipientEmail())}}function Vb(n,e){if(n&1){let t=H();h(0,"div",37)(1,"div",38),b(2,"div",39),h(3,"div",3)(4,"div",40),b(5,"i",41),h(6,"span",42),p(7),v()(),h(8,"p",43),p(9,"Pratica HACCP"),v(),h(10,"p",44),p(11),v(),h(12,"div",45),b(13,"div",46),v()()(),h(14,"div",47),U("click",function(){I(t);let o=C();return S(o.scrollToAlerts())}),b(15,"div",39),h(16,"div",3)(17,"div",40),b(18,"i",48),T(19,Pb,2,1,"span",49),v(),h(20,"p",43),p(21,"Avvisi Attivi"),v(),h(22,"p",44),p(23),v(),h(24,"p",50),p(25),v()()(),h(26,"div",51),U("click",function(){I(t);let o=C();return S(o.state.isAdmin()?o.state.setModule("collaborators"):null)}),b(27,"div",39),h(28,"div",3)(29,"div",40),b(30,"i",52),h(31,"span",42),p(32),v()(),h(33,"p",43),p(34,"Unit\xE0 Operative"),v(),h(35,"p",44),p(36),v(),h(37,"p",50),p(38,"Visualizzati in elenco"),v()()(),h(39,"div",53),b(40,"div",39),h(41,"div",3)(42,"div",40),b(43,"i",54),h(44,"span",42),p(45,"+12%"),v()(),h(46,"p",43),p(47,"Conformit\xE0 Media"),v(),h(48,"p",44),p(49,"98.5%"),v(),h(50,"p",50),p(51,"vs 86.5% mese scorso"),v()()()(),h(52,"div",55)(53,"div",56)(54,"div",57)(55,"h3",58),b(56,"i",59),p(57," Avanzamento Processo HACCP "),v(),h(58,"span",60),p(59,"Dati Reali di Oggi"),v()(),h(60,"div",61)(61,"div",34)(62,"div",62)(63,"div")(64,"p",63),p(65,"Fase 1"),v(),h(66,"h4",64),p(67,"Pre-operativa"),v()(),h(68,"div",65)(69,"span",66),p(70),v()()(),h(71,"div",67),b(72,"div",68),v(),h(73,"div",69)(74,"span",70),p(75),v()()(),h(76,"div",71)(77,"div",62)(78,"div")(79,"p",63),p(80,"Fase 2"),v(),h(81,"h4",64),p(82,"Operativa"),v()(),h(83,"div",65)(84,"span",66),p(85),v()()(),h(86,"div",67),b(87,"div",72),v(),h(88,"div",69)(89,"span",70),p(90),v()()(),h(91,"div",71)(92,"div",62)(93,"div")(94,"p",63),p(95,"Fase 3"),v(),h(96,"h4",64),p(97,"Post-operativa"),v()(),h(98,"div",65)(99,"span",66),p(100),v()()(),h(101,"div",67),b(102,"div",73),v(),h(103,"div",69)(104,"span",70),p(105),v()()()(),h(106,"div",74),b(107,"i",75),p(108),v()(),h(109,"div",76),b(110,"div",77),h(111,"div",78)(112,"h3",79),b(113,"i",80),p(114," Report Verifiche "),v(),h(115,"span",81),p(116,"PDF A4"),v()(),h(117,"div",82)(118,"p",83),p(119," Invia il report completo delle verifiche per la data "),h(120,"span",84),p(121),v(),p(122," all'amministrazione. "),v(),T(123,Fb,8,0,"div",85)(124,Ob,12,1),v()()()}if(n&2){let t=C();m(7),V(t.getCurrentDateShort()),m(4),re("",t.kpiData().completed,"/",t.kpiData().total," Fasi"),m(2),Me("width",t.kpiData().completed/t.kpiData().total*100,"%"),m(6),M(t.criticalAlerts().length>0?19:-1),m(4),V(t.systemAlerts().length),m(2),k("",t.criticalAlerts().length," critici per la data odierna"),m(),N("cursor-pointer",t.state.isAdmin())("hover:scale-105",t.state.isAdmin()),m(6),k("",t.kpiData().activeUsers," attivi"),m(4),V(t.collaboratorActivities().length),m(34),re("",t.phaseRecap().pre.count,"/",(t.filteredUsers()||tr(56,Vu)).length||0),m(2),Me("width",t.phaseRecap().pre.pct,"%"),m(2),N("bg-emerald-100",t.phaseRecap().pre.issues===0)("text-emerald-700",t.phaseRecap().pre.issues===0)("bg-red-100",t.phaseRecap().pre.issues>0)("text-red-700",t.phaseRecap().pre.issues>0),m(),k(" ",t.phaseRecap().pre.issues===0?"STATUS: OK":"ANOMALIE: "+t.phaseRecap().pre.issues," "),m(10),re("",t.phaseRecap().op.count,"/",(t.filteredUsers()||tr(57,Vu)).length||0),m(2),Me("width",t.phaseRecap().op.pct,"%"),m(2),N("bg-emerald-100",t.phaseRecap().op.issues===0)("text-emerald-700",t.phaseRecap().op.issues===0)("bg-red-100",t.phaseRecap().op.issues>0)("text-red-700",t.phaseRecap().op.issues>0),m(),k(" ",t.phaseRecap().op.issues===0?"STATUS: OK":"ANOMALIE: "+t.phaseRecap().op.issues," "),m(10),re("",t.phaseRecap().post.count,"/",(t.filteredUsers()||tr(58,Vu)).length||0),m(2),Me("width",t.phaseRecap().post.pct,"%"),m(2),N("bg-emerald-100",t.phaseRecap().post.issues===0)("text-emerald-700",t.phaseRecap().post.issues===0)("bg-red-100",t.phaseRecap().post.issues>0)("text-red-700",t.phaseRecap().post.issues>0),m(),k(" ",t.phaseRecap().post.issues===0?"STATUS: OK":"ANOMALIE: "+t.phaseRecap().post.issues," "),m(3),k(" I dati si riferiscono alle unit\xE0 operative selezionate per il ",t.getCurrentDate(),". "),m(13),V(t.getCurrentDate()),m(2),M(t.isSendingReport()?123:124)}}function Lb(n,e){if(n&1){let t=H();h(0,"button",97),U("click",function(){I(t);let o=C();return S(o.state.setModule("collaborators"))}),b(1,"i",98),p(2," Gestisci Struttura "),v()}}function Ub(n,e){n&1&&(h(0,"div",27),b(1,"i",99),h(2,"p",100),p(3,"Nessuna unit\xE0 operativa trovata per i filtri selezionati."),v()())}function Bb(n,e){n&1&&b(0,"div",104)}function Hb(n,e){n&1&&b(0,"div",105)}function $b(n,e){n&1&&b(0,"div",106)}function Gb(n,e){if(n&1&&(h(0,"div",112)(1,"span",113),p(2,"In Attesa"),v(),h(3,"span",119),p(4),v()()),n&2){let t=C().$implicit;m(4),V(t.tasksPending)}}function zb(n,e){if(n&1){let t=H();h(0,"div",102),U("click",function(){let o=I(t).$implicit,r=C(2);return S(r.openUserProfile(o.userId))}),h(1,"div",103),T(2,Bb,1,0,"div",104)(3,Hb,1,0,"div",105)(4,$b,1,0,"div",106),v(),h(5,"div",107),b(6,"img",108),h(7,"div",109)(8,"h4",110),p(9),v(),h(10,"p",24),p(11),v(),h(12,"div",111)(13,"div",112)(14,"span",113),p(15,"Fasi HACCP"),v(),h(16,"span",114),p(17),v()(),T(18,Gb,5,1,"div",112),v(),h(19,"div",115)(20,"span",116),p(21,"Ultimo accesso"),v(),h(22,"span",117),p(23),v()()()(),b(24,"div",118),v()}if(n&2){let t=e.$implicit;N("border-emerald-200",t.status==="active")("border-orange-200",t.status==="warning")("border-slate-200",t.status==="inactive"),m(2),M(t.status==="active"?2:t.status==="warning"?3:4),m(4),pt("src",t.avatar,Xe),m(3),V(t.userName),m(2),V(t.department),m(6),k("",t.tasksCompleted,"/3"),m(),M(t.tasksPending>0?18:-1),m(5),V(t.lastActivity)}}function qb(n,e){if(n&1&&(h(0,"div",28),j(1,zb,25,13,"div",101,kb),v()),n&2){let t=C();m(),W(t.collaboratorActivities())}}function jb(n,e){if(n&1&&(h(0,"span",33),p(1),v()),n&2){let t=C();m(),k(" ",t.systemAlerts().length," attivi ")}}function Wb(n,e){n&1&&(h(0,"div",27),b(1,"i",120),h(2,"p",100),p(3,"Nessun avviso attivo per questa selezione. Tutto in regola!"),v()())}function Yb(n,e){n&1&&b(0,"i",124)}function Jb(n,e){n&1&&b(0,"i",125)}function Kb(n,e){n&1&&b(0,"i",126)}function Zb(n,e){if(n&1&&(h(0,"div",131),b(1,"i",133),h(2,"span"),p(3),v(),h(4,"span",96),p(5,"\u2022"),v(),h(6,"span"),p(7),v()()),n&2){let t=C().$implicit;m(3),V(t.userName),m(4),V(t.timestamp)}}function Qb(n,e){if(n&1){let t=H();h(0,"button",134),U("click",function(){I(t);let o=C().$implicit,r=C(2);return S(r.openUserProfile(o.userId))}),b(1,"i",135),p(2," Visualizza "),v()}}function Xb(n,e){if(n&1&&(h(0,"div",122)(1,"div",123),T(2,Yb,1,0,"i",124)(3,Jb,1,0,"i",125)(4,Kb,1,0,"i",126),v(),h(5,"div",109)(6,"div",127)(7,"div",128)(8,"h4",129),p(9),v(),h(10,"p",130),p(11),v(),T(12,Zb,8,2,"div",131),v(),T(13,Qb,3,0,"button",132),v()()()),n&2){let t=e.$implicit;N("bg-red-50",t.type==="error")("border-red-200",t.type==="error")("bg-orange-50",t.type==="warning")("border-orange-200",t.type==="warning")("bg-blue-50",t.type==="info")("border-blue-200",t.type==="info"),m(2),M(t.type==="error"?2:t.type==="warning"?3:4),m(7),V(t.title),m(2),V(t.message),m(),M(t.userName?12:-1),m(),M(t.actionable&&t.userId?13:-1)}}function ew(n,e){if(n&1&&(h(0,"div",34),j(1,Xb,14,17,"div",121,Nb),v()),n&2){let t=C();m(),W(t.systemAlerts())}}function tw(n,e){if(n&1){let t=H();h(0,"button",136),U("click",function(){I(t);let o=C();return S(o.state.setModule("general-checks"))}),h(1,"div",137),b(2,"i",138),v(),h(3,"h4",129),p(4,"Controlli Generali"),v(),h(5,"p",24),p(6,"Visualizza stato completo"),v()(),h(7,"button",139),U("click",function(){I(t);let o=C();return S(o.state.setModule("accounting"))}),h(8,"div",140),b(9,"i",141),v(),h(10,"h4",129),p(11,"Contabilit\xE0"),v(),h(12,"p",24),p(13,"Gestisci pagamenti"),v()(),h(14,"button",142),U("click",function(){I(t);let o=C();return S(o.state.setModule("messages"))}),h(15,"div",143),b(16,"i",144),v(),h(17,"h4",129),p(18,"Messaggistica"),v(),h(19,"p",24),p(20,"Comunicazioni aziende"),v()(),h(21,"button",145),U("click",function(){I(t);let o=C();return S(o.state.setModule("collaborators"))}),h(22,"div",146),b(23,"i",147),v(),h(24,"h4",129),p(25,"Gestione Struttura"),v(),h(26,"p",24),p(27,"Aziende e Collaboratori"),v()()}}function nw(n,e){if(n&1){let t=H();h(0,"button",142),U("click",function(){I(t);let o=C();return S(o.state.setModule("pre-op-checklist"))}),h(1,"div",143),b(2,"i",148),v(),h(3,"h4",129),p(4,"Fase Pre-operativa"),v(),h(5,"p",24),p(6,"Controlli apertura"),v()(),h(7,"button",149),U("click",function(){I(t);let o=C();return S(o.state.setModule("operative-checklist"))}),h(8,"div",150),b(9,"i",151),v(),h(10,"h4",129),p(11,"Fase Operativa"),v(),h(12,"p",24),p(13,"Controlli operativi"),v()(),h(14,"button",145),U("click",function(){I(t);let o=C();return S(o.state.setModule("post-op-checklist"))}),h(15,"div",146),b(16,"i",152),v(),h(17,"h4",129),p(18,"Fase Post-operativa"),v(),h(19,"p",24),p(20,"Chiusura e pulizia"),v()(),h(21,"button",136),U("click",function(){I(t);let o=C();return S(o.state.setModule("history"))}),h(22,"div",137),b(23,"i",153),v(),h(24,"h4",129),p(25,"Archivio Checklist"),v(),h(26,"p",24),p(27,"Storico registrazioni"),v()()}}var ha=class n{constructor(){this.state=$(ee);this.toastService=$(Be);this.isSendingReport=B(!1);this.filteredUsers=z(()=>{let e=this.state.systemUsers(),t=this.state.filterCollaboratorId(),i=this.state.companyConfig()?.id;if(!this.state.isAdmin()){let r=this.state.currentUser();return r?[r]:[]}let o=e;return t?o=e.filter(r=>r.id===t):i&&(o=e.filter(r=>r.clientId===i&&r.role!=="ADMIN")),o});this.collaboratorActivities=z(()=>{let e=this.state.checklistRecords(),t=this.state.filterDate();return this.filteredUsers().map(i=>{let o=["pre-op-checklist","operative-checklist","post-op-checklist"],r=e.filter(f=>f.userId===i.id&&f.date===t&&o.includes(f.moduleId)),s=new Set(r.map(f=>f.moduleId)).size,a=3,c=r.some(f=>f.data.status==="Non Conforme"),u=r.length>0?r[r.length-1]:null;return{userId:i.id,userName:i.name,avatar:i.avatar,lastActivity:u?new Date(u.timestamp).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}):"Inattivo",tasksCompleted:s,tasksPending:a-s,status:r.length>0?c?"warning":"active":"inactive",department:i.department||"Generale"}})});this.kpiData=z(()=>{let e=this.collaboratorActivities(),t=this.state.filterDate(),i=this.filteredUsers(),o=i.map(c=>c.id),r=["pre-op-checklist","operative-checklist","post-op-checklist"],s=0;i.forEach(c=>{let u=this.state.checklistRecords().filter(f=>f.userId===c.id&&f.date===t&&r.includes(f.moduleId)).map(f=>f.moduleId);s+=new Set(u).size});let a=i.length*3;return{completed:s,total:a||3,activeUsers:e.filter(c=>c.status!=="inactive").length}});this.systemAlerts=z(()=>{let e=[],t=this.state.checklistRecords(),i=this.state.filterDate(),o=this.filteredUsers(),r=o.map(a=>a.id),s=t.filter(a=>r.includes(a.userId)&&a.date===i);return s.forEach(a=>{if(a.data.status==="Non Conforme"){let c=o.find(f=>f.id===a.userId),u=this.getModuleName(a.moduleId);e.push({id:`nc-${a.id}`,type:"error",title:`Anomalia in ${u}`,message:a.data.summary||"Rilevata non conformit\xE0 durante l'ispezione.",userId:a.userId,userName:c?.name,timestamp:new Date(a.timestamp).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),actionable:!0})}}),o.forEach(a=>{let c=s.filter(E=>E.userId===a.id),u=[],f=c.some(E=>E.moduleId==="pre-op-checklist"),g=c.some(E=>E.moduleId==="operative-checklist"),x=c.some(E=>E.moduleId==="post-op-checklist");f||u.push("Pre-operativa"),g||u.push("Operativa"),x||u.push("Post-operativa"),u.length>0&&u.length<3&&e.push({id:`missing-${a.id}`,type:"warning",title:"Fasi Mancanti",message:`${a.name} deve completare: ${u.join(", ")}`,userId:a.id,userName:a.name,timestamp:"Oggi",actionable:!0})}),e});this.criticalAlerts=z(()=>this.systemAlerts().filter(e=>e.type==="error"));this.phaseRecap=z(()=>{let e=this.state.checklistRecords(),t=this.state.filterDate(),i=this.filteredUsers(),o=i.length||1,r=s=>{let a=e.filter(f=>f.moduleId===s&&f.date===t&&i.some(g=>g.id===f.userId)),c=new Set(a.map(f=>f.userId)).size,u=a.filter(f=>f.data.status==="Non Conforme").length;return{pct:o>0?Math.min(100,c/o*100):0,count:c,issues:u}};return{pre:r("pre-op-checklist"),op:r("operative-checklist"),post:r("post-op-checklist")}})}sendDailyReport(){this.isSendingReport.set(!0),setTimeout(()=>{this.isSendingReport.set(!1),this.toastService.success("Report Inviato",`Il report delle verifiche per il ${this.getCurrentDate()} \xE8 stato inviato via email all'amministrazione.`)},2e3)}getCurrentDate(){let e=this.state.filterDate();return new Date(e).toLocaleDateString("it-IT",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}getCurrentDateShort(){return new Date(this.state.filterDate()).toLocaleDateString("it-IT",{day:"numeric",month:"short"})}getModuleName(e){switch(e){case"pre-op-checklist":case"pre-operative":return"Fase Pre-operativa";case"operative-checklist":case"operative":return"Fase Operativa";case"post-op-checklist":case"post-operative":return"Fase Post-operativa";default:return e}}getRandomTime(){return`${Math.floor(Math.random()*12)+1}h fa`}openUserProfile(e){this.state.setModule("collaborators")}scrollToAlerts(){document.getElementById("alerts-section")?.scrollIntoView({behavior:"smooth"})}printDailyReport(){let e=this.state.companyConfig()?.id;if(!e)return;let t=this.state.clients().find(g=>g.id===e);if(!t)return;let i=this.state.systemUsers().filter(g=>g.clientId===t.id),o=i.map(g=>g.id),r=this.state.checklistRecords().filter(g=>o.includes(g.userId)&&g.date===this.state.filterDate()),s=i.filter(g=>g.role!=="ADMIN").map(g=>{let x=r.filter(E=>E.userId===g.id);return{id:g.id,name:g.name,department:g.department||"Generale",checksCompleted:x.length,checksTotal:14,lastActivity:x.length>0?new Date(x[x.length-1].timestamp).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}):"Nessuna"}}),a=r.map(g=>{let x=i.find(w=>w.id===g.userId),E=this.state.menuItems.find(w=>w.id===g.moduleId);return{userName:x?.name||"Utente",moduleName:E?.label||g.moduleId,timestamp:g.timestamp,data:g.data}}),c={client:t,users:s,totalChecks:s.reduce((g,x)=>g+x.checksTotal,0),completedChecks:s.reduce((g,x)=>g+x.checksCompleted,0),detailedChecks:a},u=this.generatePrintHTML(c),f=window.open("","_blank");f&&(f.document.write(u),f.document.close(),f.focus(),setTimeout(()=>{f.print(),f.close()},250))}generatePrintHTML(e){let t=new Date(this.state.filterDate()).toLocaleDateString("it-IT",{day:"2-digit",month:"long",year:"numeric"}),i=e.client.logo||this.state.currentLogo();return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Registro Autocontrollo - ${e.client.name}</title>
        <style>
          @page { size: A4; margin: 1.5cm; }
          body { font-family: 'Segoe UI', Arial, sans-serif; color: #1e293b; line-height: 1.5; margin: 0; padding: 0; }
          .a4-container { width: 100%; }
          .header { border-bottom: 2px solid #0f172a; padding-bottom: 20px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: start; }
          .logo-container { display: flex; align-items: center; gap: 15px; }
          .logo-img { width: 60px; height: 60px; border-radius: 12px; object-fit: contain; }
          .brand-title { font-size: 24px; font-weight: 800; color: #0f172a; }
          .header-meta { text-align: right; font-size: 12px; color: #64748b; }
          
          .report-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; background: #f8fafc; padding: 20px; border-radius: 15px; border: 1px solid #e2e8f0; }
          .info-block h3 { font-size: 18px; margin: 0 0 5px; color: #0f172a; }
          .info-block p { margin: 2px 0; font-size: 13px; color: #475569; }
          
          .section-title { font-size: 16px; font-weight: 800; text-transform: uppercase; color: #0f172a; border-left: 4px solid #3b82f6; padding-left: 10px; margin: 30px 0 15px; }
          
          table { width: 100%; border-collapse: collapse; margin-bottom: 25px; font-size: 12px; }
          th { background: #f1f5f9; padding: 10px; text-align: left; font-weight: 700; border-bottom: 1px solid #cbd5e1; color: #475569; }
          td { padding: 10px; border-bottom: 1px solid #e2e8f0; }
          
          .check-detail { margin-bottom: 15px; padding: 12px; background: #fff; border: 1px solid #e2e8f0; border-radius: 8px; }
          .check-header { display: flex; justify-content: space-between; font-weight: 700; font-size: 11px; margin-bottom: 8px; color: #334155; border-bottom: 1px dashed #e2e8f0; padding-bottom: 5px; }
          .check-body { font-size: 11px; color: #1e293b; }
          .data-item { display: inline-block; margin-right: 20px; }
          .data-label { color: #64748b; font-weight: normal; }
          .data-value { font-weight: 600; }
          
          .signature-section { margin-top: 50px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
          .sig-box { border-top: 1px solid #94a3b8; padding-top: 10px; text-align: center; font-size: 11px; color: #64748b; }
          
          .footer { position: fixed; bottom: 1.5cm; left: 1.5cm; right: 1.5cm; font-size: 10px; text-align: center; color: #94a3b8; border-top: 1px solid #f1f5f9; padding-top: 10px; }
          
          @media print {
            .no-print { display: none; }
            body { margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="a4-container">
          <div class="header">
            <div class="logo-container">
              <img src="${i}" class="logo-img">
              <div>
                <div class="brand-title">HACCP PRO</div>
                <div style="font-size: 10px; color: #64748b;">Software di Gestione Sicurezza Alimentare</div>
              </div>
            </div>
            <div class="header-meta">
              <div>Documento: Registro Autocontrollo</div>
              <div>Versione: 2.0.1</div>
              <div>Data emissione: ${new Date().toLocaleDateString("it-IT")}</div>
            </div>
          </div>

          <div class="report-info">
            <div class="info-block">
              <h3>${e.client.name}</h3>
              <p>P.IVA: ${e.client.piva}</p>
              <p>Indirizzo: ${e.client.address}</p>
            </div>
            <div style="text-align: right;">
              <p><strong>DATA REGISTRAZIONE:</strong></p>
              <p style="font-size: 20px; font-weight: 800; color: #3b82f6;">${t}</p>
            </div>
          </div>

          <div class="section-title">Registro Attivit\xE0 Dettagliato</div>
          ${e.detailedChecks.length===0?`
            <p style="text-align: center; color: #94a3b8; padding: 20px;">Nessuna attivit\xE0 registrata per la data odierna.</p>
          `:`
            ${e.detailedChecks.map(o=>`
              <div class="check-detail">
                <div class="check-header">
                  <span>MODULO: ${o.moduleName}</span>
                  <span>ESECUTO DA: ${o.userName} \u2022 ORE: ${new Date(o.timestamp).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}</span>
                </div>
                <div class="check-body">
                  ${this.formatCheckData(o.data)}
                </div>
              </div>
            `).join("")}
          `}

          <div class="signature-section">
            <div class="sig-box">
              <p><strong>Firma Operatore Responsabile</strong></p>
              <div style="height: 60px;"></div>
            </div>
            <div class="sig-box">
              <p><strong>Visto del Responsabile HACCP</strong></p>
              <div style="height: 60px;"></div>
            </div>
          </div>

          <div class="footer">
             HACCP Pro - Documento generato elettronicamente conforme ai requisiti del Reg. CE 852/04.
          </div>
        </div>
      </body>
      </html>
    `}formatCheckData(e){return e?Array.isArray(e)&&e.length>0&&typeof e[0]=="object"&&e[0].hasOwnProperty("label")?e.map(t=>{let i=t.checked?"\u2705 CONFORME":"\u274C NON CONFORME";return`<span class="data-item"><span class="data-label">${t.label}:</span> <span class="data-value">${i}</span></span>`}).join(" "):Object.entries(e).map(([t,i])=>{let o=t.replace(/([A-Z])/g," $1").replace(/^./,s=>s.toUpperCase()),r=i;return i===!0&&(r="\u2705 CONFORME"),i===!1&&(r="\u274C NON CONFORME"),Array.isArray(i)&&(r=i.join(", ")),`<span class="data-item"><span class="data-label">${o}:</span> <span class="data-value">${r}</span></span>`}).join(" "):"Nessun dato"}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-dashboard-view"]],decls:59,vars:11,consts:[[1,"space-y-6","animate-fade-in"],[1,"bg-gradient-to-br","from-slate-900","via-slate-800","to-slate-900","p-8","rounded-3xl","shadow-2xl","border","border-slate-700","relative","overflow-hidden"],[1,"absolute","inset-0","bg-grid-slate-700/25","[mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))]"],[1,"relative","z-10"],[1,"flex","flex-col","lg:flex-row","justify-between","items-start","lg:items-center","gap-4"],[1,"flex","items-center","gap-3","mb-2"],[1,"w-12","h-12","rounded-full","bg-gradient-to-br","from-indigo-500","to-purple-600","flex","items-center","justify-center","shadow-lg"],[1,"fa-solid","fa-shield-halved","text-white","text-xl"],[1,"text-3xl","font-black","text-white"],[1,"text-slate-300","text-sm"],[1,"mt-1","inline-flex","items-center","bg-indigo-500/30","px-2","py-0.5","rounded","text-xs","text-indigo-200","border","border-indigo-500/50"],[1,"flex","items-center","gap-3"],[1,"bg-white/10","backdrop-blur-sm","px-4","py-2","rounded-xl","border","border-white/20"],[1,"text-xs","text-slate-300","uppercase","font-bold"],[1,"text-lg","font-bold","text-white"],[1,"bg-emerald-500/20","backdrop-blur-sm","px-4","py-2","rounded-xl","border","border-emerald-400/30"],[1,"text-xs","text-emerald-300","uppercase","font-bold"],[1,"text-lg","font-bold","text-emerald-400","flex","items-center"],[1,"fa-solid","fa-circle-check","mr-2"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-slate-200","overflow-hidden"],[1,"bg-gradient-to-r","from-slate-50","to-slate-100","px-6","py-4","border-b","border-slate-200","flex","items-center","justify-between"],[1,"w-10","h-10","rounded-full","bg-indigo-100","flex","items-center","justify-center"],[1,"fa-solid","fa-user-clock","text-indigo-600"],[1,"font-bold","text-slate-800","text-lg"],[1,"text-xs","text-slate-500"],[1,"px-4","py-2","bg-slate-900","text-white","rounded-lg","hover:bg-slate-800","transition-colors","text-sm","font-bold"],[1,"p-6"],[1,"text-center","py-12"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-4"],["id","alerts-section",1,"bg-white","rounded-2xl","shadow-lg","border","border-slate-200","overflow-hidden"],[1,"bg-gradient-to-r","from-red-50","to-orange-50","px-6","py-4","border-b","border-red-100","flex","items-center","justify-between"],[1,"w-10","h-10","rounded-full","bg-red-100","flex","items-center","justify-center"],[1,"fa-solid","fa-triangle-exclamation","text-red-600"],[1,"bg-red-500","text-white","px-3","py-1","rounded-full","text-xs","font-bold"],[1,"space-y-3"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],[1,"fa-solid","fa-filter","mr-1"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-gradient-to-br","from-blue-500","to-blue-600","p-6","rounded-2xl","shadow-xl","text-white","relative","overflow-hidden","group","transition-transform"],[1,"absolute","-right-4","-top-4","w-24","h-24","bg-white/10","rounded-full","blur-2xl"],[1,"flex","items-center","justify-between","mb-3"],[1,"fa-solid","fa-clipboard-check","text-3xl","opacity-80"],[1,"bg-white/20","px-2","py-1","rounded-full","text-xs","font-bold"],[1,"text-sm","opacity-90","font-medium"],[1,"text-4xl","font-black","mt-2"],[1,"mt-3","h-2","bg-white/20","rounded-full","overflow-hidden"],[1,"h-full","bg-white","rounded-full","transition-all"],[1,"bg-gradient-to-br","from-amber-500","to-orange-600","p-6","rounded-2xl","shadow-xl","text-white","relative","overflow-hidden","group","cursor-pointer","hover:scale-105","transition-transform",3,"click"],[1,"fa-solid","fa-bell","text-3xl","opacity-80","animate-pulse"],[1,"bg-red-500","px-2","py-1","rounded-full","text-xs","font-bold","animate-bounce"],[1,"text-xs","mt-2","opacity-80"],[1,"bg-gradient-to-br","from-emerald-500","to-teal-600","p-6","rounded-2xl","shadow-xl","text-white","relative","overflow-hidden","group","transition-transform",3,"click"],[1,"fa-solid","fa-users","text-3xl","opacity-80"],[1,"bg-gradient-to-br","from-purple-500","to-pink-600","p-6","rounded-2xl","shadow-xl","text-white","relative","overflow-hidden","group","cursor-pointer","hover:scale-105","transition-transform"],[1,"fa-solid","fa-chart-line","text-3xl","opacity-80"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","bg-white","rounded-2xl","shadow-lg","border","border-slate-200","overflow-hidden"],[1,"px-6","py-4","border-b","border-slate-100","bg-slate-50/50","flex","items-center","justify-between"],[1,"font-bold","text-slate-800","flex","items-center","gap-2"],[1,"fa-solid","fa-list-check","text-indigo-500"],[1,"text-[10px]","font-black","px-2","py-1","rounded","bg-indigo-100","text-indigo-700","uppercase","tracking-wider"],[1,"p-6","grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"flex","justify-between","items-end"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-tighter"],[1,"text-sm","font-black","text-slate-700"],[1,"text-right"],[1,"text-xs","font-black","text-slate-900"],[1,"h-2","bg-slate-100","rounded-full","overflow-hidden"],[1,"h-full","bg-blue-500","transition-all","duration-1000"],[1,"flex","items-center","justify-between"],[1,"text-[10px]","font-bold","px-2","py-0.5","rounded"],[1,"space-y-3","border-l","border-slate-100","pl-6"],[1,"h-full","bg-indigo-500","transition-all","duration-1000"],[1,"h-full","bg-purple-500","transition-all","duration-1000"],[1,"px-6","py-3","bg-slate-50","border-t","border-slate-100","flex","items-center","gap-2","text-[10px]","text-slate-500"],[1,"fa-solid","fa-circle-info","text-indigo-400"],[1,"bg-gradient-to-br","from-slate-800","to-slate-900","rounded-2xl","shadow-lg","border","border-slate-700","overflow-hidden","relative","group"],[1,"absolute","inset-0","bg-blue-600/10","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"px-6","py-4","border-b","border-slate-700","flex","items-center","justify-between","bg-slate-800/50"],[1,"font-bold","text-white","flex","items-center","gap-2"],[1,"fa-solid","fa-envelope-open-text","text-blue-400"],[1,"text-[10px]","font-bold","px-2","py-1","rounded","bg-blue-500/20","text-blue-300","border","border-blue-500/30","uppercase","tracking-tighter"],[1,"p-6","relative","z-10"],[1,"text-xs","text-slate-400","mb-4","leading-relaxed"],[1,"text-blue-400","font-bold"],[1,"space-y-3","animate-pulse"],[1,"flex","justify-between","items-center","text-[10px]","text-blue-300","uppercase","font-bold"],[1,"h-1.5","bg-slate-700","rounded-full","overflow-hidden"],[1,"h-full","bg-blue-500","w-[75%]","rounded-full","transition-all","duration-700"],[1,"flex","flex-col","gap-4"],[1,"w-full","py-4","bg-gradient-to-r","from-blue-600","to-indigo-700","hover:from-blue-500","hover:to-indigo-600","text-white","rounded-2xl","font-black","text-sm","shadow-xl","transition-all","active:scale-95","flex","items-center","justify-center","gap-3","border","border-white/20",3,"click"],[1,"fa-solid","fa-paper-plane","text-lg"],[1,"w-full","py-4","bg-white","hover:bg-slate-50","text-slate-900","rounded-2xl","font-black","text-sm","shadow-lg","transition-all","active:scale-95","flex","items-center","justify-center","gap-3","border-2","border-slate-200",3,"click"],[1,"fa-solid","fa-print","text-lg","text-blue-600"],[1,"mt-4","flex","items-center","gap-2","text-[10px]","text-slate-500","justify-center","bg-slate-800/20","py-2","rounded-lg"],[1,"fa-solid","fa-circle-info","text-blue-400"],[1,"text-slate-300"],[1,"px-4","py-2","bg-slate-900","text-white","rounded-lg","hover:bg-slate-800","transition-colors","text-sm","font-bold",3,"click"],[1,"fa-solid","fa-users-gear","mr-2"],[1,"fa-solid","fa-filter-circle-xmark","text-slate-300","text-5xl","mb-4"],[1,"text-slate-400","font-medium"],[1,"group","relative","bg-slate-50","hover:bg-white","border-2","rounded-xl","p-4","transition-all","cursor-pointer",3,"border-emerald-200","border-orange-200","border-slate-200"],[1,"group","relative","bg-slate-50","hover:bg-white","border-2","rounded-xl","p-4","transition-all","cursor-pointer",3,"click"],[1,"absolute","top-3","right-3"],[1,"w-3","h-3","bg-emerald-500","rounded-full","animate-pulse"],[1,"w-3","h-3","bg-orange-500","rounded-full","animate-pulse"],[1,"w-3","h-3","bg-slate-300","rounded-full"],[1,"flex","items-start","gap-3"],[1,"w-12","h-12","rounded-full","border-2","border-white","shadow-md",3,"src"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","truncate"],[1,"mt-3","space-y-2"],[1,"flex","items-center","justify-between","text-xs"],[1,"text-slate-600"],[1,"font-bold","text-emerald-600"],[1,"mt-3","pt-3","border-t","border-slate-200","flex","items-center","justify-between"],[1,"text-[10px]","text-slate-400"],[1,"text-[10px]","font-medium","text-slate-600"],[1,"absolute","inset-0","bg-indigo-600/0","group-hover:bg-indigo-600/5","rounded-xl","transition-colors","pointer-events-none"],[1,"font-bold","text-orange-600"],[1,"fa-solid","fa-check-circle","text-emerald-300","text-5xl","mb-4"],[1,"flex","items-start","gap-4","p-4","rounded-xl","border-2","transition-all","hover:shadow-md",3,"bg-red-50","border-red-200","bg-orange-50","border-orange-200","bg-blue-50","border-blue-200"],[1,"flex","items-start","gap-4","p-4","rounded-xl","border-2","transition-all","hover:shadow-md"],[1,"flex-shrink-0","mt-1"],[1,"fa-solid","fa-circle-xmark","text-red-600","text-xl"],[1,"fa-solid","fa-triangle-exclamation","text-orange-600","text-xl"],[1,"fa-solid","fa-info-circle","text-blue-600","text-xl"],[1,"flex","items-start","justify-between","gap-3"],[1,"flex-1"],[1,"font-bold","text-slate-800","mb-1"],[1,"text-sm","text-slate-600","mb-2"],[1,"flex","items-center","gap-2","text-xs","text-slate-500"],[1,"flex-shrink-0","px-3","py-1.5","bg-white","border-2","border-slate-300","rounded-lg","hover:border-indigo-500","hover:bg-indigo-50","transition-all","text-xs","font-bold","text-slate-700","hover:text-indigo-700"],[1,"fa-solid","fa-user"],[1,"flex-shrink-0","px-3","py-1.5","bg-white","border-2","border-slate-300","rounded-lg","hover:border-indigo-500","hover:bg-indigo-50","transition-all","text-xs","font-bold","text-slate-700","hover:text-indigo-700",3,"click"],[1,"fa-solid","fa-arrow-right","mr-1"],[1,"group","bg-white","hover:bg-emerald-50","p-6","rounded-xl","border-2","border-slate-200","hover:border-emerald-400","transition-all","text-left",3,"click"],[1,"w-12","h-12","rounded-full","bg-emerald-100","group-hover:bg-emerald-500","flex","items-center","justify-center","mb-3","transition-colors"],[1,"fa-solid","fa-list-check","text-emerald-600","group-hover:text-white","text-xl","transition-colors"],[1,"group","bg-white","hover:bg-amber-50","p-6","rounded-xl","border-2","border-slate-200","hover:border-amber-400","transition-all","text-left",3,"click"],[1,"w-12","h-12","rounded-full","bg-amber-100","group-hover:bg-amber-500","flex","items-center","justify-center","mb-3","transition-colors"],[1,"fa-solid","fa-calculator","text-amber-600","group-hover:text-white","text-xl","transition-colors"],[1,"group","bg-white","hover:bg-blue-50","p-6","rounded-xl","border-2","border-slate-200","hover:border-blue-400","transition-all","text-left",3,"click"],[1,"w-12","h-12","rounded-full","bg-blue-100","group-hover:bg-blue-500","flex","items-center","justify-center","mb-3","transition-colors"],[1,"fa-solid","fa-comments","text-blue-600","group-hover:text-white","text-xl","transition-colors"],[1,"group","bg-white","hover:bg-purple-50","p-6","rounded-xl","border-2","border-slate-200","hover:border-purple-400","transition-all","text-left",3,"click"],[1,"w-12","h-12","rounded-full","bg-purple-100","group-hover:bg-purple-500","flex","items-center","justify-center","mb-3","transition-colors"],[1,"fa-solid","fa-users-gear","text-purple-600","group-hover:text-white","text-xl","transition-colors"],[1,"fa-solid","fa-clipboard-check","text-blue-600","group-hover:text-white","text-xl","transition-colors"],[1,"group","bg-white","hover:bg-indigo-50","p-6","rounded-xl","border-2","border-slate-200","hover:border-indigo-400","transition-all","text-left",3,"click"],[1,"w-12","h-12","rounded-full","bg-indigo-100","group-hover:bg-indigo-500","flex","items-center","justify-center","mb-3","transition-colors"],[1,"fa-solid","fa-briefcase","text-indigo-600","group-hover:text-white","text-xl","transition-colors"],[1,"fa-solid","fa-hourglass-end","text-purple-600","group-hover:text-white","text-xl","transition-colors"],[1,"fa-solid","fa-clock-rotate-left","text-emerald-600","group-hover:text-white","text-xl","transition-colors"]],template:function(t,i){if(t&1&&(h(0,"div",0)(1,"div",1),b(2,"div",2),h(3,"div",3)(4,"div",4)(5,"div")(6,"div",5)(7,"div",6),b(8,"i",7),v(),h(9,"div")(10,"h2",8),p(11,"Centro di Controllo HACCP"),v(),h(12,"p",9),p(13),v(),T(14,Rb,3,0,"div",10),v()()(),h(15,"div",11)(16,"div",12)(17,"div",13),p(18,"Data Selezionata"),v(),h(19,"div",14),p(20),v()(),h(21,"div",15)(22,"div",16),p(23,"Sistema"),v(),h(24,"div",17),b(25,"i",18),p(26," Operativo "),v()()()()()(),T(27,Vb,125,59),h(28,"div",19)(29,"div",20)(30,"div",11)(31,"div",21),b(32,"i",22),v(),h(33,"div")(34,"h3",23),p(35,"Monitoraggio Unit\xE0 Operative"),v(),h(36,"p",24),p(37),v()()(),T(38,Lb,3,0,"button",25),v(),h(39,"div",26),T(40,Ub,4,0,"div",27)(41,qb,3,0,"div",28),v()(),h(42,"div",29)(43,"div",30)(44,"div",11)(45,"div",31),b(46,"i",32),v(),h(47,"div")(48,"h3",23),p(49,"Avvisi di Sistema & Anomalie"),v(),h(50,"p",24),p(51),v()()(),T(52,jb,2,1,"span",33),v(),h(53,"div",26),T(54,Wb,4,0,"div",27)(55,ew,3,0,"div",34),v()(),h(56,"div",35),T(57,tw,28,0)(58,nw,28,0),v()()),t&2){let o;m(13),k("Amministrazione ",(o=i.state.currentUser())==null?null:o.name),m(),M(i.state.filterCollaboratorId()?14:-1),m(6),V(i.getCurrentDate()),m(7),M(i.state.isAdmin()?27:-1),m(10),k("Stato attivit\xE0 per il giorno ",i.getCurrentDate()),m(),M(i.state.isAdmin()&&!i.state.filterCollaboratorId()?38:-1),m(2),M(i.collaboratorActivities().length===0?40:41),m(11),k("Notifiche per l'unit\xE0 selezionata in data ",i.getCurrentDate()),m(),M(i.systemAlerts().length>0?52:-1),m(2),M(i.systemAlerts().length===0?54:55),m(3),M(i.state.isAdmin()?57:58)}},dependencies:[Z],styles:[`.bg-grid-slate-700/25[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgb(51 65 85 / 0.25)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e")}`]})}};var iw=(n,e)=>e.id;function ow(n,e){if(n&1&&(h(0,"span",48),p(1),v()),n&2){let t=C();m(),k(" ",t.state.unreadMessagesCount()," NUOVI ")}}function rw(n,e){n&1&&(h(0,"div",50)(1,"div",64),b(2,"i",65),v(),h(3,"p",66),p(4,"Nessun nuovo messaggio dall'amministrazione."),v()())}function sw(n,e){if(n&1){let t=H();h(0,"div",70),U("click",function(){I(t);let o=C(2);return S(o.state.setModule("messages"))}),h(1,"div",71)(2,"h4",72),p(3),v(),h(4,"span",73),p(5),ie(6,"date"),v()(),h(7,"p",74),p(8),v()()}if(n&2){let t=e.$implicit;m(3),V(t.subject),m(2),V(oe(6,3,t.timestamp,"HH:mm")),m(3),V(t.content)}}function aw(n,e){if(n&1){let t=H();h(0,"div",67),j(1,sw,9,6,"div",68,iw),v(),h(3,"button",69),U("click",function(){I(t);let o=C();return S(o.state.setModule("messages"))}),p(4," VEDI TUTTI I MESSAGGI "),v()}if(n&2){let t=C();m(),W(t.state.getMessagesForCurrentUser().slice(0,3))}}var ga=class n{constructor(){this.state=$(ee);this.isPhaseComplete=e=>{let t=this.state.checklistRecords(),i=this.state.filterDate(),o=this.state.currentUser()?.id;return t.some(r=>r.moduleId===e&&r.date===i&&r.userId===o)};this.completedPhasesCount=z(()=>["pre-op-checklist","operative-checklist","post-op-checklist"].filter(t=>this.isPhaseComplete(t)).length);this.lastRecordTime=z(()=>{let e=this.state.checklistRecords(),t=this.state.filterDate(),i=this.state.currentUser()?.id,o=e.filter(s=>s.date===t&&s.userId===i);if(o.length===0)return"Inattivo";let r=o.reduce((s,a)=>new Date(a.timestamp)>new Date(s.timestamp)?a:s);return new Date(r.timestamp).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})})}getCurrentDay(){return new Date().toLocaleDateString("it-IT",{weekday:"long"}).toUpperCase()}getCurrentDateFormatted(){return new Date().toLocaleDateString("it-IT",{day:"numeric",month:"long",year:"numeric"})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-operator-dashboard-view"]],decls:120,vars:30,consts:[[1,"space-y-8","animate-fade-in","p-2","md:p-4"],[1,"bg-gradient-to-br","from-slate-900","via-indigo-950","to-slate-900","p-8","md:p-12","rounded-[3rem]","shadow-2xl","border","border-white/10","relative","overflow-hidden"],[1,"absolute","top-[-20%]","right-[-10%]","w-[60%]","h-[150%]","bg-blue-500/10","rounded-full","blur-[120px]","animate-pulse","pointer-events-none"],[1,"absolute","bottom-[-10%]","left-[-5%]","w-[40%]","h-[100%]","bg-emerald-500/10","rounded-full","blur-[80px]","pointer-events-none"],[1,"relative","z-10","flex","flex-col","lg:flex-row","justify-between","items-center","gap-8"],[1,"flex","flex-col","md:flex-row","items-center","gap-8"],[1,"relative","group"],[1,"absolute","-inset-1","bg-gradient-to-tr","from-blue-600","to-emerald-400","rounded-full","blur","opacity-75","group-hover:opacity-100","transition","duration-1000","group-hover:duration-200","animate-tilt"],[1,"relative","w-24","h-24","rounded-full","border-4","border-slate-900","shadow-2xl","object-cover",3,"src"],[1,"absolute","bottom-1","right-1","w-6","h-6","bg-emerald-500","border-4","border-slate-900","rounded-full"],[1,"text-center","md:text-left"],[1,"text-4xl","md:text-5xl","font-black","text-white","tracking-tight","mb-2"],[1,"bg-clip-text","text-transparent","bg-gradient-to-r","from-blue-400","to-emerald-400"],[1,"flex","flex-wrap","justify-center","md:justify-start","gap-3","mt-4"],[1,"px-4","py-1.5","bg-white/5","backdrop-blur-md","rounded-2xl","text-[10px]","font-black","text-blue-300","border","border-white/10","uppercase","tracking-[0.2em]"],[1,"px-4","py-1.5","bg-emerald-500/10","backdrop-blur-md","rounded-2xl","text-[10px]","font-black","text-emerald-400","border","border-emerald-500/20","uppercase","tracking-[0.2em]"],[1,"bg-white/5","backdrop-blur-2xl","p-8","rounded-[2rem]","border","border-white/10","flex","items-center","gap-10","shadow-2xl"],[1,"text-center"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-[0.3em]","mb-2"],[1,"text-white","text-2xl","font-black"],[1,"w-px","h-12","bg-white/10"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-8"],[1,"group","relative","bg-white","p-10","rounded-[3rem]","shadow-xl","border","border-slate-100","hover:shadow-2xl","hover:-translate-y-2","transition-all","duration-500","cursor-pointer","overflow-hidden",3,"click"],[1,"absolute","-right-4","-top-4","w-32","h-32","bg-blue-500/5","rounded-full","blur-3xl","group-hover:bg-blue-500/10","transition-colors"],[1,"relative","z-10"],[1,"w-16","h-16","rounded-2xl","bg-blue-50","flex","items-center","justify-center","mb-8","group-hover:bg-blue-600","group-hover:rotate-6","transition-all","duration-500"],[1,"fa-solid","fa-sun","text-2xl","text-blue-600","group-hover:text-white"],[1,"text-2xl","font-black","text-slate-800","mb-3"],[1,"text-slate-500","text-sm","leading-relaxed","mb-8"],[1,"pt-6","border-t","border-slate-100"],[1,"flex","justify-between","items-end","mb-3"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-widest"],[1,"text-xs","font-black"],[1,"h-2","bg-slate-100","rounded-full","overflow-hidden"],[1,"h-full","bg-gradient-to-r","from-blue-600","to-indigo-600","transition-all","duration-1000"],[1,"absolute","-right-4","-top-4","w-32","h-32","bg-emerald-500/5","rounded-full","blur-3xl","group-hover:bg-emerald-500/10","transition-colors"],[1,"w-16","h-16","rounded-2xl","bg-emerald-50","flex","items-center","justify-center","mb-8","group-hover:bg-emerald-500","group-hover:-rotate-6","transition-all","duration-500"],[1,"fa-solid","fa-briefcase","text-2xl","text-emerald-600","group-hover:text-white"],[1,"h-full","bg-gradient-to-r","from-emerald-500","to-teal-500","transition-all","duration-1000"],[1,"absolute","-right-4","-top-4","w-32","h-32","bg-purple-500/5","rounded-full","blur-3xl","group-hover:bg-purple-500/10","transition-colors"],[1,"w-16","h-16","rounded-2xl","bg-purple-50","flex","items-center","justify-center","mb-8","group-hover:bg-purple-600","group-hover:scale-110","transition-all","duration-500"],[1,"fa-solid","fa-moon","text-2xl","text-purple-600","group-hover:text-white"],[1,"h-full","bg-gradient-to-r","from-purple-600","to-pink-600","transition-all","duration-1000"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","bg-white","rounded-[3rem]","shadow-xl","border","border-slate-100","overflow-hidden"],[1,"px-10","py-8","border-b","border-slate-50","bg-slate-50/50","flex","items-center","justify-between"],[1,"text-xl","font-black","text-slate-800","flex","items-center","gap-3"],[1,"fa-solid","fa-comments","text-indigo-500"],[1,"px-3","py-1","bg-red-500","text-white","text-[10px]","font-black","rounded-lg","animate-pulse"],[1,"p-10"],[1,"text-center","py-12"],[1,"bg-indigo-900","rounded-[3rem]","shadow-xl","p-10","text-white","relative","overflow-hidden","flex","flex-col","justify-between"],[1,"absolute","-right-20","-bottom-20","w-64","h-64","bg-white/5","rounded-full","blur-3xl","pointer-events-none"],[1,"text-xl","font-black","mb-6","flex","items-center","gap-3"],[1,"fa-solid","fa-chart-simple","text-blue-400"],[1,"space-y-8","mt-10"],[1,"flex","items-center","gap-6"],[1,"w-14","h-14","rounded-2xl","bg-white/10","backdrop-blur-md","flex","items-center","justify-center","shadow-lg","border","border-white/10"],[1,"fa-solid","fa-check-double","text-emerald-400"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-widest","mb-1"],[1,"text-2xl","font-black","text-white"],[1,"fa-solid","fa-clock","text-blue-400"],[1,"group","w-full","mt-12","py-5","bg-white","text-indigo-950","rounded-2xl","font-black","text-xs","tracking-[0.2em]","shadow-xl","hover:bg-blue-50","transition-all","flex","items-center","justify-center","gap-4","active:scale-95",3,"click"],[1,"fa-solid","fa-clock-rotate-left","text-sm","group-hover:rotate-[-45deg]","transition-transform"],[1,"w-20","h-20","bg-slate-50","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"fa-solid","fa-inbox","text-slate-200","text-3xl"],[1,"text-slate-400","font-medium","tracking-tight"],[1,"space-y-4"],[1,"p-6","rounded-3xl","border","border-slate-100","hover:bg-slate-50","transition-colors","cursor-pointer","group"],[1,"w-full","mt-6","py-4","text-xs","font-black","text-indigo-600","hover:bg-indigo-50","rounded-2xl","transition-colors","tracking-[0.2em]","border","border-indigo-100",3,"click"],[1,"p-6","rounded-3xl","border","border-slate-100","hover:bg-slate-50","transition-colors","cursor-pointer","group",3,"click"],[1,"flex","justify-between","items-start","mb-2"],[1,"font-bold","text-slate-800","group-hover:text-indigo-600","transition-colors"],[1,"text-[10px]","text-slate-400","uppercase","font-black"],[1,"text-sm","text-slate-500","line-clamp-1","truncate"]],template:function(t,i){if(t&1&&(h(0,"div",0)(1,"div",1),b(2,"div",2)(3,"div",3),h(4,"div",4)(5,"div",5)(6,"div",6),b(7,"div",7)(8,"img",8)(9,"div",9),v(),h(10,"div",10)(11,"h2",11),p(12," Bentornato, "),h(13,"span",12),p(14),v()(),h(15,"div",13)(16,"span",14),p(17),v(),h(18,"span",15),p(19," Sistema Online "),v()()()(),h(20,"div",16)(21,"div",17)(22,"p",18),p(23,"Giorno"),v(),h(24,"p",19),p(25),v()(),b(26,"div",20),h(27,"div",17)(28,"p",18),p(29,"Data"),v(),h(30,"p",19),p(31),v()()()()(),h(32,"div",21)(33,"div",22),U("click",function(){return i.state.setModule("pre-op-checklist")}),b(34,"div",23),h(35,"div",24)(36,"div",25),b(37,"i",26),v(),h(38,"h3",27),p(39,"Fase Pre-Operativa"),v(),h(40,"p",28),p(41,"Controlli essenziali prima dell'inizio del turno e apertura locali."),v(),h(42,"div",29)(43,"div",30)(44,"span",31),p(45,"Progresso"),v(),h(46,"span",32),p(47),v()(),h(48,"div",33),b(49,"div",34),v()()()(),h(50,"div",22),U("click",function(){return i.state.setModule("operative-checklist")}),b(51,"div",35),h(52,"div",24)(53,"div",36),b(54,"i",37),v(),h(55,"h3",27),p(56,"Fase Operativa"),v(),h(57,"p",28),p(58,"Monitoraggio continuo dei processi durante il servizio e la produzione."),v(),h(59,"div",29)(60,"div",30)(61,"span",31),p(62,"Progresso"),v(),h(63,"span",32),p(64),v()(),h(65,"div",33),b(66,"div",38),v()()()(),h(67,"div",22),U("click",function(){return i.state.setModule("post-op-checklist")}),b(68,"div",39),h(69,"div",24)(70,"div",40),b(71,"i",41),v(),h(72,"h3",27),p(73,"Fase Post-Operativa"),v(),h(74,"p",28),p(75,"Pulizia, sanificazione e chiusura sicura dell'unit\xE0 produttiva."),v(),h(76,"div",29)(77,"div",30)(78,"span",31),p(79,"Progresso"),v(),h(80,"span",32),p(81),v()(),h(82,"div",33),b(83,"div",42),v()()()()(),h(84,"div",43)(85,"div",44)(86,"div",45)(87,"h3",46),b(88,"i",47),p(89," Comunicazioni Amministrative "),v(),T(90,ow,2,1,"span",48),v(),h(91,"div",49),T(92,rw,5,0,"div",50)(93,aw,5,0),v()(),h(94,"div",51),b(95,"div",52),h(96,"div")(97,"h3",53),b(98,"i",54),p(99," Status Odierno "),v(),h(100,"div",55)(101,"div",56)(102,"div",57),b(103,"i",58),v(),h(104,"div")(105,"p",59),p(106,"Fasi Completate"),v(),h(107,"p",60),p(108),v()()(),h(109,"div",56)(110,"div",57),b(111,"i",61),v(),h(112,"div")(113,"p",59),p(114,"Ultima Registrazione"),v(),h(115,"p",60),p(116),v()()()()(),h(117,"button",62),U("click",function(){return i.state.setModule("history")}),b(118,"i",63),p(119," VEDI STORICO REGISTRI "),v()()()()),t&2){let o,r,s;m(8),pt("src",(o=i.state.currentUser())==null?null:o.avatar,Xe),m(6),V((r=i.state.currentUser())==null?null:r.name),m(3),k(" ",((s=i.state.currentUser())==null?null:s.department)||"Settore Operativo"," "),m(8),V(i.getCurrentDay()),m(6),V(i.getCurrentDateFormatted()),m(15),N("text-emerald-500",i.isPhaseComplete("pre-op-checklist"))("text-slate-400",!i.isPhaseComplete("pre-op-checklist")),m(),k(" ",i.isPhaseComplete("pre-op-checklist")?"COMPLETATO":"DA COMPILARE"," "),m(2),Me("width",i.isPhaseComplete("pre-op-checklist")?100:0,"%"),m(14),N("text-emerald-500",i.isPhaseComplete("operative-checklist"))("text-slate-400",!i.isPhaseComplete("operative-checklist")),m(),k(" ",i.isPhaseComplete("operative-checklist")?"COMPLETATO":"DA COMPILARE"," "),m(2),Me("width",i.isPhaseComplete("operative-checklist")?100:0,"%"),m(14),N("text-emerald-500",i.isPhaseComplete("post-op-checklist"))("text-slate-400",!i.isPhaseComplete("post-op-checklist")),m(),k(" ",i.isPhaseComplete("post-op-checklist")?"COMPLETATO":"DA COMPILARE"," "),m(2),Me("width",i.isPhaseComplete("post-op-checklist")?100:0,"%"),m(7),M(i.state.unreadMessagesCount()>0?90:-1),m(2),M(i.state.getMessagesForCurrentUser().length===0?92:93),m(16),k("",i.completedPhasesCount()," su 3"),m(8),V(i.lastRecordTime())}},dependencies:[Z,ge],styles:["@keyframes _ngcontent-%COMP%_tilt{0%,to{transform:rotate(-1deg)}50%{transform:rotate(1deg)}}.animate-tilt[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_tilt 5s linear infinite}"]})}};var lw=(n,e)=>e.client.id,dw=(n,e)=>e.id;function cw(n,e){if(n&1&&(p(0),ie(1,"date")),n&2){let t,i=C();re(" Report per: ",(t=i.selectedClient())==null?null:t.name," - Data: ",oe(1,2,i.state.filterDate(),"dd/MM/yyyy")," ")}}function uw(n,e){if(n&1&&(p(0),ie(1,"date")),n&2){let t=C();k(" Panoramica Generale - Tutte le Aziende - Data: ",oe(1,1,t.state.filterDate(),"dd/MM/yyyy")," ")}}function fw(n,e){n&1&&(h(0,"div",15),p(1," SERVIZIO SOSPESO "),v())}function pw(n,e){n&1&&(h(0,"div",38),b(1,"i",40),h(2,"p",41),p(3,"Nessun operatore configurato"),v()())}function mw(n,e){if(n&1&&(h(0,"div",42)(1,"div",43)(2,"div")(3,"h4",44),p(4),v(),h(5,"p",45),p(6),v()(),h(7,"div",46)(8,"div",47),p(9),v(),h(10,"div",48),p(11,"Controlli"),v()()(),h(12,"div",49),b(13,"div",50),v(),h(14,"div",51)(15,"span",52),p(16,"Ultimo accesso"),v(),h(17,"span",53),p(18),v()()()),n&2){let t=e.$implicit;m(4),V(t.name),m(2),V(t.department),m(2),N("text-emerald-600",t.checksCompleted===t.checksTotal)("text-orange-500",t.checksCompleted<t.checksTotal),m(),re(" ",t.checksCompleted,"/",t.checksTotal," "),m(4),Me("width",t.checksCompleted/t.checksTotal*100,"%"),N("bg-emerald-500",t.checksCompleted===t.checksTotal)("bg-orange-500",t.checksCompleted<t.checksTotal),m(5),V(t.lastActivity)}}function hw(n,e){if(n&1&&(h(0,"div",39),j(1,mw,19,15,"div",42,dw),v()),n&2){let t=C(2).$implicit;m(),W(t.users)}}function gw(n,e){if(n&1&&(h(0,"div",37),T(1,pw,4,0,"div",38)(2,hw,3,0,"div",39),v()),n&2){let t=C().$implicit;m(),M(t.users.length===0?1:2)}}function vw(n,e){if(n&1){let t=H();h(0,"div",13)(1,"div",14),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCompany(o.client.id))}),T(2,fw,2,0,"div",15),h(3,"div",16)(4,"div",17)(5,"div",18),b(6,"i",19),v(),h(7,"div",20)(8,"h3",21),p(9),h(10,"span",22),p(11),v()(),h(12,"div",23)(13,"div",24)(14,"div",25)(15,"span",26),p(16,"Completamento"),v(),h(17,"span",27),p(18),ie(19,"number"),v()(),h(20,"div",28),b(21,"div",29),v()(),h(22,"span",30)(23,"span",31),p(24),v(),p(25),v()()(),h(26,"div",32),b(27,"i",33),v()(),h(28,"div",34),U("click",function(o){return I(t),S(o.stopPropagation())}),h(29,"button",35),U("click",function(){let o=I(t).$implicit,r=C();return S(r.printReport(o))}),b(30,"i",36),p(31," Stampa Report "),v()()()(),T(32,gw,3,1,"div",37),v()}if(n&2){let t=e.$implicit,i=C().isCompanyExpanded(t.client.id),o=t.completedChecks/t.totalChecks*100||0;N("ring-2",i)("ring-blue-100",i),m(),N("border-l-blue-500",i)("border-l-transparent",!i)("bg-red-50",t.client.suspended),m(),M(t.client.suspended?2:-1),m(),N("mt-6",t.client.suspended),m(6),k(" ",t.client.name," "),m(2),k(" ",t.users.length," Operatori "),m(6),N("text-emerald-600",o===100)("text-orange-500",o<100),m(),k(" ",oe(19,31,o,"1.0-0"),"% "),m(3),Me("width",o,"%"),N("bg-emerald-500",o===100)("bg-orange-500",o<100),m(3),V(t.completedChecks),m(),k(" / ",t.totalChecks," "),m(),N("rotate-180",i),m(6),M(i?32:-1)}}function _w(n,e){n&1&&(h(0,"div",11),b(1,"i",54),h(2,"p",55),p(3,"Nessuna azienda configurata nel sistema"),v()())}var va=class n{constructor(){this.state=$(ee);this.expandedCompanyIds=B(new Set);this.selectedClient=z(()=>{let e=this.state.filterCollaboratorId();if(!e)return null;let t=this.state.systemUsers().find(i=>i.id===e);return t?this.state.clients().find(i=>i.id===t.clientId):null});this.companyReports=z(()=>{let e=this.selectedClient();return(e?[e]:this.state.clients()).map(i=>{let o=this.state.systemUsers().filter(g=>g.clientId===i.id),r=o.map(g=>g.id),s=this.state.checklistRecords().filter(g=>r.includes(g.userId)&&g.date===this.state.filterDate()),a=o.filter(g=>g.role!=="ADMIN").map(g=>{let x=s.filter(E=>E.userId===g.id);return{id:g.id,name:g.name,department:g.department||"Generale",checksCompleted:x.length,checksTotal:14,lastActivity:x.length>0?new Date(x[x.length-1].timestamp).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}):"Nessuna"}}),c=a.reduce((g,x)=>g+x.checksTotal,0),u=a.reduce((g,x)=>g+x.checksCompleted,0),f=s.map(g=>{let x=o.find(w=>w.id===g.userId),E=this.state.menuItems.find(w=>w.id===g.moduleId);return{userName:x?.name||"Utente",moduleName:E?.label||g.moduleId,timestamp:g.timestamp,data:g.data}});return{client:i,users:a,totalChecks:c,completedChecks:u,detailedChecks:f}})})}isCompanyExpanded(e){return this.expandedCompanyIds().has(e)}toggleCompany(e){this.expandedCompanyIds.update(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})}getRandomTime(){return`${Math.floor(Math.random()*12)+1}h fa`}printReport(e){let t=this.generatePrintHTML(e),i=window.open("","_blank");i&&(i.document.write(t),i.document.close(),i.focus(),setTimeout(()=>{i.print(),i.close()},250))}generatePrintHTML(e){let t=new Date(this.state.filterDate()).toLocaleDateString("it-IT",{day:"2-digit",month:"long",year:"numeric"}),i=e.client.logo||this.state.currentLogo();return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Autocontrollo HACCP - ${e.client.name}</title>
        <style>
          @page { size: A4; margin: 1.5cm; }
          body { font-family: 'Segoe UI', Arial, sans-serif; color: #1e293b; line-height: 1.5; margin: 0; padding: 0; }
          .a4-container { width: 100%; }
          .header { border-bottom: 2px solid #0f172a; padding-bottom: 20px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: start; }
          .logo-container { display: flex; align-items: center; gap: 15px; }
          .logo-img { width: 60px; height: 60px; border-radius: 12px; object-fit: contain; }
          .brand-title { font-size: 24px; font-weight: 800; color: #0f172a; }
          .header-meta { text-align: right; font-size: 12px; color: #64748b; }
          
          .report-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; background: #f8fafc; padding: 20px; border-radius: 15px; border: 1px solid #e2e8f0; }
          .info-block h3 { font-size: 18px; margin: 0 0 5px; color: #0f172a; }
          .info-block p { margin: 2px 0; font-size: 13px; color: #475569; }
          
          .section-title { font-size: 16px; font-weight: 800; text-transform: uppercase; color: #0f172a; border-left: 4px solid #3b82f6; padding-left: 10px; margin: 30px 0 15px; }
          
          table { width: 100%; border-collapse: collapse; margin-bottom: 25px; font-size: 12px; }
          th { background: #f1f5f9; padding: 10px; text-align: left; font-weight: 700; border-bottom: 1px solid #cbd5e1; color: #475569; }
          td { padding: 10px; border-bottom: 1px solid #e2e8f0; }
          
          .check-detail { margin-bottom: 15px; padding: 12px; background: #fff; border: 1px solid #e2e8f0; border-radius: 8px; }
          .check-header { display: flex; justify-content: space-between; font-weight: 700; font-size: 11px; margin-bottom: 8px; color: #334155; border-bottom: 1px dashed #e2e8f0; padding-bottom: 5px; }
          .check-body { font-size: 11px; color: #1e293b; }
          .data-item { display: inline-block; margin-right: 20px; }
          .data-label { color: #64748b; font-weight: normal; }
          .data-value { font-weight: 600; }
          
          .signature-section { margin-top: 50px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
          .sig-box { border-top: 1px solid #94a3b8; padding-top: 10px; text-align: center; font-size: 11px; color: #64748b; }
          
          .footer { position: fixed; bottom: 1.5cm; left: 1.5cm; right: 1.5cm; font-size: 10px; text-align: center; color: #94a3b8; border-top: 1px solid #f1f5f9; padding-top: 10px; }
          
          @media print {
            .no-print { display: none; }
            body { margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="a4-container">
          <div class="header">
            <div class="logo-container">
              <img src="${i}" class="logo-img">
              <div>
                <div class="brand-title">HACCP PRO</div>
                <div style="font-size: 10px; color: #64748b;">Software di Gestione Sicurezza Alimentare</div>
              </div>
            </div>
            <div class="header-meta">
              <div>Documento: Registro Autocontrollo</div>
              <div>Versione: 2.0.1</div>
              <div>Data emissione: ${new Date().toLocaleDateString("it-IT")}</div>
            </div>
          </div>

          <div class="report-info">
            <div class="info-block">
              <h3>${e.client.name}</h3>
              <p>P.IVA: ${e.client.piva}</p>
              <p>Indirizzo: ${e.client.address}</p>
            </div>
            <div style="text-align: right;">
              <p><strong>DATA REGISTRAZIONE:</strong></p>
              <p style="font-size: 20px; font-weight: 800; color: #3b82f6;">${t}</p>
            </div>
          </div>

          <div class="section-title">Riepilogo Avanzamento Giornaliero</div>
          <table>
            <thead>
              <tr>
                <th>Operatore Responsabile</th>
                <th>Reparto / Funzione</th>
                <th>Check Eseguiti</th>
                <th>Stato</th>
              </tr>
            </thead>
            <tbody>
              ${e.users.map(o=>`
                <tr>
                  <td><strong>${o.name}</strong></td>
                  <td>${o.department}</td>
                  <td>${o.checksCompleted} / ${o.checksTotal}</td>
                  <td>
                    <span style="color: ${o.checksCompleted===o.checksTotal?"#10b981":"#f59e0b"}; font-weight: 800;">
                      ${o.checksCompleted===o.checksTotal?"COMPLETATO":"IN CORSO"}
                    </span>
                  </td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="section-title">Registro Attivit\xE0 Dettagliato</div>
          ${e.detailedChecks.length===0?`
            <p style="text-align: center; color: #94a3b8; padding: 20px;">Nessuna attivit\xE0 registrata per la data selezionata.</p>
          `:`
            ${e.detailedChecks.map(o=>`
              <div class="check-detail">
                <div class="check-header">
                  <span>MODULO: ${o.moduleName}</span>
                  <span>ESECUTO DA: ${o.userName} \u2022 ORE: ${new Date(o.timestamp).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}</span>
                </div>
                <div class="check-body">
                  ${this.formatCheckData(o.data)}
                </div>
              </div>
            `).join("")}
          `}

          <div class="signature-section">
            <div class="sig-box">
              <p><strong>Firma Operatore Responsabile</strong></p>
              <div style="height: 60px;"></div>
            </div>
            <div class="sig-box">
              <p><strong>Visto del Responsabile HACCP</strong></p>
              <div style="height: 60px;"></div>
            </div>
          </div>

          <div class="footer">
             HACCP Pro - Documento generato elettronicamente conforme ai requisiti del Reg. CE 852/04. 
             Pagina 1 di 1
          </div>
        </div>
      </body>
      </html>
    `}formatCheckData(e){return e?Array.isArray(e)&&e.length>0&&typeof e[0]=="object"&&e[0].hasOwnProperty("label")?e.map(t=>{let i=t.checked?"\u2705 CONFORME":"\u274C NON CONFORME";return`<span class="data-item"><span class="data-label">${t.label}:</span> <span class="data-value">${i}</span></span>`}).join(" "):Object.entries(e).map(([t,i])=>{let o=t.replace(/([A-Z])/g," $1").replace(/^./,s=>s.toUpperCase()),r=i;return i===!0&&(r="\u2705 CONFORME"),i===!1&&(r="\u274C NON CONFORME"),Array.isArray(i)&&(r=i.join(", ")),`<span class="data-item"><span class="data-label">${o}:</span> <span class="data-value">${r}</span></span>`}).join(" "):"Nessun dato"}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-reports-view"]],decls:17,vars:2,consts:[[1,"space-y-6","pb-10"],[1,"bg-gradient-to-r","from-slate-900","via-slate-800","to-slate-900","p-8","rounded-3xl","shadow-xl","border","border-slate-700/50","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-file-contract","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-gradient-to-br","from-blue-500","to-indigo-600","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/20"],[1,"fa-solid","fa-clipboard-list"],[1,"text-indigo-200","text-sm","mt-2","font-medium","ml-1"],[1,"space-y-4"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","overflow-hidden","transition-all","hover:shadow-md",3,"ring-2","ring-blue-100"],[1,"bg-white","rounded-2xl","p-12","text-center","border-2","border-dashed","border-slate-200"],["id","print-template",1,"hidden"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","overflow-hidden","transition-all","hover:shadow-md"],[1,"relative","bg-white","px-6","py-5","cursor-pointer","select-none","transition-colors","hover:bg-slate-50","border-l-4",3,"click"],[1,"absolute","top-0","left-0","right-0","bg-red-500","text-white","px-4","py-1","text-xs","font-bold","text-center"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4"],[1,"flex","items-center","gap-4","flex-1"],[1,"w-14","h-14","rounded-xl","bg-slate-50","border","border-slate-100","flex","items-center","justify-center","text-slate-600","shadow-sm"],[1,"fa-solid","fa-building","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-xl","text-slate-800","flex","items-center","gap-3"],[1,"text-xs","bg-slate-100","text-slate-500","px-2","py-0.5","rounded-md","font-mono"],[1,"flex","items-center","gap-4","mt-2"],[1,"flex-1","max-w-xs"],[1,"flex","justify-between","text-xs","mb-1"],[1,"text-slate-500","font-medium"],[1,"font-bold"],[1,"h-2","bg-slate-100","rounded-full","overflow-hidden"],[1,"h-full","transition-all","duration-500","rounded-full"],[1,"text-sm","text-slate-600"],[1,"font-bold","text-emerald-600"],[1,"w-8","h-8","flex","items-center","justify-center","text-slate-400","transition-transform","duration-300"],[1,"fa-solid","fa-chevron-down"],[3,"click"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","text-sm","font-bold","transition-all","flex","items-center","gap-2","shadow-lg","shadow-blue-200",3,"click"],[1,"fa-solid","fa-print"],[1,"border-t","border-slate-100","bg-slate-50/50","p-6","animate-slide-down"],[1,"text-center","py-8","text-slate-400"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[1,"fa-solid","fa-users-slash","text-4xl","mb-2"],[1,"font-medium"],[1,"bg-white","rounded-xl","p-4","border","border-slate-200","hover:border-blue-200","hover:shadow-md","transition-all"],[1,"flex","items-center","justify-between","mb-3"],[1,"font-bold","text-slate-800"],[1,"text-xs","text-slate-500"],[1,"text-right"],[1,"text-2xl","font-black"],[1,"text-[10px]","text-slate-400","font-bold","uppercase"],[1,"h-1.5","bg-slate-100","rounded-full","overflow-hidden"],[1,"h-full","transition-all"],[1,"mt-3","pt-3","border-t","border-slate-100","flex","justify-between","items-center","text-xs"],[1,"text-slate-400"],[1,"font-medium","text-slate-600"],[1,"fa-solid","fa-folder-open","text-6xl","text-slate-200","mb-4"],[1,"text-slate-400","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Report Controlli Giornalieri "),v(),h(9,"p",8),T(10,cw,2,5)(11,uw,2,4),v()()(),h(12,"div",9),j(13,vw,33,34,"div",10,lw),T(15,_w,4,0,"div",11),v(),b(16,"div",12),v()),t&2&&(m(10),M(i.selectedClient()?10:11),m(3),W(i.companyReports()),m(2),M(i.companyReports().length===0?15:-1))},dependencies:[Z,Du,ge],styles:["@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out forwards}@media print{body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}#print-template[_ngcontent-%COMP%], #print-template[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible}#print-template[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%}}"]})}};var qg=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(ue(Ln),ue(yn))};static \u0275dir=Ye({type:n})}return n})(),yr=(()=>{class n extends qg{static \u0275fac=(()=>{let t;return function(o){return(t||(t=Ci(n)))(o||n)}})();static \u0275dir=Ye({type:n,features:[ct]})}return n})(),Ii=new fe("");var yw={provide:Ii,useExisting:bt(()=>vt),multi:!0};function xw(){let n=Bn()?Bn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Ew=new fe(""),vt=(()=>{class n extends qg{_compositionMode;_composing=!1;constructor(t,i,o){super(t,i),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!xw())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(ue(Ln),ue(yn),ue(Ew,8))};static \u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&L("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[ln([yw]),ct]})}return n})();function Gu(n){return n==null||zu(n)===0}function zu(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var qu=new fe(""),ju=new fe(""),Cw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ae=class{static min(e){return bw(e)}static max(e){return ww(e)}static required(e){return Iw(e)}static requiredTrue(e){return Sw(e)}static email(e){return Dw(e)}static minLength(e){return Tw(e)}static maxLength(e){return Mw(e)}static pattern(e){return Aw(e)}static nullValidator(e){return jg()}static compose(e){return Qg(e)}static composeAsync(e){return ev(e)}};function bw(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function ww(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Iw(n){return Gu(n.value)?{required:!0}:null}function Sw(n){return n.value===!0?null:{required:!0}}function Dw(n){return Gu(n.value)||Cw.test(n.value)?null:{email:!0}}function Tw(n){return e=>{let t=e.value?.length??zu(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Mw(n){return e=>{let t=e.value?.length??zu(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Aw(n){if(!n)return jg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Gu(i.value))return null;let o=i.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function jg(n){return null}function Wg(n){return n!=null}function Yg(n){return no(n)?ld(n):n}function Jg(n){let e={};return n.forEach(t=>{e=t!=null?R(R({},e),t):e}),Object.keys(e).length===0?null:e}function Kg(n,e){return e.map(t=>t(n))}function kw(n){return!n.validate}function Zg(n){return n.map(e=>kw(e)?e:t=>e.validate(t))}function Qg(n){if(!n)return null;let e=n.filter(Wg);return e.length==0?null:function(t){return Jg(Kg(t,e))}}function Xg(n){return n!=null?Qg(Zg(n)):null}function ev(n){if(!n)return null;let e=n.filter(Wg);return e.length==0?null:function(t){let i=Kg(t,e).map(Yg);return dd(i).pipe(ei(Jg))}}function tv(n){return n!=null?ev(Zg(n)):null}function Og(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nv(n){return n._rawValidators}function iv(n){return n._rawAsyncValidators}function Lu(n){return n?Array.isArray(n)?n:[n]:[]}function ya(n,e){return Array.isArray(n)?n.includes(e):n===e}function Vg(n,e){let t=Lu(e);return Lu(n).forEach(o=>{ya(t,o)||t.push(o)}),t}function Lg(n,e){return Lu(e).filter(t=>!ya(n,t))}var xa=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},wi=class extends xa{name;get formDirective(){return null}get path(){return null}},Hn=class extends xa{_parent=null;name=null;valueAccessor=null},Ea=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var _t=(()=>{class n extends Ea{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(ue(Hn,2))};static \u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&N("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[ct]})}return n})(),Gn=(()=>{class n extends Ea{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(ue(wi,10))};static \u0275dir=Ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&N("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[ct]})}return n})();var pr="VALID",_a="INVALID",ao="PENDING",mr="DISABLED",$n=class{},Ca=class extends $n{value;source;constructor(e,t){super(),this.value=e,this.source=t}},hr=class extends $n{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},gr=class extends $n{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},lo=class extends $n{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Uu=class extends $n{source;constructor(e){super(),this.source=e}},_r=class extends $n{source;constructor(e){super(),this.source=e}};function Wu(n){return(Sa(n)?n.validators:n)||null}function Nw(n){return Array.isArray(n)?Xg(n):n||null}function Yu(n,e){return(Sa(e)?e.asyncValidators:n)||null}function Rw(n){return Array.isArray(n)?tv(n):n||null}function Sa(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function ov(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new te(1e3,"");if(!i[t])throw new te(1001,"")}function rv(n,e,t){n._forEachChild((i,o)=>{if(t[o]===void 0)throw new te(1002,"")})}var co=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ht(this.statusReactive)}set status(e){Ht(()=>this.statusReactive.set(e))}_status=z(()=>this.statusReactive());statusReactive=B(void 0);get valid(){return this.status===pr}get invalid(){return this.status===_a}get pending(){return this.status==ao}get disabled(){return this.status===mr}get enabled(){return this.status!==mr}errors;get pristine(){return Ht(this.pristineReactive)}set pristine(e){Ht(()=>this.pristineReactive.set(e))}_pristine=z(()=>this.pristineReactive());pristineReactive=B(!0);get dirty(){return!this.pristine}get touched(){return Ht(this.touchedReactive)}set touched(e){Ht(()=>this.touchedReactive.set(e))}_touched=z(()=>this.touchedReactive());touchedReactive=B(!1);get untouched(){return!this.touched}_events=new Kt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Vg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Vg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Lg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Lg(e,this._rawAsyncValidators))}hasValidator(e){return ya(this._rawValidators,e)}hasAsyncValidator(e){return ya(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(O(R({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new gr(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new gr(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(O(R({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new hr(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new hr(!0,i))}markAsPending(e={}){this.status=ao;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new lo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(O(R({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=mr,this.errors=null,this._forEachChild(o=>{o.disable(O(R({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ca(this.value,i)),this._events.next(new lo(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(O(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=pr,this._forEachChild(i=>{i.enable(O(R({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(O(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pr||this.status===ao)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ca(this.value,t)),this._events.next(new lo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(O(R({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mr:pr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ao,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=Yg(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,o)=>i&&i._find(o),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new lo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?mr:this.errors?_a:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ao)?ao:this._anyControlsHaveStatus(_a)?_a:pr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new hr(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new gr(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sa(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Nw(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Rw(this._rawAsyncValidators)}},ba=class extends co{constructor(e,t,i){super(Wu(t),Yu(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){rv(this,!0,e),Object.keys(e).forEach(i=>{ov(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let o=this.controls[i];o&&o.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,o)=>{i.reset(e?e[o]:null,O(R({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new _r(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,o)=>((i.enabled||this.disabled)&&(t[o]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((o,r)=>{i=t(i,o,r)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bu=class extends ba{};var xr=new fe("",{factory:()=>Er}),Er="always";function sv(n,e){return[...e.path,n]}function Hu(n,e,t=Er){Ju(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Fw(n,e),Vw(n,e),Ow(n,e),Pw(n,e)}function Ug(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Ia(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Pw(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Ju(n,e){let t=nv(n);e.validator!==null?n.setValidators(Og(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=iv(n);e.asyncValidator!==null?n.setAsyncValidators(Og(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let o=()=>n.updateValueAndValidity();wa(e._rawValidators,o),wa(e._rawAsyncValidators,o)}function Ia(n,e){let t=!1;if(n!==null){if(e.validator!==null){let o=nv(n);if(Array.isArray(o)&&o.length>0){let r=o.filter(s=>s!==e.validator);r.length!==o.length&&(t=!0,n.setValidators(r))}}if(e.asyncValidator!==null){let o=iv(n);if(Array.isArray(o)&&o.length>0){let r=o.filter(s=>s!==e.asyncValidator);r.length!==o.length&&(t=!0,n.setAsyncValidators(r))}}}let i=()=>{};return wa(e._rawValidators,i),wa(e._rawAsyncValidators,i),t}function Fw(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&av(n,e)})}function Ow(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&av(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function av(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Vw(n,e){let t=(i,o)=>{e.valueAccessor.writeValue(i),o&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Lw(n,e){n==null,Ju(n,e)}function Uw(n,e){return Ia(n,e)}function lv(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Bw(n){return Object.getPrototypeOf(n.constructor)===yr}function Hw(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function dv(n,e){if(!e)return null;Array.isArray(e);let t,i,o;return e.forEach(r=>{r.constructor===vt?t=r:Bw(r)?i=r:o=r}),o||i||t||null}function $w(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Bg(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hg(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var vr=class extends co{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(Wu(t),Yu(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sa(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Hg(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new _r(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Bg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Bg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Hg(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Gw=n=>n instanceof vr;var zw={provide:Hn,useExisting:bt(()=>bn)},$g=Promise.resolve(),bn=(()=>{class n extends Hn{_changeDetectorRef;callSetDisabledState;control=new vr;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new at;constructor(t,i,o,r,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=dv(this,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Hu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){$g.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,o=i!==0&&lg(i);$g.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?sv(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(ue(wi,9),ue(qu,10),ue(ju,10),ue(Ii,10),ue(na,8),ue(xr,8))};static \u0275dir=Ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ln([zw]),ct,to]})}return n})();var zn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),qw={provide:Ii,useExisting:bt(()=>Ku),multi:!0},Ku=(()=>{class n extends yr{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=Ci(n)))(o||n)}})();static \u0275dir=Ye({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&L("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[ln([qw]),ct]})}return n})(),jw={provide:Ii,useExisting:bt(()=>Zu),multi:!0};var Ww=(()=>{class n{_accessors=[];add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t){this._accessors.splice(i,1);return}}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return t[0].control?t[0]._parent===i._control._parent&&t[1].name===i.name:!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zu=(()=>{class n extends yr{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=$(xr,{optional:!0})??Er;constructor(t,i,o,r){super(t,i),this._registry=o,this._injector=r}ngOnInit(){this._control=this._injector.get(Hn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(i){return new(i||n)(ue(Ln),ue(yn),ue(Ww),ue(Ft))};static \u0275dir=Ye({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){i&1&&L("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[ln([jw]),ct]})}return n})();var $u=class extends co{constructor(e,t,i){super(Wu(t),Yu(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){rv(this,!1,e),e.forEach((i,o)=>{ov(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,o)=>{i.reset(e[o],O(R({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new _r(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var Yw=(()=>{class n extends wi{callSetDisabledState;get submitted(){return Ht(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=z(()=>this._submittedReactive());_submittedReactive=B(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,i,o){super(),this.callSetDisabledState=o,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Ia(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Hu(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Ug(t.control||null,t,!1),$w(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,i){this.form.get(t.path).setValue(i)}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,Hw(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Uu(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,o=this.form.get(t.path);i!==o&&(Ug(i||null,t),Gw(o)&&(Hu(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);Lw(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&Uw(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ju(this.form,this),this._oldForm&&Ia(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(ue(qu,10),ue(ju,10),ue(xr,8))};static \u0275dir=Ye({type:n,features:[ct,to]})}return n})();var cv=new fe("");var Jw={provide:Hn,useExisting:bt(()=>wn)},wn=(()=>{class n extends Hn{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new at;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,o,r,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=dv(this,r)}ngOnChanges(t){this._added||this._setUpControl(),lv(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return sv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(ue(wi,13),ue(qu,10),ue(ju,10),ue(Ii,10),ue(cv,8))};static \u0275dir=Ye({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ln([Jw]),ct,to]})}return n})();var Kw={provide:wi,useExisting:bt(()=>In)},In=(()=>{class n extends Yw{form=null;ngSubmit=new at;get control(){return this.form}static \u0275fac=(()=>{let t;return function(o){return(t||(t=Ci(n)))(o||n)}})();static \u0275dir=Ye({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&L("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ln([Kw]),ct]})}return n})(),Zw={provide:Ii,useExisting:bt(()=>kt),multi:!0};function uv(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Qw(n){return n.split(":")[0]}var kt=(()=>{class n extends yr{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=$(io).injector;destroyRef=$(Vn);cdr=$(na);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Qc({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),o=uv(i,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=Qw(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=Ci(n)))(o||n)}})();static \u0275dir=Ye({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&L("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ln([Zw]),ct]})}return n})(),cn=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,o){this._element=t,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(uv(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(ue(yn),ue(Ln),ue(kt,9))};static \u0275dir=Ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Xw={provide:Ii,useExisting:bt(()=>fv),multi:!0};function Gg(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function eI(n){return n.split(":")[0]}var fv=(()=>{class n extends yr{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let o=t.map(r=>this._getOptionId(r));i=(r,s)=>{r._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,r)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let o=[],r=i.selectedOptions;if(r!==void 0){let s=r;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);o.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);o.push(u)}}}this.value=o,t(o)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=eI(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=Ci(n)))(o||n)}})();static \u0275dir=Ye({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&L("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ln([Xw]),ct]})}return n})(),un=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,o){this._element=t,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Gg(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Gg(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(ue(yn),ue(Ln),ue(fv,9))};static \u0275dir=Ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var pv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=mn({})}return n})();function zg(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var qn=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let o=this._reduceControls(t),r={};return zg(i)?r=i:i!==null&&(r.validators=i.validator,r.asyncValidators=i.asyncValidator),new ba(o,r)}record(t,i=null){let o=this._reduceControls(t);return new Bu(o,i)}control(t,i,o){let r={};return this.useNonNullable?(zg(i)?r=i:(r.validators=i,r.asyncValidators=o),new vr(t,O(R({},r),{nonNullable:!0}))):new vr(t,i,o)}array(t,i,o){let r=t.map(s=>this._createControl(s));return new $u(r,i,o)}_reduceControls(t){let i={};return Object.keys(t).forEach(o=>{i[o]=this._createControl(t[o])}),i}_createControl(t){if(t instanceof vr)return t;if(t instanceof co)return t;if(Array.isArray(t)){let i=t[0],o=t.length>1?t[1]:null,r=t.length>2?t[2]:null;return this.control(i,o,r)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xr,useValue:t.callSetDisabledState??Er}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=mn({imports:[pv]})}return n})(),Wn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:cv,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:xr,useValue:t.callSetDisabledState??Er}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=mn({imports:[pv]})}return n})();var Qu=(n,e)=>e.id;function tI(n,e){if(n&1&&(y(0,"option",14),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),V(t.name)}}function nI(n,e){n&1&&D(0,"i",62)}function iI(n,e){n&1&&D(0,"i",63)}function oI(n,e){n&1&&(y(0,"span",67),p(1," Fatto "),_())}function rI(n,e){n&1&&(y(0,"span",68),p(1," Da Fare "),_())}function sI(n,e){if(n&1&&(y(0,"div",59)(1,"div",60)(2,"div",61),T(3,nI,1,0,"i",62)(4,iI,1,0,"i",63),_(),y(5,"div",64)(6,"p",65),p(7),_(),y(8,"p",66),p(9),_()(),T(10,oI,2,0,"span",67)(11,rI,2,0,"span",68),_()()),n&2){let t=e.$implicit,i=C(3);N("border-emerald-200",t.completed)("bg-emerald-50/30",t.completed)("border-slate-200",!t.completed)("hover:border-slate-300",!t.completed),m(2),N("bg-emerald-500",t.completed)("text-white",t.completed)("bg-slate-200",!t.completed)("text-slate-400",!t.completed),m(),M(t.completed?3:4),m(3),N("text-slate-800",!t.completed)("text-emerald-700",t.completed),m(),k(" ",t.label," "),m(2),k(" Modulo: ",i.getModuleName(t.moduleId)," "),m(),M(t.completed?10:11)}}function aI(n,e){if(n&1&&(y(0,"div",56)(1,"div",57),j(2,sI,12,24,"div",58,Qu),_()()),n&2){let t=C().$implicit;m(2),W(t.items)}}function lI(n,e){if(n&1){let t=H();y(0,"div",41)(1,"div",42),L("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCategory(o.id))}),y(2,"div",43)(3,"div",44)(4,"div",45),D(5,"i"),_(),y(6,"div",46)(7,"h3",47),p(8),y(9,"span",48),p(10),_()(),y(11,"div",49)(12,"div",50)(13,"div",51),D(14,"div",52),_()(),y(15,"span",53),p(16),_()()(),y(17,"div",54),D(18,"i",55),_()()()(),T(19,aI,4,0,"div",56),_()}if(n&2){let t=e.$implicit,i=C(),o=i.isCategoryExpanded(t.id),r=i.getCategoryCompletedCount(t),s=t.items.length,a=s>0?r/s*100:0;Me("--category-color",t.color),N("ring-2",o)("ring-offset-2",o),m(),Me("border-left-color",t.color),m(3),Me("background",t.color),m(),Pe("fa-solid "+t.icon),m(3),k(" ",t.name," "),m(2),k(" ",s," controlli "),m(4),Me("background",t.color)("width",a,"%"),m(),Me("color",t.color),m(),re(" ",r,"/",s," "),m(),N("rotate-180",o),m(2),M(o?19:-1)}}var Da=class n{constructor(){this.state=$(ee);this.expandedCategoryIds=B(new Set);this._syncEffect=ye(()=>{let e=this.state.filterCollaboratorId();if(e){let t=this.state.systemUsers().find(i=>i.id===e);t&&t.clientId&&this.selectedCompanyId.set(t.clientId)}else this.selectedCompanyId.set("")});this.selectedCompanyId=B("");this.selectedClient=z(()=>{let e=this.selectedCompanyId();if(e)return this.state.clients().find(o=>o.id===e)||null;let t=this.state.filterCollaboratorId();if(!t)return null;let i=this.state.systemUsers().find(o=>o.id===t);return i?this.state.clients().find(o=>o.id===i.clientId):null});this.categories=z(()=>{let t=this.selectedClient()?.id||"default",i=t==="c1",o=t==="c2",r=t==="default";return[{id:"pre-operative",name:"Fase Pre-operativa",icon:"fa-eye",color:"#3b82f6",items:[{id:"pre-1",label:"Verifica igiene degli ambienti e attrezzature",moduleId:"pre-op-checklist",completed:i||r},{id:"pre-2",label:"Controllo stoccaggio e materie prime",moduleId:"pre-op-checklist",completed:i||o},{id:"pre-3",label:"Verifica DPI e abbigliamento idoneo",moduleId:"pre-op-checklist",completed:o}]},{id:"operative",name:"Fase Operativa",icon:"fa-fire-burner",color:"#6366f1",items:[{id:"op-1",label:"Monitoraggio temperature di lavorazione",moduleId:"operative-checklist",completed:i||r},{id:"op-2",label:"Gestione separazione prodotti (Allergeni)",moduleId:"operative-checklist",completed:o},{id:"op-3",label:"Rispetto tempistiche di ricettazione",moduleId:"operative-checklist",completed:i},{id:"op-4",label:"Procedure di rintracciabilit\xE0 operativa",moduleId:"operative-checklist",completed:o||r}]},{id:"post-operative",name:"Fase Post-operativa",icon:"fa-broom",color:"#8b5cf6",items:[{id:"post-1",label:"Sanificazione fine turno superfici di lavoro",moduleId:"post-op-checklist",completed:!0},{id:"post-2",label:"Rimozione scarti e rifiuti da produzione",moduleId:"post-op-checklist",completed:i||r},{id:"post-3",label:"Sigillatura e stoccaggio semilavorati",moduleId:"post-op-checklist",completed:o||r},{id:"post-4",label:"Spegnimento e messa in sicurezza attrezzature",moduleId:"post-op-checklist",completed:i}]}]});this.totalChecks=z(()=>this.categories().reduce((e,t)=>e+t.items.length,0));this.completedChecks=z(()=>this.categories().reduce((e,t)=>e+t.items.filter(i=>i.completed).length,0));this.pendingChecks=z(()=>this.totalChecks()-this.completedChecks());this.completionRate=z(()=>{let e=this.totalChecks();return e===0?0:Math.round(this.completedChecks()/e*100)})}isCategoryExpanded(e){return this.expandedCategoryIds().has(e)}toggleCategory(e){this.expandedCategoryIds.update(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})}getCategoryCompletedCount(e){return e.items.filter(t=>t.completed).length}getModuleName(e){return{"operational-checklist":"Checklist Operativa",temperatures:"Temperature","staff-hygiene":"Igiene Personale",traceability:"Rintracciabilit\xE0","cleaning-maintenance":"Pulizia/Manutenzione","pest-control":"Controllo Infestanti"}[e]||e}printCompleteList(){let e=this.selectedClient();if(!e)return;let t=this.generatePrintHTML(e),i=window.open("","_blank");i&&(i.document.write(t),i.document.close(),i.focus(),setTimeout(()=>{i.print(),i.close()},250))}generatePrintHTML(e){let t=new Date(this.state.filterDate()).toLocaleDateString("it-IT",{day:"2-digit",month:"long",year:"numeric"}),i=this.categories(),o=this.totalChecks(),r=this.completedChecks(),s=this.completionRate();return`
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="UTF-8">
                <title>Lista Controlli Completa - ${e.name}</title>
                <style>
                    @page { size: A4; margin: 2cm; }
                    body { font-family: Arial, sans-serif; color: #1e293b; line-height: 1.6; }
                    .header { border-bottom: 3px solid #10b981; padding-bottom: 20px; margin-bottom: 30px; }
                    .logo { font-size: 32px; font-weight: bold; color: #10b981; margin-bottom: 10px; }
                    .company-name { font-size: 24px; font-weight: bold; margin: 20px 0 10px; }
                    .meta { color: #64748b; font-size: 14px; margin-bottom: 5px; }
                    .summary-box { background: #f1f5f9; padding: 15px; border-left: 4px solid #10b981; margin: 20px 0; }
                    .category { margin: 30px 0; page-break-inside: avoid; }
                    .category-header { background: #f8fafc; padding: 12px; border-left: 4px solid; font-weight: bold; font-size: 18px; margin-bottom: 15px; }
                    .check-item { padding: 10px; border-bottom: 1px solid #e2e8f0; display: flex; align-items: center; gap: 10px; }
                    .check-icon { width: 20px; height: 20px; border-radius: 50%; display: inline-flex; align-items: center; justify-center; font-size: 12px; }
                    .check-icon.done { background: #10b981; color: white; }
                    .check-icon.pending { background: #f59e0b; color: white; }
                    .check-label { flex: 1; }
                    .check-status { font-size: 11px; font-weight: bold; text-transform: uppercase; padding: 3px 8px; border-radius: 4px; }
                    .check-status.done { background: #d1fae5; color: #065f46; }
                    .check-status.pending { background: #fed7aa; color: #92400e; }
                    .signature-area { margin-top: 60px; border-top: 2px solid #e2e8f0; padding-top: 30px; }
                    .signature-line { border-top: 1px solid #000; width: 300px; margin-top: 40px; padding-top: 5px; }
                    .footer { margin-top: 40px; text-align: center; color: #94a3b8; font-size: 12px; page-break-inside: avoid; }
                </style>
            </head>
            <body>
                <div class="header">
                    <div class="logo">\u{1F6E1}\uFE0F HACCP Pro</div>
                    <div style="color: #64748b; font-size: 14px;">Sistema di Gestione Controlli Igienico-Sanitari</div>
                </div>

                <h1 class="company-name">${e.name}</h1>
                <div class="meta">P.IVA: ${e.piva}</div>
                <div class="meta">Indirizzo: ${e.address}</div>
                <div class="meta">Data Report: ${t}</div>

                <div class="summary-box">
                    <strong>Riepilogo Generale:</strong> ${r} controlli completati su ${o} totali 
                    (${s}% di completamento)
                </div>

                <h2 style="margin-top: 30px; color: #10b981;">Lista Completa Controlli HACCP</h2>

                ${i.map(a=>{let c=this.getCategoryCompletedCount(a),u=a.items.length,f=u>0?Math.round(c/u*100):0;return`
                        <div class="category">
                            <div class="category-header" style="border-left-color: ${a.color}; color: ${a.color};">
                                ${a.name} (${c}/${u} - ${f}%)
                            </div>
                            ${a.items.map(g=>`
                                <div class="check-item">
                                    <div class="check-icon ${g.completed?"done":"pending"}">
                                        ${g.completed?"\u2713":"\u2212"}
                                    </div>
                                    <div class="check-label">${g.label}</div>
                                    <div class="check-status ${g.completed?"done":"pending"}">
                                        ${g.completed?"Fatto":"Da Fare"}
                                    </div>
                                </div>
                            `).join("")}
                        </div>
                    `}).join("")}

                <div class="signature-area">
                    <p><strong>Firma del Responsabile HACCP:</strong></p>
                    <div class="signature-line">
                        <div style="text-align: center; font-size: 12px; color: #64748b;">Firma e Timbro</div>
                    </div>
                </div>

                <div class="footer">
                    <p>Documento generato automaticamente da HACCP Pro - ${new Date().toLocaleString("it-IT")}</p>
                    <p>Lista completa dei controlli HACCP per ${e.name}</p>
                </div>
            </body>
            </html>
        `}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-general-checks-view"]],decls:65,vars:10,consts:[[1,"space-y-6","pb-10"],[1,"bg-gradient-to-r","from-slate-900","via-slate-800","to-slate-900","p-8","rounded-3xl","shadow-xl","border","border-slate-700/50","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-clipboard-list","text-9xl","text-white"],[1,"relative","z-10","flex","flex-col","lg:flex-row","justify-between","items-start","lg:items-center","gap-6"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-gradient-to-br","from-emerald-500","to-teal-600","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/20"],[1,"fa-solid","fa-list-check"],[1,"text-indigo-200","text-sm","mt-2","font-medium","ml-1"],[1,"flex","items-center","gap-3"],[1,"bg-white/10","backdrop-blur-sm","px-4","py-3","rounded-xl","border","border-white/20"],[1,"text-xs","text-white/70","font-bold","uppercase","block","mb-2"],[1,"bg-white/20","text-white","border","border-white/30","rounded-lg","px-4","py-2","font-bold","focus:outline-none","focus:ring-2","focus:ring-white/50","min-w-[250px]",3,"ngModelChange","ngModel"],["value","",1,"bg-slate-800"],[1,"bg-slate-800",3,"value"],[1,"px-5","py-3","bg-white/10","hover:bg-white/20","text-white","border","border-white/30","rounded-xl","font-bold","transition-all","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","backdrop-blur-sm",3,"click","disabled"],[1,"fa-solid","fa-print"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"bg-white","rounded-xl","p-5","border","border-slate-200","shadow-sm"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-slate-500","font-bold","uppercase"],[1,"text-3xl","font-black","text-slate-800","mt-1"],[1,"w-12","h-12","rounded-full","bg-slate-100","flex","items-center","justify-center"],[1,"fa-solid","fa-clipboard-list","text-slate-600","text-xl"],[1,"bg-white","rounded-xl","p-5","border","border-emerald-200","shadow-sm"],[1,"text-xs","text-emerald-600","font-bold","uppercase"],[1,"text-3xl","font-black","text-emerald-600","mt-1"],[1,"w-12","h-12","rounded-full","bg-emerald-100","flex","items-center","justify-center"],[1,"fa-solid","fa-circle-check","text-emerald-600","text-xl"],[1,"bg-white","rounded-xl","p-5","border","border-orange-200","shadow-sm"],[1,"text-xs","text-orange-600","font-bold","uppercase"],[1,"text-3xl","font-black","text-orange-600","mt-1"],[1,"w-12","h-12","rounded-full","bg-orange-100","flex","items-center","justify-center"],[1,"fa-solid","fa-clock","text-orange-600","text-xl"],[1,"bg-white","rounded-xl","p-5","border","border-blue-200","shadow-sm"],[1,"text-xs","text-blue-600","font-bold","uppercase"],[1,"text-3xl","font-black","text-blue-600","mt-1"],[1,"w-12","h-12","rounded-full","bg-blue-100","flex","items-center","justify-center"],[1,"fa-solid","fa-chart-pie","text-blue-600","text-xl"],[1,"space-y-4"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","overflow-hidden","transition-all","hover:shadow-md",3,"ring-2","ring-offset-2","--category-color"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","overflow-hidden","transition-all","hover:shadow-md"],[1,"relative","px-6","py-5","cursor-pointer","select-none","transition-colors","hover:bg-slate-50","border-l-4",3,"click"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4"],[1,"flex","items-center","gap-4","flex-1"],[1,"w-14","h-14","rounded-xl","flex","items-center","justify-center","shadow-sm","text-white","text-2xl"],[1,"flex-1"],[1,"font-bold","text-xl","text-slate-800","flex","items-center","gap-3"],[1,"text-xs","bg-slate-100","text-slate-500","px-2","py-0.5","rounded-md","font-mono"],[1,"flex","items-center","gap-4","mt-2"],[1,"flex-1","max-w-md"],[1,"h-2","bg-slate-100","rounded-full","overflow-hidden"],[1,"h-full","transition-all","duration-500","rounded-full"],[1,"text-sm","font-bold"],[1,"w-8","h-8","flex","items-center","justify-center","text-slate-400","transition-transform","duration-300"],[1,"fa-solid","fa-chevron-down"],[1,"border-t","border-slate-100","bg-slate-50/50","p-6","animate-slide-down"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-3"],[1,"bg-white","rounded-lg","p-4","border","transition-all",3,"border-emerald-200","bg-emerald-50/30","border-slate-200","hover:border-slate-300"],[1,"bg-white","rounded-lg","p-4","border","transition-all"],[1,"flex","items-start","gap-3"],[1,"flex-shrink-0","w-6","h-6","rounded-full","flex","items-center","justify-center","mt-0.5","transition-all"],[1,"fa-solid","fa-check","text-xs"],[1,"fa-solid","fa-minus","text-xs"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","leading-snug"],[1,"text-xs","text-slate-400","mt-1"],[1,"flex-shrink-0","text-[10px]","font-bold","uppercase","px-2","py-1","rounded","bg-emerald-100","text-emerald-700","border","border-emerald-200"],[1,"flex-shrink-0","text-[10px]","font-bold","uppercase","px-2","py-1","rounded","bg-orange-100","text-orange-700","border","border-orange-200"]],template:function(t,i){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),D(3,"i",3),_(),y(4,"div",4)(5,"div")(6,"h2",5)(7,"span",6),D(8,"i",7),_(),p(9," Controlli Generali "),_(),y(10,"p",8),p(11),ie(12,"date"),_()(),y(13,"div",9)(14,"div",10)(15,"label",11),p(16,"Filtra per Azienda"),_(),y(17,"select",12),L("ngModelChange",function(r){return i.selectedCompanyId.set(r)}),y(18,"option",13),p(19,"Tutte le Aziende"),_(),j(20,tI,2,2,"option",14,Qu),_()(),y(22,"button",15),L("click",function(){return i.printCompleteList()}),D(23,"i",16),p(24," Stampa Lista Completa "),_()()()(),y(25,"div",17)(26,"div",18)(27,"div",19)(28,"div")(29,"p",20),p(30,"Totale Controlli"),_(),y(31,"p",21),p(32),_()(),y(33,"div",22),D(34,"i",23),_()()(),y(35,"div",24)(36,"div",19)(37,"div")(38,"p",25),p(39,"Completati"),_(),y(40,"p",26),p(41),_()(),y(42,"div",27),D(43,"i",28),_()()(),y(44,"div",29)(45,"div",19)(46,"div")(47,"p",30),p(48,"Da Completare"),_(),y(49,"p",31),p(50),_()(),y(51,"div",32),D(52,"i",33),_()()(),y(53,"div",34)(54,"div",19)(55,"div")(56,"p",35),p(57,"Completamento"),_(),y(58,"p",36),p(59),_()(),y(60,"div",37),D(61,"i",38),_()()()(),y(62,"div",39),j(63,lI,20,25,"div",40,Qu),_()()),t&2&&(m(11),k(" Panoramica completa di tutti i controlli HACCP - Data: ",oe(12,7,i.state.filterDate(),"dd/MM/yyyy")," "),m(6),X("ngModel",i.selectedCompanyId()),m(3),W(i.state.clients()),m(2),X("disabled",!i.selectedCompanyId()),m(10),V(i.totalChecks()),m(9),V(i.completedChecks()),m(9),V(i.pendingChecks()),m(9),k("",i.completionRate(),"%"),m(4),W(i.categories()))},dependencies:[Z,jn,cn,un,kt,_t,bn,ge],styles:["@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out forwards}"]})}};var dI=(n,e)=>e.id;function cI(n,e){if(n&1){let t=H();y(0,"div",14)(1,"div",30),D(2,"i",31),y(3,"span",32),p(4,"Filtrato per: "),y(5,"strong"),p(6),_()()(),y(7,"button",33),L("click",function(){I(t);let o=C();return S(o.state.setCollaboratorFilter(""))}),p(8,"Rimuovi Filtro"),_()()}if(n&2){let t=C();m(6),V(t.getFilterName())}}function uI(n,e){if(n&1&&(y(0,"tr",22)(1,"td",34),p(2),_(),y(3,"td",35)(4,"div",30)(5,"div",36),p(6),_(),p(7),_()(),y(8,"td",19),p(9),_(),y(10,"td",19)(11,"span"),p(12),_()(),y(13,"td",20)(14,"button",37),D(15,"i",38),_(),y(16,"button",39),D(17,"i",40),_()()()),n&2){let t=e.$implicit,i=C();m(2),V(t.date),m(4),k(" ",i.getInitials(t.operator)," "),m(),k(" ",t.operator," "),m(2),V(t.detail),m(2),Pe(i.getStatusClass(t.status)),m(),k(" ",t.status," ")}}function fI(n,e){n&1&&(y(0,"tr")(1,"td",41),D(2,"i",42),y(3,"p"),p(4,"Nessun record trovato per questo filtro."),_()()())}function pI(n,e){if(n&1){let t=H();y(0,"div",29)(1,"div",43),L("click",function(){I(t);let o=C();return S(o.closeModal())}),_(),y(2,"div",44)(3,"div",45)(4,"h3",46),p(5," Nuova Registrazione "),_(),y(6,"button",47),L("click",function(){I(t);let o=C();return S(o.closeModal())}),D(7,"i",48),_()(),y(8,"form",49),L("ngSubmit",function(){I(t);let o=C();return S(o.saveRecord())}),y(9,"div",50)(10,"label",51),p(11,"Data e Ora"),_(),D(12,"input",52),_(),y(13,"div",50)(14,"label",51),p(15,"Dettaglio / Note Operative"),_(),D(16,"textarea",53),_(),y(17,"div",50)(18,"label",51),p(19,"Esito Verifica"),_(),y(20,"select",54)(21,"option",55),p(22,"Conforme"),_(),y(23,"option",56),p(24,"Attenzione / Monitorare"),_(),y(25,"option",57),p(26,"Non Conforme"),_()()(),y(27,"div",58),D(28,"i",59),y(29,"div",60)(30,"p",61),p(31,"Operatore Registrato"),_(),y(32,"p",62),p(33),_()()(),y(34,"div",63)(35,"button",64),L("click",function(){I(t);let o=C();return S(o.closeModal())}),p(36," Annulla "),_(),y(37,"button",65),p(38," Salva Registrazione "),_()()()()()}if(n&2){let t,i=C();m(8),X("formGroup",i.recordForm),m(25),V((t=i.state.currentUser())==null?null:t.name),m(4),X("disabled",i.recordForm.invalid)}}var Ta=class n{constructor(){this.state=$(ee);this.fb=$(qn);this.moduleId=sg.required();this.items=B([]);this.isModalOpen=B(!1);this.moduleInfo=z(()=>this.state.menuItems.find(e=>e.id===this.moduleId()));this.filteredData=z(()=>{let e=this.items(),t=this.state.filterCollaboratorId();return t?e.filter(i=>i.operatorId===t):e});this.recordForm=this.fb.group({date:["",ae.required],detail:["",ae.required],status:["Conforme",ae.required]}),ye(()=>{let e=this.moduleId();this.items.set(this.generateMockData(e))},{allowSignalWrites:!0})}generateMockData(e){let t=this.state.systemUsers();return Array.from({length:45},(o,r)=>{let s=t[Math.floor(Math.random()*t.length)],a=new Date;a.setDate(a.getDate()-Math.floor(Math.random()*30)),a.setHours(7+Math.floor(Math.random()*14),Math.floor(Math.random()*60));let c=a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")+" "+String(a.getHours()).padStart(2,"0")+":"+String(a.getMinutes()).padStart(2,"0"),u="Registrazione generica",f="Conforme";if(e.includes("temp")||e.includes("chiller")||e.includes("machine")){let g=["Cella Frigo #1","Cella Frigo #2","Freezer Pozzetto","Vetrina Bibite","Abbattitore Master"],x=g[Math.floor(Math.random()*g.length)],E=e.includes("chiller")?-(Math.random()*30+10).toFixed(1):(Math.random()*6+1).toFixed(1);u=`${x}: ${E}\xB0C`,(Math.abs(Number(E))<2||Math.abs(Number(E))>25)&&(f=Math.random()>.5?"Attenzione":"Conforme")}else if(e.includes("clean")||e.includes("hygiene")){let g=["Sanificazione Piani","Pulizia Pavimenti","Lavaggio Attrezzature","Igiene Mani","Sanificazione WC","Pulizia Cappa"];u=g[Math.floor(Math.random()*g.length)]}else if(e.includes("goods")){let g=["Global Foods Srl","Ortofrutta Express","Panificio Citt\xE0","Carni Scelte SpA"],x=["Farina 00","Pomodori Pelati","Mozzarella","Manzo Tagli","Verdure Miste"];u=`Arrivo: ${x[Math.floor(Math.random()*x.length)]} da ${g[Math.floor(Math.random()*g.length)]}`}else if(e.includes("pest"))u=`Controllo trappola #${Math.floor(Math.random()*10)+1}`,Math.random()>.9&&(f="Attenzione");else if(e.includes("training")){let g=["HACCP Base","Aggiornamento Allergeni","Sicurezza 81/08","Antincendio"];u=`Corso: ${g[Math.floor(Math.random()*g.length)]}`}else if(e.includes("suppliers")){let g=["Global Foods Srl","Ortofrutta Express","Panificio Citt\xE0","Carni Scelte SpA","Bevande & Co.","Carta e Igiene Srl"];u=`Anagrafica: ${g[r%g.length]||"Nuovo Fornitore"}`}else e.includes("compliance")&&(u=`Segnalazione #${1e3+r}`,f="Non Conforme");return f==="Conforme"&&Math.random()>.9&&(f="Attenzione"),{id:r+1,date:c,operator:s.name,operatorId:s.id,detail:u,status:f}}).sort((o,r)=>r.date.localeCompare(o.date))}getFilterName(){let e=this.state.filterCollaboratorId();return this.state.systemUsers().find(t=>t.id===e)?.name||"Sconosciuto"}getInitials(e){return e.split(" ").map(t=>t[0]).join("").substring(0,2).toUpperCase()}getStatusClass(e){return e==="Conforme"?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800":e==="Attenzione"?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800":e==="Non Conforme"?"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800":"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800"}openModal(){let e=new Date,t=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0");this.recordForm.reset({date:t,detail:"",status:"Conforme"}),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1)}saveRecord(){if(this.recordForm.valid){let e=this.recordForm.value,t=this.state.currentUser(),i={id:Date.now(),date:e.date.replace("T"," "),operator:t?.name||"Sconosciuto",operatorId:"CURRENT_USER_ID",detail:e.detail,status:e.status};this.items.update(o=>[i,...o]),this.closeModal()}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-generic-module"]],inputs:{moduleId:[1,"moduleId"]},decls:51,vars:11,consts:[[1,"space-y-6","pb-10"],[1,"bg-gradient-to-r","from-slate-700","via-slate-600","to-slate-700","p-8","rounded-3xl","shadow-2xl","border","border-slate-600/20","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"relative","z-10","flex","flex-col","lg:flex-row","justify-between","items-start","lg:items-center","gap-6"],[1,"flex","items-center","gap-2","mb-2"],[1,"text-xs","font-bold","uppercase","tracking-wider","text-white/60","bg-white/10","px-3","py-1","rounded-lg","backdrop-blur-sm","border","border-white/20"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-sm","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"text-slate-200","text-sm","mt-2","font-medium","ml-1"],[1,"flex","gap-3"],[1,"px-5","py-3","bg-white/10","backdrop-blur-sm","border","border-white/30","text-white","rounded-xl","hover:bg-white/20","transition-all","shadow-lg","font-bold"],[1,"fa-solid","fa-download","mr-2"],[1,"px-5","py-3","bg-white","text-slate-700","rounded-xl","hover:bg-slate-50","transition-all","shadow-xl","font-bold",3,"click"],[1,"fa-solid","fa-plus","mr-2"],[1,"bg-blue-50","border","border-blue-100","text-blue-800","px-4","py-3","rounded-xl","flex","items-center","justify-between","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-100","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-left","text-sm","text-slate-600"],[1,"bg-slate-50","text-slate-700","uppercase","font-semibold","text-xs","border-b","border-slate-200"],[1,"px-6","py-4"],[1,"px-6","py-4","text-right"],[1,"divide-y","divide-slate-100"],[1,"hover:bg-slate-50","transition-colors","animate-fade-in"],[1,"px-6","py-4","border-t","border-slate-100","flex","justify-between","items-center","text-xs","text-slate-500"],[1,"flex","gap-2"],[1,"p-1","px-2","rounded","hover:bg-slate-100","disabled:opacity-50"],[1,"fa-solid","fa-chevron-left"],[1,"p-1","px-2","rounded","hover:bg-slate-100"],[1,"fa-solid","fa-chevron-right"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"flex","items-center","gap-2"],[1,"fa-solid","fa-filter"],[1,"text-sm","font-medium"],[1,"text-xs","hover:underline",3,"click"],[1,"px-6","py-4","whitespace-nowrap","font-mono","text-xs"],[1,"px-6","py-4","font-medium","text-slate-800"],[1,"w-6","h-6","rounded-full","bg-slate-200","flex","items-center","justify-center","text-xs","font-bold","text-slate-500"],[1,"text-slate-400","hover:text-blue-600","mx-1"],[1,"fa-solid","fa-eye"],[1,"text-slate-400","hover:text-slate-600","mx-1"],[1,"fa-solid","fa-pen"],["colspan","5",1,"px-6","py-12","text-center","text-slate-400"],[1,"fa-solid","fa-folder-open","text-3xl","mb-3","opacity-50"],[1,"absolute","inset-0","bg-slate-900/40","backdrop-blur-sm","transition-opacity",3,"click"],[1,"relative","bg-white","rounded-2xl","shadow-2xl","w-full","max-w-lg","overflow-hidden","animate-fade-in-up"],[1,"px-6","py-4","border-b","border-slate-100","flex","justify-between","items-center","bg-slate-50"],[1,"text-lg","font-bold","text-slate-800"],[1,"text-slate-400","hover:text-slate-600","transition-colors",3,"click"],[1,"fa-solid","fa-xmark","text-xl"],[1,"p-6","space-y-4",3,"ngSubmit","formGroup"],[1,"space-y-1"],[1,"text-sm","font-medium","text-slate-700"],["type","datetime-local","formControlName","date",1,"w-full","px-4","py-2","rounded-lg","border","border-slate-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["formControlName","detail","rows","3","placeholder","Descrivi l'attivit\xE0 svolta...",1,"w-full","px-4","py-2","rounded-lg","border","border-slate-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["formControlName","status",1,"w-full","px-4","py-2","rounded-lg","border","border-slate-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","bg-white"],["value","Conforme"],["value","Attenzione"],["value","Non Conforme"],[1,"bg-blue-50","p-3","rounded-lg","flex","items-start","gap-3","mt-2"],[1,"fa-solid","fa-user-tag","text-blue-500","mt-1"],[1,"text-sm"],[1,"font-bold","text-blue-900"],[1,"text-blue-700"],[1,"pt-4","flex","justify-end","gap-3"],["type","button",1,"px-4","py-2","text-slate-600","hover:bg-slate-100","rounded-lg","transition-colors","font-medium",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","font-medium","shadow-md","shadow-blue-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,i){if(t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),D(3,"i"),_(),y(4,"div",3)(5,"div")(6,"div",4)(7,"span",5),p(8),_()(),y(9,"h2",6)(10,"span",7),D(11,"i"),_(),p(12),_(),y(13,"p",8),p(14," Gestione operativa e archivio digitale "),_()(),y(15,"div",9)(16,"button",10),D(17,"i",11),p(18," Export PDF "),_(),y(19,"button",12),L("click",function(){return i.openModal()}),D(20,"i",13),p(21," Nuovo Record "),_()()()(),T(22,cI,9,1,"div",14),y(23,"div",15)(24,"div",16)(25,"table",17)(26,"thead",18)(27,"tr")(28,"th",19),p(29,"Data & Ora"),_(),y(30,"th",19),p(31,"Operatore"),_(),y(32,"th",19),p(33,"Dettagli / Oggetto"),_(),y(34,"th",19),p(35,"Stato"),_(),y(36,"th",20),p(37,"Azioni"),_()()(),y(38,"tbody",21),j(39,uI,18,7,"tr",22,dI,!1,fI,5,0,"tr"),_()()(),y(42,"div",23)(43,"span"),p(44),_(),y(45,"div",24)(46,"button",25),D(47,"i",26),_(),y(48,"button",27),D(49,"i",28),_()()()(),T(50,pI,39,3,"div",29),_()),t&2){let o,r,s,a;m(3),Pe("fa-solid "+(((o=i.moduleInfo())==null?null:o.icon)||"fa-folder")+" text-9xl text-white"),m(5),k(" ",(r=i.moduleInfo())==null?null:r.category," "),m(3),Pe("fa-solid "+(((s=i.moduleInfo())==null?null:s.icon)||"fa-folder")+" text-white"),m(),k(" ",(a=i.moduleInfo())==null?null:a.label," "),m(10),M(i.state.filterCollaboratorId()?22:-1),m(17),W(i.filteredData()),m(5),re("Visualizzazione ",i.filteredData().length," di ",i.items().length," record"),m(6),M(i.isModalOpen()?50:-1)}},dependencies:[Z,Wn,zn,cn,un,vt,kt,_t,Gn,In,wn],encapsulation:2})}};function mI(n,e){if(n&1&&D(0,"img",24),n&2){let t=C(2);X("src",t.state.adminCompany().logo,Xe)}}function hI(n,e){n&1&&D(0,"i",25)}function gI(n,e){if(n&1){let t=H();y(0,"label",26),D(1,"i",52),y(2,"input",53),L("change",function(o){I(t);let r=C(2);return S(r.onLogoChange(o,"ADMIN"))}),_()()}}function vI(n,e){if(n&1){let t=H();y(0,"button",54),L("click",function(){I(t);let o=C(2);return S(o.startEditingAdmin())}),D(1,"i",55),p(2," Modifica Dati "),_()}}function _I(n,e){if(n&1){let t=H();y(0,"div",31)(1,"button",56),L("click",function(){I(t);let o=C(2);return S(o.cancelEditingAdmin())}),p(2," Annulla "),_(),y(3,"button",57),L("click",function(){I(t);let o=C(2);return S(o.saveAdminData())}),D(4,"i",58),p(5," Salva Modifiche "),_()()}}function yI(n,e){n&1&&D(0,"input",36)}function xI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().name)}}function EI(n,e){n&1&&D(0,"input",39)}function CI(n,e){if(n&1&&(y(0,"p",40),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().piva)}}function bI(n,e){n&1&&D(0,"input",41)}function wI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().address)}}function II(n,e){n&1&&D(0,"input",42)}function SI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().email)}}function DI(n,e){n&1&&D(0,"input",43)}function TI(n,e){if(n&1&&(y(0,"p",44),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().pec)}}function MI(n,e){n&1&&D(0,"input",45)}function AI(n,e){if(n&1&&(y(0,"p",46),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().sdi)}}function kI(n,e){n&1&&D(0,"input",47)}function NI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().phone||"-")}}function RI(n,e){n&1&&D(0,"input",48)}function PI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().cellphone||"-")}}function FI(n,e){n&1&&D(0,"input",49)}function OI(n,e){if(n&1&&(y(0,"p",50),D(1,"i",59),p(2),_()),n&2){let t=C(2);m(2),k(" ",t.state.adminCompany().whatsapp||"-"," ")}}function VI(n,e){n&1&&D(0,"input",51)}function LI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.adminCompany().licenseNumber)}}function UI(n,e){if(n&1){let t=H();y(0,"div",3)(1,"div",4),D(2,"i",5),_(),y(3,"div",6)(4,"div",7)(5,"div",8)(6,"h2",9),D(7,"i",10),p(8," Configurazione Invio Report "),_(),y(9,"p",11),p(10," Imposta l'indirizzo email a cui gli operatori invieranno i report giornalieri in formato PDF. "),_()(),y(11,"div",12)(12,"div",13)(13,"label",14),p(14,"Email di Ricezione Report"),_(),y(15,"div",15),D(16,"input",16,0),y(18,"button",17),L("click",function(){I(t);let o=En(17),r=C();return S(r.state.setReportRecipientEmail(o.value))}),D(19,"i",18),p(20," Aggiorna "),_()()()()()()(),y(21,"div",19)(22,"div",20)(23,"div",21)(24,"div",22)(25,"div",23),T(26,mI,1,1,"img",24)(27,hI,1,0,"i",25),_(),T(28,gI,3,0,"label",26),_(),y(29,"div")(30,"h2",27),D(31,"i",28),p(32," Anagrafica Azienda Amministratore "),_(),y(33,"p",29),p(34,"Gestisci i dati della sede centrale e il logo globale del sistema."),_()()(),T(35,vI,3,0,"button",30)(36,_I,6,0,"div",31),_(),y(37,"div",32)(38,"form",33)(39,"div",34)(40,"label",35),p(41,"Ragione Sociale"),_(),T(42,yI,1,0,"input",36)(43,xI,2,1,"p",37),_(),y(44,"div",38)(45,"label",35),p(46,"Partita IVA"),_(),T(47,EI,1,0,"input",39)(48,CI,2,1,"p",40),_(),y(49,"div",38)(50,"label",35),p(51,"Indirizzo Sede Centrale"),_(),T(52,bI,1,0,"input",41)(53,wI,2,1,"p",37),_(),y(54,"div",38)(55,"label",35),p(56,"Email Amministrativa"),_(),T(57,II,1,0,"input",42)(58,SI,2,1,"p",37),_(),y(59,"div",38)(60,"label",35),p(61,"Posta Elettronica Certificata (PEC)"),_(),T(62,DI,1,0,"input",43)(63,TI,2,1,"p",44),_(),y(64,"div",38)(65,"label",35),p(66,"Codice Univoco (SDI)"),_(),T(67,MI,1,0,"input",45)(68,AI,2,1,"p",46),_(),y(69,"div",38)(70,"label",35),p(71,"Telefono Fisso"),_(),T(72,kI,1,0,"input",47)(73,NI,2,1,"p",37),_(),y(74,"div",38)(75,"label",35),p(76,"Cellulare"),_(),T(77,RI,1,0,"input",48)(78,PI,2,1,"p",37),_(),y(79,"div",38)(80,"label",35),p(81,"WhatsApp"),_(),T(82,FI,1,0,"input",49)(83,OI,3,1,"p",50),_(),y(84,"div",38)(85,"label",35),p(86,"Nr. Licenza Master"),_(),T(87,VI,1,0,"input",51)(88,LI,2,1,"p",37),_()()()()}if(n&2){let t=C();m(16),X("value",t.state.reportRecipientEmail()),m(10),M(t.state.adminCompany().logo?26:27),m(2),M(t.isEditingAdmin()?28:-1),m(7),M(t.isEditingAdmin()?36:35),m(3),X("formGroup",t.adminForm),m(4),M(t.isEditingAdmin()?42:43),m(5),M(t.isEditingAdmin()?47:48),m(5),M(t.isEditingAdmin()?52:53),m(5),M(t.isEditingAdmin()?57:58),m(5),M(t.isEditingAdmin()?62:63),m(5),M(t.isEditingAdmin()?67:68),m(5),M(t.isEditingAdmin()?72:73),m(5),M(t.isEditingAdmin()?77:78),m(5),M(t.isEditingAdmin()?82:83),m(5),M(t.isEditingAdmin()?87:88)}}function BI(n,e){if(n&1&&D(0,"img",24),n&2){let t=C(2);X("src",t.state.companyConfig().logo,Xe)}}function HI(n,e){if(n&1&&(y(0,"div",62),p(1),_()),n&2){let t=C(2);m(),k(" ",t.state.companyConfig().name.substring(0,1)," ")}}function $I(n,e){if(n&1){let t=H();y(0,"label",63),D(1,"i",86),y(2,"input",53),L("change",function(o){I(t);let r=C(2);return S(r.onLogoChange(o,"OPERATOR"))}),_()()}}function GI(n,e){if(n&1){let t=H();y(0,"button",87),L("click",function(){I(t);let o=C(2);return S(o.startEditingOperator())}),D(1,"i",55),p(2," Completa / Modifica "),_()}}function zI(n,e){if(n&1){let t=H();y(0,"div",31)(1,"button",56),L("click",function(){I(t);let o=C(2);return S(o.cancelEditingOperator())}),p(2," Annulla "),_(),y(3,"button",88),L("click",function(){I(t);let o=C(2);return S(o.saveOperatorData())}),D(4,"i",58),p(5," Salva Tutto "),_()()}}function qI(n,e){n&1&&D(0,"input",75)}function jI(n,e){if(n&1&&(y(0,"p",76),p(1),_()),n&2){let t=C(2);m(),V(t.state.companyConfig().address||"Non specificato")}}function WI(n,e){n&1&&D(0,"input",77)}function YI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.companyConfig().email||"Non specificato")}}function JI(n,e){n&1&&D(0,"input",78)}function KI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.companyConfig().phone||"Non specificato")}}function ZI(n,e){n&1&&D(0,"input",79)}function QI(n,e){if(n&1&&(y(0,"p",37),p(1),_()),n&2){let t=C(2);m(),V(t.state.companyConfig().cellphone||"-")}}function XI(n,e){n&1&&D(0,"input",80)}function eS(n,e){if(n&1&&(y(0,"p",50),D(1,"i",89),p(2),_()),n&2){let t=C(2);m(2),k(" ",t.state.companyConfig().whatsapp||"-"," ")}}function tS(n,e){if(n&1&&(y(0,"div",2)(1,"div",60)(2,"div",21)(3,"div",22)(4,"div",61),T(5,BI,1,1,"img",24)(6,HI,2,1,"div",62),_(),T(7,$I,3,0,"label",63),_(),y(8,"div")(9,"h2",64),D(10,"i",65),p(11,"Profilo Aziendale Operativo"),_(),y(12,"p",66),p(13,"Gestisci i recapiti e l'immagine della tua unit\xE0 operativa."),_()()(),T(14,GI,3,0,"button",67)(15,zI,6,0,"div",31),_(),y(16,"div",32)(17,"div",68)(18,"h1",69),p(19),_(),y(20,"div",70)(21,"span",71),p(22),_(),y(23,"span",72),p(24),_()()(),y(25,"form",73)(26,"div",38)(27,"label",74),p(28,"Sede Operativa (Indirizzo)"),_(),T(29,qI,1,0,"input",75)(30,jI,2,1,"p",76),_(),y(31,"div",38)(32,"label",74),p(33,"Email di Contatto"),_(),T(34,WI,1,0,"input",77)(35,YI,2,1,"p",37),_(),y(36,"div",38)(37,"label",74),p(38,"Telefono Fisso"),_(),T(39,JI,1,0,"input",78)(40,KI,2,1,"p",37),_(),y(41,"div",38)(42,"label",74),p(43,"Cellulare / Mobile"),_(),T(44,ZI,1,0,"input",79)(45,QI,2,1,"p",37),_(),y(46,"div",38)(47,"label",74),p(48,"WhatsApp Business"),_(),T(49,XI,1,0,"input",80)(50,eS,3,1,"p",50),_()(),y(51,"div",81),D(52,"i",82),y(53,"div",83)(54,"p",84),p(55,"Nota Informativa per l'Operatore"),_(),y(56,"p",85),p(57,"Inserisci anche il logo aziendale se desiderato tramite l'icona di caricamento sull'immagine di sinistra."),_()()()()()),n&2){let t=C();m(5),M(t.state.companyConfig().logo?5:6),m(2),M(t.isEditingOperator()?7:-1),m(7),M(t.isEditingOperator()?15:14),m(5),V(t.state.companyConfig().name),m(3),k("P.IVA: ",t.state.companyConfig().piva),m(2),k("Licenza: ",t.state.companyConfig().licenseNumber),m(),X("formGroup",t.operatorForm),m(4),M(t.isEditingOperator()?29:30),m(5),M(t.isEditingOperator()?34:35),m(5),M(t.isEditingOperator()?39:40),m(5),M(t.isEditingOperator()?44:45),m(5),M(t.isEditingOperator()?49:50)}}var Ma=class n{constructor(){this.state=$(ee);this.fb=$(qn);this.isEditingAdmin=B(!1);this.isEditingOperator=B(!1);this.adminForm=this.fb.group({name:["",ae.required],piva:["",ae.required],address:["",ae.required],phone:[""],cellphone:[""],whatsapp:[""],email:["",[ae.required,ae.email]],pec:["",[ae.required,ae.email]],sdi:["",[ae.required,ae.minLength(7)]],licenseNumber:[""],logo:[""]}),this.operatorForm=this.fb.group({address:["",ae.required],phone:[""],cellphone:[""],whatsapp:[""],email:["",[ae.required,ae.email]],logo:[""]})}onLogoChange(e,t){let i=e.target.files[0];if(i){let o=new FileReader;o.onload=r=>{let s=r.target.result;t==="ADMIN"?this.adminForm.patchValue({logo:s}):this.operatorForm.patchValue({logo:s})},o.readAsDataURL(i)}}startEditingAdmin(){this.adminForm.patchValue(this.state.adminCompany()),this.isEditingAdmin.set(!0)}cancelEditingAdmin(){this.isEditingAdmin.set(!1)}saveAdminData(){this.adminForm.valid&&(this.state.updateAdminCompany(this.adminForm.value),this.isEditingAdmin.set(!1))}startEditingOperator(){let e=this.state.companyConfig();this.operatorForm.patchValue({address:e.address,phone:e.phone,cellphone:e.cellphone||"",whatsapp:e.whatsapp||"",email:e.email,logo:e.logo||""}),this.isEditingOperator.set(!0)}cancelEditingOperator(){this.isEditingOperator.set(!1)}saveOperatorData(){this.operatorForm.valid&&(this.state.updateCurrentCompany(this.operatorForm.value),this.isEditingOperator.set(!1))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-settings-view"]],decls:3,vars:1,consts:[["newEmail",""],[1,"space-y-6","animate-fade-in"],[1,"max-w-4xl","mx-auto","bg-white","rounded-3xl","shadow-xl","border","border-slate-200","overflow-hidden"],[1,"bg-gradient-to-r","from-blue-600","to-indigo-700","p-8","rounded-3xl","shadow-xl","border","border-blue-500/50","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-envelope-circle-check","text-9xl","text-white"],[1,"relative","z-10"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6"],[1,"flex-1"],[1,"text-2xl","font-black","text-white","flex","items-center"],[1,"fa-solid","fa-gears","mr-3"],[1,"text-blue-100","mt-2","text-sm","max-w-xl"],[1,"w-full","md:w-auto"],[1,"bg-white/10","backdrop-blur-md","p-4","rounded-2xl","border","border-white/20"],[1,"text-[10px]","font-black","text-blue-200","uppercase","tracking-widest","mb-2","block"],[1,"flex","gap-2"],["type","email","placeholder","esempio@dominio.it",1,"bg-white/10","text-white","border","border-white/30","rounded-lg","px-4","py-2","font-bold","focus:outline-none","focus:ring-2","focus:ring-white/50","min-w-[300px]","placeholder-blue-300/50",3,"value"],[1,"px-6","py-2","bg-white","text-blue-700","rounded-lg","font-bold","hover:bg-blue-50","transition-all","shadow-lg","active:scale-95","truncate",3,"click"],[1,"fa-solid","fa-save","mr-2"],[1,"bg-white","rounded-3xl","shadow-xl","border","border-slate-200","overflow-hidden"],[1,"px-8","py-6","border-b","border-slate-100","bg-slate-50/50","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4"],[1,"flex","items-center","gap-4"],[1,"relative","group"],[1,"w-16","h-16","rounded-2xl","bg-slate-100","border-2","border-slate-200","flex","items-center","justify-center","overflow-hidden","shadow-inner"],[1,"w-full","h-full","object-contain","p-2",3,"src"],[1,"fa-solid","fa-image","text-slate-300","text-2xl"],[1,"absolute","-bottom-2","-right-2","w-8","h-8","bg-indigo-600","text-white","rounded-full","flex","items-center","justify-center","cursor-pointer","shadow-lg","hover:bg-indigo-700","transition-colors","border-2","border-white"],[1,"text-2xl","font-black","text-slate-800","flex","items-center"],[1,"fa-solid","fa-building-shield","mr-3","text-indigo-600"],[1,"text-slate-500","text-sm","mt-1"],[1,"px-5","py-2.5","bg-indigo-600","text-white","rounded-xl","hover:bg-indigo-700","transition-all","shadow-lg","shadow-indigo-200","font-bold","flex","items-center","gap-2"],[1,"flex","gap-3"],[1,"p-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8",3,"formGroup"],[1,"space-y-2","lg:col-span-1"],[1,"text-[10px]","uppercase","font-black","text-slate-400","tracking-widest"],["type","text","formControlName","name",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],[1,"text-lg","font-bold","text-slate-800"],[1,"space-y-2"],["type","text","formControlName","piva",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],[1,"text-lg","font-bold","text-slate-800","font-mono"],["type","text","formControlName","address",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],["type","email","formControlName","email",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],["type","email","formControlName","pec",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],[1,"text-lg","font-bold","text-indigo-600"],["type","text","formControlName","sdi",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800","uppercase"],[1,"text-lg","font-bold","text-slate-800","font-mono","tracking-widest"],["type","text","formControlName","phone",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],["type","text","formControlName","cellphone",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],["type","text","formControlName","whatsapp",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],[1,"text-lg","font-bold","text-emerald-600","flex","items-center","gap-2"],["type","text","formControlName","licenseNumber",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-indigo-500","outline-none","font-bold","text-slate-800"],[1,"fa-solid","fa-camera","text-xs"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"px-5","py-2.5","bg-indigo-600","text-white","rounded-xl","hover:bg-indigo-700","transition-all","shadow-lg","shadow-indigo-200","font-bold","flex","items-center","gap-2",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"px-5","py-2.5","bg-slate-200","text-slate-700","rounded-xl","hover:bg-slate-300","transition-all","font-bold",3,"click"],[1,"px-5","py-2.5","bg-emerald-600","text-white","rounded-xl","hover:bg-emerald-700","transition-all","shadow-lg","shadow-emerald-200","font-bold","flex","items-center","gap-2",3,"click"],[1,"fa-solid","fa-check"],[1,"fa-brands","fa-whatsapp"],[1,"p-8","border-b","border-slate-100","bg-slate-50/50","flex","justify-between","items-center"],[1,"w-20","h-20","rounded-2xl","bg-white","border-2","border-slate-200","flex","items-center","justify-center","overflow-hidden","shadow-lg"],[1,"w-full","h-full","bg-slate-900","text-white","flex","items-center","justify-center","text-3xl","font-bold"],[1,"absolute","-bottom-2","-right-2","w-10","h-10","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","cursor-pointer","shadow-xl","hover:bg-blue-700","transition-colors","border-4","border-white"],[1,"text-2xl","font-black","text-slate-800"],[1,"fa-solid","fa-building-circle-check","mr-3","text-slate-500"],[1,"text-sm","text-slate-500","mt-1"],[1,"px-5","py-2.5","bg-slate-900","text-white","rounded-xl","hover:bg-slate-800","transition-all","shadow-lg","font-bold","flex","items-center","gap-2"],[1,"mb-10"],[1,"text-3xl","font-black","text-slate-900","leading-tight"],[1,"flex","items-center","gap-3","mt-1"],[1,"text-xs","font-bold","px-2","py-0.5","bg-slate-100","text-slate-500","rounded","border","border-slate-200","uppercase","tracking-tighter"],[1,"text-xs","font-bold","px-2","py-0.5","bg-indigo-50","text-indigo-600","rounded","border","border-indigo-100","uppercase","tracking-tighter"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8",3,"formGroup"],[1,"text-[10px]","font-black","uppercase","text-slate-400","tracking-widest"],["type","text","formControlName","address","placeholder","Indirizzo completo",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-blue-500","outline-none","font-bold","text-slate-800"],[1,"text-lg","font-bold","text-slate-800","leading-snug"],["type","email","formControlName","email","placeholder","Email aziendale",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-blue-500","outline-none","font-bold","text-slate-800"],["type","text","formControlName","phone","placeholder","Prefisso e Numero",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-blue-500","outline-none","font-bold","text-slate-800"],["type","text","formControlName","cellphone","placeholder","Numero mobile",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-blue-500","outline-none","font-bold","text-slate-800"],["type","text","formControlName","whatsapp","placeholder","Numero WhatsApp",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-blue-500","outline-none","font-bold","text-slate-800"],[1,"mt-10","p-5","bg-blue-50","rounded-2xl","border","border-blue-100","text-xs","text-blue-700","flex","items-start","gap-3","shadow-inner"],[1,"fa-solid","fa-circle-info","mt-0.5","text-lg"],[1,"space-y-1"],[1,"font-bold","uppercase","tracking-tighter"],[1,"leading-relaxed","opacity-80"],[1,"fa-solid","fa-cloud-arrow-up"],[1,"px-5","py-2.5","bg-slate-900","text-white","rounded-xl","hover:bg-slate-800","transition-all","shadow-lg","font-bold","flex","items-center","gap-2",3,"click"],[1,"px-5","py-2.5","bg-blue-600","text-white","rounded-xl","hover:bg-blue-700","transition-all","shadow-lg","font-bold","flex","items-center","gap-2",3,"click"],[1,"fa-brands","fa-whatsapp","text-xl"]],template:function(t,i){t&1&&(y(0,"div",1),T(1,UI,89,15)(2,tS,58,12,"div",2),_()),t&2&&(m(),M(i.state.isAdmin()?1:2))},dependencies:[Z,Wn,zn,vt,_t,Gn,In,wn],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}"]})}};var Xu=(n,e)=>e.id;function nS(n,e){n&1&&(y(0,"div",19),D(1,"i",45),p(2," SERVIZIO SOSPESO - MANCATO PAGAMENTO "),D(3,"i",45),_())}function iS(n,e){n&1&&(y(0,"span",27),p(1," \u{1F6AB} BLOCCATO "),_())}function oS(n,e){if(n&1){let t=H();y(0,"div",46)(1,"div",48),D(2,"i",49),_(),y(3,"p",50),p(4,"Nessuna unit\xE0 operativa configurata per questa sede."),_(),y(5,"button",51),L("click",function(){I(t);let o=C(2).$implicit,r=C();return S(r.openUserModal(void 0,o.id))}),p(6," + Aggiungi il primo collaboratore "),_()()}}function rS(n,e){if(n&1){let t=H();y(0,"button",67),L("click",function(){I(t);let o=C().$implicit,r=C(4);return S(r.deleteUser(o.id))}),D(1,"i",68),_()}}function sS(n,e){if(n&1){let t=H();y(0,"div",52)(1,"div",53),D(2,"img",54)(3,"div",55),_(),y(4,"div",24)(5,"div",56)(6,"div")(7,"h4",57),p(8),_(),y(9,"p",58),p(10),_()(),y(11,"span",59),p(12),_()(),y(13,"div",60)(14,"button",61),L("click",function(){let o=I(t).$implicit,r=C(4);return S(r.toggleUserActive(o))}),y(15,"div",62),D(16,"div",63),_(),y(17,"span"),p(18),_()(),y(19,"div",64)(20,"button",65),L("click",function(){let o=I(t).$implicit,r=C(4);return S(r.openUserModal(o))}),D(21,"i",41),_(),T(22,rS,2,0,"button",66),_()()()()}if(n&2){let t=e.$implicit;m(2),N("grayscale",!t.active),X("src",t.avatar,Xe),m(),N("bg-emerald-500",t.active)("bg-slate-300",!t.active),m(5),V(t.name),m(2),V(t.email),m(2),k(" ",t.department||"Generale"," "),m(2),X("disabled",t.role==="ADMIN"),m(),N("bg-emerald-500",t.active)("bg-slate-300",!t.active),m(),N("left-[18px]",t.active)("left-[3px]",!t.active),m(),N("text-emerald-600",t.active)("text-slate-400",!t.active),m(),k(" ",t.active?"ATTIVO":"DISABILITATO"," "),m(4),M(t.role!=="ADMIN"?22:-1)}}function aS(n,e){if(n&1&&(y(0,"div",47),j(1,sS,23,25,"div",52,Xu),_()),n&2){C(2);let t=ro(0);m(),W(t)}}function lS(n,e){if(n&1&&(y(0,"div",44),T(1,oS,7,0,"div",46)(2,aS,3,0,"div",47),_()),n&2){C();let t=ro(0);m(),M(t.length===0?1:2)}}function dS(n,e){if(n&1){let t=H();oo(0),y(1,"div",17)(2,"div",18),L("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleClient(o.id))}),T(3,nS,4,0,"div",19),y(4,"div",20)(5,"div",21)(6,"div",22),D(7,"i",23),_(),y(8,"div",24)(9,"h3",25),p(10),y(11,"span",26),p(12),_(),T(13,iS,2,0,"span",27),_(),y(14,"div",28)(15,"span",29),D(16,"i",30),p(17),_(),y(18,"span",31),p(19,"|"),_(),y(20,"span",29),D(21,"i",32),p(22),_()()(),y(23,"div",33),D(24,"i",34),_()(),y(25,"div",35),L("click",function(o){return I(t),S(o.stopPropagation())}),y(26,"div",36)(27,"span",37),p(28),_(),y(29,"button",38),L("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleSuspension(o))}),D(30,"div",39),_()(),y(31,"button",40),L("click",function(){let o=I(t).$implicit,r=C();return S(r.openClientModal(o))}),D(32,"i",41),_(),y(33,"button",42),L("click",function(){let o=I(t).$implicit,r=C();return S(r.openUserModal(void 0,o.id))}),D(34,"i",43),p(35," Add User "),_()()()(),T(36,lS,3,1,"div",44),_()}if(n&2){let t=e.$implicit,i=C(),o=i.isClientExpanded(t.id),r=er(i.getUsersByClient(t.id));m(),N("ring-2",o)("ring-indigo-100",o),m(),N("border-l-indigo-500",o&&!t.suspended)("border-l-transparent",!o&&!t.suspended)("border-l-red-500",t.suspended)("bg-red-50",t.suspended),m(),M(t.suspended?3:-1),m(),N("mt-6",t.suspended),m(2),N("bg-red-100",t.suspended)("border-red-200",t.suspended)("text-red-600",t.suspended),m(),N("fa-solid",t.suspended)("fa-ban",t.suspended),m(2),N("text-red-700",t.suspended),m(),k(" ",t.name," "),m(),N("bg-red-100",t.suspended)("text-red-600",t.suspended)("border-red-200",t.suspended),m(),k(" ",r.length," Risorse "),m(),M(t.suspended?13:-1),m(4),k(" ",t.address),m(5),k(" P.IVA: ",t.piva),m(),N("rotate-180",o),m(3),N("border-red-300",t.suspended)("bg-red-50",t.suspended)("border-emerald-200",!t.suspended)("bg-emerald-50",!t.suspended),m(),N("text-red-600",t.suspended)("text-emerald-600",!t.suspended),m(),k(" ",t.suspended?"Sospeso":"Attivo"," "),m(),N("bg-red-500",t.suspended)("bg-emerald-500",!t.suspended),X("title",gu(t.suspended?"Riattiva Servizio":"Sospendi per Mancato Pagamento")),m(),N("left-6",t.suspended)("left-1",!t.suspended),m(3),N("opacity-50",t.suspended)("cursor-not-allowed",t.suspended),X("disabled",t.suspended),m(3),M(o?36:-1)}}function cS(n,e){if(n&1&&(y(0,"option",80),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),V(t.name)}}function uS(n,e){if(n&1){let t=H();y(0,"div",16)(1,"div",69),L("click",function(){I(t);let o=C();return S(o.closeModal())}),_(),y(2,"div",70)(3,"div",71)(4,"h3",72),p(5),_(),y(6,"button",73),L("click",function(){I(t);let o=C();return S(o.closeModal())}),D(7,"i",74),_()(),y(8,"form",75),L("ngSubmit",function(){I(t);let o=C();return S(o.saveUser())}),y(9,"div",76)(10,"label",77),p(11,"Sede di Appartenenza"),_(),y(12,"select",78)(13,"option",79),p(14,"-- Seleziona Sede --"),_(),j(15,cS,2,2,"option",80,Xu),_()(),y(17,"div",81)(18,"div",76)(19,"label",77),p(20,"Nome / Reparto"),_(),D(21,"input",82),_(),y(22,"div",76)(23,"label",77),p(24,"Ruolo Accesso"),_(),y(25,"select",83)(26,"option",84),p(27,"Operatore"),_(),y(28,"option",85),p(29,"Amministratore"),_()()()(),y(30,"div",76)(31,"label",77),p(32,"Responsabile (Nome Cognome)"),_(),y(33,"div",86),D(34,"i",87)(35,"input",88),_()(),y(36,"div",76)(37,"label",77),p(38,"Email (Login)"),_(),y(39,"div",86),D(40,"i",89)(41,"input",90),_()(),y(42,"div",91)(43,"button",92),L("click",function(){I(t);let o=C();return S(o.closeModal())}),p(44,"Annulla"),_(),y(45,"button",93),p(46),_()()()()()}if(n&2){let t=C();m(5),k(" ",t.isEditing()?"Modifica Unit\xE0 Operativa":"Nuova Unit\xE0 Operativa"," "),m(3),X("formGroup",t.userForm),m(7),W(t.state.clients()),m(30),X("disabled",t.userForm.invalid),m(),k(" ",t.isEditing()?"Salva Modifiche":"Crea Unit\xE0"," ")}}function fS(n,e){if(n&1){let t=H();y(0,"div",16)(1,"div",69),L("click",function(){I(t);let o=C();return S(o.closeModal())}),_(),y(2,"div",70)(3,"div",71)(4,"h3",72),p(5),_(),y(6,"button",73),L("click",function(){I(t);let o=C();return S(o.closeModal())}),D(7,"i",74),_()(),y(8,"form",75),L("ngSubmit",function(){I(t);let o=C();return S(o.saveClient())}),y(9,"div",76)(10,"label",77),p(11,"Ragione Sociale / Nome"),_(),D(12,"input",94),_(),y(13,"div",76)(14,"label",77),p(15,"Partita IVA"),_(),D(16,"input",95),_(),y(17,"div",76)(18,"label",77),p(19,"Indirizzo Sede Operativa"),_(),D(20,"input",96),_(),y(21,"div",81)(22,"div",76)(23,"label",77),p(24,"Telefono"),_(),D(25,"input",97),_(),y(26,"div",76)(27,"label",77),p(28,"Email Aziendale"),_(),D(29,"input",98),_()(),y(30,"div",91)(31,"button",92),L("click",function(){I(t);let o=C();return S(o.closeModal())}),p(32,"Annulla"),_(),y(33,"button",99),p(34),_()()()()()}if(n&2){let t=C();m(5),k(" ",t.isEditing()?"Modifica Azienda":"Nuova Azienda"," "),m(3),X("formGroup",t.clientForm),m(25),X("disabled",t.clientForm.invalid),m(),k(" ",t.isEditing()?"Aggiorna Azienda":"Crea Azienda"," ")}}var Aa=class n{constructor(){this.state=$(ee);this.fb=$(qn);this.toastService=$(Be);this.activeModal=B(null);this.isEditing=B(!1);this.editingId=B(null);this.expandedClientIds=B(new Set);this.userForm=this.fb.group({name:["",ae.required],email:["",[ae.required,ae.email]],role:["COLLABORATOR",ae.required],department:["",ae.required],clientId:["",ae.required],active:[!0]}),this.clientForm=this.fb.group({name:["",ae.required],piva:["",ae.required],address:["",ae.required],phone:[""],email:[""],licenseNumber:[""]})}isClientExpanded(e){return this.expandedClientIds().has(e)}toggleClient(e){this.expandedClientIds.update(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})}getUsersByClient(e){return this.state.systemUsers().filter(t=>t.clientId===e)}toggleUserActive(e){e.role!=="ADMIN"&&this.state.updateSystemUser(e.id,{active:!e.active})}openUserModal(e,t){this.activeModal.set("user"),e?(this.isEditing.set(!0),this.editingId.set(e.id),this.userForm.patchValue({name:e.name,email:e.email,role:e.role,department:e.department||"",clientId:e.clientId||"",active:e.active})):(this.isEditing.set(!1),this.editingId.set(null),this.userForm.reset({role:"COLLABORATOR",active:!0,department:"",clientId:t||""}))}saveUser(){if(this.userForm.valid){let e=this.userForm.value,t=O(R({},e),{avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`});this.isEditing()&&this.editingId()?this.state.updateSystemUser(this.editingId(),t):this.state.addSystemUser(t),this.closeModal()}}deleteUser(e){confirm("Sei sicuro di voler rimuovere questa unit\xE0 operativa e tutti i suoi dati?")&&this.state.deleteSystemUser(e)}openClientModal(e){this.activeModal.set("client"),e?(this.isEditing.set(!0),this.editingId.set(e.id),this.clientForm.patchValue({name:e.name,piva:e.piva,address:e.address,phone:e.phone,email:e.email,licenseNumber:e.licenseNumber})):(this.isEditing.set(!1),this.editingId.set(null),this.clientForm.reset())}saveClient(){if(this.clientForm.valid){let e=this.clientForm.value;this.isEditing()&&this.editingId()?this.state.updateClient(this.editingId(),e):this.state.addClient(O(R({},e),{suspended:!1})),this.closeModal()}}toggleSuspension(e){let t=e.suspended?`Confermi di voler RIATTIVARE il servizio per "${e.name}"? Gli utenti potranno nuovamente accedere.`:`\u26A0\uFE0F ATTENZIONE: Stai per SOSPENDERE il servizio per "${e.name}".

Tutti gli utenti di questa azienda verranno BLOCCATI e non potranno pi\xF9 accedere al sistema.

Confermi l'operazione?`;confirm(t)&&this.state.toggleClientSuspension(e.id,!e.suspended)}closeModal(){this.activeModal.set(null),this.userForm.reset(),this.clientForm.reset()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-collaborators-view"]],decls:23,vars:2,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-slate-900","via-slate-800","to-slate-900","p-8","rounded-3xl","shadow-xl","border","border-slate-700/50","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-network-wired","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-gradient-to-br","from-indigo-500","to-blue-600","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/20"],[1,"fa-solid","fa-sitemap"],[1,"text-indigo-200","text-sm","mt-2","font-medium","ml-1"],[1,"flex","flex-col","sm:flex-row","gap-3","w-full","md:w-auto","relative","z-10"],[1,"px-5","py-3","bg-white/10","backdrop-blur-md","text-white","border","border-white/20","rounded-xl","hover:bg-white","hover:text-indigo-900","transition-all","font-bold","flex","items-center","justify-center","shadow-lg","group",3,"click"],[1,"fa-solid","fa-building","mr-2","text-indigo-300","group-hover:text-indigo-600","transition-colors"],[1,"px-6","py-3","bg-indigo-500","hover:bg-indigo-400","text-white","rounded-xl","transition-all","shadow-lg","shadow-indigo-500/30","font-bold","flex","items-center","justify-center","group","active:scale-95",3,"click"],[1,"fa-solid","fa-user-plus","mr-2","group-hover:animate-pulse"],[1,"space-y-4","animate-fade-in"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","overflow-hidden","transition-all","duration-300","hover:shadow-md",3,"ring-2","ring-indigo-100"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","overflow-hidden","transition-all","duration-300","hover:shadow-md"],[1,"relative","bg-white","px-6","py-5","cursor-pointer","select-none","transition-colors","hover:bg-slate-50","border-l-4",3,"click"],[1,"absolute","top-0","left-0","right-0","bg-gradient-to-r","from-red-600","to-red-500","text-white","px-4","py-1","text-xs","font-bold","flex","items-center","justify-center","gap-2","shadow-md"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-4","w-full"],[1,"w-14","h-14","rounded-xl","bg-slate-50","border","border-slate-100","flex","items-center","justify-center","text-slate-600","shadow-sm","flex-shrink-0","group-hover:scale-110","transition-transform"],[1,"fa-regular","fa-building","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-xl","text-slate-800","flex","items-center","gap-3"],[1,"text-xs","bg-slate-100","text-slate-500","px-2","py-0.5","rounded-md","font-mono","border","border-slate-200"],[1,"text-xs","bg-red-500","text-white","px-2","py-1","rounded-md","font-bold","uppercase","animate-pulse","shadow-lg"],[1,"flex","flex-wrap","items-center","gap-x-4","gap-y-1","text-xs","text-slate-500","font-medium","mt-1"],[1,"flex","items-center"],[1,"fa-solid","fa-location-dot","mr-1.5","text-indigo-400"],[1,"hidden","sm:inline","text-slate-300"],[1,"fa-solid","fa-file-invoice","mr-1.5","text-indigo-400"],[1,"w-8","h-8","flex","items-center","justify-center","text-slate-400","transition-transform","duration-300"],[1,"fa-solid","fa-chevron-down"],[1,"flex","items-center","gap-2","w-full","md:w-auto","justify-end","border-t","md:border-t-0","border-slate-100","pt-3","md:pt-0","mt-3","md:mt-0","pl-18","md:pl-0",3,"click"],[1,"flex","items-center","gap-2","px-3","py-2","rounded-lg","border-2","transition-all"],[1,"text-[10px]","font-bold","uppercase","tracking-wider"],[1,"w-11","h-6","rounded-full","relative","transition-colors","duration-200","ease-in-out","focus:outline-none","shadow-inner",3,"click","title"],[1,"w-4","h-4","bg-white","rounded-full","absolute","top-1","transition-all","duration-200","shadow-md"],["title","Modifica Dati Azienda",1,"w-9","h-9","rounded-lg","border","border-slate-200","hover:border-indigo-300","hover:bg-indigo-50","text-slate-400","hover:text-indigo-600","flex","items-center","justify-center","transition-all","bg-white",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"px-3","py-2","bg-indigo-50","hover:bg-indigo-100","text-indigo-700","border","border-indigo-200","rounded-lg","text-xs","font-bold","transition-all","flex","items-center","whitespace-nowrap",3,"click","disabled"],[1,"fa-solid","fa-plus","mr-1.5"],[1,"border-t","border-slate-100","bg-slate-50/50","p-4","animate-slide-down"],[1,"fa-solid","fa-ban","animate-pulse"],[1,"bg-white","border-2","border-dashed","border-slate-200","rounded-xl","p-8","text-center"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[1,"w-12","h-12","bg-slate-50","rounded-full","flex","items-center","justify-center","mx-auto","mb-3","text-slate-300"],[1,"fa-solid","fa-users-slash","text-xl"],[1,"text-slate-500","min-w-0","font-medium"],[1,"mt-3","text-indigo-600","text-sm","font-bold","hover:underline",3,"click"],[1,"group","bg-white","rounded-xl","p-4","border","border-slate-200","hover:border-indigo-200","hover:shadow-md","transition-all","flex","items-center","gap-4"],[1,"relative","flex-shrink-0"],[1,"w-14","h-14","rounded-xl","object-cover","border","border-slate-100","shadow-sm",3,"src"],[1,"absolute","-bottom-1","-right-1","w-4","h-4","rounded-full","border-2","border-white","flex","items-center","justify-center"],[1,"flex","justify-between","items-start"],[1,"font-bold","text-slate-800","text-base","leading-tight"],[1,"text-xs","text-slate-500","font-medium","truncate"],[1,"text-[10px]","font-bold","uppercase","tracking-wider","px-2","py-0.5","rounded","bg-slate-100","text-slate-500","border","border-slate-200"],[1,"mt-3","flex","items-center","justify-between","pt-3","border-t","border-slate-50","group-hover:border-slate-100","transition-colors"],[1,"flex","items-center","gap-2","text-xs","font-bold","focus:outline-none","transition-opacity","hover:opacity-80","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"w-8","h-4","rounded-full","relative","transition-colors","duration-200"],[1,"w-2.5","h-2.5","bg-white","rounded-full","absolute","top-[3px]","transition-all","duration-200","shadow-sm"],[1,"flex","gap-2","opacity-0","group-hover:opacity-100","transition-opacity"],["title","Modifica",1,"text-slate-400","hover:text-indigo-600","p-1","transition-colors",3,"click"],["title","Elimina",1,"text-slate-400","hover:text-red-600","p-1","transition-colors"],["title","Elimina",1,"text-slate-400","hover:text-red-600","p-1","transition-colors",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"absolute","inset-0","bg-slate-900/60","backdrop-blur-sm","transition-opacity",3,"click"],[1,"relative","bg-white","rounded-2xl","shadow-2xl","w-full","max-w-lg","overflow-hidden","animate-fade-in-up"],[1,"px-6","py-4","border-b","border-slate-100","flex","justify-between","items-center","bg-slate-50"],[1,"text-lg","font-bold","text-slate-800"],[1,"text-slate-400","hover:text-slate-600","transition-colors",3,"click"],[1,"fa-solid","fa-xmark","text-xl"],[1,"p-6","space-y-5",3,"ngSubmit","formGroup"],[1,"space-y-1"],[1,"text-xs","font-bold","text-slate-500","uppercase"],["formControlName","clientId",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-slate-50","font-bold","text-slate-700"],["value",""],[3,"value"],[1,"grid","grid-cols-2","gap-4"],["type","text","formControlName","department","placeholder","Es. Cucina, Bar...",1,"w-full","px-4","py-2.5","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","font-medium"],["formControlName","role",1,"w-full","px-4","py-2.5","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","bg-white","font-medium"],["value","COLLABORATOR"],["value","ADMIN"],[1,"relative"],[1,"fa-solid","fa-user","absolute","left-3.5","top-3.5","text-slate-400"],["type","text","formControlName","name","placeholder","Es. Mario Rossi",1,"w-full","pl-10","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","font-medium","text-slate-800"],[1,"fa-solid","fa-envelope","absolute","left-3.5","top-3.5","text-slate-400"],["type","email","formControlName","email","placeholder","email@esempio.it",1,"w-full","pl-10","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","font-medium","text-slate-800"],[1,"pt-2","flex","justify-end","gap-3"],["type","button",1,"px-5","py-2.5","rounded-lg","font-bold","text-slate-500","hover:bg-slate-100","transition-colors",3,"click"],["type","submit",1,"px-6","py-2.5","bg-blue-600","text-white","rounded-lg","font-bold","shadow-lg","shadow-blue-200","hover:bg-blue-700","transition-all","transform","active:scale-95","disabled:opacity-50","disabled:scale-100",3,"disabled"],["type","text","formControlName","name","placeholder","Es. Ristorante Da Mario S.r.l.",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","font-bold","text-slate-800"],["type","text","formControlName","piva","placeholder","12345678901",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","font-mono","font-medium"],["type","text","formControlName","address","placeholder","Via Roma 1, Milano",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","font-medium"],["type","text","formControlName","phone","placeholder","02 1234567",1,"w-full","px-4","py-2.5","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","font-medium"],["type","email","formControlName","email","placeholder","info@azienda.it",1,"w-full","px-4","py-2.5","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none","font-medium"],["type","submit",1,"px-6","py-2.5","bg-indigo-600","text-white","rounded-lg","font-bold","shadow-lg","shadow-indigo-200","hover:bg-indigo-700","transition-all","transform","active:scale-95","disabled:opacity-50","disabled:scale-100",3,"disabled"]],template:function(t,i){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),D(3,"i",3),_(),y(4,"div",4)(5,"h2",5)(6,"span",6),D(7,"i",7),_(),p(8," Struttura Organizzativa "),_(),y(9,"p",8),p(10," Gestione centralizzata di Aziende, Sedi e Personale Operativo "),_()(),y(11,"div",9)(12,"button",10),L("click",function(){return i.openClientModal()}),D(13,"i",11),p(14," Nuova Azienda "),_(),y(15,"button",12),L("click",function(){return i.openUserModal()}),D(16,"i",13),p(17," Aggiungi Personale "),_()()(),y(18,"div",14),j(19,dS,37,70,"div",15,Xu),_(),T(21,uS,47,4,"div",16),T(22,fS,35,4,"div",16),_()),t&2&&(m(19),W(i.state.clients()),m(2),M(i.activeModal()==="user"?21:-1),m(),M(i.activeModal()==="client"?22:-1))},dependencies:[Z,Wn,zn,cn,un,vt,kt,_t,Gn,In,wn],styles:["@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out forwards}"]})}};var Di=(n,e)=>e.id;function pS(n,e){if(n&1&&p(0),n&2){let t,i=C();k(" Gestione per: ",(t=i.selectedClient())==null?null:t.name," ")}}function mS(n,e){n&1&&p(0," Panoramica Generale - Tutte le Aziende ")}function hS(n,e){if(n&1&&(y(0,"option",60),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),V(t.name)}}function gS(n,e){if(n&1){let t=H();y(0,"div")(1,"label",34),p(2,"Azienda"),_(),y(3,"select",35),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.filterClientId,o)||(r.filterClientId=o),S(o)}),L("change",function(){I(t);let o=C();return S(o.applyFilters())}),y(4,"option",36),p(5,"Tutte le Aziende"),_(),j(6,hS,2,2,"option",60,Di),_()()}if(n&2){let t=C();m(3),Fe("ngModel",t.filterClientId),m(3),W(t.state.clients())}}function vS(n,e){if(n&1){let t=H();y(0,"div",50)(1,"button",61),L("click",function(){I(t);let o=C();return S(o.resetFilters())}),D(2,"i",62),p(3," Azzera Filtri "),_()()}}function _S(n,e){if(n&1&&(y(0,"span",57),p(1),_()),n&2){let t=C();m(),V(t.activeReminders().length)}}function yS(n,e){n&1&&(y(0,"div",67),D(1,"i",69),y(2,"p",70),p(3,"Nessun pagamento registrato"),_()())}function xS(n,e){if(n&1&&(y(0,"div")(1,"span",80),p(2,"Pagato il:"),_(),y(3,"span",86),p(4),ie(5,"date"),_()()),n&2){let t=C().$implicit;m(4),V(oe(5,1,t.paidDate,"dd/MM/yyyy"))}}function ES(n,e){if(n&1&&(y(0,"div",82)(1,"span",80),p(2,"Note:"),_(),y(3,"span",87),p(4),_()()),n&2){let t=C().$implicit;m(4),V(t.notes)}}function CS(n,e){if(n&1){let t=H();y(0,"button",88),L("click",function(){I(t);let o=C().$implicit,r=C(3);return S(r.markAsPaid(o.id))}),D(1,"i",89),p(2," Segna Pagato "),_()}}function bS(n,e){if(n&1){let t=H();y(0,"button",90),L("click",function(){I(t);let o=C().$implicit,r=C(3);return S(r.sendReminder(o.clientId))}),D(1,"i",91),p(2," Sollecito "),_()}}function wS(n,e){if(n&1&&(y(0,"div",72)(1,"div",73)(2,"div",74)(3,"div",75)(4,"h4",76),p(5),_(),y(6,"span",77),p(7),_(),y(8,"span",78),p(9),_()(),y(10,"div",79)(11,"div")(12,"span",80),p(13,"Importo:"),_(),y(14,"span",81),p(15),_()(),y(16,"div")(17,"span",80),p(18,"Scadenza:"),_(),y(19,"span",81),p(20),ie(21,"date"),_()(),T(22,xS,6,4,"div"),T(23,ES,5,1,"div",82),_()(),y(24,"div",83),T(25,CS,3,0,"button",84),T(26,bS,3,0,"button",85),_()()()),n&2){let t=e.$implicit,i=C(3),o=i.getClient(t.clientId);N("border-emerald-200",t.status==="paid")("bg-emerald-50/30",t.status==="paid")("border-orange-200",t.status==="pending")("bg-orange-50/30",t.status==="pending")("border-red-200",t.status==="overdue")("bg-red-50/30",t.status==="overdue"),m(5),V((o==null?null:o.name)||"Cliente Sconosciuto"),m(),N("bg-emerald-100",t.status==="paid")("text-emerald-700",t.status==="paid")("bg-orange-100",t.status==="pending")("text-orange-700",t.status==="pending")("bg-red-100",t.status==="overdue")("text-red-700",t.status==="overdue"),m(),k(" ",i.getStatusLabel(t.status)," "),m(2),k(" ",i.getFrequencyLabel(t.frequency)," "),m(6),k("\u20AC",t.amount),m(5),V(oe(21,33,t.dueDate,"dd/MM/yyyy")),m(2),M(t.paidDate?22:-1),m(),M(t.notes?23:-1),m(2),M(t.status!=="paid"?25:-1),m(),M(t.status==="overdue"?26:-1)}}function IS(n,e){if(n&1&&(y(0,"div",68),j(1,wS,27,36,"div",71,Di),_()),n&2){let t=C(2);m(),W(t.filteredPayments())}}function SS(n,e){if(n&1){let t=H();y(0,"div",58)(1,"div",63)(2,"h3",64),p(3,"Gestione Pagamenti"),_(),y(4,"button",65),L("click",function(){I(t);let o=C();return S(o.openPaymentModal())}),D(5,"i",66),p(6," Nuovo Pagamento "),_()(),T(7,yS,4,0,"div",67)(8,IS,3,0,"div",68),_()}if(n&2){let t=C();m(7),M(t.filteredPayments().length===0?7:8)}}function DS(n,e){n&1&&(y(0,"div",67),D(1,"i",94),y(2,"p",70),p(3,"Nessuna registrazione in prima nota"),_()())}function TS(n,e){n&1&&(y(0,"th",97),p(1,"Azienda"),_())}function MS(n,e){if(n&1&&(y(0,"td",105),p(1),_()),n&2){C();let t=ro(0);m(),V(t==null?null:t.name)}}function AS(n,e){if(n&1&&(oo(0),y(1,"tr",99)(2,"td",104),p(3),ie(4,"date"),_(),T(5,MS,2,1,"td",105),y(6,"td",106),p(7),_(),y(8,"td",107)(9,"span",108),p(10),_()(),y(11,"td",109),p(12),_(),y(13,"td",110),p(14),_()()),n&2){let t=e.$implicit,i=C(3);er(i.getClient(t.clientId)),m(3),V(oe(4,23,t.date,"dd/MM/yyyy")),m(2),M(i.selectedClient()?-1:5),m(2),V(t.description),m(2),N("bg-blue-100",t.category==="payment")("text-blue-700",t.category==="payment")("bg-red-100",t.category==="expense")("text-red-700",t.category==="expense")("bg-green-100",t.category==="refund")("text-green-700",t.category==="refund")("bg-slate-100",t.category==="other")("text-slate-700",t.category==="other"),m(),k(" ",i.getCategoryLabel(t.category)," "),m(2),k(" ",t.debit>0?"\u20AC"+t.debit:"-"," "),m(2),k(" ",t.credit>0?"\u20AC"+t.credit:"-"," ")}}function kS(n,e){if(n&1&&(y(0,"div",93)(1,"table",95)(2,"thead",96)(3,"tr")(4,"th",97),p(5,"Data"),_(),T(6,TS,2,0,"th",97),y(7,"th",97),p(8,"Descrizione"),_(),y(9,"th",97),p(10,"Categoria"),_(),y(11,"th",98),p(12,"Dare"),_(),y(13,"th",98),p(14,"Avere"),_()()(),y(15,"tbody"),j(16,AS,15,26,"tr",99,Di),y(18,"tr",100)(19,"td",101),p(20,"TOTALI:"),_(),y(21,"td",102),p(22),_(),y(23,"td",103),p(24),_()()()()()),n&2){let t=C(2);m(6),M(t.selectedClient()?-1:6),m(10),W(t.filteredJournalEntries()),m(3),Qo("colspan",t.selectedClient()?3:4),m(3),k("\u20AC",t.totalDebit()),m(2),k("\u20AC",t.totalCredit())}}function NS(n,e){if(n&1){let t=H();y(0,"div",58)(1,"div",63)(2,"h3",64),p(3,"Prima Nota"),_(),y(4,"button",92),L("click",function(){I(t);let o=C();return S(o.openJournalModal())}),D(5,"i",66),p(6," Nuova Registrazione "),_()(),T(7,DS,4,0,"div",67)(8,kS,25,4,"div",93),_()}if(n&2){let t=C();m(7),M(t.filteredJournalEntries().length===0?7:8)}}function RS(n,e){n&1&&(y(0,"div",67),D(1,"i",112),y(2,"p",70),p(3,"Nessun promemoria attivo"),_()())}function PS(n,e){n&1&&(y(0,"span",116),p(1,"Archiviato"),_())}function FS(n,e){if(n&1){let t=H();y(0,"button",121),L("click",function(){I(t);let o=C().$implicit,r=C(3);return S(r.dismissReminder(o.id))}),D(1,"i",89),p(2," Archivia "),_()}}function OS(n,e){if(n&1&&(y(0,"div",114)(1,"div",73)(2,"div",74)(3,"div",75),D(4,"i",115),y(5,"h4",76),p(6),_(),y(7,"span",78),p(8),_(),T(9,PS,2,0,"span",116),_(),y(10,"p",117),p(11),_(),y(12,"p",118),p(13," Scadenza: "),y(14,"span",119),p(15),ie(16,"date"),_()()(),T(17,FS,3,0,"button",120),_()()),n&2){let t=e.$implicit,i=C(3),o=i.getClient(t.clientId);N("border-red-200",t.priority==="high"&&!t.dismissed)("bg-red-50/30",t.priority==="high"&&!t.dismissed)("border-orange-200",t.priority==="medium"&&!t.dismissed)("bg-orange-50/30",t.priority==="medium"&&!t.dismissed)("border-blue-200",t.priority==="low"&&!t.dismissed)("bg-blue-50/30",t.priority==="low"&&!t.dismissed)("border-slate-200",t.dismissed)("bg-slate-50",t.dismissed)("opacity-50",t.dismissed),m(4),N("fa-exclamation-triangle",t.priority==="high")("text-red-600",t.priority==="high")("fa-info-circle",t.priority==="medium")("text-orange-600",t.priority==="medium")("fa-bell",t.priority==="low")("text-blue-600",t.priority==="low"),m(2),V((o==null?null:o.name)||"Generale"),m(2),k(" ",i.getReminderTypeLabel(t.type)," "),m(),M(t.dismissed?9:-1),m(2),V(t.message),m(4),V(oe(16,36,t.dueDate,"dd/MM/yyyy")),m(2),M(t.dismissed?-1:17)}}function VS(n,e){if(n&1&&(y(0,"div",68),j(1,OS,18,39,"div",113,Di),_()),n&2){let t=C(2);m(),W(t.filteredReminders())}}function LS(n,e){if(n&1){let t=H();y(0,"div",58)(1,"div",63)(2,"h3",64),p(3,"Promemoria e Scadenze"),_(),y(4,"button",111),L("click",function(){I(t);let o=C();return S(o.openReminderModal())}),D(5,"i",66),p(6," Nuovo Promemoria "),_()(),T(7,RS,4,0,"div",67)(8,VS,3,0,"div",68),_()}if(n&2){let t=C();m(7),M(t.filteredReminders().length===0?7:8)}}function US(n,e){if(n&1&&(y(0,"option",60),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),V(t.name)}}function BS(n,e){if(n&1){let t=H();y(0,"div",122),L("click",function(){I(t);let o=C();return S(o.closeModals())}),y(1,"div",123),L("click",function(o){return I(t),S(o.stopPropagation())}),y(2,"div",124)(3,"h3",125),p(4,"Nuovo Pagamento"),_(),y(5,"button",126),L("click",function(){I(t);let o=C();return S(o.closeModals())}),D(6,"i",127),_()(),y(7,"form",128),L("ngSubmit",function(){I(t);let o=C();return S(o.savePayment())}),y(8,"div")(9,"label",129),p(10,"Azienda"),_(),y(11,"select",130)(12,"option",36),p(13,"Seleziona Azienda"),_(),j(14,US,2,2,"option",60,Di),_()(),y(16,"div",131)(17,"div")(18,"label",129),p(19,"Importo (\u20AC)"),_(),D(20,"input",132),_(),y(21,"div")(22,"label",129),p(23,"Cadenza"),_(),y(24,"select",133)(25,"option",134),p(26,"Mensile"),_(),y(27,"option",135),p(28,"Trimestrale"),_(),y(29,"option",136),p(30,"Annuale"),_(),y(31,"option",137),p(32,"Una Tantum"),_()()()(),y(33,"div")(34,"label",129),p(35,"Data Scadenza"),_(),D(36,"input",138),_(),y(37,"div")(38,"label",129),p(39,"Note"),_(),D(40,"textarea",139),_(),y(41,"div",140)(42,"button",141),L("click",function(){I(t);let o=C();return S(o.closeModals())}),p(43," Annulla "),_(),y(44,"button",142),p(45," Salva Pagamento "),_()()()()()}if(n&2){let t=C();m(7),X("formGroup",t.paymentForm),m(7),W(t.state.clients()),m(30),X("disabled",!t.paymentForm.valid)}}function HS(n,e){if(n&1&&(y(0,"option",60),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),V(t.name)}}function $S(n,e){if(n&1){let t=H();y(0,"div",122),L("click",function(){I(t);let o=C();return S(o.closeModals())}),y(1,"div",123),L("click",function(o){return I(t),S(o.stopPropagation())}),y(2,"div",143)(3,"h3",125),p(4,"Nuova Registrazione Prima Nota"),_(),y(5,"button",126),L("click",function(){I(t);let o=C();return S(o.closeModals())}),D(6,"i",127),_()(),y(7,"form",128),L("ngSubmit",function(){I(t);let o=C();return S(o.saveJournal())}),y(8,"div")(9,"label",129),p(10,"Azienda"),_(),y(11,"select",144)(12,"option",36),p(13,"Seleziona Azienda"),_(),j(14,HS,2,2,"option",60,Di),_()(),y(16,"div",131)(17,"div")(18,"label",129),p(19,"Data"),_(),D(20,"input",145),_(),y(21,"div")(22,"label",129),p(23,"Categoria"),_(),y(24,"select",146)(25,"option",147),p(26,"Incasso"),_(),y(27,"option",148),p(28,"Spesa"),_(),y(29,"option",149),p(30,"Rimborso"),_(),y(31,"option",150),p(32,"Altro"),_()()()(),y(33,"div")(34,"label",129),p(35,"Descrizione"),_(),D(36,"textarea",151),_(),y(37,"div",131)(38,"div")(39,"label",129),p(40,"Dare (\u20AC)"),_(),D(41,"input",152),_(),y(42,"div")(43,"label",129),p(44,"Avere (\u20AC)"),_(),D(45,"input",153),_()(),y(46,"div",140)(47,"button",141),L("click",function(){I(t);let o=C();return S(o.closeModals())}),p(48," Annulla "),_(),y(49,"button",154),p(50," Salva Registrazione "),_()()()()()}if(n&2){let t=C();m(7),X("formGroup",t.journalForm),m(7),W(t.state.clients()),m(35),X("disabled",!t.journalForm.valid)}}function GS(n,e){if(n&1&&(y(0,"option",60),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),V(t.name)}}function zS(n,e){if(n&1){let t=H();y(0,"div",122),L("click",function(){I(t);let o=C();return S(o.closeModals())}),y(1,"div",123),L("click",function(o){return I(t),S(o.stopPropagation())}),y(2,"div",155)(3,"h3",125),p(4,"Nuovo Promemoria"),_(),y(5,"button",126),L("click",function(){I(t);let o=C();return S(o.closeModals())}),D(6,"i",127),_()(),y(7,"form",128),L("ngSubmit",function(){I(t);let o=C();return S(o.saveReminder())}),y(8,"div")(9,"label",129),p(10,"Azienda"),_(),y(11,"select",156)(12,"option",36),p(13,"Seleziona Azienda"),_(),j(14,GS,2,2,"option",60,Di),_()(),y(16,"div",131)(17,"div")(18,"label",129),p(19,"Tipo"),_(),y(20,"select",157)(21,"option",147),p(22,"Pagamento"),_(),y(23,"option",158),p(24,"Scadenza"),_(),y(25,"option",159),p(26,"Promemoria"),_()()(),y(27,"div")(28,"label",129),p(29,"Priorit\xE0"),_(),y(30,"select",160)(31,"option",161),p(32,"Bassa"),_(),y(33,"option",162),p(34,"Media"),_(),y(35,"option",163),p(36,"Alta"),_()()()(),y(37,"div")(38,"label",129),p(39,"Messaggio"),_(),D(40,"textarea",164),_(),y(41,"div")(42,"label",129),p(43,"Data Scadenza"),_(),D(44,"input",165),_(),y(45,"div",140)(46,"button",141),L("click",function(){I(t);let o=C();return S(o.closeModals())}),p(47," Annulla "),_(),y(48,"button",166),p(49," Salva Promemoria "),_()()()()()}if(n&2){let t=C();m(7),X("formGroup",t.reminderForm),m(7),W(t.state.clients()),m(34),X("disabled",!t.reminderForm.valid)}}var ka=class n{constructor(){this.state=$(ee);this.toastService=$(Be);this.fb=$(qn);this.activeTab=B("payments");this.showPaymentModal=B(!1);this.showJournalModal=B(!1);this.showReminderModal=B(!1);this.filterMonth="";this.filterClientId="";this.filterDateFrom="";this.filterDateTo="";this.payments=B([{id:"1",clientId:"c1",amount:150,frequency:"monthly",dueDate:"2026-02-15",paidDate:"2026-02-10",status:"paid",notes:"Pagamento regolare"},{id:"2",clientId:"c2",amount:200,frequency:"monthly",dueDate:"2026-02-01",status:"overdue",notes:"Sollecito inviato"},{id:"3",clientId:"c1",amount:150,frequency:"monthly",dueDate:"2026-01-15",paidDate:"2026-01-12",status:"paid",notes:"Pagamento Gennaio"},{id:"4",clientId:"c2",amount:200,frequency:"monthly",dueDate:"2026-03-01",status:"pending",notes:"Pagamento Marzo"},{id:"5",clientId:"c1",amount:450,frequency:"quarterly",dueDate:"2025-12-31",paidDate:"2025-12-28",status:"paid",notes:"Pagamento trimestrale Q4 2025"}]);this.journalEntries=B([{id:"1",clientId:"c1",date:"2026-02-10",description:"Pagamento servizio HACCP Febbraio",debit:0,credit:150,category:"payment"},{id:"2",clientId:"c2",date:"2026-01-15",description:"Rimborso spese formazione",debit:50,credit:0,category:"expense"},{id:"3",clientId:"c1",date:"2026-01-12",description:"Pagamento servizio HACCP Gennaio",debit:0,credit:150,category:"payment"},{id:"4",clientId:"c2",date:"2026-02-20",description:"Spese materiale consumabile",debit:75,credit:0,category:"expense"},{id:"5",clientId:"c1",date:"2025-12-28",description:"Pagamento trimestrale Q4 2025",debit:0,credit:450,category:"payment"}]);this.reminders=B([{id:"1",clientId:"c2",type:"payment",message:"Pagamento scaduto da 3 giorni - Inviare sollecito",dueDate:"2026-02-01",priority:"high",dismissed:!1}]);this.selectedClient=z(()=>{let e=this.state.filterCollaboratorId();if(!e)return null;let t=this.state.systemUsers().find(i=>i.id===e);return t?this.state.clients().find(i=>i.id===t.clientId):null});this.filteredPayments=z(()=>{let e=this.payments(),t=this.selectedClient();return t?e=e.filter(i=>i.clientId===t.id):this.filterClientId&&(e=e.filter(i=>i.clientId===this.filterClientId)),e=this.applyDateFilters(e,i=>i.dueDate),e});this.filteredJournalEntries=z(()=>{let e=this.journalEntries(),t=this.selectedClient();return t?e=e.filter(i=>i.clientId===t.id):this.filterClientId&&(e=e.filter(i=>i.clientId===this.filterClientId)),e=this.applyDateFilters(e,i=>i.date),e});this.filteredReminders=z(()=>{let e=this.reminders(),t=this.selectedClient();return t?e=e.filter(i=>i.clientId===t.id):this.filterClientId&&(e=e.filter(i=>i.clientId===this.filterClientId)),e=this.applyDateFilters(e,i=>i.dueDate),e});this.activeReminders=z(()=>this.reminders().filter(e=>!e.dismissed));this.totalPaid=z(()=>this.filteredPayments().filter(e=>e.status==="paid").reduce((e,t)=>e+t.amount,0));this.totalPending=z(()=>this.filteredPayments().filter(e=>e.status==="pending").reduce((e,t)=>e+t.amount,0));this.totalOverdue=z(()=>this.filteredPayments().filter(e=>e.status==="overdue").reduce((e,t)=>e+t.amount,0));this.totalDebit=z(()=>this.filteredJournalEntries().reduce((e,t)=>e+t.debit,0));this.totalCredit=z(()=>this.filteredJournalEntries().reduce((e,t)=>e+t.credit,0));this.overdueClients=z(()=>{let e=this.payments().filter(i=>i.status==="overdue"),t=[...new Set(e.map(i=>i.clientId))];return this.state.clients().filter(i=>t.includes(i.id))});this.paymentForm=this.fb.group({clientId:["",ae.required],amount:[0,[ae.required,ae.min(0)]],frequency:["monthly",ae.required],dueDate:["",ae.required],notes:[""]}),this.journalForm=this.fb.group({clientId:["",ae.required],date:["",ae.required],description:["",ae.required],debit:[0,ae.min(0)],credit:[0,ae.min(0)],category:["payment",ae.required]}),this.reminderForm=this.fb.group({clientId:["",ae.required],type:["payment",ae.required],message:["",ae.required],dueDate:["",ae.required],priority:["medium",ae.required]}),ye(()=>{if(this.state.currentUser()?.role==="ADMIN"){let t=this.overdueClients();t.length>0&&setTimeout(()=>{this.toastService.warning("Pagamenti Scaduti",`${t.length} aziende hanno pagamenti in ritardo. Controlla la sezione Contabilit\xE0.`)},1e3)}})}getClient(e){return this.state.clients().find(t=>t.id===e)}getStatusLabel(e){return{paid:"Pagato",pending:"In Attesa",overdue:"Scaduto"}[e]||e}getFrequencyLabel(e){return{monthly:"Mensile",quarterly:"Trimestrale",yearly:"Annuale","one-time":"Una Tantum"}[e]||e}getCategoryLabel(e){return{payment:"Incasso",expense:"Spesa",refund:"Rimborso",other:"Altro"}[e]||e}getReminderTypeLabel(e){return{payment:"Pagamento",deadline:"Scadenza",memo:"Promemoria"}[e]||e}openPaymentModal(){this.paymentForm.reset({frequency:"monthly",amount:0}),this.showPaymentModal.set(!0)}openJournalModal(){this.showJournalModal.set(!0)}openReminderModal(){this.showReminderModal.set(!0)}closeModals(){this.showPaymentModal.set(!1),this.showJournalModal.set(!1),this.showReminderModal.set(!1)}savePayment(){if(this.paymentForm.valid){let e=this.paymentForm.value,t=O(R({id:Math.random().toString(36).substr(2,9)},e),{status:"pending"});this.payments.update(i=>[...i,t]),this.toastService.success("Pagamento Aggiunto","Il pagamento \xE8 stato registrato con successo."),this.closeModals()}}markAsPaid(e){this.payments.update(t=>t.map(i=>i.id===e?O(R({},i),{status:"paid",paidDate:new Date().toISOString().split("T")[0]}):i)),this.toastService.success("Pagamento Confermato","Il pagamento \xE8 stato segnato come ricevuto.")}sendReminder(e){let t=this.getClient(e);this.toastService.info("Sollecito Inviato",`Sollecito di pagamento inviato a ${t?.name}`)}saveJournal(){if(this.journalForm.valid){let e=this.journalForm.value,t=R({id:Math.random().toString(36).substr(2,9)},e);this.journalEntries.update(i=>[...i,t]),this.toastService.success("Registrazione Aggiunta","La registrazione \xE8 stata salvata in prima nota."),this.closeModals()}}saveReminder(){if(this.reminderForm.valid){let e=this.reminderForm.value,t=O(R({id:Math.random().toString(36).substr(2,9)},e),{dismissed:!1});this.reminders.update(i=>[...i,t]),this.toastService.success("Promemoria Creato","Il promemoria \xE8 stato aggiunto con successo."),this.closeModals()}}dismissReminder(e){this.reminders.update(t=>t.map(i=>i.id===e?O(R({},i),{dismissed:!0}):i)),this.toastService.success("Promemoria Archiviato","Il promemoria \xE8 stato archiviato.")}applyDateFilters(e,t){let i=e;return this.filterMonth&&(i=i.filter(o=>{let r=t(o),a=(new Date(r).getMonth()+1).toString().padStart(2,"0");return!(this.filterMonth&&a!==this.filterMonth)})),this.filterDateFrom&&(i=i.filter(o=>t(o)>=this.filterDateFrom)),this.filterDateTo&&(i=i.filter(o=>t(o)<=this.filterDateTo)),i}applyFilters(){}hasActiveFilters(){return!!(this.filterMonth||this.filterClientId||this.filterDateFrom||this.filterDateTo)}resetFilters(){this.filterMonth="",this.filterClientId="",this.filterDateFrom="",this.filterDateTo="",this.applyFilters()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-accounting-view"]],decls:112,vars:47,consts:[[1,"space-y-6","pb-10"],[1,"bg-gradient-to-r","from-slate-900","via-slate-800","to-slate-900","p-8","rounded-3xl","shadow-xl","border","border-slate-700/50","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-euro-sign","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-gradient-to-br","from-green-500","to-emerald-600","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/20"],[1,"fa-solid","fa-calculator"],[1,"text-indigo-200","text-sm","mt-2","font-medium","ml-1"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"bg-white","rounded-xl","p-5","border","border-emerald-200","shadow-sm"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-emerald-600","font-bold","uppercase"],[1,"text-3xl","font-black","text-emerald-600","mt-1"],[1,"w-12","h-12","rounded-full","bg-emerald-100","flex","items-center","justify-center"],[1,"fa-solid","fa-circle-check","text-emerald-600","text-xl"],[1,"bg-white","rounded-xl","p-5","border","border-orange-200","shadow-sm"],[1,"text-xs","text-orange-600","font-bold","uppercase"],[1,"text-3xl","font-black","text-orange-600","mt-1"],[1,"w-12","h-12","rounded-full","bg-orange-100","flex","items-center","justify-center"],[1,"fa-solid","fa-clock","text-orange-600","text-xl"],[1,"bg-white","rounded-xl","p-5","border","border-red-200","shadow-sm"],[1,"text-xs","text-red-600","font-bold","uppercase"],[1,"text-3xl","font-black","text-red-600","mt-1"],[1,"w-12","h-12","rounded-full","bg-red-100","flex","items-center","justify-center"],[1,"fa-solid","fa-triangle-exclamation","text-red-600","text-xl"],[1,"bg-white","rounded-xl","p-5","border","border-blue-200","shadow-sm"],[1,"text-xs","text-blue-600","font-bold","uppercase"],[1,"text-3xl","font-black","text-blue-600","mt-1"],[1,"w-12","h-12","rounded-full","bg-blue-100","flex","items-center","justify-center"],[1,"fa-solid","fa-bell","text-blue-600","text-xl"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","p-6"],[1,"text-sm","font-bold","text-slate-700","uppercase","tracking-wide","mb-4","flex","items-center","gap-2"],[1,"fa-solid","fa-filter","text-slate-400"],[1,"block","text-xs","font-bold","text-slate-600","mb-2"],[1,"w-full","px-3","py-2","border","border-slate-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","text-sm",3,"ngModelChange","change","ngModel"],["value",""],["value","01"],["value","02"],["value","03"],["value","04"],["value","05"],["value","06"],["value","07"],["value","08"],["value","09"],["value","10"],["value","11"],["value","12"],["type","date",1,"w-full","px-3","py-2","border","border-slate-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","text-sm",3,"ngModelChange","change","ngModel"],[1,"mt-4","flex","justify-end"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","overflow-hidden"],[1,"border-b","border-slate-200","flex"],[1,"flex-1","px-6","py-4","font-bold","transition-all",3,"click"],[1,"fa-solid","fa-money-bill-wave","mr-2"],[1,"fa-solid","fa-book","mr-2"],[1,"fa-solid","fa-bell","mr-2"],[1,"ml-2","bg-orange-500","text-white","text-xs","px-2","py-0.5","rounded-full"],[1,"p-6"],[1,"fixed","inset-0","bg-black/50","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4"],[3,"value"],[1,"px-4","py-2","bg-slate-100","hover:bg-slate-200","text-slate-700","rounded-lg","text-sm","font-bold","transition-all","flex","items-center","gap-2",3,"click"],[1,"fa-solid","fa-rotate-left"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-lg","font-bold","text-slate-800"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","font-bold","transition-all","flex","items-center","gap-2",3,"click"],[1,"fa-solid","fa-plus"],[1,"text-center","py-12"],[1,"space-y-3"],[1,"fa-solid","fa-receipt","text-slate-200","text-6xl","mb-4"],[1,"text-slate-400","font-medium"],[1,"border-2","rounded-xl","p-4","transition-all","hover:shadow-md",3,"border-emerald-200","bg-emerald-50/30","border-orange-200","bg-orange-50/30","border-red-200","bg-red-50/30"],[1,"border-2","rounded-xl","p-4","transition-all","hover:shadow-md"],[1,"flex","items-start","justify-between","gap-4"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"font-bold","text-slate-800"],[1,"text-xs","font-bold","px-2","py-1","rounded"],[1,"text-xs","bg-slate-100","text-slate-600","px-2","py-1","rounded"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","text-sm"],[1,"text-slate-500"],[1,"font-bold","text-slate-800","ml-2"],[1,"col-span-2","md:col-span-1"],[1,"flex","gap-2"],[1,"px-3","py-2","bg-emerald-600","hover:bg-emerald-700","text-white","rounded-lg","text-sm","font-bold","transition-all"],[1,"px-3","py-2","bg-orange-600","hover:bg-orange-700","text-white","rounded-lg","text-sm","font-bold","transition-all"],[1,"font-bold","text-emerald-600","ml-2"],[1,"text-slate-700","ml-2"],[1,"px-3","py-2","bg-emerald-600","hover:bg-emerald-700","text-white","rounded-lg","text-sm","font-bold","transition-all",3,"click"],[1,"fa-solid","fa-check"],[1,"px-3","py-2","bg-orange-600","hover:bg-orange-700","text-white","rounded-lg","text-sm","font-bold","transition-all",3,"click"],[1,"fa-solid","fa-paper-plane"],[1,"px-4","py-2","bg-purple-600","hover:bg-purple-700","text-white","rounded-lg","font-bold","transition-all","flex","items-center","gap-2",3,"click"],[1,"overflow-x-auto"],[1,"fa-solid","fa-book-open","text-slate-200","text-6xl","mb-4"],[1,"w-full"],[1,"bg-slate-50","border-b-2","border-slate-200"],[1,"px-4","py-3","text-left","text-xs","font-bold","text-slate-600","uppercase"],[1,"px-4","py-3","text-right","text-xs","font-bold","text-slate-600","uppercase"],[1,"border-b","border-slate-100","hover:bg-slate-50"],[1,"bg-slate-100","font-bold"],[1,"px-4","py-3","text-right","text-slate-700"],[1,"px-4","py-3","text-right","text-slate-800"],[1,"px-4","py-3","text-right","text-emerald-600"],[1,"px-4","py-3","text-sm","text-slate-600"],[1,"px-4","py-3","text-sm","font-medium","text-slate-800"],[1,"px-4","py-3","text-sm","text-slate-700"],[1,"px-4","py-3"],[1,"text-xs","px-2","py-1","rounded","font-bold"],[1,"px-4","py-3","text-right","font-bold","text-slate-800"],[1,"px-4","py-3","text-right","font-bold","text-emerald-600"],[1,"px-4","py-2","bg-orange-600","hover:bg-orange-700","text-white","rounded-lg","font-bold","transition-all","flex","items-center","gap-2",3,"click"],[1,"fa-solid","fa-calendar-check","text-slate-200","text-6xl","mb-4"],[1,"border-2","rounded-xl","p-4","transition-all",3,"border-red-200","bg-red-50/30","border-orange-200","bg-orange-50/30","border-blue-200","bg-blue-50/30","border-slate-200","bg-slate-50","opacity-50"],[1,"border-2","rounded-xl","p-4","transition-all"],[1,"fa-solid"],[1,"text-xs","bg-slate-200","text-slate-500","px-2","py-1","rounded"],[1,"text-sm","text-slate-700","mb-2"],[1,"text-xs","text-slate-500"],[1,"font-bold"],[1,"px-3","py-2","bg-slate-600","hover:bg-slate-700","text-white","rounded-lg","text-sm","font-bold","transition-all"],[1,"px-3","py-2","bg-slate-600","hover:bg-slate-700","text-white","rounded-lg","text-sm","font-bold","transition-all",3,"click"],[1,"fixed","inset-0","bg-black/50","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4",3,"click"],[1,"bg-white","rounded-2xl","shadow-2xl","max-w-2xl","w-full","max-h-[90vh]","overflow-y-auto",3,"click"],[1,"sticky","top-0","bg-gradient-to-r","from-blue-600","to-blue-700","px-6","py-4","flex","justify-between","items-center"],[1,"text-xl","font-bold","text-white"],[1,"text-white","hover:bg-white/20","w-8","h-8","rounded-full","transition-colors",3,"click"],[1,"fa-solid","fa-xmark"],[1,"p-6","space-y-4",3,"ngSubmit","formGroup"],[1,"text-xs","font-bold","text-slate-500","uppercase","block","mb-2"],["formControlName","clientId",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none"],[1,"grid","grid-cols-2","gap-4"],["type","number","formControlName","amount","placeholder","0.00",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none"],["formControlName","frequency",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none"],["value","monthly"],["value","quarterly"],["value","yearly"],["value","one-time"],["type","date","formControlName","dueDate",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none"],["formControlName","notes","rows","3",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-blue-500","outline-none"],[1,"flex","gap-3","pt-4"],["type","button",1,"flex-1","px-4","py-3","bg-slate-200","hover:bg-slate-300","text-slate-700","rounded-lg","font-bold","transition-all",3,"click"],["type","submit",1,"flex-1","px-4","py-3","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","font-bold","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"sticky","top-0","bg-gradient-to-r","from-purple-600","to-purple-700","px-6","py-4","flex","justify-between","items-center"],["formControlName","clientId",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-purple-500","outline-none"],["type","date","formControlName","date",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-purple-500","outline-none"],["formControlName","category",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-purple-500","outline-none"],["value","payment"],["value","expense"],["value","refund"],["value","other"],["formControlName","description","rows","2",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-purple-500","outline-none"],["type","number","formControlName","debit","placeholder","0.00",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-purple-500","outline-none"],["type","number","formControlName","credit","placeholder","0.00",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-purple-500","outline-none"],["type","submit",1,"flex-1","px-4","py-3","bg-purple-600","hover:bg-purple-700","text-white","rounded-lg","font-bold","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"sticky","top-0","bg-gradient-to-r","from-orange-600","to-orange-700","px-6","py-4","flex","justify-between","items-center"],["formControlName","clientId",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-orange-500","outline-none"],["formControlName","type",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-orange-500","outline-none"],["value","deadline"],["value","memo"],["formControlName","priority",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-orange-500","outline-none"],["value","low"],["value","medium"],["value","high"],["formControlName","message","rows","3","placeholder","Descrivi il promemoria...",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-orange-500","outline-none"],["type","date","formControlName","dueDate",1,"w-full","px-4","py-3","rounded-lg","border","border-slate-200","focus:ring-2","focus:ring-orange-500","outline-none"],["type","submit",1,"flex-1","px-4","py-3","bg-orange-600","hover:bg-orange-700","text-white","rounded-lg","font-bold","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(t,i){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),D(3,"i",3),_(),y(4,"div",4)(5,"h2",5)(6,"span",6),D(7,"i",7),_(),p(8," Contabilit\xE0 e Gestione Pagamenti "),_(),y(9,"p",8),T(10,pS,1,1)(11,mS,1,0),_()()(),y(12,"div",9)(13,"div",10)(14,"div",11)(15,"div")(16,"p",12),p(17,"Incassato"),_(),y(18,"p",13),p(19),_()(),y(20,"div",14),D(21,"i",15),_()()(),y(22,"div",16)(23,"div",11)(24,"div")(25,"p",17),p(26,"In Attesa"),_(),y(27,"p",18),p(28),_()(),y(29,"div",19),D(30,"i",20),_()()(),y(31,"div",21)(32,"div",11)(33,"div")(34,"p",22),p(35,"Scaduti"),_(),y(36,"p",23),p(37),_()(),y(38,"div",24),D(39,"i",25),_()()(),y(40,"div",26)(41,"div",11)(42,"div")(43,"p",27),p(44,"Solleciti"),_(),y(45,"p",28),p(46),_()(),y(47,"div",29),D(48,"i",30),_()()()(),y(49,"div",31)(50,"h3",32),D(51,"i",33),p(52," Filtri Avanzati "),_(),y(53,"div",9)(54,"div")(55,"label",34),p(56,"Mese"),_(),y(57,"select",35),Oe("ngModelChange",function(r){return Ve(i.filterMonth,r)||(i.filterMonth=r),r}),L("change",function(){return i.applyFilters()}),y(58,"option",36),p(59,"Tutti i Mesi"),_(),y(60,"option",37),p(61,"Gennaio"),_(),y(62,"option",38),p(63,"Febbraio"),_(),y(64,"option",39),p(65,"Marzo"),_(),y(66,"option",40),p(67,"Aprile"),_(),y(68,"option",41),p(69,"Maggio"),_(),y(70,"option",42),p(71,"Giugno"),_(),y(72,"option",43),p(73,"Luglio"),_(),y(74,"option",44),p(75,"Agosto"),_(),y(76,"option",45),p(77,"Settembre"),_(),y(78,"option",46),p(79,"Ottobre"),_(),y(80,"option",47),p(81,"Novembre"),_(),y(82,"option",48),p(83,"Dicembre"),_()()(),T(84,gS,8,1,"div"),y(85,"div")(86,"label",34),p(87,"Data Da"),_(),y(88,"input",49),Oe("ngModelChange",function(r){return Ve(i.filterDateFrom,r)||(i.filterDateFrom=r),r}),L("change",function(){return i.applyFilters()}),_()(),y(89,"div")(90,"label",34),p(91,"Data A"),_(),y(92,"input",49),Oe("ngModelChange",function(r){return Ve(i.filterDateTo,r)||(i.filterDateTo=r),r}),L("change",function(){return i.applyFilters()}),_()()(),T(93,vS,4,0,"div",50),_(),y(94,"div",51)(95,"div",52)(96,"button",53),L("click",function(){return i.activeTab.set("payments")}),D(97,"i",54),p(98," Pagamenti "),_(),y(99,"button",53),L("click",function(){return i.activeTab.set("journal")}),D(100,"i",55),p(101," Prima Nota "),_(),y(102,"button",53),L("click",function(){return i.activeTab.set("reminders")}),D(103,"i",56),p(104," Promemoria "),T(105,_S,2,1,"span",57),_()(),T(106,SS,9,1,"div",58),T(107,NS,9,1,"div",58),T(108,LS,9,1,"div",58),_(),T(109,BS,46,2,"div",59),T(110,$S,51,2,"div",59),T(111,zS,50,2,"div",59),_()),t&2&&(m(10),M(i.selectedClient()?10:11),m(9),k("\u20AC",i.totalPaid()),m(9),k("\u20AC",i.totalPending()),m(9),k("\u20AC",i.totalOverdue()),m(9),V(i.overdueClients().length),m(11),Fe("ngModel",i.filterMonth),m(27),M(i.selectedClient()?-1:84),m(4),Fe("ngModel",i.filterDateFrom),m(4),Fe("ngModel",i.filterDateTo),m(),M(i.hasActiveFilters()?93:-1),m(3),N("bg-blue-50",i.activeTab()==="payments")("text-blue-600",i.activeTab()==="payments")("border-b-2",i.activeTab()==="payments")("border-blue-600",i.activeTab()==="payments")("text-slate-500",i.activeTab()!=="payments"),m(3),N("bg-purple-50",i.activeTab()==="journal")("text-purple-600",i.activeTab()==="journal")("border-b-2",i.activeTab()==="journal")("border-purple-600",i.activeTab()==="journal")("text-slate-500",i.activeTab()!=="journal"),m(3),N("bg-orange-50",i.activeTab()==="reminders")("text-orange-600",i.activeTab()==="reminders")("border-b-2",i.activeTab()==="reminders")("border-orange-600",i.activeTab()==="reminders")("text-slate-500",i.activeTab()!=="reminders"),m(3),M(i.activeReminders().length>0?105:-1),m(),M(i.activeTab()==="payments"?106:-1),m(),M(i.activeTab()==="journal"?107:-1),m(),M(i.activeTab()==="reminders"?108:-1),m(),M(i.showPaymentModal()?109:-1),m(),M(i.showJournalModal()?110:-1),m(),M(i.showReminderModal()?111:-1))},dependencies:[Z,jn,zn,cn,un,vt,Ku,kt,_t,Gn,bn,Wn,In,wn,ge],styles:["@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}"]})}};var mv=(n,e)=>e.id;function qS(n,e){n&1&&(h(0,"span",7),p(1,"CONFORME"),v())}function jS(n,e){n&1&&(h(0,"span",7),p(1,"NON CONFORME"),v())}function WS(n,e){n&1&&(h(0,"span"),p(1,"NON ESEGUITO"),v())}function YS(n,e){if(n&1&&(h(0,"tr",12)(1,"td",36),p(2),v(),h(3,"td",37),T(4,qS,2,0,"span",7),T(5,jS,2,0,"span",7),T(6,WS,2,0,"span"),v(),h(7,"td",38),p(8),v()()),n&2){let t=e.$implicit;m(2),V(t.label),m(2),M(t.status==="ok"?4:-1),m(),M(t.status==="issue"?5:-1),m(),M(t.status==="pending"?6:-1),m(2),k(" ",t.note||"-"," ")}}function JS(n,e){n&1&&p(0," In Attesa ")}function KS(n,e){n&1&&p(0," Conforme ")}function ZS(n,e){n&1&&p(0," Non Conforme ")}function QS(n,e){if(n&1){let t=H();h(0,"div",45)(1,"button",48),U("click",function(){I(t);let o=C().$implicit,r=C();return S(r.setStatus(o.id,"ok"))}),b(2,"i",49),v(),h(3,"button",50),U("click",function(){I(t);let o=C().$implicit,r=C();return S(r.openIssueModal(o))}),b(4,"i",51),v()()}}function XS(n,e){if(n&1){let t=H();h(0,"button",52),U("click",function(){I(t);let o=C().$implicit,r=C();return S(r.setStatus(o.id,"pending"))}),b(1,"i",53),v()}}function eD(n,e){if(n&1&&(h(0,"div",47),p(1),v()),n&2){let t=C().$implicit;m(),k(' "',t.note,'" ')}}function tD(n,e){if(n&1&&(h(0,"div",39)(1,"div",40)(2,"div",41),b(3,"i"),v(),h(4,"div",42)(5,"h3",43),p(6),v(),h(7,"p",44),T(8,JS,1,0),T(9,KS,1,0),T(10,ZS,1,0),v()(),T(11,QS,5,0,"div",45)(12,XS,2,0,"button",46),v(),T(13,eD,2,1,"div",47),v()),n&2){let t=e.$implicit;N("border-slate-100",t.status==="pending")("border-emerald-500",t.status==="ok")("border-red-500",t.status==="issue")("bg-emerald-50",t.status==="ok")("bg-red-50",t.status==="issue")("shadow-md",t.status!=="pending")("shadow-md",t.status!=="pending"),m(2),N("bg-slate-100",t.status==="pending")("text-slate-400",t.status==="pending")("bg-emerald-100",t.status==="ok")("text-emerald-600",t.status==="ok")("bg-red-100",t.status==="issue")("text-red-600",t.status==="issue"),m(),Pe("fa-solid "+t.icon),m(2),N("text-emerald-900",t.status==="ok")("text-red-900",t.status==="issue"),m(),k(" ",t.label," "),m(),N("text-slate-400",t.status==="pending")("text-emerald-600",t.status==="ok")("text-red-600",t.status==="issue"),m(),M(t.status==="pending"?8:-1),m(),M(t.status==="ok"?9:-1),m(),M(t.status==="issue"?10:-1),m(),M(t.status==="pending"?11:12),m(2),M(t.status==="issue"&&t.note?13:-1)}}function nD(n,e){if(n&1){let t=H();h(0,"button",56),U("click",function(){I(t);let o=C(2);return S(o.submitChecklist())}),h(1,"div")(2,"div",57),p(3,"Checklist Completa"),v(),h(4,"div",58),p(5,"REGISTRA ORA "),b(6,"i",59),v()()()}}function iD(n,e){if(n&1&&(h(0,"div",55),p(1),v()),n&2){let t=C(2);m(),k(" ",t.items().length-t.completedCount()," Rimanenti ")}}function oD(n,e){if(n&1&&T(0,nD,7,0,"button",54)(1,iD,2,1,"div",55),n&2){let t=C();M(t.isAllCompleted()?0:1)}}function rD(n,e){n&1&&b(0,"i",63)}function sD(n,e){n&1&&b(0,"i",51)}function aD(n,e){if(n&1){let t=H();h(0,"div",60)(1,"div",61)(2,"div",62),T(3,rD,1,0,"i",63)(4,sD,1,0,"i",51),v(),h(5,"div",64),p(6),v()()(),h(7,"div",65)(8,"div",66)(9,"button",67),U("click",function(){I(t);let o=C();return S(o.submitChecklist())}),b(10,"i",68),p(11," Salva "),v(),b(12,"div",69),h(13,"button",70),U("click",function(){I(t);let o=C();return S(o.printReport())}),b(14,"i",71),h(15,"span",72),p(16,"Stampa"),v()(),h(17,"button",73),U("click",function(){I(t);let o=C();return S(o.sendEmail())}),b(18,"i",74),h(19,"span",72),p(20,"Email"),v()(),h(21,"button",75),U("click",function(){I(t);let o=C();return S(o.sendInternalMessage())}),b(22,"i",76),h(23,"span",72),p(24,"Chat"),v()(),b(25,"div",69),h(26,"button",77),U("click",function(){I(t);let o=C();return S(o.startNewChecklist())}),b(27,"i",78),h(28,"span",72),p(29,"Nuova"),v()()()()}if(n&2){let t=C();m(),N("border-emerald-500",!t.hasIssues())("border-red-500",t.hasIssues()),m(),N("bg-emerald-500",!t.hasIssues())("bg-red-500",t.hasIssues()),m(),M(t.hasIssues()?4:3),m(2),N("text-emerald-600",!t.hasIssues())("text-red-600",t.hasIssues()),m(),k(" ",t.hasIssues()?"Non Conforme":"Conforme"," ")}}function lD(n,e){if(n&1){let t=H();h(0,"div",35)(1,"div",79),U("click",function(){I(t);let o=C();return S(o.closeModal())}),v(),h(2,"div",80)(3,"div",81)(4,"div",82),b(5,"i"),v(),h(6,"div")(7,"h3",83),p(8,"Segnala Problema"),v(),h(9,"p",84),p(10),v()()(),h(11,"div",85)(12,"div")(13,"label",86),p(14,"Descrizione Non Conformit\xE0"),v(),b(15,"textarea",87,0),v(),h(17,"div",45)(18,"button",88),U("click",function(){I(t);let o=C();return S(o.closeModal())}),p(19," Annulla "),v(),h(20,"button",89),U("click",function(){I(t);let o=En(16),r=C();return S(r.confirmIssue(o.value))}),p(21," Conferma "),v()()()()()}if(n&2){let t,i,o=C();m(5),Pe("fa-solid "+((t=o.currentItem())==null?null:t.icon)),m(5),V((i=o.currentItem())==null?null:i.label)}}var Na=class n{constructor(){this.state=$(ee);this.toast=$(Be);this.items=B([{id:"1",label:"Regolarit\xE0 documentazione",icon:"fa-file-signature",status:"pending"},{id:"2",label:"Sanificazione piani e attrezzature",icon:"fa-soap",status:"pending"},{id:"3",label:"Verifica DPI e abbigliamento idoneo",icon:"fa-shirt",status:"pending"},{id:"4",label:"Cucina e sale",icon:"fa-utensils",status:"pending"},{id:"5",label:"Area lavaggio",icon:"fa-sink",status:"pending"},{id:"6",label:"Deposito",icon:"fa-boxes-stacked",status:"pending"},{id:"7",label:"Spogliatoio",icon:"fa-shirt",status:"pending"},{id:"8",label:"Antibagno e bagno personale",icon:"fa-restroom",status:"pending"},{id:"9",label:"Bagno clienti",icon:"fa-people-arrows",status:"pending"},{id:"10",label:"Pavimenti",icon:"fa-table-cells",status:"pending"},{id:"11",label:"Pareti",icon:"fa-border-all",status:"pending"},{id:"12",label:"Soffitto",icon:"fa-cloud",status:"pending"},{id:"13",label:"Infissi",icon:"fa-door-closed",status:"pending"},{id:"14",label:"Anti-intrusione",icon:"fa-shield-cat",status:"pending"}]);this.isModalOpen=B(!1);this.currentItem=B(null);this.selectedDate=B(new Date().toISOString().split("T")[0]);this.isSubmitted=B(!1);this.currentRecordId=B(void 0);this.history=z(()=>this.state.checklistRecords().filter(e=>e.moduleId==="pre-op-checklist"||e.moduleId==="pre-operative").sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()));this.completedCount=z(()=>this.items().filter(e=>e.status!=="pending").length);this.progressPercentage=z(()=>this.items().length===0?0:this.completedCount()/this.items().length*100);this.isAllCompleted=z(()=>this.items().every(e=>e.status!=="pending"));this.hasIssues=z(()=>this.items().some(e=>e.status==="issue"));ye(()=>{let e=this.state.recordToEdit();e&&(e.moduleId==="pre-operative"||e.moduleId==="pre-op-checklist")&&(this.loadRecord(e),setTimeout(()=>this.state.completeEditing(),100))})}getTodayDate(){return new Date().toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}setStatus(e,t){this.items.update(i=>i.map(o=>o.id===e?O(R({},o),{status:t}):o))}setAllOk(){this.items.update(e=>e.map(t=>O(R({},t),{status:"ok"}))),this.toast.info("Tutto Conforme","Tutti i controlli sono stati impostati come conformi.")}openIssueModal(e){this.currentItem.set(e),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.currentItem.set(null)}confirmIssue(e){if(this.currentItem()){let t=this.currentItem().id;this.items.update(i=>i.map(o=>o.id===t?O(R({},o),{status:"issue",note:e||"Non conformit\xE0 generica"}):o))}this.closeModal()}submitChecklist(){let e=this.items().filter(o=>o.status==="issue"),t=e.length===0,i=this.currentRecordId()||Math.random().toString(36).substr(2,9);this.currentRecordId.set(i),this.state.saveChecklist({id:i,moduleId:"pre-op-checklist",date:this.selectedDate(),data:{items:this.items(),status:t?"Conforme":"Non Conforme",summary:t?"Tutto Conforme":`Rilevate ${e.length} non conformit\xE0`}}),this.toast.success("Checklist Registrata","I dati sono stati salvati nello storico."),this.isSubmitted.set(!0)}printReport(){window.print()}sendEmail(){let e=this.state.adminCompany().email||"amministrazione@haccp-pro.it";this.toast.success("Email Inviata",`Il report PDF \xE8 stato inviato a ${e}`)}sendInternalMessage(){let e=this.items().filter(o=>o.status==="issue").length,t=e===0?"Tutto Conforme":`Rilevate ${e} Non Conformit\xE0`,i={id:Date.now().toString(),senderId:this.state.currentUser()?.id||"unknown",senderName:this.state.currentUser()?.name||"Operatore",content:`Report Pre-Operativo di oggi completato. Esito: ${t}. Vedi allegato.`,timestamp:new Date,isRead:!1,attachments:["Report_PreOp_"+new Date().toLocaleDateString().replace(/\//g,"-")+".pdf"]};this.state.addMessage(i),this.toast.success("Messaggio Inviato","Il report \xE8 stato allegato alla messaggistica interna.")}startNewChecklist(){this.resetForm(),this.isSubmitted.set(!1),this.currentRecordId.set(void 0),this.selectedDate.set(new Date().toISOString().split("T")[0])}loadRecord(e){this.currentRecordId.set(e.id),this.selectedDate.set(e.date);let t=JSON.parse(JSON.stringify(e.data.items));this.items.set(t),this.isSubmitted.set(!0),window.scrollTo({top:0,behavior:"smooth"}),this.toast.info("Record Caricato","Puoi modificare e registrare nuovamente.")}deleteRecord(e){confirm("Sei sicuro di voler eliminare questa registrazione?")&&(this.state.deleteChecklist(e),this.currentRecordId()===e&&this.startNewChecklist())}resetForm(){this.items.update(e=>e.map(t=>O(R({},t),{status:"pending",note:void 0})))}getFormattedDate(){if(!this.selectedDate())return"";let e=this.selectedDate().split("-");return e.length===3?`${e[2]}/${e[1]}/${e[0]}`:this.selectedDate()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-pre-operative-checklist"]],decls:63,vars:10,consts:[["issueInput",""],[1,"pb-20","animate-fade-in","relative","max-w-2xl","mx-auto"],[1,"hidden","print:block","font-sans","text-black","p-4"],[1,"border-b-2","border-slate-800","pb-4","mb-6"],[1,"text-2xl","font-bold","uppercase","mb-1"],[1,"text-xl","font-light","text-slate-600"],[1,"flex","justify-between","mt-4","text-sm","text-slate-500"],[1,"font-bold"],[1,"w-full","text-left","text-sm","border-collapse"],[1,"border-b","border-slate-400"],[1,"py-2","font-bold","w-1/2"],[1,"py-2","font-bold","w-1/4"],[1,"border-b","border-slate-100"],[1,"mt-8","pt-4","border-t","border-slate-300","flex","justify-between","text-xs","text-slate-400"],[1,"print:hidden","bg-gradient-to-r","from-blue-600","to-cyan-500","rounded-b-3xl","p-6","shadow-xl","mb-6","-mx-4","md:mx-0","md:rounded-3xl","text-white","relative","overflow-hidden"],[1,"absolute","right-0","top-0","opacity-10","transform","translate-x-4","-translate-y-4"],[1,"fa-solid","fa-list-check","text-9xl"],[1,"relative","z-10"],[1,"text-2xl","font-black","mb-1"],[1,"text-blue-100","text-sm","font-medium","opacity-90","mb-4"],[1,"flex","items-center","gap-3"],[1,"flex-1","h-3","bg-black/20","rounded-full","overflow-hidden","backdrop-blur-sm"],[1,"h-full","bg-white","rounded-full","transition-all","duration-500","shadow-[0_0_10px_rgba(255,255,255,0.5)]"],[1,"text-xs","font-bold"],[1,"print:hidden","bg-white","p-4","rounded-2xl","shadow-sm","border","border-slate-100","mb-6","flex","items-center","justify-between","mx-auto","max-w-2xl","relative","z-20","-mt-4"],[1,"w-10","h-10","rounded-full","bg-blue-50","text-blue-600","flex","items-center","justify-center","shrink-0"],[1,"fa-solid","fa-calendar-day"],[1,"flex-1"],[1,"block","text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider","mb-1"],["type","date",1,"w-full","font-bold","text-slate-800","bg-transparent","focus:outline-none","cursor-pointer","border-none","p-0","text-base",3,"change","value"],["title","Imposta tutto come Conforme",1,"w-10","h-10","rounded-full","bg-emerald-50","text-emerald-600","flex","items-center","justify-center","hover:bg-emerald-100","transition-colors","shadow-sm","border","border-emerald-100",3,"click"],[1,"fa-solid","fa-check-double"],[1,"print:hidden","grid","grid-cols-1","sm:grid-cols-2","gap-3","px-1","md:px-0","mb-24","md:mb-0"],[1,"bg-white","rounded-2xl","shadow-sm","border-2","transition-all","duration-200","overflow-hidden","relative",3,"border-slate-100","border-emerald-500","border-red-500","bg-emerald-50","bg-red-50","shadow-md"],[1,"print:hidden","fixed","bottom-6","right-6","z-30","md:absolute","md:bottom-0","md:right-0","md:relative","md:mt-8","md:text-right","w-full","md:w-auto"],[1,"print:hidden","fixed","inset-0","z-50","flex","items-end","sm:items-center","justify-center","p-4","sm:p-6"],[1,"py-3","pr-2","font-medium"],[1,"py-3"],[1,"py-3","italic","text-slate-600"],[1,"bg-white","rounded-2xl","shadow-sm","border-2","transition-all","duration-200","overflow-hidden","relative"],[1,"p-4","flex","items-center","gap-4"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","text-xl","shadow-sm","transition-colors","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-sm","md:text-base","pr-1"],[1,"text-[10px]","uppercase","tracking-wide","font-bold","mt-0.5"],[1,"flex","gap-2"],[1,"w-8","h-8","rounded-full","bg-white/50","hover:bg-white","text-slate-400","hover:text-slate-600","flex","items-center","justify-center","transition-all","border","border-black/5","shadow-sm"],[1,"px-4","pb-3","pt-0","text-xs","text-red-700","italic","border-t","border-red-200/50","mt-1"],[1,"w-10","h-10","rounded-full","bg-slate-100","hover:bg-emerald-100","text-slate-300","hover:text-emerald-600","flex","items-center","justify-center","transition-all","active:scale-95","border","border-slate-200",3,"click"],[1,"fa-solid","fa-check","text-lg"],[1,"w-10","h-10","rounded-full","bg-slate-100","hover:bg-red-100","text-slate-300","hover:text-red-500","flex","items-center","justify-center","transition-all","active:scale-95","border","border-slate-200",3,"click"],[1,"fa-solid","fa-triangle-exclamation","text-sm"],[1,"w-8","h-8","rounded-full","bg-white/50","hover:bg-white","text-slate-400","hover:text-slate-600","flex","items-center","justify-center","transition-all","border","border-black/5","shadow-sm",3,"click"],[1,"fa-solid","fa-rotate-left","text-xs"],[1,"ml-auto","bg-emerald-600","text-white","rounded-2xl","px-6","py-4","shadow-2xl","shadow-emerald-500/40","font-bold","text-lg","flex","items-center","gap-3","hover:bg-emerald-700","hover:scale-105","transition-all","animate-bounce-short"],[1,"bg-slate-800","text-white","rounded-full","px-5","py-3","shadow-lg","text-xs","font-bold","opacity-80","backdrop-blur-md","float-right"],[1,"ml-auto","bg-emerald-600","text-white","rounded-2xl","px-6","py-4","shadow-2xl","shadow-emerald-500/40","font-bold","text-lg","flex","items-center","gap-3","hover:bg-emerald-700","hover:scale-105","transition-all","animate-bounce-short",3,"click"],[1,"leading-none","text-[10px]","uppercase","opacity-80","text-left"],[1,"flex","items-center"],[1,"fa-solid","fa-check-double","ml-2"],[1,"mb-4","flex","justify-center","animate-slide-up"],[1,"bg-white/90","backdrop-blur","rounded-full","px-6","py-2","shadow-lg","border","border-slate-200","flex","items-center","gap-3","select-none"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","text-white","shadow-sm","transition-colors","duration-300"],[1,"fa-solid","fa-check","text-sm"],[1,"font-bold","uppercase","text-sm"],[1,"bg-gradient-to-r","from-blue-600","to-cyan-500","text-white","p-3","rounded-2xl","shadow-2xl","animate-slide-up","mx-4","md:mx-0"],[1,"flex","flex-wrap","items-center","justify-center","gap-2"],[1,"px-6","py-2","bg-emerald-500","hover:bg-emerald-400","text-white","rounded-xl","font-bold","text-sm","transition-all","shadow-lg","hover:shadow-emerald-500/30","flex","items-center","justify-center","gap-2","border","border-emerald-400/50","ring-2","ring-emerald-500/20",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"w-px","h-8","bg-white/20","mx-1","hidden","sm:block"],["title","Stampa",1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","font-bold","text-sm","transition-colors","flex","items-center","justify-center","gap-2","backdrop-blur-sm","border","border-white/10",3,"click"],[1,"fa-solid","fa-print","text-white"],[1,"hidden","sm:inline"],["title","Email",1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","font-bold","text-sm","transition-colors","flex","items-center","justify-center","gap-2","backdrop-blur-sm","border","border-white/10",3,"click"],[1,"fa-solid","fa-envelope","text-white"],["title","Chat",1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","font-bold","text-sm","transition-colors","flex","items-center","justify-center","gap-2","backdrop-blur-sm","border","border-white/10",3,"click"],[1,"fa-solid","fa-comments","text-white"],["title","Nuova Compilazione",1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","text-blue-100","hover:text-white","transition-colors","border","border-white/10","flex","items-center","justify-center","gap-2","backdrop-blur-sm","whitespace-nowrap",3,"click"],[1,"fa-solid","fa-rotate-right"],[1,"absolute","inset-0","bg-slate-900/60","backdrop-blur-sm","transition-opacity",3,"click"],[1,"relative","w-full","max-w-sm","bg-white","rounded-3xl","shadow-2xl","overflow-hidden","animate-slide-up"],[1,"px-6","py-4","bg-red-50","border-b","border-red-100","flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-red-100","flex","items-center","justify-center","text-red-600","flex-shrink-0"],[1,"font-black","text-red-900","leading-none"],[1,"text-xs","text-red-700","mt-1","font-medium"],[1,"p-6","space-y-4"],[1,"block","text-xs","font-bold","text-slate-500","uppercase","mb-2"],["placeholder","Es. Pavimento sporco, maniglia rotta...",1,"w-full","bg-slate-50","border","border-slate-200","rounded-xl","p-3","text-slate-800","font-medium","focus:ring-2","focus:ring-red-500","focus:outline-none","resize-none","h-24","capitalize"],[1,"flex-1","py-3","bg-slate-100","text-slate-600","font-bold","rounded-xl","hover:bg-slate-200","transition-colors",3,"click"],[1,"flex-1","py-3","bg-red-600","text-white","font-bold","rounded-xl","hover:bg-red-700","shadow-lg","shadow-red-200","transition-colors",3,"click"]],template:function(t,i){if(t&1&&(h(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),p(4),v(),h(5,"h2",5),p(6,"Checklist Pre-Operativa"),v(),h(7,"div",6)(8,"span")(9,"span",7),p(10,"Data:"),v(),p(11),v(),h(12,"span")(13,"span",7),p(14,"Responsabile:"),v(),p(15),v()()(),h(16,"table",8)(17,"thead")(18,"tr",9)(19,"th",10),p(20,"Controllo"),v(),h(21,"th",11),p(22,"Esito"),v(),h(23,"th",11),p(24,"Note / Non Conformit\xE0"),v()()(),h(25,"tbody"),j(26,YS,9,5,"tr",12,mv),v()(),h(28,"div",13)(29,"span"),p(30,"Documento generato da HACCP Pro"),v(),h(31,"span"),p(32,"Firma: ________________________"),v()()(),h(33,"div",14)(34,"div",15),b(35,"i",16),v(),h(36,"div",17)(37,"h2",18),p(38,"Fase Pre-Operativa"),v(),h(39,"p",19),p(40," Esegui i controlli preliminari prima dell'apertura o inizio turno. "),v(),h(41,"div",20)(42,"div",21),b(43,"div",22),v(),h(44,"span",23),p(45),v()()()(),h(46,"div",24)(47,"div",20)(48,"div",25),b(49,"i",26),v(),h(50,"div",27)(51,"label",28),p(52,"Data di Registrazione"),v(),h(53,"input",29),U("change",function(r){return i.selectedDate.set(r.target.value)}),v()()(),h(54,"button",30),U("click",function(){return i.setAllOk()}),b(55,"i",31),v()(),h(56,"div",32),j(57,tD,14,44,"div",33,mv),v(),h(59,"div",34),T(60,oD,2,1)(61,aD,30,14),v(),T(62,lD,22,3,"div",35),v()),t&2){let o;m(4),V(i.state.adminCompany().name||"Azienda"),m(7),k(" ",i.getFormattedDate()),m(4),k(" ",((o=i.state.currentUser())==null?null:o.name)||"Operatore"),m(11),W(i.items()),m(17),Me("width",i.progressPercentage(),"%"),m(2),re("",i.completedCount(),"/",i.items().length),m(8),pt("value",i.selectedDate()),m(4),W(i.items()),m(3),M(i.isSubmitted()?61:60),m(2),M(i.isModalOpen()?62:-1)}},dependencies:[Z],styles:[".animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.animate-bounce-short[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceShort 1s infinite}@keyframes _ngcontent-%COMP%_bounceShort{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}"]})}};var hv=(n,e)=>e.id;function dD(n,e){n&1&&(h(0,"span",7),p(1,"CONFORME"),v())}function cD(n,e){n&1&&(h(0,"span",7),p(1,"NON CONFORME"),v())}function uD(n,e){n&1&&(h(0,"span"),p(1,"NON ESEGUITO"),v())}function fD(n,e){if(n&1&&(h(0,"tr",35)(1,"td",36),p(2),v(),h(3,"td",37),T(4,dD,2,0,"span",7),T(5,cD,2,0,"span",7),T(6,uD,2,0,"span"),v(),h(7,"td",38),p(8),v()()),n&2){let t=C().$implicit;m(2),V(t.label),m(2),M(t.status==="ok"?4:-1),m(),M(t.status==="issue"?5:-1),m(),M(t.status==="pending"?6:-1),m(2),k(" ",t.note||"-"," ")}}function pD(n,e){if(n&1&&T(0,fD,9,5,"tr",35),n&2){let t=e.$implicit;M(t.label?0:-1)}}function mD(n,e){if(n&1&&(h(0,"p",44),p(1),v()),n&2){let t=C().$implicit;m(),k("Note: ",t.note)}}function hD(n,e){if(n&1&&(h(0,"p",48),p(1),v()),n&2){let t=C().$implicit;N("text-slate-400",t.status==="pending")("text-emerald-600",t.status==="ok")("text-red-600",t.status==="issue"),m(),k(" ",t.status==="pending"?"In Attesa":t.status==="ok"?"Conforme":"Non Conforme"," ")}}function gD(n,e){if(n&1){let t=H();h(0,"button",49),U("click",function(){I(t);let o=C().$implicit,r=C();return S(r.setStatus(o.id,"ok"))}),b(1,"i",50),v(),h(2,"button",51),U("click",function(){I(t);let o=C().$implicit,r=C();return S(r.openIssueModal(o))}),b(3,"i",52),v()}}function vD(n,e){if(n&1){let t=H();h(0,"button",53),U("click",function(){I(t);let o=C().$implicit,r=C();return S(r.setStatus(o.id,"pending"))}),b(1,"i",54),v()}}function _D(n,e){if(n&1&&(h(0,"div",39)(1,"div",40)(2,"div",41),b(3,"i"),v(),h(4,"div",42)(5,"h4",43),p(6),v(),T(7,mD,2,1,"p",44)(8,hD,2,7,"p",45),v(),h(9,"div",46),T(10,gD,4,0)(11,vD,2,0,"button",47),v()()()),n&2){let t=e.$implicit;N("border-slate-100",t.status==="pending")("border-emerald-500",t.status==="ok")("border-red-500",t.status==="issue")("bg-emerald-50/30",t.status==="ok")("bg-red-50/30",t.status==="issue"),m(2),N("bg-slate-100",t.status==="pending")("text-slate-400",t.status==="pending")("bg-emerald-100",t.status==="ok")("text-emerald-600",t.status==="ok")("bg-red-100",t.status==="issue")("text-red-600",t.status==="issue"),m(),Pe("fa-solid "+t.icon),m(3),k(" ",t.label," "),m(),M(t.status==="issue"&&t.note?7:8),m(3),M(t.status==="pending"?10:11)}}function yD(n,e){if(n&1){let t=H();h(0,"button",57),U("click",function(){I(t);let o=C(2);return S(o.submitChecklist())}),h(1,"div")(2,"div",58),p(3,"Checklist Completa"),v(),h(4,"div",59),p(5,"REGISTRA ORA "),b(6,"i",60),v()()()}}function xD(n,e){if(n&1&&(h(0,"div",56),p(1),v()),n&2){let t=C(2);m(),k(" ",t.items().length-t.completedCount()-1," Rimanenti ")}}function ED(n,e){if(n&1&&T(0,yD,7,0,"button",55)(1,xD,2,1,"div",56),n&2){let t=C();M(t.isAllCompleted()?0:1)}}function CD(n,e){n&1&&b(0,"i",64)}function bD(n,e){n&1&&b(0,"i",52)}function wD(n,e){if(n&1){let t=H();h(0,"div",61)(1,"div",62)(2,"div",63),T(3,CD,1,0,"i",64)(4,bD,1,0,"i",52),v(),h(5,"div",65),p(6),v()()(),h(7,"div",66)(8,"div",67)(9,"button",68),U("click",function(){I(t);let o=C();return S(o.submitChecklist())}),b(10,"i",69),p(11," Salva "),v(),b(12,"div",70),h(13,"button",71),U("click",function(){I(t);let o=C();return S(o.printReport())}),b(14,"i",72),h(15,"span",73),p(16,"Stampa"),v()(),h(17,"button",71),U("click",function(){I(t);let o=C();return S(o.sendEmail())}),b(18,"i",74),h(19,"span",73),p(20,"Email"),v()(),h(21,"button",71),U("click",function(){I(t);let o=C();return S(o.sendInternalMessage())}),b(22,"i",75),h(23,"span",73),p(24,"Chat"),v()(),b(25,"div",70),h(26,"button",76),U("click",function(){I(t);let o=C();return S(o.startNewChecklist())}),b(27,"i",77),h(28,"span",73),p(29,"Nuova"),v()()()()}if(n&2){let t=C();m(),N("border-emerald-500",!t.hasIssues())("border-red-500",t.hasIssues()),m(),N("bg-emerald-500",!t.hasIssues())("bg-red-500",t.hasIssues()),m(),M(t.hasIssues()?4:3),m(2),N("text-emerald-600",!t.hasIssues())("text-red-600",t.hasIssues()),m(),k(" ",t.hasIssues()?"Non Conforme":"Conforme"," ")}}function ID(n,e){if(n&1){let t=H();h(0,"div",34)(1,"div",78),U("click",function(){I(t);let o=C();return S(o.closeModal())}),v(),h(2,"div",79)(3,"div",80)(4,"div",81),b(5,"i"),v(),h(6,"div")(7,"h3",82),p(8,"Segnala Problema"),v(),h(9,"p",83),p(10),v()()(),h(11,"div",84),b(12,"textarea",85,0),h(14,"div",46)(15,"button",86),U("click",function(){I(t);let o=C();return S(o.closeModal())}),p(16,"Annulla"),v(),h(17,"button",87),U("click",function(){I(t);let o=En(13),r=C();return S(r.confirmIssue(o.value))}),p(18,"Conferma"),v()()()()()}if(n&2){let t,i,o=C();m(5),Pe("fa-solid "+((t=o.currentItem())==null?null:t.icon)),m(5),V((i=o.currentItem())==null?null:i.label)}}var Ra=class n{constructor(){this.state=$(ee);this.toast=$(Be);this.frigoCount=B(2);this.congelatoreCount=B(1);this.pozzettoCount=B(1);this.isModalOpen=B(!1);this.currentItem=B(null);this.selectedDate=B(new Date().toISOString().split("T")[0]);this.isSubmitted=B(!1);this.currentRecordId=B(void 0);this.statusMap=B({});this.items=z(()=>{let e=this.statusMap();return[{id:"1",label:"Verifica temperature di lavorazione",icon:"fa-temperature-half",status:e[1]?.status||"pending",note:e[1]?.note},{id:"2",label:"Monitoraggio catena del freddo",icon:"fa-snowflake",status:e[2]?.status||"pending",note:e[2]?.note},{id:"3",label:"Controllo materie prime e semilavorati",icon:"fa-box-open",status:e[3]?.status||"pending",note:e[3]?.note},{id:"4",label:"Verifica tracciabilit\xE0 di produzione",icon:"fa-barcode",status:e[4]?.status||"pending",note:e[4]?.note},{id:"5",label:"Gestione allergeni e separazione",icon:"fa-triangle-exclamation",status:e[5]?.status||"pending",note:e[5]?.note},{id:"6",label:"Rispetto tempistiche di ricettazione",icon:"fa-clock",status:e[6]?.status||"pending",note:e[6]?.note}]});this.completedCount=z(()=>this.items().filter(e=>e.id!=="sep-dynamic"&&e.status!=="pending").length);this.progressPercentage=z(()=>{let e=this.items().length-1;return e>0?this.completedCount()/e*100:0});this.isAllCompleted=z(()=>this.items().every(e=>e.id==="sep-dynamic"||e.status!=="pending"));this.hasIssues=z(()=>this.items().some(e=>e.status==="issue"));ye(()=>{let e=this.state.recordToEdit();e&&e.moduleId==="operative-checklist"&&(this.loadRecord(e),setTimeout(()=>this.state.completeEditing(),100))},{allowSignalWrites:!0})}updateCount(e,t){e==="frigo"&&this.frigoCount.update(i=>Math.max(0,i+t)),e==="congelatore"&&this.congelatoreCount.update(i=>Math.max(0,i+t)),e==="pozzetto"&&this.pozzettoCount.update(i=>Math.max(0,i+t))}setStatus(e,t){this.statusMap.update(i=>O(R({},i),{[e]:{status:t,note:t==="ok"?void 0:i[e]?.note}}))}setAllOk(){let e={};this.items().forEach(t=>{t.id!=="sep-dynamic"&&(e[t.id]={status:"ok"})}),this.statusMap.set(e),this.toast.info("Tutto Conforme","Tutte le voci sono state impostate come conformi.")}openIssueModal(e){this.currentItem.set(e),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.currentItem.set(null)}confirmIssue(e){if(this.currentItem()){let t=this.currentItem().id;this.statusMap.update(i=>O(R({},i),{[t]:{status:"issue",note:e||"Non conformit\xE0"}}))}this.closeModal()}submitChecklist(){let e=this.currentRecordId()||Math.random().toString(36).substring(2,11);this.currentRecordId.set(e),this.state.saveChecklist({id:e,moduleId:"operative-checklist",date:this.selectedDate(),data:{items:this.items().filter(t=>t.id!=="sep-dynamic"),counts:{frigo:this.frigoCount(),congelatore:this.congelatoreCount(),pozzetto:this.pozzettoCount()},status:this.hasIssues()?"Non Conforme":"Conforme",summary:this.hasIssues()?"Rilevate non conformit\xE0":"Tutto conforme"}}),this.toast.success("Checklist Registrata","Salvata nello storico."),this.isSubmitted.set(!0)}startNewChecklist(){this.statusMap.set({}),this.isSubmitted.set(!1),this.currentRecordId.set(void 0),this.selectedDate.set(new Date().toISOString().split("T")[0])}loadRecord(e){this.currentRecordId.set(e.id),this.selectedDate.set(e.date);let t=e.data.counts||{frigo:0,congelatore:0,pozzetto:0};this.frigoCount.set(t.frigo),this.congelatoreCount.set(t.congelatore),this.pozzettoCount.set(t.pozzetto);let i={};e.data.items.forEach(o=>{i[o.id]={status:o.status,note:o.note}}),this.statusMap.set(i),this.isSubmitted.set(!0),window.scrollTo({top:0,behavior:"smooth"})}getFormattedDate(){let e=this.selectedDate().split("-");return e.length===3?`${e[2]}/${e[1]}/${e[0]}`:this.selectedDate()}printReport(){window.print()}sendEmail(){this.toast.success("Email Inviata","Report inviato alla sede.")}sendInternalMessage(){this.toast.success("Inviato","Report inviato in chat.")}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-operative-checklist"]],decls:63,vars:10,consts:[["issueInput",""],[1,"pb-20","animate-fade-in","relative","max-w-2xl","mx-auto"],[1,"hidden","print:block","font-sans","text-black","p-4"],[1,"border-b-2","border-slate-800","pb-4","mb-6"],[1,"text-2xl","font-bold","uppercase","mb-1"],[1,"text-xl","font-light","text-slate-600"],[1,"flex","justify-between","mt-4","text-sm","text-slate-500"],[1,"font-bold"],[1,"w-full","text-left","text-sm","border-collapse"],[1,"border-b","border-slate-400"],[1,"py-2","font-bold","w-1/2"],[1,"py-2","font-bold","w-1/4"],[1,"mt-8","pt-4","border-t","border-slate-300","flex","justify-between","text-xs","text-slate-400"],[1,"print:hidden","bg-gradient-to-r","from-indigo-600","to-blue-500","rounded-b-3xl","p-6","shadow-xl","mb-6","-mx-4","md:mx-0","md:rounded-3xl","text-white","relative","overflow-hidden"],[1,"absolute","right-0","top-0","opacity-10","transform","translate-x-4","-translate-y-4"],[1,"fa-solid","fa-briefcase","text-9xl"],[1,"relative","z-10"],[1,"text-2xl","font-black","mb-1"],[1,"text-indigo-100","text-sm","font-medium","opacity-90","mb-4"],[1,"flex","items-center","gap-3"],[1,"flex-1","h-3","bg-black/20","rounded-full","overflow-hidden","backdrop-blur-sm"],[1,"h-full","bg-white","rounded-full","transition-all","duration-500","shadow-[0_0_10px_rgba(255,255,255,0.5)]"],[1,"text-xs","font-bold"],[1,"print:hidden","bg-white","p-4","rounded-2xl","shadow-sm","border","border-slate-100","mb-6","flex","items-center","justify-between","mx-auto","max-w-2xl","relative","z-20","-mt-4"],[1,"w-10","h-10","rounded-full","bg-indigo-50","text-indigo-600","flex","items-center","justify-center","shrink-0"],[1,"fa-solid","fa-calendar-day"],[1,"flex-1"],[1,"block","text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider","mb-1"],["type","date",1,"w-full","font-bold","text-slate-800","bg-transparent","focus:outline-none","cursor-pointer","border-none","p-0","text-base",3,"change","value"],["title","Imposta tutto come Conforme",1,"w-10","h-10","rounded-full","bg-emerald-50","text-emerald-600","flex","items-center","justify-center","hover:bg-emerald-100","transition-colors","shadow-sm","border","border-emerald-100",3,"click"],[1,"fa-solid","fa-check-double"],[1,"print:hidden","space-y-3","mb-24","md:mb-0"],[1,"bg-white","rounded-2xl","border-2","transition-all","duration-200","overflow-hidden","relative","shadow-sm",3,"border-slate-100","border-emerald-500","border-red-500","bg-emerald-50/30","bg-red-50/30"],[1,"print:hidden","fixed","bottom-6","right-6","z-30","md:absolute","md:bottom-0","md:right-0","md:relative","md:mt-8","w-full","md:w-auto"],[1,"print:hidden","fixed","inset-0","z-50","flex","items-end","sm:items-center","justify-center","p-4","sm:p-6"],[1,"border-b","border-slate-100"],[1,"py-3","pr-2","font-medium"],[1,"py-3"],[1,"py-3","italic","text-slate-600","font-serif"],[1,"bg-white","rounded-2xl","border-2","transition-all","duration-200","overflow-hidden","relative","shadow-sm"],[1,"p-4","flex","items-center","gap-4"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","text-xl","shadow-sm","transition-colors","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-sm","md:text-base"],[1,"text-[10px]","text-red-600","italic","mt-0.5"],[1,"text-[10px]","uppercase","tracking-wide","font-black","mt-0.5",3,"text-slate-400","text-emerald-600","text-red-600"],[1,"flex","gap-2"],[1,"w-8","h-8","rounded-full","bg-white/50","hover:bg-white","text-slate-400","hover:text-slate-600","flex","items-center","justify-center","transition-all","border","border-black/5","shadow-sm"],[1,"text-[10px]","uppercase","tracking-wide","font-black","mt-0.5"],[1,"w-10","h-10","rounded-full","bg-slate-100","hover:bg-emerald-100","text-slate-300","hover:text-emerald-600","flex","items-center","justify-center","transition-all","border","border-slate-200",3,"click"],[1,"fa-solid","fa-check","text-lg"],[1,"w-10","h-10","rounded-full","bg-slate-100","hover:bg-red-100","text-slate-300","hover:text-red-500","flex","items-center","justify-center","transition-all","border","border-slate-200",3,"click"],[1,"fa-solid","fa-triangle-exclamation","text-sm"],[1,"w-8","h-8","rounded-full","bg-white/50","hover:bg-white","text-slate-400","hover:text-slate-600","flex","items-center","justify-center","transition-all","border","border-black/5","shadow-sm",3,"click"],[1,"fa-solid","fa-rotate-left","text-xs"],[1,"ml-auto","bg-emerald-600","text-white","rounded-2xl","px-6","py-4","shadow-2xl","shadow-emerald-500/40","font-bold","text-lg","flex","items-center","gap-3","hover:bg-emerald-700","hover:scale-105","transition-all"],[1,"bg-slate-800","text-white","rounded-full","px-5","py-3","shadow-lg","text-xs","font-bold","opacity-80","backdrop-blur-md","float-right"],[1,"ml-auto","bg-emerald-600","text-white","rounded-2xl","px-6","py-4","shadow-2xl","shadow-emerald-500/40","font-bold","text-lg","flex","items-center","gap-3","hover:bg-emerald-700","hover:scale-105","transition-all",3,"click"],[1,"leading-none","text-[10px]","uppercase","opacity-80","text-left"],[1,"flex","items-center"],[1,"fa-solid","fa-check-double","ml-2"],[1,"mb-4","flex","justify-center","animate-slide-up"],[1,"bg-white/90","backdrop-blur","rounded-full","px-6","py-2","shadow-lg","border","border-slate-200","flex","items-center","gap-3","select-none"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","text-white","shadow-sm","transition-colors","duration-300"],[1,"fa-solid","fa-check","text-sm"],[1,"font-bold","uppercase","text-sm"],[1,"bg-gradient-to-r","from-indigo-600","to-blue-500","text-white","p-3","rounded-2xl","shadow-2xl","animate-slide-up","mx-4","md:mx-0"],[1,"flex","flex-wrap","items-center","justify-center","gap-2"],[1,"px-6","py-2","bg-emerald-500","hover:bg-emerald-400","text-white","rounded-xl","font-bold","text-sm","transition-all","shadow-lg","hover:shadow-emerald-500/30","flex","items-center","justify-center","gap-2","border","border-emerald-400/50","ring-2","ring-emerald-500/20",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"w-px","h-8","bg-white/20","mx-1","hidden","sm:block"],[1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","font-bold","text-sm","flex","items-center","justify-center","gap-2","backdrop-blur-sm","border","border-white/10",3,"click"],[1,"fa-solid","fa-print"],[1,"hidden","sm:inline"],[1,"fa-solid","fa-envelope"],[1,"fa-solid","fa-comments"],[1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","text-blue-100","hover:text-white","flex","items-center","justify-center","gap-2","backdrop-blur-sm","whitespace-nowrap",3,"click"],[1,"fa-solid","fa-rotate-right"],[1,"absolute","inset-0","bg-slate-900/60","backdrop-blur-sm","transition-opacity",3,"click"],[1,"relative","w-full","max-w-sm","bg-white","rounded-3xl","shadow-2xl","overflow-hidden","animate-slide-up"],[1,"px-6","py-4","bg-red-50","border-b","border-red-100","flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-red-100","flex","items-center","justify-center","text-red-600","flex-shrink-0"],[1,"font-black","text-red-900"],[1,"text-xs","text-red-700","font-medium"],[1,"p-6","space-y-4"],["placeholder","Dettaglio non conformit\xE0...",1,"w-full","bg-slate-50","border","border-slate-200","rounded-xl","p-3","text-slate-800","focus:ring-2","focus:ring-red-500","focus:outline-none","h-24"],[1,"flex-1","py-3","bg-slate-100","text-slate-600","font-bold","rounded-xl",3,"click"],[1,"flex-1","py-3","bg-red-600","text-white","font-bold","rounded-xl","shadow-lg","shadow-red-200",3,"click"]],template:function(t,i){if(t&1&&(h(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),p(4),v(),h(5,"h2",5),p(6,"Checklist Operativa (Area 2)"),v(),h(7,"div",6)(8,"span")(9,"span",7),p(10,"Data:"),v(),p(11),v(),h(12,"span")(13,"span",7),p(14,"Responsabile:"),v(),p(15),v()()(),h(16,"table",8)(17,"thead")(18,"tr",9)(19,"th",10),p(20,"Controllo"),v(),h(21,"th",11),p(22,"Esito"),v(),h(23,"th",11),p(24,"Note / Non Conformit\xE0"),v()()(),h(25,"tbody"),j(26,pD,1,1,null,null,hv),v()(),h(28,"div",12)(29,"span"),p(30,"Documento generato da HACCP Pro"),v(),h(31,"span"),p(32,"Firma: ________________________"),v()()(),h(33,"div",13)(34,"div",14),b(35,"i",15),v(),h(36,"div",16)(37,"h2",17),p(38,"Fase Operativa"),v(),h(39,"p",18),p(40," Gestione operativa, catena del freddo e rintracciabilit\xE0. "),v(),h(41,"div",19)(42,"div",20),b(43,"div",21),v(),h(44,"span",22),p(45),v()()()(),h(46,"div",23)(47,"div",19)(48,"div",24),b(49,"i",25),v(),h(50,"div",26)(51,"label",27),p(52,"Data di Registrazione"),v(),h(53,"input",28),U("change",function(r){return i.selectedDate.set(r.target.value)}),v()()(),h(54,"button",29),U("click",function(){return i.setAllOk()}),b(55,"i",30),v()(),h(56,"div",31),j(57,_D,12,27,"div",32,hv),v(),h(59,"div",33),T(60,ED,2,1)(61,wD,30,14),v(),T(62,ID,19,3,"div",34),v()),t&2){let o;m(4),V(i.state.adminCompany().name||"Azienda"),m(7),k(" ",i.getFormattedDate()),m(4),k(" ",((o=i.state.currentUser())==null?null:o.name)||"Operatore"),m(11),W(i.items()),m(17),Me("width",i.progressPercentage(),"%"),m(2),re("",i.completedCount(),"/",i.items().length),m(8),pt("value",i.selectedDate()),m(4),W(i.items()),m(3),M(i.isSubmitted()?61:60),m(2),M(i.isModalOpen()?62:-1)}},dependencies:[Z],styles:[".animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}"]})}};var Pa=(n,e)=>e.id;function SD(n,e){n&1&&(h(0,"span",35),p(1,"CONFORME"),v())}function DD(n,e){n&1&&(h(0,"span",36),p(1,"NON CONFORME"),v())}function TD(n,e){n&1&&(h(0,"span",37),p(1,"NON ESEGUITO"),v())}function MD(n,e){if(n&1&&(h(0,"tr",39)(1,"td",40),b(2,"i",41),p(3),v(),h(4,"td",42),p(5,"NON CONFORME"),v(),h(6,"td",43),p(7,"Azione correttiva richiesta"),v()()),n&2){let t=C().$implicit;m(3),k(" Dettaglio: ",t.label," ")}}function AD(n,e){if(n&1&&T(0,MD,8,1,"tr",39),n&2){let t=e.$implicit;M(t.status==="issue"?0:-1)}}function kD(n,e){if(n&1&&(h(0,"tr",32)(1,"td",33),p(2),v(),h(3,"td",34),T(4,SD,2,0,"span",35)(5,DD,2,0,"span",36)(6,TD,2,0,"span",37),v(),h(7,"td",38),p(8," Verifica Area completata "),v()(),j(9,AD,1,1,null,null,Pa)),n&2){let t=e.$implicit,i=C();m(2),V(t.label),m(2),M(i.getAreaStatusLabel(t.id)==="Conforme"?4:i.getAreaStatusLabel(t.id)==="Rilevate Anomalie"?5:6),m(5),W(t.steps)}}function ND(n,e){n&1&&p(0," In Attesa ")}function RD(n,e){n&1&&p(0," Conforme ")}function PD(n,e){n&1&&p(0," Non Conforme ")}function FD(n,e){if(n&1){let t=H();h(0,"div",67)(1,"button",69),U("click",function(){I(t);let o=C().$implicit,r=C(2).$implicit,s=C();return S(s.setStepStatus(r.id,o.id,"ok"))}),b(2,"i",56),v(),h(3,"button",70),U("click",function(){I(t);let o=C().$implicit,r=C(2).$implicit,s=C();return S(s.setStepStatus(r.id,o.id,"issue"))}),b(4,"i",71),v()()}}function OD(n,e){if(n&1){let t=H();h(0,"button",72),U("click",function(){I(t);let o=C().$implicit,r=C(2).$implicit,s=C();return S(s.setStepStatus(r.id,o.id,"pending"))}),b(1,"i",73),v()}}function VD(n,e){if(n&1&&(h(0,"div",62)(1,"div",63)(2,"div",64),b(3,"i"),v(),h(4,"div",48)(5,"h4",65),p(6),v(),h(7,"p",66),T(8,ND,1,0),T(9,RD,1,0),T(10,PD,1,0),v()(),T(11,FD,5,0,"div",67)(12,OD,2,0,"button",68),v()()),n&2){let t=e.$implicit;N("border-slate-100",t.status==="pending")("border-emerald-500",t.status==="ok")("border-red-500",t.status==="issue")("bg-emerald-50",t.status==="ok")("bg-red-50",t.status==="issue"),m(2),N("bg-slate-100",t.status==="pending")("text-slate-400",t.status==="pending")("bg-emerald-100",t.status==="ok")("text-emerald-600",t.status==="ok")("bg-red-100",t.status==="issue")("text-red-600",t.status==="issue"),m(),Pe("fa-solid "+t.icon),m(2),N("text-emerald-900",t.status==="ok")("text-red-900",t.status==="issue"),m(),k(" ",t.label," "),m(),N("text-slate-400",t.status==="pending")("text-emerald-600",t.status==="ok")("text-red-600",t.status==="issue"),m(),M(t.status==="pending"?8:-1),m(),M(t.status==="ok"?9:-1),m(),M(t.status==="issue"?10:-1),m(),M(t.status==="pending"?11:12)}}function LD(n,e){if(n&1&&(h(0,"div",59)(1,"div",60),j(2,VD,13,39,"div",61,Pa),v()()),n&2){let t=C().$implicit;m(2),W(t.steps)}}function UD(n,e){if(n&1){let t=H();h(0,"div",44)(1,"div",45)(2,"div",46),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleArea(o.id))}),h(3,"div",47),b(4,"i"),v(),h(5,"div",48)(6,"h3",49),p(7),v(),h(8,"div",50)(9,"span",51),p(10),v(),h(11,"span",52),p(12),v()()(),b(13,"i",53),v(),h(14,"div",54),U("click",function(o){return I(t),S(o.stopPropagation())}),h(15,"button",55),U("click",function(){let o=I(t).$implicit,r=C();return S(r.setAllStepsInArea(o.id,"ok"))}),b(16,"i",56),v(),h(17,"button",57),U("click",function(){let o=I(t).$implicit,r=C();return S(r.setAllStepsInArea(o.id,"issue"))}),b(18,"i",58),v()()(),T(19,LD,4,0,"div",59),v()}if(n&2){let t=e.$implicit,i=C();N("ring-2",t.expanded)("ring-purple-500/20",t.expanded),m(3),N("bg-purple-100",i.isAreaComplete(t.id))("text-purple-600",i.isAreaComplete(t.id))("bg-slate-100",!i.isAreaComplete(t.id))("text-slate-400",!i.isAreaComplete(t.id)),m(),Pe("fa-solid "+t.icon),m(3),V(t.label),m(2),N("bg-emerald-100",i.isAreaComplete(t.id)&&!i.hasAreaIssues(t.id))("text-emerald-700",i.isAreaComplete(t.id)&&!i.hasAreaIssues(t.id))("bg-red-100",i.hasAreaIssues(t.id))("text-red-700",i.hasAreaIssues(t.id))("bg-slate-100",!i.isAreaComplete(t.id))("text-slate-500",!i.isAreaComplete(t.id)),m(),k(" ",i.getAreaStatusLabel(t.id)," "),m(2),k(" ",i.getCompletedStepsInArea(t.id)," di 5 completati "),m(),N("fa-chevron-down",!t.expanded)("fa-chevron-up",t.expanded)("rotate-180",t.expanded),m(2),N("bg-emerald-600",i.hasAreaOk(t.id))("text-white",i.hasAreaOk(t.id))("border-emerald-500",i.hasAreaOk(t.id))("bg-white",!i.hasAreaOk(t.id))("text-emerald-600",!i.hasAreaOk(t.id))("border-emerald-300",!i.hasAreaOk(t.id))("hover:border-emerald-400",!i.hasAreaOk(t.id)),m(2),N("bg-red-600",i.hasAreaIssues(t.id))("text-white",i.hasAreaIssues(t.id))("border-red-500",i.hasAreaIssues(t.id))("bg-white",!i.hasAreaIssues(t.id))("text-red-600",!i.hasAreaIssues(t.id))("border-red-300",!i.hasAreaIssues(t.id))("hover:border-red-400",!i.hasAreaIssues(t.id)),m(2),M(t.expanded?19:-1)}}function BD(n,e){if(n&1){let t=H();h(0,"button",76),U("click",function(){I(t);let o=C(2);return S(o.submitChecklist())}),h(1,"div")(2,"div",77),p(3,"Checklist Completa"),v(),h(4,"div",78),p(5,"REGISTRA ORA "),b(6,"i",79),v()()()}}function HD(n,e){if(n&1&&(h(0,"div",75),p(1),v()),n&2){let t=C(2);m(),k(" ",t.totalStepsCount()-t.completedStepsCount()," Rimanenti ")}}function $D(n,e){if(n&1&&T(0,BD,7,0,"button",74)(1,HD,2,1,"div",75),n&2){let t=C();M(t.isAllCompleted()?0:1)}}function GD(n,e){n&1&&b(0,"i",83)}function zD(n,e){n&1&&b(0,"i",71)}function qD(n,e){if(n&1){let t=H();h(0,"div",80)(1,"div",81)(2,"div",82),T(3,GD,1,0,"i",83)(4,zD,1,0,"i",71),v(),h(5,"div",84),p(6),v()()(),h(7,"div",85)(8,"div",86)(9,"button",87),U("click",function(){I(t);let o=C();return S(o.submitChecklist())}),b(10,"i",88),p(11," Salva "),v(),b(12,"div",89),h(13,"button",90),U("click",function(){I(t);let o=C();return S(o.printReport())}),b(14,"i",91),h(15,"span",92),p(16,"Stampa"),v()(),h(17,"button",93),U("click",function(){I(t);let o=C();return S(o.sendEmail())}),b(18,"i",94),h(19,"span",92),p(20,"Email"),v()(),h(21,"button",95),U("click",function(){I(t);let o=C();return S(o.sendInternalMessage())}),b(22,"i",96),h(23,"span",92),p(24,"Chat"),v()(),b(25,"div",89),h(26,"button",97),U("click",function(){I(t);let o=C();return S(o.startNewChecklist())}),b(27,"i",98),h(28,"span",92),p(29,"Nuova"),v()()()()}if(n&2){let t=C();m(),N("border-emerald-500",!t.hasIssues())("border-red-500",t.hasIssues()),m(),N("bg-emerald-500",!t.hasIssues())("bg-red-500",t.hasIssues()),m(),M(t.hasIssues()?4:3),m(2),N("text-emerald-600",!t.hasIssues())("text-red-600",t.hasIssues()),m(),k(" ",t.hasIssues()?"Non Conforme":"Conforme"," ")}}var Fa=class n{constructor(){this.state=$(ee);this.toast=$(Be);this.stepDefinitions=[{id:"pulizia",label:"Pulizia",icon:"fa-broom"},{id:"detersione",label:"Detersione",icon:"fa-pump-soap"},{id:"risciaquo1",label:"Risciacquo",icon:"fa-droplet"},{id:"disinfezione",label:"Disinfezione",icon:"fa-spray-can"},{id:"risciaquo2",label:"Risciacquo finale",icon:"fa-water"}];this.areas=B([{id:"cucina-sala",label:"Cucina e Sala",icon:"fa-utensils",steps:this.getInitialSteps(),expanded:!0},{id:"area-lavaggio",label:"Area Lavaggio",icon:"fa-sink",steps:this.getInitialSteps(),expanded:!1},{id:"deposito",label:"Deposito",icon:"fa-boxes-stacked",steps:this.getInitialSteps(),expanded:!1},{id:"spogliatoio",label:"Spogliatoio",icon:"fa-shirt",steps:this.getInitialSteps(),expanded:!1},{id:"antibagno-bagno-personale",label:"Antibagno e Bagno Personale",icon:"fa-restroom",steps:this.getInitialSteps(),expanded:!1},{id:"bagno-clienti",label:"Bagno Clienti",icon:"fa-people-arrows",steps:this.getInitialSteps(),expanded:!1},{id:"pavimenti",label:"Pavimenti",icon:"fa-table-cells",steps:this.getInitialSteps(),expanded:!1},{id:"pareti",label:"Pareti",icon:"fa-border-all",steps:this.getInitialSteps(),expanded:!1},{id:"soffitto",label:"Soffitto",icon:"fa-cloud",steps:this.getInitialSteps(),expanded:!1},{id:"infissi",label:"Infissi",icon:"fa-door-closed",steps:this.getInitialSteps(),expanded:!1},{id:"reti-antiintrusione",label:"Reti Anti-intrusione",icon:"fa-shield-cat",steps:this.getInitialSteps(),expanded:!1}]);this.isSubmitted=B(!1);this.currentRecordId=B(null);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}getInitialSteps(){return this.stepDefinitions.map(e=>({id:e.id,label:e.label,icon:e.icon,status:"pending"}))}loadData(){let e=this.state.filterDate()||new Date().toISOString().split("T")[0],t=this.state.checklistRecords().find(o=>o.moduleId==="post-op-checklist"&&o.date===e&&o.userId===this.state.currentUser()?.id);if(t){this.areas.set(JSON.parse(JSON.stringify(t.data.areas))),this.currentRecordId.set(t.id),this.isSubmitted.set(!0);return}let i=this.state.getRecord("post-op-checklist");i&&i.areas?(this.areas.set(JSON.parse(JSON.stringify(i.areas))),this.isSubmitted.set(!1),this.currentRecordId.set(null)):(this.areas.update(o=>o.map(r=>O(R({},r),{steps:this.getInitialSteps(),expanded:r.id==="cucina-sala"}))),this.isSubmitted.set(!1),this.currentRecordId.set(null))}toggleArea(e){this.areas.update(t=>t.map(i=>i.id===e?O(R({},i),{expanded:!i.expanded}):i))}setStepStatus(e,t,i){this.state.isContextEditable()&&(this.areas.update(o=>o.map(r=>r.id===e?O(R({},r),{steps:r.steps.map(s=>s.id===t?O(R({},s),{status:i}):s)}):r)),this.state.saveRecord("post-op-checklist",{areas:this.areas(),totalSteps:this.totalStepsCount(),completedSteps:this.completedStepsCount()}))}setAllStepsInArea(e,t){if(!this.state.isContextEditable())return;this.areas.update(r=>r.map(s=>s.id===e?O(R({},s),{steps:s.steps.map(a=>O(R({},a),{status:t})),expanded:!0}):s)),this.state.saveRecord("post-op-checklist",{areas:this.areas(),totalSteps:this.totalStepsCount(),completedSteps:this.completedStepsCount()});let i=this.areas().find(r=>r.id===e),o=t==="ok"?"Conforme":"Non Conforme";this.toast.success("Area Aggiornata",`Tutti i controlli di "${i?.label}" sono stati segnati come ${o}.`)}isAreaComplete(e){let t=this.areas().find(i=>i.id===e);return t?t.steps.every(i=>i.status!=="pending"):!1}isAreaAllOk(e){let t=this.areas().find(i=>i.id===e);return t?t.steps.every(i=>i.status==="ok"):!1}isAreaAllIssue(e){let t=this.areas().find(i=>i.id===e);return t?t.steps.every(i=>i.status==="issue"):!1}hasAreaIssues(e){let t=this.areas().find(i=>i.id===e);return t?t.steps.some(i=>i.status==="issue"):!1}hasAreaOk(e){let t=this.areas().find(i=>i.id===e);return t?t.steps.some(i=>i.status==="ok"):!1}getCompletedStepsInArea(e){let t=this.areas().find(i=>i.id===e);return t?t.steps.filter(i=>i.status!=="pending").length:0}getAreaStatusLabel(e){return this.isAreaComplete(e)?this.areas().find(r=>r.id===e)?.steps.some(r=>r.status==="issue")?"Rilevate Anomalie":"Conforme":"In corso"}totalStepsCount(){return this.areas().length*5}completedStepsCount(){return this.areas().reduce((e,t)=>e+t.steps.filter(i=>i.status!=="pending").length,0)}progressPercentage(){return this.completedStepsCount()/this.totalStepsCount()*100}isAllCompleted(){return this.completedStepsCount()===this.totalStepsCount()}hasIssues(){return this.areas().some(e=>e.steps.some(t=>t.status==="issue"))}getFormattedDate(){return new Date().toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}submitChecklist(){let e=this.state.filterDate()||new Date().toISOString().split("T")[0],t=this.state.checklistRecords().find(s=>s.moduleId==="post-op-checklist"&&s.date===e&&s.userId===this.state.currentUser()?.id),i=this.currentRecordId()||t?.id||Math.random().toString(36).substr(2,9);this.currentRecordId.set(i);let o=this.hasIssues(),r=o?"Non Conforme":"Conforme";this.state.saveChecklist({id:i,moduleId:"post-op-checklist",date:e,data:{areas:this.areas(),totalSteps:this.totalStepsCount(),completedSteps:this.completedStepsCount(),status:r,summary:o?`Rilevate anomalie in ${this.areas().filter(s=>s.steps.some(a=>a.status==="issue")).length} aree`:"Tutto Conforme"}}),t?this.toast.info("Registrazione Aggiornata","La registrazione esistente per oggi \xE8 stata sovrascritta con le nuove modifiche."):this.toast.success("Fase Post-Operativa Registrata","Le operazioni sono state salvate correttamente nello storico."),this.isSubmitted.set(!0),window.scrollTo({top:0,behavior:"smooth"})}resetForm(){this.isSubmitted.set(!1),this.areas.update(e=>e.map(t=>O(R({},t),{steps:this.getInitialSteps(),expanded:t.id==="cucina-sala"})))}setAllOk(){this.areas.update(e=>e.map(t=>O(R({},t),{steps:t.steps.map(i=>O(R({},i),{status:"ok"}))}))),this.toast.info("Tutto Conforme","Tutte le operazioni di pulizia sono state impostate come conformi.")}printReport(){window.scrollTo(0,0),setTimeout(()=>{window.print()},100)}sendEmail(){let e=this.state.adminCompany().email||"amministrazione@haccp-pro.it";this.toast.success("Email Inviata",`Il report PDF \xE8 stato inviato a ${e}`)}sendInternalMessage(){let e=this.areas().reduce((o,r)=>o+r.steps.filter(s=>s.status==="issue").length,0),t=e===0?"Tutto Conforme":`Rilevate ${e} Non Conformit\xE0`,i={id:Date.now().toString(),senderId:this.state.currentUser()?.id||"unknown",senderName:this.state.currentUser()?.name||"Operatore",content:`Report Post-Operativo di oggi completato. Esito: ${t}. Vedi allegato.`,timestamp:new Date,isRead:!1,attachments:["Report_Post_Operativo_"+new Date().toLocaleDateString().replace(/\//g,"-")+".pdf"]};this.state.addMessage(i),this.toast.success("Messaggio Inviato","Il report \xE8 stato allegato alla messaggistica interna.")}startNewChecklist(){this.resetForm(),window.scrollTo({top:0,behavior:"smooth"})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-post-operative-checklist"]],decls:63,vars:9,consts:[[1,"hidden","print:block","font-sans","text-black","p-4"],[1,"border-b-2","border-slate-800","pb-4","mb-6"],[1,"text-2xl","font-bold","uppercase","mb-1"],[1,"text-xl","font-light","text-slate-600"],[1,"flex","justify-between","mt-4","text-sm","text-slate-500"],[1,"font-bold"],[1,"w-full","text-left","text-sm","border-collapse"],[1,"border-b","border-slate-400"],[1,"py-2","font-bold","w-1/2"],[1,"py-2","font-bold","w-1/4"],[1,"mt-8","pt-4","border-t","border-slate-300","flex","justify-between","text-xs","text-slate-400"],[1,"print:hidden","pb-20","animate-fade-in","relative","max-w-3xl","mx-auto","px-4"],[1,"bg-gradient-to-r","from-purple-600","to-indigo-600","rounded-3xl","p-6","shadow-xl","mb-8","text-white","relative","overflow-hidden"],[1,"absolute","right-0","top-0","opacity-10","transform","translate-x-4","-translate-y-4"],[1,"fa-solid","fa-hourglass-end","text-9xl"],[1,"relative","z-10"],[1,"text-2xl","font-black","mb-1"],[1,"text-purple-100","text-sm","font-medium","opacity-90","mb-4"],[1,"flex","items-center","gap-3"],[1,"flex-1","h-3","bg-black/20","rounded-full","overflow-hidden","backdrop-blur-sm"],[1,"h-full","bg-white","rounded-full","transition-all","duration-500","shadow-[0_0_10px_rgba(255,255,255,0.5)]"],[1,"text-xs","font-bold"],[1,"print:hidden","bg-white","p-4","rounded-2xl","shadow-sm","border","border-slate-100","mb-6","flex","items-center","justify-between","mx-auto","max-w-3xl","relative","z-20","-mt-4"],[1,"w-10","h-10","rounded-full","bg-purple-50","text-purple-600","flex","items-center","justify-center","shrink-0","border","border-purple-100"],[1,"fa-solid","fa-calendar-check"],[1,"block","text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider"],["type","date",1,"w-full","font-bold","text-slate-800","bg-transparent","focus:outline-none","cursor-pointer","border-none","p-0","text-base",3,"change","value"],["title","Imposta tutto come Conforme",1,"w-10","h-10","rounded-full","bg-emerald-50","text-emerald-600","flex","items-center","justify-center","hover:bg-emerald-100","transition-colors","shadow-sm","border","border-emerald-100",3,"click"],[1,"fa-solid","fa-check-double"],[1,"space-y-4","mb-24"],[1,"bg-white","rounded-3xl","shadow-sm","border","border-slate-100","overflow-hidden","transition-all","duration-300",3,"ring-2","ring-purple-500/20"],[1,"print:hidden","fixed","bottom-6","right-6","z-30","md:absolute","md:bottom-0","md:right-0","md:relative","md:mt-8","md:text-right","w-full","md:w-auto"],[1,"border-b","border-slate-100","bg-slate-50/50"],[1,"py-2","pr-2","font-bold","uppercase","text-[11px]"],[1,"py-2"],[1,"font-bold","text-emerald-800"],[1,"font-bold","text-red-800"],[1,"text-slate-400"],[1,"py-2","italic","text-slate-400","text-[10px]"],[1,"border-b","border-slate-100","bg-red-50/30"],[1,"py-1","pl-6","pr-2","text-red-800","font-medium","text-[10px]"],[1,"fa-solid","fa-triangle-exclamation","mr-1","text-[8px]"],[1,"py-1","text-[10px]","font-bold","text-red-700"],[1,"py-1","italic","text-red-600","text-[9px]"],[1,"bg-white","rounded-3xl","shadow-sm","border","border-slate-100","overflow-hidden","transition-all","duration-300"],[1,"p-5","flex","items-center","gap-4"],[1,"flex","items-center","gap-4","cursor-pointer","hover:bg-slate-50","transition-colors","flex-1","-m-5","p-5","rounded-3xl",3,"click"],[1,"w-12","h-12","rounded-2xl","flex","items-center","justify-center","text-xl","shadow-sm","transition-colors","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"font-black","text-slate-800","text-lg"],[1,"flex","items-center","gap-2","mt-0.5"],[1,"text-[10px]","font-bold","px-2","py-0.5","rounded-full","uppercase","tracking-tighter"],[1,"text-[10px]","text-slate-400","font-medium"],[1,"fa-solid","transition-transform","duration-300","transform"],[1,"flex","gap-2","ml-2",3,"click"],["title","Segna tutto come conforme",1,"w-10","h-10","rounded-full","transition-all","flex","items-center","justify-center","border-2","shadow-sm","hover:scale-110","active:scale-95",3,"click"],[1,"fa-solid","fa-check","text-lg"],["title","Segna tutto come non conforme",1,"w-10","h-10","rounded-full","transition-all","flex","items-center","justify-center","border-2","shadow-sm","hover:scale-110","active:scale-95",3,"click"],[1,"fa-solid","fa-xmark","text-lg"],[1,"px-5","pb-6","pt-2","border-t","border-slate-50","bg-slate-50/50","animate-slide-down"],[1,"grid","grid-cols-1","gap-3"],[1,"bg-white","rounded-2xl","border-2","transition-all","duration-200","overflow-hidden","relative","shadow-sm",3,"border-slate-100","border-emerald-500","border-red-500","bg-emerald-50","bg-red-50"],[1,"bg-white","rounded-2xl","border-2","transition-all","duration-200","overflow-hidden","relative","shadow-sm"],[1,"p-4","flex","items-center","gap-4"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","text-xl","shadow-sm","transition-colors","flex-shrink-0"],[1,"font-bold","text-slate-800","text-sm","md:text-base"],[1,"text-[10px]","uppercase","tracking-wide","font-bold","mt-0.5"],[1,"flex","gap-2"],[1,"w-8","h-8","rounded-full","bg-white/50","hover:bg-white","text-slate-400","hover:text-slate-600","flex","items-center","justify-center","transition-all","border","border-black/5","shadow-sm"],[1,"w-10","h-10","rounded-full","bg-slate-100","hover:bg-emerald-100","text-slate-300","hover:text-emerald-600","flex","items-center","justify-center","transition-all","active:scale-95","border","border-slate-200",3,"click"],[1,"w-10","h-10","rounded-full","bg-slate-100","hover:bg-red-100","text-slate-300","hover:text-red-500","flex","items-center","justify-center","transition-all","active:scale-95","border","border-slate-200",3,"click"],[1,"fa-solid","fa-triangle-exclamation","text-sm"],[1,"w-8","h-8","rounded-full","bg-white/50","hover:bg-white","text-slate-400","hover:text-slate-600","flex","items-center","justify-center","transition-all","border","border-black/5","shadow-sm",3,"click"],[1,"fa-solid","fa-rotate-left","text-xs"],[1,"ml-auto","bg-emerald-600","text-white","rounded-2xl","px-6","py-4","shadow-2xl","shadow-emerald-500/40","font-bold","text-lg","flex","items-center","gap-3","hover:bg-emerald-700","hover:scale-105","transition-all","animate-bounce-short"],[1,"bg-slate-800","text-white","rounded-full","px-5","py-3","shadow-lg","text-xs","font-bold","opacity-80","backdrop-blur-md","float-right"],[1,"ml-auto","bg-emerald-600","text-white","rounded-2xl","px-6","py-4","shadow-2xl","shadow-emerald-500/40","font-bold","text-lg","flex","items-center","gap-3","hover:bg-emerald-700","hover:scale-105","transition-all","animate-bounce-short",3,"click"],[1,"leading-none","text-[10px]","uppercase","opacity-80","text-left"],[1,"flex","items-center"],[1,"fa-solid","fa-check-double","ml-2"],[1,"mb-4","flex","justify-center","animate-slide-up"],[1,"bg-white/90","backdrop-blur","rounded-full","px-6","py-2","shadow-lg","border","border-slate-200","flex","items-center","gap-3","select-none"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","text-white","shadow-sm","transition-colors","duration-300"],[1,"fa-solid","fa-check","text-sm"],[1,"font-bold","uppercase","text-sm"],[1,"bg-gradient-to-r","from-purple-600","to-indigo-600","text-white","p-3","rounded-2xl","shadow-2xl","animate-slide-up","mx-4","md:mx-0"],[1,"flex","flex-wrap","items-center","justify-center","gap-2"],[1,"px-6","py-2","bg-emerald-500","hover:bg-emerald-400","text-white","rounded-xl","font-bold","text-sm","transition-all","shadow-lg","hover:shadow-emerald-500/30","flex","items-center","justify-center","gap-2","border","border-emerald-400/50","ring-2","ring-emerald-500/20",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"w-px","h-8","bg-white/20","mx-1","hidden","sm:block"],["title","Stampa",1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","font-bold","text-sm","transition-colors","flex","items-center","justify-center","gap-2","backdrop-blur-sm","border","border-white/10",3,"click"],[1,"fa-solid","fa-print","text-white"],[1,"hidden","sm:inline"],["title","Email",1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","font-bold","text-sm","transition-colors","flex","items-center","justify-center","gap-2","backdrop-blur-sm","border","border-white/10",3,"click"],[1,"fa-solid","fa-envelope","text-white"],["title","Chat",1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","font-bold","text-sm","transition-colors","flex","items-center","justify-center","gap-2","backdrop-blur-sm","border","border-white/10",3,"click"],[1,"fa-solid","fa-comments","text-white"],["title","Nuova Compilazione",1,"px-4","py-2","bg-white/10","hover:bg-white/20","rounded-xl","text-purple-100","hover:text-white","transition-colors","border","border-white/10","flex","items-center","justify-center","gap-2","backdrop-blur-sm","whitespace-nowrap",3,"click"],[1,"fa-solid","fa-rotate-right"]],template:function(t,i){if(t&1&&(h(0,"div",0)(1,"div",1)(2,"h1",2),p(3),v(),h(4,"h2",3),p(5,"Fase Post-operativa (Pulizia e Disinfezione)"),v(),h(6,"div",4)(7,"span")(8,"span",5),p(9,"Data:"),v(),p(10),v(),h(11,"span")(12,"span",5),p(13,"Operatore:"),v(),p(14),v()()(),h(15,"table",6)(16,"thead")(17,"tr",7)(18,"th",8),p(19,"Area / Operazione"),v(),h(20,"th",9),p(21,"Esito"),v(),h(22,"th",9),p(23,"Note / Verifica"),v()()(),h(24,"tbody"),j(25,kD,11,2,null,null,Pa),v()(),h(27,"div",10)(28,"span"),p(29,"Documento generato da HACCP Pro"),v(),h(30,"span"),p(31,"Firma: ________________________"),v()()(),h(32,"div",11)(33,"div",12)(34,"div",13),b(35,"i",14),v(),h(36,"div",15)(37,"h2",16),p(38,"Fase Post-operativa"),v(),h(39,"p",17),p(40," Monitoraggio operazioni di pulizia e disinfezione fine turno. "),v(),h(41,"div",18)(42,"div",19),b(43,"div",20),v(),h(44,"span",21),p(45),v()()()(),h(46,"div",22)(47,"div",18)(48,"div",23),b(49,"i",24),v(),h(50,"div")(51,"label",25),p(52,"Data Post-Operativa"),v(),h(53,"input",26),U("change",function(r){return i.state.filterDate.set(r.target.value)}),v()()(),h(54,"div",18)(55,"button",27),U("click",function(){return i.setAllOk()}),b(56,"i",28),v()()(),h(57,"div",29),j(58,UD,20,64,"div",30,Pa),v(),h(60,"div",31),T(61,$D,2,1)(62,qD,30,14),v()()),t&2){let o;m(3),V(i.state.adminCompany().name||"Azienda"),m(7),k(" ",i.getFormattedDate()),m(4),k(" ",((o=i.state.currentUser())==null?null:o.name)||"Operatore"),m(11),W(i.areas()),m(18),Me("width",i.progressPercentage(),"%"),m(2),re("",i.completedStepsCount(),"/",i.totalStepsCount()),m(8),pt("value",i.state.filterDate()),m(5),W(i.areas()),m(3),M(i.isSubmitted()?62:61)}},dependencies:[Z],styles:[".animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-10px);opacity:0;max-height:0}to{transform:translateY(0);opacity:1;max-height:1000px}}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.animate-bounce-short[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounceShort 1s infinite}@keyframes _ngcontent-%COMP%_bounceShort{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}"]})}};var jD=(n,e)=>e.id;function WD(n,e){n&1&&(h(0,"span",24),b(1,"i",26),p(2,"Verificato "),v())}function YD(n,e){n&1&&(h(0,"span",25),b(1,"i",27),p(2,"Da Verificare "),v())}function JD(n,e){if(n&1){let t=H();h(0,"div",18),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",19)(2,"div",20)(3,"div"),b(4,"i",21),v(),h(5,"div",22)(6,"h3",23),p(7),v()()(),T(8,WD,3,0,"span",24)(9,YD,3,0,"span",25),v()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-purple-300",t.checked)("shadow-purple-200",t.checked)("border-slate-200",!t.checked),m(3),Pe("w-16 h-16 rounded-2xl flex items-center justify-center transition-all duration-300 shadow-lg "+(t.checked?"bg-gradient-to-br from-purple-500 to-violet-600 text-white scale-110":"bg-slate-100 text-slate-300")),m(3),N("text-purple-700",t.checked),m(),k(" ",t.label," "),m(),M(t.checked?8:9)}}function KD(n,e){n&1&&(h(0,"div",17),b(1,"i",28),h(2,"p",29),p(3," Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati. "),v()())}var Oa=class n{constructor(){this.state=$(ee);this.moduleId="staff-training";this.checks=B([{id:"t-1",label:"VERIFICA POSSESSO ATTESTATO DI FORMAZIONE (HACCP / Sicurezza)",checked:!1},{id:"t-2",label:"PROCEDERE CON GLI AGGIORNAMENTI IN SICUREZZA ALIMENTARE",checked:!1},{id:"t-3",label:"CONTROLLARE LE ISTRUZIONI DI LAVORO E PROCEDURE OPERATIVE",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return this.state.isContextEditable()}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-staff-training-checklist"]],decls:24,vars:7,consts:[[1,"space-y-6","pb-10","animate-fade-in","h-full","flex","flex-col"],[1,"bg-gradient-to-r","from-purple-600","via-violet-600","to-indigo-600","p-8","rounded-3xl","shadow-2xl","border","border-purple-500/20","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-user-graduate","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-sm","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-user-graduate","text-white"],[1,"text-purple-50","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","mt-6","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20","w-fit"],[1,"fa-solid","fa-graduation-cap","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-purple-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"space-y-4"],[1,"bg-white","p-6","rounded-2xl","shadow-lg","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-purple-300","shadow-purple-200","border-slate-200"],[1,"mt-6","bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"bg-white","p-6","rounded-2xl","shadow-lg","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-center","justify-between","gap-5"],[1,"flex","items-center","gap-5","flex-1"],[1,"fa-solid","fa-check","text-3xl"],[1,"flex-1"],[1,"font-black","text-slate-800","text-lg","leading-tight","tracking-tight"],[1,"bg-purple-100","text-purple-700","font-black","text-sm","px-4","py-2","rounded-xl","tracking-wide","uppercase","border-2","border-purple-300","shadow-md"],[1,"bg-slate-100","text-slate-500","font-bold","text-sm","px-4","py-2","rounded-xl","tracking-wide","uppercase","border-2","border-slate-200"],[1,"fa-solid","fa-circle-check","mr-2"],[1,"fa-regular","fa-circle","mr-2"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Formazione Personale "),v(),h(9,"p",8),p(10," Verifica competenze e procedure di sicurezza alimentare "),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),v()()(),h(20,"div",15),j(21,JD,10,18,"div",16,jD),v(),T(23,KD,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,4,i.state.filterDate(),"dd/MM/yyyy")," "),m(3),W(i.checks()),m(2),M(i.canEdit()?-1:23))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};function ZD(n,e){n&1&&(h(0,"span",16),b(1,"i",18),p(2,"Verificato "),v())}function QD(n,e){n&1&&(h(0,"span",17),b(1,"i",19),p(2,"Da Verificare "),v())}var Va=class n{constructor(){this.globalCheck=B(!1)}toggleGlobalCheck(){this.globalCheck.update(e=>!e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-suppliers-view"]],decls:23,vars:11,consts:[[1,"space-y-6","pb-10","animate-fade-in","h-full","flex","flex-col"],[1,"bg-gradient-to-r","from-blue-600","via-sky-600","to-cyan-600","p-8","rounded-3xl","shadow-2xl","border","border-blue-500/20","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-truck-field","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-sm","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-truck-field","text-white"],[1,"text-blue-50","text-sm","mt-2","font-medium","ml-1"],[1,"bg-white","p-6","rounded-2xl","shadow-lg","border-2","transition-all","duration-300","hover:shadow-xl","hover:-translate-y-1","cursor-pointer","group",3,"click"],[1,"flex","items-center","justify-between","gap-5"],[1,"flex","items-center","gap-5","flex-1"],[1,"fa-solid","fa-check","text-3xl"],[1,"flex-1"],[1,"font-black","text-slate-800","text-lg","leading-tight","tracking-tight"],[1,"text-slate-500","text-sm","mt-1","font-medium"],[1,"bg-blue-100","text-blue-700","font-black","text-sm","px-4","py-2","rounded-xl","tracking-wide","uppercase","border-2","border-blue-300","shadow-md"],[1,"bg-slate-100","text-slate-500","font-bold","text-sm","px-4","py-2","rounded-xl","tracking-wide","uppercase","border-2","border-slate-200"],[1,"fa-solid","fa-circle-check","mr-2"],[1,"fa-regular","fa-circle","mr-2"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Elenco Fornitori "),v(),h(9,"p",8),p(10," Gestione conformit\xE0 e requisiti di legge "),v()()(),h(11,"div",9),U("click",function(){return i.toggleGlobalCheck()}),h(12,"div",10)(13,"div",11)(14,"div"),b(15,"i",12),v(),h(16,"div",13)(17,"h3",14),p(18," Verifica Requisiti di Legge "),v(),h(19,"p",15),p(20," Verifica per tutti i fornitori del possesso dei requisiti di legge "),v()()(),T(21,ZD,3,0,"span",16)(22,QD,3,0,"span",17),v()()()),t&2&&(m(11),N("border-blue-300",i.globalCheck())("shadow-blue-200",i.globalCheck())("border-slate-200",!i.globalCheck()),m(3),Pe("w-16 h-16 rounded-2xl flex items-center justify-center transition-all duration-300 shadow-lg "+(i.globalCheck()?"bg-gradient-to-br from-blue-500 to-cyan-600 text-white scale-110 animate-bounce":"bg-slate-100 text-slate-300 group-hover:bg-slate-200")),m(3),N("text-blue-700",i.globalCheck()),m(4),M(i.globalCheck()?21:22))},dependencies:[Z],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var XD=(n,e)=>e.id;function eT(n,e){n&1&&(h(0,"span",25),b(1,"i",27),p(2," VERIFICATO "),v())}function tT(n,e){n&1&&(h(0,"span",26),b(1,"i",28),p(2," DA VERIFICARE "),v())}function nT(n,e){if(n&1){let t=H();h(0,"div",18),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",19)(2,"div",20),b(3,"i",21),v(),h(4,"div",22)(5,"h3",23),p(6),v(),h(7,"div",24),T(8,eT,3,0,"span",25)(9,tT,3,0,"span",26),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-teal-200",!t.checked)("border-teal-500",t.checked)("bg-teal-50",t.checked)("shadow-lg",t.checked)("shadow-teal-200/50",t.checked),m(2),N("bg-teal-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-teal-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-circle-dashed",!t.checked),m(3),k(" ",t.label," "),m(2),M(t.checked?8:9)}}function iT(n,e){n&1&&(h(0,"div",17),b(1,"i",29),h(2,"p",30),p(3," Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati. "),v()())}var La=class n{constructor(){this.state=$(ee);this.moduleId="products-cleaning";this.checks=B([{id:"detergent",label:"DETERGENTE SGRASSANTE SUPERFICI",checked:!1},{id:"sanitizer",label:"SANIFICANTE ALCOLICO / DISINFETTANTE",checked:!1},{id:"floor",label:"DETERGENTE SANIFICANTE PAVIMENTI",checked:!1},{id:"dish",label:"DETERSIVO STOVIGLIE ALCALINO",checked:!1},{id:"hand-soap",label:"SAPONE LIQUIDO BATTERICIDA MANI",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return this.state.isContextEditable()}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-cleaning-products-view"]],decls:24,vars:7,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-teal-600","via-cyan-600","to-blue-600","p-8","rounded-3xl","shadow-xl","border","border-teal-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-pump-soap","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-pump-soap"],[1,"text-cyan-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-flask-vial","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-cyan-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-teal-200","border-teal-500","bg-teal-50","shadow-lg","shadow-teal-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-teal-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Prodotti Pulizia "),v(),h(9,"p",8),p(10," Elenco prodotti detergenti e sanificanti autorizzati "),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),v()()(),h(20,"div",15),j(21,nT,10,34,"div",16,XD),v(),T(23,iT,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,4,i.state.filterDate(),"dd/MM/yyyy")," "),m(3),W(i.checks()),m(2),M(i.canEdit()?-1:23))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var oT=(n,e)=>e.id;function rT(n,e){n&1&&(h(0,"span",25),b(1,"i",27),p(2," COMPLETATO "),v())}function sT(n,e){n&1&&(h(0,"span",26),b(1,"i",28),p(2," DA COMPLETARE "),v())}function aT(n,e){if(n&1){let t=H();h(0,"div",18),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",19)(2,"div",20),b(3,"i",21),v(),h(4,"div",22)(5,"h3",23),p(6),v(),h(7,"div",24),T(8,rT,3,0,"span",25)(9,sT,3,0,"span",26),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-orange-200",!t.checked)("border-orange-500",t.checked)("bg-orange-50",t.checked)("shadow-lg",t.checked)("shadow-orange-200/50",t.checked),m(2),N("bg-orange-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-orange-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-tools",!t.checked),m(3),k(" ",t.label," "),m(2),M(t.checked?8:9)}}function lT(n,e){n&1&&(h(0,"div",17),b(1,"i",29),h(2,"p",30),p(3," Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati. "),v()())}var Ua=class n{constructor(){this.state=$(ee);this.moduleId="equipment";this.checks=B([{id:"instructions",label:"DOTARE LE ATTREZZATURE DELLE ISTRUZIONI DI USO E MANUTENZIONE",checked:!1},{id:"monitoring",label:"MONITORAGGIO MANUTENZIONE CON REGISTRAZIONE",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return this.state.isContextEditable()}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-equipment-view"]],decls:24,vars:7,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-orange-600","via-amber-600","to-yellow-600","p-8","rounded-3xl","shadow-xl","border","border-orange-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-blender","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-blender"],[1,"text-orange-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-wrench","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-orange-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-orange-200","border-orange-500","bg-orange-50","shadow-lg","shadow-orange-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-orange-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Elenco Attrezzature "),v(),h(9,"p",8),p(10," Gestione e manutenzione attrezzature operative "),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),v()()(),h(20,"div",15),j(21,aT,10,34,"div",16,oT),v(),T(23,lT,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,4,i.state.filterDate(),"dd/MM/yyyy")," "),m(3),W(i.checks()),m(2),M(i.canEdit()?-1:23))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var dT=(n,e)=>e.id;function cT(n,e){n&1&&(h(0,"span",25),b(1,"i",27),p(2," VERIFICATO "),v())}function uT(n,e){n&1&&(h(0,"span",26),b(1,"i",28),p(2," DA VERIFICARE "),v())}function fT(n,e){if(n&1){let t=H();h(0,"div",18),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",19)(2,"div",20),b(3,"i",21),v(),h(4,"div",22)(5,"h3",23),p(6),v(),h(7,"div",24),T(8,cT,3,0,"span",25)(9,uT,3,0,"span",26),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-indigo-200",!t.checked)("border-indigo-500",t.checked)("bg-indigo-50",t.checked)("shadow-lg",t.checked)("shadow-indigo-200/50",t.checked),m(2),N("bg-indigo-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-indigo-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-box",!t.checked),m(3),k(" ",t.label," "),m(2),M(t.checked?8:9)}}function pT(n,e){n&1&&(h(0,"div",17),b(1,"i",29),h(2,"p",30),p(3," Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati. "),v()())}var Ba=class n{constructor(){this.state=$(ee);this.moduleId="goods-receipt";this.checks=B([{id:"packaging",label:"VERIFICA ASPETTO IMBALLI",checked:!1},{id:"expiry",label:"VERIFICA SCADENZA E LOTTO",checked:!1},{id:"transport",label:"VERIFICA CORRETTE CONDIZIONI DI TRASPORTO",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return this.state.isContextEditable()}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-goods-receipt-view"]],decls:24,vars:7,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-indigo-600","via-purple-600","to-pink-600","p-8","rounded-3xl","shadow-xl","border","border-indigo-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-box-open","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-box-open"],[1,"text-purple-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-clipboard-check","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-purple-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-indigo-200","border-indigo-500","bg-indigo-50","shadow-lg","shadow-indigo-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-indigo-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Ricezione Prodotti "),v(),h(9,"p",8),p(10," Controllo conformit\xE0 merce in arrivo "),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),v()()(),h(20,"div",15),j(21,fT,10,34,"div",16,dT),v(),T(23,pT,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,4,i.state.filterDate(),"dd/MM/yyyy")," "),m(3),W(i.checks()),m(2),M(i.canEdit()?-1:23))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var mT=(n,e)=>e.id;function hT(n,e){n&1&&(h(0,"span",25),b(1,"i",27),p(2," VERIFICATO "),v())}function gT(n,e){n&1&&(h(0,"span",26),b(1,"i",28),p(2," DA VERIFICARE "),v())}function vT(n,e){if(n&1){let t=H();h(0,"div",18),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",19)(2,"div",20),b(3,"i",21),v(),h(4,"div",22)(5,"h3",23),p(6),v(),h(7,"div",24),T(8,hT,3,0,"span",25)(9,gT,3,0,"span",26),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-blue-200",!t.checked)("border-blue-500",t.checked)("bg-blue-50",t.checked)("shadow-lg",t.checked)("shadow-blue-200/50",t.checked),m(2),N("bg-blue-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-blue-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-temperature-low",!t.checked),m(3),k(" ",t.label," "),m(2),M(t.checked?8:9)}}function _T(n,e){n&1&&(h(0,"div",17),b(1,"i",29),h(2,"p",30),p(3," Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati. "),v()())}var Ha=class n{constructor(){this.state=$(ee);this.moduleId="food-conservation";this.checks=B([{id:"perishable",label:"ALIMENTI DEPERIBILI RIPORRE ALLA TEMPERATURA POSITIVA O NEGATIVA",checked:!1},{id:"non-perishable",label:"ALIMENTI NON DEPERIBILI RIPORRE NEL DEPOSITO/MAGAZZINO",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return this.state.isContextEditable()}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-food-conservation-view"]],decls:24,vars:7,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-blue-600","via-sky-600","to-cyan-600","p-8","rounded-3xl","shadow-xl","border","border-blue-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-temperature-half","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-temperature-half"],[1,"text-sky-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-snowflake","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-sky-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-blue-200","border-blue-500","bg-blue-50","shadow-lg","shadow-blue-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-blue-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Conservazione Alimenti "),v(),h(9,"p",8),p(10," Monitoraggio temperature e stoccaggio "),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),v()()(),h(20,"div",15),j(21,vT,10,34,"div",16,mT),v(),T(23,_T,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,4,i.state.filterDate(),"dd/MM/yyyy")," "),m(3),W(i.checks()),m(2),M(i.canEdit()?-1:23))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var yT=(n,e)=>e.id;function xT(n,e){if(n&1&&(h(0,"span",18),p(1,"\u2022"),v(),b(2,"i",19),p(3)),n&2){let t=C();m(3),k(" ",t.getDisplayName()," ")}}function ET(n,e){n&1&&(h(0,"span",27),b(1,"i",29),p(2," VERIFICATO "),v())}function CT(n,e){n&1&&(h(0,"span",28),b(1,"i",30),p(2," DA VERIFICARE "),v())}function bT(n,e){if(n&1){let t=H();h(0,"div",20),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",21)(2,"div",22),b(3,"i",23),v(),h(4,"div",24)(5,"h3",25),p(6),v(),h(7,"div",26),T(8,ET,3,0,"span",27)(9,CT,3,0,"span",28),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-cyan-200",!t.checked)("border-cyan-500",t.checked)("bg-cyan-50",t.checked)("shadow-lg",t.checked)("shadow-cyan-200/50",t.checked),m(2),N("bg-cyan-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-cyan-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-temperature-arrow-down",!t.checked),m(3),V(t.label),m(2),M(t.checked?8:9)}}function wT(n,e){n&1&&(h(0,"div",17),b(1,"i",31),h(2,"p",32),p(3,"Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati."),v()())}var $a=class n{constructor(){this.state=$(ee);this.moduleId="temperatures";this.checks=B([{id:"fridge",label:"TEMPERATURE FRIGORIGERI +4\xB0C - +8\xB0C",checked:!1},{id:"freezer",label:"TEMPERATURE CONGELATORI -18\xB0C \u2013 24\xB0C",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return this.state.isContextEditable()}getDisplayName(){return this.state.filterCollaboratorId()?this.state.systemUsers().find(e=>e.id===this.state.filterCollaboratorId())?.name:this.state.currentUser()?.name}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-temperatures-view"]],decls:25,vars:8,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-cyan-600","via-sky-600","to-blue-600","p-8","rounded-3xl","shadow-xl","border","border-cyan-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-thermometer","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-thermometer"],[1,"text-cyan-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-temperature-three-quarters","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-cyan-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-cyan-200","border-cyan-500","bg-cyan-50","shadow-lg","shadow-cyan-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"mx-1"],[1,"fa-regular","fa-user"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-cyan-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Temperature "),v(),h(9,"p",8),p(10,"Controllo temperature attrezzature"),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),T(20,xT,4,1),v()()(),h(21,"div",15),j(22,bT,10,34,"div",16,yT),v(),T(24,wT,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,5,i.state.filterDate(),"dd/MM/yyyy")," "),m(2),M(i.getDisplayName()?20:-1),m(2),W(i.checks()),m(2),M(i.canEdit()?-1:24))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var IT,ST;function DT(){return{geminiUrl:IT,vertexUrl:ST}}function TT(n,e,t,i){var o,r;if(!n?.baseUrl){let s=DT();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:t:(r=s.geminiUrl)!==null&&r!==void 0?r:i}return n.baseUrl}var Yt=class{};function J(n,e){let t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){let r=e[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(n,e,t){for(let r=0;r<e.length-1;r++){let s=e[r];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(n[a])){let c=n[a];if(Array.isArray(t))for(let u=0;u<c.length;u++){let f=c[u];d(f,e.slice(r+1),t[u])}else for(let u of c)d(u,e.slice(r+1),t)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in n||(n[a]=[{}]);let c=n[a];d(c[0],e.slice(r+1),t);return}(!n[s]||typeof n[s]!="object")&&(n[s]={}),n=n[s]}let i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function l(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;let o=e[i];if(o.endsWith("[]")){let r=o.slice(0,-2);if(r in n){let s=n[r];return Array.isArray(s)?s.map(a=>l(a,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function MT(n,e){for(let[t,i]of Object.entries(e)){let o=t.split("."),r=i.split("."),s=new Set,a=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){a=c;break}if(a!==-1&&r.length>a)for(let c=a;c<r.length;c++){let u=r[c];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}of(n,o,r,0,s)}}function of(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;let r=e[i];if(r.endsWith("[]")){let s=r.slice(0,-2),a=n;if(s in a&&Array.isArray(a[s]))for(let c of a[s])of(c,e,t,i+1,o)}else if(r==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){let s=n,a=Object.keys(s).filter(u=>!u.startsWith("_")&&!o.has(u)),c={};for(let u of a)c[u]=s[u];for(let[u,f]of Object.entries(c)){let g=[];for(let x of t.slice(i))x==="*"?g.push(u):g.push(x);d(s,g,f)}for(let u of a)delete s[u]}}else{let s=n;r in s&&of(s[r],e,t,i+1,o)}}function ip(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function AT(n){let e={},t=l(n,["operationName"]);t!=null&&d(e,["operationName"],t);let i=l(n,["resourceName"]);return i!=null&&d(e,["_url","resourceName"],i),e}function kT(n){let e={},t=l(n,["name"]);t!=null&&d(e,["name"],t);let i=l(n,["metadata"]);i!=null&&d(e,["metadata"],i);let o=l(n,["done"]);o!=null&&d(e,["done"],o);let r=l(n,["error"]);r!=null&&d(e,["error"],r);let s=l(n,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],RT(s)),e}function NT(n){let e={},t=l(n,["name"]);t!=null&&d(e,["name"],t);let i=l(n,["metadata"]);i!=null&&d(e,["metadata"],i);let o=l(n,["done"]);o!=null&&d(e,["done"],o);let r=l(n,["error"]);r!=null&&d(e,["error"],r);let s=l(n,["response"]);return s!=null&&d(e,["response"],PT(s)),e}function RT(n){let e={},t=l(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>FT(s))),d(e,["generatedVideos"],r)}let i=l(n,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);let o=l(n,["raiMediaFilteredReasons"]);return o!=null&&d(e,["raiMediaFilteredReasons"],o),e}function PT(n){let e={},t=l(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>OT(s))),d(e,["generatedVideos"],r)}let i=l(n,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);let o=l(n,["raiMediaFilteredReasons"]);return o!=null&&d(e,["raiMediaFilteredReasons"],o),e}function FT(n){let e={},t=l(n,["video"]);return t!=null&&d(e,["video"],$T(t)),e}function OT(n){let e={},t=l(n,["_self"]);return t!=null&&d(e,["video"],GT(t)),e}function VT(n){let e={},t=l(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function LT(n){let e={},t=l(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function UT(n){let e={},t=l(n,["name"]);t!=null&&d(e,["name"],t);let i=l(n,["metadata"]);i!=null&&d(e,["metadata"],i);let o=l(n,["done"]);o!=null&&d(e,["done"],o);let r=l(n,["error"]);r!=null&&d(e,["error"],r);let s=l(n,["response"]);return s!=null&&d(e,["response"],BT(s)),e}function BT(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["parent"]);i!=null&&d(e,["parent"],i);let o=l(n,["documentName"]);return o!=null&&d(e,["documentName"],o),e}function Bv(n){let e={},t=l(n,["name"]);t!=null&&d(e,["name"],t);let i=l(n,["metadata"]);i!=null&&d(e,["metadata"],i);let o=l(n,["done"]);o!=null&&d(e,["done"],o);let r=l(n,["error"]);r!=null&&d(e,["error"],r);let s=l(n,["response"]);return s!=null&&d(e,["response"],HT(s)),e}function HT(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["parent"]);i!=null&&d(e,["parent"],i);let o=l(n,["documentName"]);return o!=null&&d(e,["documentName"],o),e}function $T(n){let e={},t=l(n,["uri"]);t!=null&&d(e,["uri"],t);let i=l(n,["encodedVideo"]);i!=null&&d(e,["videoBytes"],ip(i));let o=l(n,["encoding"]);return o!=null&&d(e,["mimeType"],o),e}function GT(n){let e={},t=l(n,["gcsUri"]);t!=null&&d(e,["uri"],t);let i=l(n,["bytesBase64Encoded"]);i!=null&&d(e,["videoBytes"],ip(i));let o=l(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}var St=(function(n){return n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL",n})(St||{});var rf=(function(n){return n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO",n})(rf||{});var Hv=(function(n){return n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",n})(Hv||{});var $v=(function(n){return n.COLLECTION="COLLECTION",n})($v||{});var br=(function(n){return n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT",n})(br||{});var Ir=class{constructor(e){let t={};for(let i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}};var Mi=class{get text(){var e,t,i,o,r,s,a,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1,g=[];for(let x of(c=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(let[E,w]of Object.entries(x))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(w!==null||w!==void 0)&&g.push(E);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;f=!0,u+=x.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,t,i,o,r,s,a,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="",f=[];for(let g of(c=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(let[x,E]of Object.entries(g))x!=="inlineData"&&(E!==null||E!==void 0)&&f.push(x);g.inlineData&&typeof g.inlineData.data=="string"&&(u+=atob(g.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,i,o,r,s,a,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let u=(c=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(u?.length!==0)return u}get executableCode(){var e,t,i,o,r,s,a,c,u;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(c=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if(f?.length!==0)return(u=f?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,i,o,r,s,a,c,u;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(c=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if(f?.length!==0)return(u=f?.[0])===null||u===void 0?void 0:u.output}},Ka=class{},Za=class{},sf=class{},af=class{},lf=class{},df=class{},Qa=class{},Xa=class{},el=class{},cf=class{};var tl=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,o,r=e;return t?o=NT(r):o=kT(r),Object.assign(i,o),i}},nl=class{},il=class{},ol=class{},rl=class{},uf=class{},ff=class{},pf=class{};var mf=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,r=UT(e);return Object.assign(i,r),i}},hf=class{},gf=class{},vf=class{},_f=class{};var sl=class{};var yf=class{get text(){var e,t,i;let o="",r=!1,s=[];for(let a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[c,u]of Object.entries(a))c!=="text"&&c!=="thought"&&u!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var e,t,i;let o="",r=[];for(let s of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&r.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var xf=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Ef=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,r=Bv(e);return Object.assign(i,r),i}};function Ce(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Gv(n,e){let t=Ce(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function zv(n){return Array.isArray(n)?n.map(e=>al(e)):[al(n)]}function al(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function qv(n){let e=al(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jv(n){let e=al(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Wv(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>gv(e)):[gv(n)]}function Cf(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function vv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function _v(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function nt(n){if(n==null)throw new Error("ContentUnion is required");return Cf(n)?n:{role:"user",parts:Wv(n)}}function op(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{let i=nt(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){let t=nt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>nt(t)):[nt(e)]}function Nt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(vv(n)||_v(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nt(n)]}let e=[],t=[],i=Cf(n[0]);for(let o of n){let r=Cf(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(o);else{if(vv(o)||_v(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:Wv(t)}),e}function zT(n,e){n.includes("null")&&(e.nullable=!0);let t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(St).includes(t[0].toUpperCase())?t[0].toUpperCase():St.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of t)e.anyOf.push({type:Object.values(St).includes(i.toUpperCase())?i.toUpperCase():St.TYPE_UNSPECIFIED})}}function fo(n){let e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");let r=n.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,n=r[1]):r[1].type==="null"&&(e.nullable=!0,n=r[0])),n.type instanceof Array&&zT(n.type,e);for(let[s,a]of Object.entries(n))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(St).includes(a.toUpperCase())?a.toUpperCase():St.TYPE_UNSPECIFIED}else if(t.includes(s))e[s]=fo(a);else if(i.includes(s)){let c=[];for(let u of a){if(u.type=="null"){e.nullable=!0;continue}c.push(fo(u))}e[s]=c}else if(o.includes(s)){let c={};for(let[u,f]of Object.entries(a))c[u]=fo(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function rp(n){return fo(n)}function sp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ap(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function go(n){if(n.functionDeclarations)for(let e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fo(e.response));return n}function vo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");let e=[];for(let t of n)e.push(t);return e}function qT(n,e,t,i=1){let o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Dn(n,e){if(typeof e!="string")throw new Error("name must be a string");return qT(n,e,"cachedContents")}function Yv(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Yn(n){return ip(n)}function jT(n){return n!=null&&typeof n=="object"&&"name"in n}function WT(n){return n!=null&&typeof n=="object"&&"video"in n}function YT(n){return n!=null&&typeof n=="object"&&"uri"in n}function Jv(n){var e;let t;if(jT(n)&&(t=n.name),!(YT(n)&&(t=n.uri,t===void 0))&&!(WT(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){let o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Kv(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Zv(n){for(let e of["models","tunedModels","publisherModels"])if(JT(n,e))return n[e];return[]}function JT(n,e){return n!==null&&typeof n=="object"&&e in n}function KT(n,e={}){let t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function ZT(n,e={}){let t=[],i=new Set;for(let o of n){let r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);let s=KT(o,e);s.functionDeclarations&&t.push(...s.functionDeclarations)}return{functionDeclarations:t}}function Qv(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;let i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function QT(n){if(typeof n!="string")return n;let e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Xv(n){if(typeof n!="object"||n===null)return{};let e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;let o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let r=!1;for(let s of o){if(typeof s!="object"||s===null)continue;let c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function _o(n,e){let t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function e_(n){let e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function XT(n){let e={},t=l(n,["responsesFile"]);t!=null&&d(e,["fileName"],t);let i=l(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>RM(s))),d(e,["inlinedResponses"],r)}let o=l(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["inlinedEmbedContentResponses"],r)}return e}function eM(n){let e={},t=l(n,["predictionsFormat"]);t!=null&&d(e,["format"],t);let i=l(n,["gcsDestination","outputUriPrefix"]);i!=null&&d(e,["gcsUri"],i);let o=l(n,["bigqueryDestination","outputUri"]);return o!=null&&d(e,["bigqueryUri"],o),e}function tM(n){let e={},t=l(n,["format"]);t!=null&&d(e,["predictionsFormat"],t);let i=l(n,["gcsUri"]);i!=null&&d(e,["gcsDestination","outputUriPrefix"],i);let o=l(n,["bigqueryUri"]);if(o!=null&&d(e,["bigqueryDestination","outputUri"],o),l(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ya(n){let e={},t=l(n,["name"]);t!=null&&d(e,["name"],t);let i=l(n,["metadata","displayName"]);i!=null&&d(e,["displayName"],i);let o=l(n,["metadata","state"]);o!=null&&d(e,["state"],e_(o));let r=l(n,["metadata","createTime"]);r!=null&&d(e,["createTime"],r);let s=l(n,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);let a=l(n,["metadata","updateTime"]);a!=null&&d(e,["updateTime"],a);let c=l(n,["metadata","model"]);c!=null&&d(e,["model"],c);let u=l(n,["metadata","output"]);return u!=null&&d(e,["dest"],XT(Xv(u))),e}function bf(n){let e={},t=l(n,["name"]);t!=null&&d(e,["name"],t);let i=l(n,["displayName"]);i!=null&&d(e,["displayName"],i);let o=l(n,["state"]);o!=null&&d(e,["state"],e_(o));let r=l(n,["error"]);r!=null&&d(e,["error"],r);let s=l(n,["createTime"]);s!=null&&d(e,["createTime"],s);let a=l(n,["startTime"]);a!=null&&d(e,["startTime"],a);let c=l(n,["endTime"]);c!=null&&d(e,["endTime"],c);let u=l(n,["updateTime"]);u!=null&&d(e,["updateTime"],u);let f=l(n,["model"]);f!=null&&d(e,["model"],f);let g=l(n,["inputConfig"]);g!=null&&d(e,["src"],nM(g));let x=l(n,["outputConfig"]);x!=null&&d(e,["dest"],eM(Xv(x)));let E=l(n,["completionStats"]);return E!=null&&d(e,["completionStats"],E),e}function nM(n){let e={},t=l(n,["instancesFormat"]);t!=null&&d(e,["format"],t);let i=l(n,["gcsSource","uris"]);i!=null&&d(e,["gcsUri"],i);let o=l(n,["bigquerySource","inputUri"]);return o!=null&&d(e,["bigqueryUri"],o),e}function iM(n,e){let t={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=l(e,["fileName"]);i!=null&&d(t,["fileName"],i);let o=l(e,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>NM(n,s))),d(t,["requests","requests"],r)}return t}function oM(n){let e={},t=l(n,["format"]);t!=null&&d(e,["instancesFormat"],t);let i=l(n,["gcsUri"]);i!=null&&d(e,["gcsSource","uris"],i);let o=l(n,["bigqueryUri"]);if(o!=null&&d(e,["bigquerySource","inputUri"],o),l(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function rM(n){let e={},t=l(n,["data"]);if(t!=null&&d(e,["data"],t),l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=l(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function sM(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],_o(n,i)),t}function aM(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],_o(n,i)),t}function lM(n){let e={},t=l(n,["content"]);t!=null&&d(e,["content"],t);let i=l(n,["citationMetadata"]);i!=null&&d(e,["citationMetadata"],dM(i));let o=l(n,["tokenCount"]);o!=null&&d(e,["tokenCount"],o);let r=l(n,["finishReason"]);r!=null&&d(e,["finishReason"],r);let s=l(n,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);let a=l(n,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);let c=l(n,["index"]);c!=null&&d(e,["index"],c);let u=l(n,["logprobsResult"]);u!=null&&d(e,["logprobsResult"],u);let f=l(n,["safetyRatings"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(E=>E)),d(e,["safetyRatings"],x)}let g=l(n,["urlContextMetadata"]);return g!=null&&d(e,["urlContextMetadata"],g),e}function dM(n){let e={},t=l(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["citations"],i)}return e}function t_(n){let e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>BM(r))),d(e,["parts"],o)}let i=l(n,["role"]);return i!=null&&d(e,["role"],i),e}function cM(n,e){let t={},i=l(n,["displayName"]);if(e!==void 0&&i!=null&&d(e,["batch","displayName"],i),l(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function uM(n,e){let t={},i=l(n,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);let o=l(n,["dest"]);return e!==void 0&&o!=null&&d(e,["outputConfig"],tM(QT(o))),t}function yv(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["_url","model"],Ce(n,i));let o=l(e,["src"]);o!=null&&d(t,["batch","inputConfig"],iM(n,Qv(n,o)));let r=l(e,["config"]);return r!=null&&cM(r,t),t}function fM(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["model"],Ce(n,i));let o=l(e,["src"]);o!=null&&d(t,["inputConfig"],oM(Qv(n,o)));let r=l(e,["config"]);return r!=null&&uM(r,t),t}function pM(n,e){let t={},i=l(n,["displayName"]);return e!==void 0&&i!=null&&d(e,["batch","displayName"],i),t}function mM(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["_url","model"],Ce(n,i));let o=l(e,["src"]);o!=null&&d(t,["batch","inputConfig"],EM(n,o));let r=l(e,["config"]);return r!=null&&pM(r,t),t}function hM(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],_o(n,i)),t}function gM(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],_o(n,i)),t}function vM(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["name"]);i!=null&&d(e,["name"],i);let o=l(n,["done"]);o!=null&&d(e,["done"],o);let r=l(n,["error"]);return r!=null&&d(e,["error"],r),e}function _M(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["name"]);i!=null&&d(e,["name"],i);let o=l(n,["done"]);o!=null&&d(e,["done"],o);let r=l(n,["error"]);return r!=null&&d(e,["error"],r),e}function yM(n,e){let t={},i=l(e,["contents"]);if(i!=null){let r=op(n,i);Array.isArray(r)&&(r=r.map(s=>s)),d(t,["requests[]","request","content"],r)}let o=l(e,["config"]);return o!=null&&(d(t,["_self"],xM(o,t)),MT(t,{"requests[].*":"requests[].request.*"})),t}function xM(n,e){let t={},i=l(n,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);let o=l(n,["title"]);e!==void 0&&o!=null&&d(e,["requests[]","title"],o);let r=l(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&d(e,["requests[]","outputDimensionality"],r),l(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function EM(n,e){let t={},i=l(e,["fileName"]);i!=null&&d(t,["file_name"],i);let o=l(e,["inlinedRequests"]);return o!=null&&d(t,["requests"],yM(n,o)),t}function CM(n){let e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=l(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);let i=l(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function bM(n){let e={},t=l(n,["id"]);t!=null&&d(e,["id"],t);let i=l(n,["args"]);i!=null&&d(e,["args"],i);let o=l(n,["name"]);if(o!=null&&d(e,["name"],o),l(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wM(n){let e={},t=l(n,["allowedFunctionNames"]);t!=null&&d(e,["allowedFunctionNames"],t);let i=l(n,["mode"]);if(i!=null&&d(e,["mode"],i),l(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IM(n,e,t){let i={},o=l(e,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],t_(nt(o)));let r=l(e,["temperature"]);r!=null&&d(i,["temperature"],r);let s=l(e,["topP"]);s!=null&&d(i,["topP"],s);let a=l(e,["topK"]);a!=null&&d(i,["topK"],a);let c=l(e,["candidateCount"]);c!=null&&d(i,["candidateCount"],c);let u=l(e,["maxOutputTokens"]);u!=null&&d(i,["maxOutputTokens"],u);let f=l(e,["stopSequences"]);f!=null&&d(i,["stopSequences"],f);let g=l(e,["responseLogprobs"]);g!=null&&d(i,["responseLogprobs"],g);let x=l(e,["logprobs"]);x!=null&&d(i,["logprobs"],x);let E=l(e,["presencePenalty"]);E!=null&&d(i,["presencePenalty"],E);let w=l(e,["frequencyPenalty"]);w!=null&&d(i,["frequencyPenalty"],w);let A=l(e,["seed"]);A!=null&&d(i,["seed"],A);let F=l(e,["responseMimeType"]);F!=null&&d(i,["responseMimeType"],F);let P=l(e,["responseSchema"]);P!=null&&d(i,["responseSchema"],rp(P));let q=l(e,["responseJsonSchema"]);if(q!=null&&d(i,["responseJsonSchema"],q),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let Y=l(e,["safetySettings"]);if(t!==void 0&&Y!=null){let it=Y;Array.isArray(it)&&(it=it.map(Ze=>HM(Ze))),d(t,["safetySettings"],it)}let K=l(e,["tools"]);if(t!==void 0&&K!=null){let it=vo(K);Array.isArray(it)&&(it=it.map(Ze=>GM(go(Ze)))),d(t,["tools"],it)}let G=l(e,["toolConfig"]);if(t!==void 0&&G!=null&&d(t,["toolConfig"],$M(G)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let ve=l(e,["cachedContent"]);t!==void 0&&ve!=null&&d(t,["cachedContent"],Dn(n,ve));let me=l(e,["responseModalities"]);me!=null&&d(i,["responseModalities"],me);let Ne=l(e,["mediaResolution"]);Ne!=null&&d(i,["mediaResolution"],Ne);let se=l(e,["speechConfig"]);if(se!=null&&d(i,["speechConfig"],sp(se)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let _e=l(e,["thinkingConfig"]);_e!=null&&d(i,["thinkingConfig"],_e);let ze=l(e,["imageConfig"]);ze!=null&&d(i,["imageConfig"],kM(ze));let Et=l(e,["enableEnhancedCivicAnswers"]);if(Et!=null&&d(i,["enableEnhancedCivicAnswers"],Et),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function SM(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>lM(u))),d(e,["candidates"],c)}let o=l(n,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);let r=l(n,["promptFeedback"]);r!=null&&d(e,["promptFeedback"],r);let s=l(n,["responseId"]);s!=null&&d(e,["responseId"],s);let a=l(n,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function DM(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],_o(n,i)),t}function TM(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],_o(n,i)),t}function MM(n){let e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=l(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function AM(n){let e={};if(l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=l(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function kM(n){let e={},t=l(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);let i=l(n,["imageSize"]);if(i!=null&&d(e,["imageSize"],i),l(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function NM(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["request","model"],Ce(n,i));let o=l(e,["contents"]);if(o!=null){let a=Nt(o);Array.isArray(a)&&(a=a.map(c=>t_(c))),d(t,["request","contents"],a)}let r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);let s=l(e,["config"]);return s!=null&&d(t,["request","generationConfig"],IM(n,s,l(t,["request"],{}))),t}function RM(n){let e={},t=l(n,["response"]);t!=null&&d(e,["response"],SM(t));let i=l(n,["metadata"]);i!=null&&d(e,["metadata"],i);let o=l(n,["error"]);return o!=null&&d(e,["error"],o),e}function PM(n,e){let t={},i=l(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=l(n,["pageToken"]);if(e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),l(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function FM(n,e){let t={},i=l(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=l(n,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);let r=l(n,["filter"]);return e!==void 0&&r!=null&&d(e,["_query","filter"],r),t}function OM(n){let e={},t=l(n,["config"]);return t!=null&&PM(t,e),e}function VM(n){let e={},t=l(n,["config"]);return t!=null&&FM(t,e),e}function LM(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);let o=l(n,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Ya(s))),d(e,["batchJobs"],r)}return e}function UM(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);let o=l(n,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>bf(s))),d(e,["batchJobs"],r)}return e}function BM(n){let e={},t=l(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);let i=l(n,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);let o=l(n,["executableCode"]);o!=null&&d(e,["executableCode"],o);let r=l(n,["fileData"]);r!=null&&d(e,["fileData"],CM(r));let s=l(n,["functionCall"]);s!=null&&d(e,["functionCall"],bM(s));let a=l(n,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let c=l(n,["inlineData"]);c!=null&&d(e,["inlineData"],rM(c));let u=l(n,["text"]);u!=null&&d(e,["text"],u);let f=l(n,["thought"]);f!=null&&d(e,["thought"],f);let g=l(n,["thoughtSignature"]);g!=null&&d(e,["thoughtSignature"],g);let x=l(n,["videoMetadata"]);return x!=null&&d(e,["videoMetadata"],x),e}function HM(n){let e={},t=l(n,["category"]);if(t!=null&&d(e,["category"],t),l(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=l(n,["threshold"]);return i!=null&&d(e,["threshold"],i),e}function $M(n){let e={},t=l(n,["retrievalConfig"]);t!=null&&d(e,["retrievalConfig"],t);let i=l(n,["functionCallingConfig"]);return i!=null&&d(e,["functionCallingConfig"],wM(i)),e}function GM(n){let e={};if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=l(n,["computerUse"]);t!=null&&d(e,["computerUse"],t);let i=l(n,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);let o=l(n,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=l(n,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(g=>g)),d(e,["functionDeclarations"],f)}let s=l(n,["googleMaps"]);s!=null&&d(e,["googleMaps"],MM(s));let a=l(n,["googleSearch"]);a!=null&&d(e,["googleSearch"],AM(a));let c=l(n,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);let u=l(n,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}var Jn=(function(n){return n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents",n})(Jn||{}),Sn=class{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=t.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var wf=class extends Yt{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sn(Jn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){let t=yv(this.apiClient,e),i=t._url,o=J("{model}:batchGenerateContent",i),a=t.batch.inputConfig.requests,c=a.requests,u=[];for(let f of c){let g=Object.assign({},f);if(g.systemInstruction){let x=g.systemInstruction;delete g.systemInstruction;let E=g.request;E.systemInstruction=x,g.request=E}u.push(g)}return a.requests=u,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){let i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let r=this.getGcsUri(e),s=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(s)i.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=fM(this.apiClient,e);return a=J("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>bf(f))}else{let u=yv(this.apiClient,e);return a=J("{model}:batchGenerateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ya(f))}}async createEmbeddingsInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=mM(this.apiClient,e);return r=J("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>Ya(c))}}async get(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=TM(this.apiClient,e);return a=J("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>bf(f))}else{let u=DM(this.apiClient,e);return a=J("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ya(f))}}async cancel(e){var t,i,o,r;let s="",a={};if(this.apiClient.isVertexAI()){let c=aM(this.apiClient,e);s=J("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let c=sM(this.apiClient,e);s=J("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=VM(e);return a=J("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=UM(f),x=new sl;return Object.assign(x,g),x})}else{let u=OM(e);return a=J("batches",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=LM(f),x=new sl;return Object.assign(x,g),x})}}async delete(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=gM(this.apiClient,e);return a=J("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>_M(f))}else{let u=hM(this.apiClient,e);return a=J("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>vM(f))}}};function zM(n){let e={},t=l(n,["data"]);if(t!=null&&d(e,["data"],t),l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=l(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function xv(n){let e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>p2(r))),d(e,["parts"],o)}let i=l(n,["role"]);return i!=null&&d(e,["role"],i),e}function qM(n,e){let t={},i=l(n,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);let o=l(n,["expireTime"]);e!==void 0&&o!=null&&d(e,["expireTime"],o);let r=l(n,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);let s=l(n,["contents"]);if(e!==void 0&&s!=null){let f=Nt(s);Array.isArray(f)&&(f=f.map(g=>xv(g))),d(e,["contents"],f)}let a=l(n,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],xv(nt(a)));let c=l(n,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(g=>h2(g))),d(e,["tools"],f)}let u=l(n,["toolConfig"]);if(e!==void 0&&u!=null&&d(e,["toolConfig"],m2(u)),l(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function jM(n,e){let t={},i=l(n,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);let o=l(n,["expireTime"]);e!==void 0&&o!=null&&d(e,["expireTime"],o);let r=l(n,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);let s=l(n,["contents"]);if(e!==void 0&&s!=null){let g=Nt(s);Array.isArray(g)&&(g=g.map(x=>x)),d(e,["contents"],g)}let a=l(n,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],nt(a));let c=l(n,["tools"]);if(e!==void 0&&c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>g2(x))),d(e,["tools"],g)}let u=l(n,["toolConfig"]);e!==void 0&&u!=null&&d(e,["toolConfig"],u);let f=l(n,["kmsKeyName"]);return e!==void 0&&f!=null&&d(e,["encryption_spec","kmsKeyName"],f),t}function WM(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["model"],Gv(n,i));let o=l(e,["config"]);return o!=null&&qM(o,t),t}function YM(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["model"],Gv(n,i));let o=l(e,["config"]);return o!=null&&jM(o,t),t}function JM(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],Dn(n,i)),t}function KM(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],Dn(n,i)),t}function ZM(n){let e={},t=l(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function QM(n){let e={},t=l(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function XM(n){let e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=l(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);let i=l(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function e2(n){let e={},t=l(n,["id"]);t!=null&&d(e,["id"],t);let i=l(n,["args"]);i!=null&&d(e,["args"],i);let o=l(n,["name"]);if(o!=null&&d(e,["name"],o),l(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function t2(n){let e={},t=l(n,["allowedFunctionNames"]);t!=null&&d(e,["allowedFunctionNames"],t);let i=l(n,["mode"]);if(i!=null&&d(e,["mode"],i),l(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function n2(n){let e={},t=l(n,["description"]);t!=null&&d(e,["description"],t);let i=l(n,["name"]);i!=null&&d(e,["name"],i);let o=l(n,["parameters"]);o!=null&&d(e,["parameters"],o);let r=l(n,["parametersJsonSchema"]);r!=null&&d(e,["parametersJsonSchema"],r);let s=l(n,["response"]);s!=null&&d(e,["response"],s);let a=l(n,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function i2(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],Dn(n,i)),t}function o2(n,e){let t={},i=l(e,["name"]);return i!=null&&d(t,["_url","name"],Dn(n,i)),t}function r2(n){let e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=l(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function s2(n){let e={};if(l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=l(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function a2(n,e){let t={},i=l(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=l(n,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),t}function l2(n,e){let t={},i=l(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=l(n,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),t}function d2(n){let e={},t=l(n,["config"]);return t!=null&&a2(t,e),e}function c2(n){let e={},t=l(n,["config"]);return t!=null&&l2(t,e),e}function u2(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);let o=l(n,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["cachedContents"],r)}return e}function f2(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);let o=l(n,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["cachedContents"],r)}return e}function p2(n){let e={},t=l(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);let i=l(n,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);let o=l(n,["executableCode"]);o!=null&&d(e,["executableCode"],o);let r=l(n,["fileData"]);r!=null&&d(e,["fileData"],XM(r));let s=l(n,["functionCall"]);s!=null&&d(e,["functionCall"],e2(s));let a=l(n,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let c=l(n,["inlineData"]);c!=null&&d(e,["inlineData"],zM(c));let u=l(n,["text"]);u!=null&&d(e,["text"],u);let f=l(n,["thought"]);f!=null&&d(e,["thought"],f);let g=l(n,["thoughtSignature"]);g!=null&&d(e,["thoughtSignature"],g);let x=l(n,["videoMetadata"]);return x!=null&&d(e,["videoMetadata"],x),e}function m2(n){let e={},t=l(n,["retrievalConfig"]);t!=null&&d(e,["retrievalConfig"],t);let i=l(n,["functionCallingConfig"]);return i!=null&&d(e,["functionCallingConfig"],t2(i)),e}function h2(n){let e={};if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=l(n,["computerUse"]);t!=null&&d(e,["computerUse"],t);let i=l(n,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);let o=l(n,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=l(n,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(g=>g)),d(e,["functionDeclarations"],f)}let s=l(n,["googleMaps"]);s!=null&&d(e,["googleMaps"],r2(s));let a=l(n,["googleSearch"]);a!=null&&d(e,["googleSearch"],s2(a));let c=l(n,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);let u=l(n,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function g2(n){let e={},t=l(n,["retrieval"]);t!=null&&d(e,["retrieval"],t);let i=l(n,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),l(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=l(n,["codeExecution"]);o!=null&&d(e,["codeExecution"],o);let r=l(n,["enterpriseWebSearch"]);r!=null&&d(e,["enterpriseWebSearch"],r);let s=l(n,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(x=>n2(x))),d(e,["functionDeclarations"],g)}let a=l(n,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);let c=l(n,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);let u=l(n,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);let f=l(n,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function v2(n,e){let t={},i=l(n,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);let o=l(n,["expireTime"]);return e!==void 0&&o!=null&&d(e,["expireTime"],o),t}function _2(n,e){let t={},i=l(n,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);let o=l(n,["expireTime"]);return e!==void 0&&o!=null&&d(e,["expireTime"],o),t}function y2(n,e){let t={},i=l(e,["name"]);i!=null&&d(t,["_url","name"],Dn(n,i));let o=l(e,["config"]);return o!=null&&v2(o,t),t}function x2(n,e){let t={},i=l(e,["name"]);i!=null&&d(t,["_url","name"],Dn(n,i));let o=l(e,["config"]);return o!=null&&_2(o,t),t}var If=class extends Yt{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sn(Jn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=YM(this.apiClient,e);return a=J("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=WM(this.apiClient,e);return a=J("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=o2(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=i2(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=KM(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=QM(f),x=new ol;return Object.assign(x,g),x})}else{let u=JM(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=ZM(f),x=new ol;return Object.assign(x,g),x})}}async update(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=x2(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=y2(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=c2(e);return a=J("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=f2(f),x=new rl;return Object.assign(x,g),x})}else{let u=d2(e);return a=J("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=u2(f),x=new rl;return Object.assign(x,g),x})}}};function ll(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function Ev(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(n){return this instanceof ce?(this.v=n,this):new ce(n)}function jt(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(E){return function(w){return Promise.resolve(w).then(E,g)}}function a(E,w){i[E]&&(o[E]=function(A){return new Promise(function(F,P){r.push([E,A,F,P])>1||c(E,A)})},w&&(o[E]=w(o[E])))}function c(E,w){try{u(i[E](w))}catch(A){x(r[0][3],A)}}function u(E){E.value instanceof ce?Promise.resolve(E.value.v).then(f,g):x(r[0][2],E)}function f(E){c("next",E)}function g(E){c("throw",E)}function x(E,w){E(w),r.shift(),r.length&&c(r[0][0],r[0][1])}}function Wt(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ev=="function"?Ev(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(s){return new Promise(function(a,c){s=n[r](s),o(a,c,s.done,s.value)})}}function o(r,s,a,c){Promise.resolve(c).then(function(u){r({value:u,done:a})},s)}}function E2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;let t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:n_(t)}function n_(n){if(n.parts===void 0||n.parts.length===0)return!1;for(let e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function C2(n){if(n.length!==0){for(let e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Cv(n){if(n===void 0||n.length===0)return[];let e=[],t=n.length,i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{let o=[],r=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),r&&!n_(n[i])&&(r=!1),i++;r?e.push(...o):e.pop()}return e}var Sf=class{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Df(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},Df=class{constructor(e,t,i,o={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),C2(r)}async sendMessage(e){var t;await this.sendPromise;let i=nt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,s,a;let c=await o,u=(s=(r=c.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,g=this.getHistory(!0).length,x=[];f!=null&&(x=(a=f.slice(g))!==null&&a!==void 0?a:[]);let E=u?[u]:[];this.recordHistory(i,E,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;let i=nt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let r=await o;return this.processStreamResponse(r,i)}getHistory(e=!1){let t=e?Cv(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return jt(this,arguments,function*(){var o,r,s,a,c,u;let f=[];try{for(var g=!0,x=Wt(e),E;E=yield ce(x.next()),o=E.done,!o;g=!0){a=E.value,g=!1;let w=a;if(E2(w)){let A=(u=(c=w.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content;A!==void 0&&f.push(A)}yield yield ce(w)}}catch(w){r={error:w}}finally{try{!g&&!o&&(s=x.return)&&(yield ce(s.call(x)))}finally{if(r)throw r.error}}this.recordHistory(t,f)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(r=>r.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Cv(i)):this.history.push(e),this.history.push(...o)}};var Sr=class n extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,n.prototype)}};function b2(n){let e={},t=l(n,["file"]);return t!=null&&d(e,["file"],t),e}function w2(n){let e={},t=l(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function I2(n){let e={},t=l(n,["name"]);return t!=null&&d(e,["_url","file"],Jv(t)),e}function S2(n){let e={},t=l(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function D2(n){let e={},t=l(n,["name"]);return t!=null&&d(e,["_url","file"],Jv(t)),e}function T2(n){let e={},t=l(n,["uris"]);return t!=null&&d(e,["uris"],t),e}function M2(n,e){let t={},i=l(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=l(n,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),t}function A2(n){let e={},t=l(n,["config"]);return t!=null&&M2(t,e),e}function k2(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);let o=l(n,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["files"],r)}return e}function N2(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["files"],o)}return e}var Tf=class extends Yt{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sn(Jn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=A2(e);return r=J("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let u=k2(c),f=new hf;return Object.assign(f,u),f})}}async createInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=b2(e);return r=J("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let u=w2(c),f=new gf;return Object.assign(f,u),f})}}async get(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=D2(e);return r=J("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=I2(e);return r=J("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let u=S2(c),f=new vf;return Object.assign(f,u),f})}}async registerFilesInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=T2(e);return r=J("files:register",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let u=N2(c),f=new _f;return Object.assign(f,u),f})}}};function Ja(n){let e={},t=l(n,["data"]);if(t!=null&&d(e,["data"],t),l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=l(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function R2(n){let e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>J2(r))),d(e,["parts"],o)}let i=l(n,["role"]);return i!=null&&d(e,["role"],i),e}function P2(n){let e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=l(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);let i=l(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function F2(n){let e={},t=l(n,["id"]);t!=null&&d(e,["id"],t);let i=l(n,["args"]);i!=null&&d(e,["args"],i);let o=l(n,["name"]);if(o!=null&&d(e,["name"],o),l(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function O2(n){let e={},t=l(n,["description"]);t!=null&&d(e,["description"],t);let i=l(n,["name"]);i!=null&&d(e,["name"],i);let o=l(n,["parameters"]);o!=null&&d(e,["parameters"],o);let r=l(n,["parametersJsonSchema"]);r!=null&&d(e,["parametersJsonSchema"],r);let s=l(n,["response"]);s!=null&&d(e,["response"],s);let a=l(n,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function V2(n){let e={},t=l(n,["modelSelectionConfig"]);t!=null&&d(e,["modelConfig"],t);let i=l(n,["responseJsonSchema"]);i!=null&&d(e,["responseJsonSchema"],i);let o=l(n,["audioTimestamp"]);o!=null&&d(e,["audioTimestamp"],o);let r=l(n,["candidateCount"]);r!=null&&d(e,["candidateCount"],r);let s=l(n,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);let a=l(n,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);let c=l(n,["logprobs"]);c!=null&&d(e,["logprobs"],c);let u=l(n,["maxOutputTokens"]);u!=null&&d(e,["maxOutputTokens"],u);let f=l(n,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);let g=l(n,["presencePenalty"]);g!=null&&d(e,["presencePenalty"],g);let x=l(n,["responseLogprobs"]);x!=null&&d(e,["responseLogprobs"],x);let E=l(n,["responseMimeType"]);E!=null&&d(e,["responseMimeType"],E);let w=l(n,["responseModalities"]);w!=null&&d(e,["responseModalities"],w);let A=l(n,["responseSchema"]);A!=null&&d(e,["responseSchema"],A);let F=l(n,["routingConfig"]);F!=null&&d(e,["routingConfig"],F);let P=l(n,["seed"]);P!=null&&d(e,["seed"],P);let q=l(n,["speechConfig"]);q!=null&&d(e,["speechConfig"],q);let Y=l(n,["stopSequences"]);Y!=null&&d(e,["stopSequences"],Y);let K=l(n,["temperature"]);K!=null&&d(e,["temperature"],K);let G=l(n,["thinkingConfig"]);G!=null&&d(e,["thinkingConfig"],G);let ve=l(n,["topK"]);ve!=null&&d(e,["topK"],ve);let me=l(n,["topP"]);if(me!=null&&d(e,["topP"],me),l(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L2(n){let e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=l(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function U2(n){let e={};if(l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=l(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function B2(n,e){let t={},i=l(n,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);let o=l(n,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);let r=l(n,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);let s=l(n,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=l(n,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let c=l(n,["maxOutputTokens"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","maxOutputTokens"],c);let u=l(n,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=l(n,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let g=l(n,["speechConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","speechConfig"],ap(g));let x=l(n,["thinkingConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","thinkingConfig"],x);let E=l(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);let w=l(n,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],R2(nt(w)));let A=l(n,["tools"]);if(e!==void 0&&A!=null){let ve=vo(A);Array.isArray(ve)&&(ve=ve.map(me=>Z2(go(me)))),d(e,["setup","tools"],ve)}let F=l(n,["sessionResumption"]);e!==void 0&&F!=null&&d(e,["setup","sessionResumption"],K2(F));let P=l(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&d(e,["setup","inputAudioTranscription"],P);let q=l(n,["outputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","outputAudioTranscription"],q);let Y=l(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&d(e,["setup","realtimeInputConfig"],Y);let K=l(n,["contextWindowCompression"]);e!==void 0&&K!=null&&d(e,["setup","contextWindowCompression"],K);let G=l(n,["proactivity"]);if(e!==void 0&&G!=null&&d(e,["setup","proactivity"],G),l(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function H2(n,e){let t={},i=l(n,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],V2(i));let o=l(n,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);let r=l(n,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);let s=l(n,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=l(n,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let c=l(n,["maxOutputTokens"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","maxOutputTokens"],c);let u=l(n,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=l(n,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let g=l(n,["speechConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","speechConfig"],ap(g));let x=l(n,["thinkingConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","thinkingConfig"],x);let E=l(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);let w=l(n,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],nt(w));let A=l(n,["tools"]);if(e!==void 0&&A!=null){let me=vo(A);Array.isArray(me)&&(me=me.map(Ne=>Q2(go(Ne)))),d(e,["setup","tools"],me)}let F=l(n,["sessionResumption"]);e!==void 0&&F!=null&&d(e,["setup","sessionResumption"],F);let P=l(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&d(e,["setup","inputAudioTranscription"],P);let q=l(n,["outputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","outputAudioTranscription"],q);let Y=l(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&d(e,["setup","realtimeInputConfig"],Y);let K=l(n,["contextWindowCompression"]);e!==void 0&&K!=null&&d(e,["setup","contextWindowCompression"],K);let G=l(n,["proactivity"]);e!==void 0&&G!=null&&d(e,["setup","proactivity"],G);let ve=l(n,["explicitVadSignal"]);return e!==void 0&&ve!=null&&d(e,["setup","explicitVadSignal"],ve),t}function $2(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["setup","model"],Ce(n,i));let o=l(e,["config"]);return o!=null&&d(t,["config"],B2(o,t)),t}function G2(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["setup","model"],Ce(n,i));let o=l(e,["config"]);return o!=null&&d(t,["config"],H2(o,t)),t}function z2(n){let e={},t=l(n,["musicGenerationConfig"]);return t!=null&&d(e,["musicGenerationConfig"],t),e}function q2(n){let e={},t=l(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["weightedPrompts"],i)}return e}function j2(n){let e={},t=l(n,["media"]);if(t!=null){let u=zv(t);Array.isArray(u)&&(u=u.map(f=>Ja(f))),d(e,["mediaChunks"],u)}let i=l(n,["audio"]);i!=null&&d(e,["audio"],Ja(jv(i)));let o=l(n,["audioStreamEnd"]);o!=null&&d(e,["audioStreamEnd"],o);let r=l(n,["video"]);r!=null&&d(e,["video"],Ja(qv(r)));let s=l(n,["text"]);s!=null&&d(e,["text"],s);let a=l(n,["activityStart"]);a!=null&&d(e,["activityStart"],a);let c=l(n,["activityEnd"]);return c!=null&&d(e,["activityEnd"],c),e}function W2(n){let e={},t=l(n,["media"]);if(t!=null){let u=zv(t);Array.isArray(u)&&(u=u.map(f=>f)),d(e,["mediaChunks"],u)}let i=l(n,["audio"]);i!=null&&d(e,["audio"],jv(i));let o=l(n,["audioStreamEnd"]);o!=null&&d(e,["audioStreamEnd"],o);let r=l(n,["video"]);r!=null&&d(e,["video"],qv(r));let s=l(n,["text"]);s!=null&&d(e,["text"],s);let a=l(n,["activityStart"]);a!=null&&d(e,["activityStart"],a);let c=l(n,["activityEnd"]);return c!=null&&d(e,["activityEnd"],c),e}function Y2(n){let e={},t=l(n,["setupComplete"]);t!=null&&d(e,["setupComplete"],t);let i=l(n,["serverContent"]);i!=null&&d(e,["serverContent"],i);let o=l(n,["toolCall"]);o!=null&&d(e,["toolCall"],o);let r=l(n,["toolCallCancellation"]);r!=null&&d(e,["toolCallCancellation"],r);let s=l(n,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],X2(s));let a=l(n,["goAway"]);a!=null&&d(e,["goAway"],a);let c=l(n,["sessionResumptionUpdate"]);c!=null&&d(e,["sessionResumptionUpdate"],c);let u=l(n,["voiceActivityDetectionSignal"]);u!=null&&d(e,["voiceActivityDetectionSignal"],u);let f=l(n,["voiceActivity"]);return f!=null&&d(e,["voiceActivity"],eA(f)),e}function J2(n){let e={},t=l(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);let i=l(n,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);let o=l(n,["executableCode"]);o!=null&&d(e,["executableCode"],o);let r=l(n,["fileData"]);r!=null&&d(e,["fileData"],P2(r));let s=l(n,["functionCall"]);s!=null&&d(e,["functionCall"],F2(s));let a=l(n,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let c=l(n,["inlineData"]);c!=null&&d(e,["inlineData"],Ja(c));let u=l(n,["text"]);u!=null&&d(e,["text"],u);let f=l(n,["thought"]);f!=null&&d(e,["thought"],f);let g=l(n,["thoughtSignature"]);g!=null&&d(e,["thoughtSignature"],g);let x=l(n,["videoMetadata"]);return x!=null&&d(e,["videoMetadata"],x),e}function K2(n){let e={},t=l(n,["handle"]);if(t!=null&&d(e,["handle"],t),l(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Z2(n){let e={};if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=l(n,["computerUse"]);t!=null&&d(e,["computerUse"],t);let i=l(n,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);let o=l(n,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=l(n,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(g=>g)),d(e,["functionDeclarations"],f)}let s=l(n,["googleMaps"]);s!=null&&d(e,["googleMaps"],L2(s));let a=l(n,["googleSearch"]);a!=null&&d(e,["googleSearch"],U2(a));let c=l(n,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);let u=l(n,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function Q2(n){let e={},t=l(n,["retrieval"]);t!=null&&d(e,["retrieval"],t);let i=l(n,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),l(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=l(n,["codeExecution"]);o!=null&&d(e,["codeExecution"],o);let r=l(n,["enterpriseWebSearch"]);r!=null&&d(e,["enterpriseWebSearch"],r);let s=l(n,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(x=>O2(x))),d(e,["functionDeclarations"],g)}let a=l(n,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);let c=l(n,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);let u=l(n,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);let f=l(n,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function X2(n){let e={},t=l(n,["promptTokenCount"]);t!=null&&d(e,["promptTokenCount"],t);let i=l(n,["cachedContentTokenCount"]);i!=null&&d(e,["cachedContentTokenCount"],i);let o=l(n,["candidatesTokenCount"]);o!=null&&d(e,["responseTokenCount"],o);let r=l(n,["toolUsePromptTokenCount"]);r!=null&&d(e,["toolUsePromptTokenCount"],r);let s=l(n,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);let a=l(n,["totalTokenCount"]);a!=null&&d(e,["totalTokenCount"],a);let c=l(n,["promptTokensDetails"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["promptTokensDetails"],E)}let u=l(n,["cacheTokensDetails"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["cacheTokensDetails"],E)}let f=l(n,["candidatesTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["responseTokensDetails"],E)}let g=l(n,["toolUsePromptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["toolUsePromptTokensDetails"],E)}let x=l(n,["trafficType"]);return x!=null&&d(e,["trafficType"],x),e}function eA(n){let e={},t=l(n,["type"]);return t!=null&&d(e,["voiceActivityType"],t),e}function tA(n,e){let t={},i=l(n,["data"]);if(i!=null&&d(t,["data"],i),l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=l(n,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function nA(n,e){let t={},i=l(n,["content"]);i!=null&&d(t,["content"],i);let o=l(n,["citationMetadata"]);o!=null&&d(t,["citationMetadata"],iA(o));let r=l(n,["tokenCount"]);r!=null&&d(t,["tokenCount"],r);let s=l(n,["finishReason"]);s!=null&&d(t,["finishReason"],s);let a=l(n,["avgLogprobs"]);a!=null&&d(t,["avgLogprobs"],a);let c=l(n,["groundingMetadata"]);c!=null&&d(t,["groundingMetadata"],c);let u=l(n,["index"]);u!=null&&d(t,["index"],u);let f=l(n,["logprobsResult"]);f!=null&&d(t,["logprobsResult"],f);let g=l(n,["safetyRatings"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(w=>w)),d(t,["safetyRatings"],E)}let x=l(n,["urlContextMetadata"]);return x!=null&&d(t,["urlContextMetadata"],x),t}function iA(n,e){let t={},i=l(n,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["citations"],o)}return t}function oA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["contents"]);if(r!=null){let s=Nt(r);Array.isArray(s)&&(s=s.map(a=>a)),d(i,["contents"],s)}return i}function rA(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(t,["tokensInfo"],r)}return t}function sA(n,e){let t={},i=l(n,["values"]);i!=null&&d(t,["values"],i);let o=l(n,["statistics"]);return o!=null&&d(t,["statistics"],aA(o)),t}function aA(n,e){let t={},i=l(n,["truncated"]);i!=null&&d(t,["truncated"],i);let o=l(n,["token_count"]);return o!=null&&d(t,["tokenCount"],o),t}function bl(n,e){let t={},i=l(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>gk(s))),d(t,["parts"],r)}let o=l(n,["role"]);return o!=null&&d(t,["role"],o),t}function lA(n,e){let t={},i=l(n,["controlType"]);i!=null&&d(t,["controlType"],i);let o=l(n,["enableControlImageComputation"]);return o!=null&&d(t,["computeControl"],o),t}function dA(n,e){let t={};if(l(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function cA(n,e,t){let i={},o=l(n,["systemInstruction"]);e!==void 0&&o!=null&&d(e,["systemInstruction"],nt(o));let r=l(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>s_(c))),d(e,["tools"],a)}let s=l(n,["generationConfig"]);return e!==void 0&&s!=null&&d(e,["generationConfig"],tk(s)),i}function uA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["contents"]);if(r!=null){let a=Nt(r);Array.isArray(a)&&(a=a.map(c=>bl(c))),d(i,["contents"],a)}let s=l(e,["config"]);return s!=null&&dA(s),i}function fA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["contents"]);if(r!=null){let a=Nt(r);Array.isArray(a)&&(a=a.map(c=>c)),d(i,["contents"],a)}let s=l(e,["config"]);return s!=null&&cA(s,i),i}function pA(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["totalTokens"]);o!=null&&d(t,["totalTokens"],o);let r=l(n,["cachedContentTokenCount"]);return r!=null&&d(t,["cachedContentTokenCount"],r),t}function mA(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["totalTokens"]);return o!=null&&d(t,["totalTokens"],o),t}function hA(n,e,t){let i={},o=l(e,["model"]);return o!=null&&d(i,["_url","name"],Ce(n,o)),i}function gA(n,e,t){let i={},o=l(e,["model"]);return o!=null&&d(i,["_url","name"],Ce(n,o)),i}function vA(n,e){let t={},i=l(n,["sdkHttpResponse"]);return i!=null&&d(t,["sdkHttpResponse"],i),t}function _A(n,e){let t={},i=l(n,["sdkHttpResponse"]);return i!=null&&d(t,["sdkHttpResponse"],i),t}function yA(n,e,t){let i={},o=l(n,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);let r=l(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);let s=l(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);let a=l(n,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);let c=l(n,["guidanceScale"]);e!==void 0&&c!=null&&d(e,["parameters","guidanceScale"],c);let u=l(n,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);let f=l(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);let g=l(n,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);let x=l(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&d(e,["parameters","includeSafetyAttributes"],x);let E=l(n,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);let w=l(n,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);let A=l(n,["outputMimeType"]);e!==void 0&&A!=null&&d(e,["parameters","outputOptions","mimeType"],A);let F=l(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&d(e,["parameters","outputOptions","compressionQuality"],F);let P=l(n,["addWatermark"]);e!==void 0&&P!=null&&d(e,["parameters","addWatermark"],P);let q=l(n,["labels"]);e!==void 0&&q!=null&&d(e,["labels"],q);let Y=l(n,["editMode"]);e!==void 0&&Y!=null&&d(e,["parameters","editMode"],Y);let K=l(n,["baseSteps"]);return e!==void 0&&K!=null&&d(e,["parameters","editConfig","baseSteps"],K),i}function xA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["prompt"]);r!=null&&d(i,["instances[0]","prompt"],r);let s=l(e,["referenceImages"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(u=>Ck(u))),d(i,["instances[0]","referenceImages"],c)}let a=l(e,["config"]);return a!=null&&yA(a,i),i}function EA(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>wl(s))),d(t,["generatedImages"],r)}return t}function CA(n,e,t){let i={},o=l(n,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);let r=l(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);let s=l(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&d(e,["requests[]","outputDimensionality"],s),l(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function bA(n,e,t){let i={},o=l(n,["taskType"]);e!==void 0&&o!=null&&d(e,["instances[]","task_type"],o);let r=l(n,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);let s=l(n,["outputDimensionality"]);e!==void 0&&s!=null&&d(e,["parameters","outputDimensionality"],s);let a=l(n,["mimeType"]);e!==void 0&&a!=null&&d(e,["instances[]","mimeType"],a);let c=l(n,["autoTruncate"]);return e!==void 0&&c!=null&&d(e,["parameters","autoTruncate"],c),i}function wA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["contents"]);if(r!=null){let c=op(n,r);Array.isArray(c)&&(c=c.map(u=>u)),d(i,["requests[]","content"],c)}let s=l(e,["config"]);s!=null&&CA(s,i);let a=l(e,["model"]);return a!==void 0&&d(i,["requests[]","model"],Ce(n,a)),i}function IA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["contents"]);if(r!=null){let a=op(n,r);Array.isArray(a)&&(a=a.map(c=>c)),d(i,["instances[]","content"],a)}let s=l(e,["config"]);return s!=null&&bA(s,i),i}function SA(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),d(t,["embeddings"],s)}let r=l(n,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function DA(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>sA(a))),d(t,["embeddings"],s)}let r=l(n,["metadata"]);return r!=null&&d(t,["metadata"],r),t}function TA(n,e){let t={},i=l(n,["endpoint"]);i!=null&&d(t,["name"],i);let o=l(n,["deployedModelId"]);return o!=null&&d(t,["deployedModelId"],o),t}function MA(n,e){let t={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=l(n,["fileUri"]);i!=null&&d(t,["fileUri"],i);let o=l(n,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function AA(n,e){let t={},i=l(n,["id"]);i!=null&&d(t,["id"],i);let o=l(n,["args"]);o!=null&&d(t,["args"],o);let r=l(n,["name"]);if(r!=null&&d(t,["name"],r),l(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function kA(n,e){let t={},i=l(n,["allowedFunctionNames"]);i!=null&&d(t,["allowedFunctionNames"],i);let o=l(n,["mode"]);if(o!=null&&d(t,["mode"],o),l(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function NA(n,e){let t={},i=l(n,["description"]);i!=null&&d(t,["description"],i);let o=l(n,["name"]);o!=null&&d(t,["name"],o);let r=l(n,["parameters"]);r!=null&&d(t,["parameters"],r);let s=l(n,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);let a=l(n,["response"]);a!=null&&d(t,["response"],a);let c=l(n,["responseJsonSchema"]);if(c!=null&&d(t,["responseJsonSchema"],c),l(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function RA(n,e,t,i){let o={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],bl(nt(r)));let s=l(e,["temperature"]);s!=null&&d(o,["temperature"],s);let a=l(e,["topP"]);a!=null&&d(o,["topP"],a);let c=l(e,["topK"]);c!=null&&d(o,["topK"],c);let u=l(e,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);let f=l(e,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);let g=l(e,["stopSequences"]);g!=null&&d(o,["stopSequences"],g);let x=l(e,["responseLogprobs"]);x!=null&&d(o,["responseLogprobs"],x);let E=l(e,["logprobs"]);E!=null&&d(o,["logprobs"],E);let w=l(e,["presencePenalty"]);w!=null&&d(o,["presencePenalty"],w);let A=l(e,["frequencyPenalty"]);A!=null&&d(o,["frequencyPenalty"],A);let F=l(e,["seed"]);F!=null&&d(o,["seed"],F);let P=l(e,["responseMimeType"]);P!=null&&d(o,["responseMimeType"],P);let q=l(e,["responseSchema"]);q!=null&&d(o,["responseSchema"],rp(q));let Y=l(e,["responseJsonSchema"]);if(Y!=null&&d(o,["responseJsonSchema"],Y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let K=l(e,["safetySettings"]);if(t!==void 0&&K!=null){let Ze=K;Array.isArray(Ze)&&(Ze=Ze.map(Ai=>bk(Ai))),d(t,["safetySettings"],Ze)}let G=l(e,["tools"]);if(t!==void 0&&G!=null){let Ze=vo(G);Array.isArray(Ze)&&(Ze=Ze.map(Ai=>Ak(go(Ai)))),d(t,["tools"],Ze)}let ve=l(e,["toolConfig"]);if(t!==void 0&&ve!=null&&d(t,["toolConfig"],Mk(ve)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let me=l(e,["cachedContent"]);t!==void 0&&me!=null&&d(t,["cachedContent"],Dn(n,me));let Ne=l(e,["responseModalities"]);Ne!=null&&d(o,["responseModalities"],Ne);let se=l(e,["mediaResolution"]);se!=null&&d(o,["mediaResolution"],se);let _e=l(e,["speechConfig"]);if(_e!=null&&d(o,["speechConfig"],sp(_e)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let ze=l(e,["thinkingConfig"]);ze!=null&&d(o,["thinkingConfig"],ze);let Et=l(e,["imageConfig"]);Et!=null&&d(o,["imageConfig"],sk(Et));let it=l(e,["enableEnhancedCivicAnswers"]);if(it!=null&&d(o,["enableEnhancedCivicAnswers"],it),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function PA(n,e,t,i){let o={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],nt(r));let s=l(e,["temperature"]);s!=null&&d(o,["temperature"],s);let a=l(e,["topP"]);a!=null&&d(o,["topP"],a);let c=l(e,["topK"]);c!=null&&d(o,["topK"],c);let u=l(e,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);let f=l(e,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);let g=l(e,["stopSequences"]);g!=null&&d(o,["stopSequences"],g);let x=l(e,["responseLogprobs"]);x!=null&&d(o,["responseLogprobs"],x);let E=l(e,["logprobs"]);E!=null&&d(o,["logprobs"],E);let w=l(e,["presencePenalty"]);w!=null&&d(o,["presencePenalty"],w);let A=l(e,["frequencyPenalty"]);A!=null&&d(o,["frequencyPenalty"],A);let F=l(e,["seed"]);F!=null&&d(o,["seed"],F);let P=l(e,["responseMimeType"]);P!=null&&d(o,["responseMimeType"],P);let q=l(e,["responseSchema"]);q!=null&&d(o,["responseSchema"],rp(q));let Y=l(e,["responseJsonSchema"]);Y!=null&&d(o,["responseJsonSchema"],Y);let K=l(e,["routingConfig"]);K!=null&&d(o,["routingConfig"],K);let G=l(e,["modelSelectionConfig"]);G!=null&&d(o,["modelConfig"],G);let ve=l(e,["safetySettings"]);if(t!==void 0&&ve!=null){let fn=ve;Array.isArray(fn)&&(fn=fn.map(Ul=>Ul)),d(t,["safetySettings"],fn)}let me=l(e,["tools"]);if(t!==void 0&&me!=null){let fn=vo(me);Array.isArray(fn)&&(fn=fn.map(Ul=>s_(go(Ul)))),d(t,["tools"],fn)}let Ne=l(e,["toolConfig"]);t!==void 0&&Ne!=null&&d(t,["toolConfig"],Ne);let se=l(e,["labels"]);t!==void 0&&se!=null&&d(t,["labels"],se);let _e=l(e,["cachedContent"]);t!==void 0&&_e!=null&&d(t,["cachedContent"],Dn(n,_e));let ze=l(e,["responseModalities"]);ze!=null&&d(o,["responseModalities"],ze);let Et=l(e,["mediaResolution"]);Et!=null&&d(o,["mediaResolution"],Et);let it=l(e,["speechConfig"]);it!=null&&d(o,["speechConfig"],sp(it));let Ze=l(e,["audioTimestamp"]);Ze!=null&&d(o,["audioTimestamp"],Ze);let Ai=l(e,["thinkingConfig"]);Ai!=null&&d(o,["thinkingConfig"],Ai);let dp=l(e,["imageConfig"]);if(dp!=null&&d(o,["imageConfig"],ak(dp)),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let cp=l(e,["modelArmorConfig"]);return t!==void 0&&cp!=null&&d(t,["modelArmorConfig"],cp),o}function bv(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["contents"]);if(r!=null){let a=Nt(r);Array.isArray(a)&&(a=a.map(c=>bl(c))),d(i,["contents"],a)}let s=l(e,["config"]);return s!=null&&d(i,["generationConfig"],RA(n,s,i)),i}function wv(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["contents"]);if(r!=null){let a=Nt(r);Array.isArray(a)&&(a=a.map(c=>c)),d(i,["contents"],a)}let s=l(e,["config"]);return s!=null&&d(i,["generationConfig"],PA(n,s,i)),i}function Iv(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>nA(f))),d(t,["candidates"],u)}let r=l(n,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);let s=l(n,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);let a=l(n,["responseId"]);a!=null&&d(t,["responseId"],a);let c=l(n,["usageMetadata"]);return c!=null&&d(t,["usageMetadata"],c),t}function Sv(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(g=>g)),d(t,["candidates"],f)}let r=l(n,["createTime"]);r!=null&&d(t,["createTime"],r);let s=l(n,["modelVersion"]);s!=null&&d(t,["modelVersion"],s);let a=l(n,["promptFeedback"]);a!=null&&d(t,["promptFeedback"],a);let c=l(n,["responseId"]);c!=null&&d(t,["responseId"],c);let u=l(n,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function FA(n,e,t){let i={};if(l(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let o=l(n,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);let r=l(n,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);let s=l(n,["guidanceScale"]);if(e!==void 0&&s!=null&&d(e,["parameters","guidanceScale"],s),l(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=l(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);let c=l(n,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);let u=l(n,["includeSafetyAttributes"]);e!==void 0&&u!=null&&d(e,["parameters","includeSafetyAttributes"],u);let f=l(n,["includeRaiReason"]);e!==void 0&&f!=null&&d(e,["parameters","includeRaiReason"],f);let g=l(n,["language"]);e!==void 0&&g!=null&&d(e,["parameters","language"],g);let x=l(n,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);let E=l(n,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E),l(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let w=l(n,["imageSize"]);if(e!==void 0&&w!=null&&d(e,["parameters","sampleImageSize"],w),l(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function OA(n,e,t){let i={},o=l(n,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);let r=l(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);let s=l(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);let a=l(n,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);let c=l(n,["guidanceScale"]);e!==void 0&&c!=null&&d(e,["parameters","guidanceScale"],c);let u=l(n,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);let f=l(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);let g=l(n,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);let x=l(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&d(e,["parameters","includeSafetyAttributes"],x);let E=l(n,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);let w=l(n,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);let A=l(n,["outputMimeType"]);e!==void 0&&A!=null&&d(e,["parameters","outputOptions","mimeType"],A);let F=l(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&d(e,["parameters","outputOptions","compressionQuality"],F);let P=l(n,["addWatermark"]);e!==void 0&&P!=null&&d(e,["parameters","addWatermark"],P);let q=l(n,["labels"]);e!==void 0&&q!=null&&d(e,["labels"],q);let Y=l(n,["imageSize"]);e!==void 0&&Y!=null&&d(e,["parameters","sampleImageSize"],Y);let K=l(n,["enhancePrompt"]);return e!==void 0&&K!=null&&d(e,["parameters","enhancePrompt"],K),i}function VA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["prompt"]);r!=null&&d(i,["instances[0]","prompt"],r);let s=l(e,["config"]);return s!=null&&FA(s,i),i}function LA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["prompt"]);r!=null&&d(i,["instances[0]","prompt"],r);let s=l(e,["config"]);return s!=null&&OA(s,i),i}function UA(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>ZA(a))),d(t,["generatedImages"],s)}let r=l(n,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],o_(r)),t}function BA(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>wl(a))),d(t,["generatedImages"],s)}let r=l(n,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],r_(r)),t}function HA(n,e,t){let i={},o=l(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o),l(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let r=l(n,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),l(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=l(n,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);let a=l(n,["resolution"]);e!==void 0&&a!=null&&d(e,["parameters","resolution"],a);let c=l(n,["personGeneration"]);if(e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c),l(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=l(n,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);let f=l(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&d(e,["parameters","enhancePrompt"],f),l(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let g=l(n,["lastFrame"]);e!==void 0&&g!=null&&d(e,["instances[0]","lastFrame"],Il(g));let x=l(n,["referenceImages"]);if(e!==void 0&&x!=null){let E=x;Array.isArray(E)&&(E=E.map(w=>Gk(w))),d(e,["instances[0]","referenceImages"],E)}if(l(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function $A(n,e,t){let i={},o=l(n,["numberOfVideos"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);let r=l(n,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);let s=l(n,["fps"]);e!==void 0&&s!=null&&d(e,["parameters","fps"],s);let a=l(n,["durationSeconds"]);e!==void 0&&a!=null&&d(e,["parameters","durationSeconds"],a);let c=l(n,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);let u=l(n,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);let f=l(n,["resolution"]);e!==void 0&&f!=null&&d(e,["parameters","resolution"],f);let g=l(n,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);let x=l(n,["pubsubTopic"]);e!==void 0&&x!=null&&d(e,["parameters","pubsubTopic"],x);let E=l(n,["negativePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","negativePrompt"],E);let w=l(n,["enhancePrompt"]);e!==void 0&&w!=null&&d(e,["parameters","enhancePrompt"],w);let A=l(n,["generateAudio"]);e!==void 0&&A!=null&&d(e,["parameters","generateAudio"],A);let F=l(n,["lastFrame"]);e!==void 0&&F!=null&&d(e,["instances[0]","lastFrame"],Jt(F));let P=l(n,["referenceImages"]);if(e!==void 0&&P!=null){let K=P;Array.isArray(K)&&(K=K.map(G=>zk(G))),d(e,["instances[0]","referenceImages"],K)}let q=l(n,["mask"]);e!==void 0&&q!=null&&d(e,["instances[0]","mask"],$k(q));let Y=l(n,["compressionQuality"]);return e!==void 0&&Y!=null&&d(e,["parameters","compressionQuality"],Y),i}function GA(n,e){let t={},i=l(n,["name"]);i!=null&&d(t,["name"],i);let o=l(n,["metadata"]);o!=null&&d(t,["metadata"],o);let r=l(n,["done"]);r!=null&&d(t,["done"],r);let s=l(n,["error"]);s!=null&&d(t,["error"],s);let a=l(n,["response","generateVideoResponse"]);return a!=null&&d(t,["response"],WA(a)),t}function zA(n,e){let t={},i=l(n,["name"]);i!=null&&d(t,["name"],i);let o=l(n,["metadata"]);o!=null&&d(t,["metadata"],o);let r=l(n,["done"]);r!=null&&d(t,["done"],r);let s=l(n,["error"]);s!=null&&d(t,["error"],s);let a=l(n,["response"]);return a!=null&&d(t,["response"],YA(a)),t}function qA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["prompt"]);r!=null&&d(i,["instances[0]","prompt"],r);let s=l(e,["image"]);s!=null&&d(i,["instances[0]","image"],Il(s));let a=l(e,["video"]);a!=null&&d(i,["instances[0]","video"],a_(a));let c=l(e,["source"]);c!=null&&JA(c,i);let u=l(e,["config"]);return u!=null&&HA(u,i),i}function jA(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["prompt"]);r!=null&&d(i,["instances[0]","prompt"],r);let s=l(e,["image"]);s!=null&&d(i,["instances[0]","image"],Jt(s));let a=l(e,["video"]);a!=null&&d(i,["instances[0]","video"],l_(a));let c=l(e,["source"]);c!=null&&KA(c,i);let u=l(e,["config"]);return u!=null&&$A(u,i),i}function WA(n,e){let t={},i=l(n,["generatedSamples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>XA(a))),d(t,["generatedVideos"],s)}let o=l(n,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);let r=l(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function YA(n,e){let t={},i=l(n,["videos"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ek(a))),d(t,["generatedVideos"],s)}let o=l(n,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);let r=l(n,["raiMediaFilteredReasons"]);return r!=null&&d(t,["raiMediaFilteredReasons"],r),t}function JA(n,e,t){let i={},o=l(n,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);let r=l(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Il(r));let s=l(n,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],a_(s)),i}function KA(n,e,t){let i={},o=l(n,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);let r=l(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Jt(r));let s=l(n,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],l_(s)),i}function ZA(n,e){let t={},i=l(n,["_self"]);i!=null&&d(t,["image"],lk(i));let o=l(n,["raiFilteredReason"]);o!=null&&d(t,["raiFilteredReason"],o);let r=l(n,["_self"]);return r!=null&&d(t,["safetyAttributes"],o_(r)),t}function wl(n,e){let t={},i=l(n,["_self"]);i!=null&&d(t,["image"],i_(i));let o=l(n,["raiFilteredReason"]);o!=null&&d(t,["raiFilteredReason"],o);let r=l(n,["_self"]);r!=null&&d(t,["safetyAttributes"],r_(r));let s=l(n,["prompt"]);return s!=null&&d(t,["enhancedPrompt"],s),t}function QA(n,e){let t={},i=l(n,["_self"]);i!=null&&d(t,["mask"],i_(i));let o=l(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(t,["labels"],r)}return t}function XA(n,e){let t={},i=l(n,["video"]);return i!=null&&d(t,["video"],Bk(i)),t}function ek(n,e){let t={},i=l(n,["_self"]);return i!=null&&d(t,["video"],Hk(i)),t}function tk(n,e){let t={},i=l(n,["modelSelectionConfig"]);i!=null&&d(t,["modelConfig"],i);let o=l(n,["responseJsonSchema"]);o!=null&&d(t,["responseJsonSchema"],o);let r=l(n,["audioTimestamp"]);r!=null&&d(t,["audioTimestamp"],r);let s=l(n,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);let a=l(n,["enableAffectiveDialog"]);a!=null&&d(t,["enableAffectiveDialog"],a);let c=l(n,["frequencyPenalty"]);c!=null&&d(t,["frequencyPenalty"],c);let u=l(n,["logprobs"]);u!=null&&d(t,["logprobs"],u);let f=l(n,["maxOutputTokens"]);f!=null&&d(t,["maxOutputTokens"],f);let g=l(n,["mediaResolution"]);g!=null&&d(t,["mediaResolution"],g);let x=l(n,["presencePenalty"]);x!=null&&d(t,["presencePenalty"],x);let E=l(n,["responseLogprobs"]);E!=null&&d(t,["responseLogprobs"],E);let w=l(n,["responseMimeType"]);w!=null&&d(t,["responseMimeType"],w);let A=l(n,["responseModalities"]);A!=null&&d(t,["responseModalities"],A);let F=l(n,["responseSchema"]);F!=null&&d(t,["responseSchema"],F);let P=l(n,["routingConfig"]);P!=null&&d(t,["routingConfig"],P);let q=l(n,["seed"]);q!=null&&d(t,["seed"],q);let Y=l(n,["speechConfig"]);Y!=null&&d(t,["speechConfig"],Y);let K=l(n,["stopSequences"]);K!=null&&d(t,["stopSequences"],K);let G=l(n,["temperature"]);G!=null&&d(t,["temperature"],G);let ve=l(n,["thinkingConfig"]);ve!=null&&d(t,["thinkingConfig"],ve);let me=l(n,["topK"]);me!=null&&d(t,["topK"],me);let Ne=l(n,["topP"]);if(Ne!=null&&d(t,["topP"],Ne),l(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function nk(n,e,t){let i={},o=l(e,["model"]);return o!=null&&d(i,["_url","name"],Ce(n,o)),i}function ik(n,e,t){let i={},o=l(e,["model"]);return o!=null&&d(i,["_url","name"],Ce(n,o)),i}function ok(n,e){let t={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let i=l(n,["enableWidget"]);return i!=null&&d(t,["enableWidget"],i),t}function rk(n,e){let t={};if(l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let i=l(n,["timeRangeFilter"]);return i!=null&&d(t,["timeRangeFilter"],i),t}function sk(n,e){let t={},i=l(n,["aspectRatio"]);i!=null&&d(t,["aspectRatio"],i);let o=l(n,["imageSize"]);if(o!=null&&d(t,["imageSize"],o),l(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function ak(n,e){let t={},i=l(n,["aspectRatio"]);i!=null&&d(t,["aspectRatio"],i);let o=l(n,["imageSize"]);o!=null&&d(t,["imageSize"],o);let r=l(n,["personGeneration"]);r!=null&&d(t,["personGeneration"],r);let s=l(n,["outputMimeType"]);s!=null&&d(t,["imageOutputOptions","mimeType"],s);let a=l(n,["outputCompressionQuality"]);return a!=null&&d(t,["imageOutputOptions","compressionQuality"],a),t}function lk(n,e){let t={},i=l(n,["bytesBase64Encoded"]);i!=null&&d(t,["imageBytes"],Yn(i));let o=l(n,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function i_(n,e){let t={},i=l(n,["gcsUri"]);i!=null&&d(t,["gcsUri"],i);let o=l(n,["bytesBase64Encoded"]);o!=null&&d(t,["imageBytes"],Yn(o));let r=l(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Il(n,e){let t={};if(l(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let i=l(n,["imageBytes"]);i!=null&&d(t,["bytesBase64Encoded"],Yn(i));let o=l(n,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Jt(n,e){let t={},i=l(n,["gcsUri"]);i!=null&&d(t,["gcsUri"],i);let o=l(n,["imageBytes"]);o!=null&&d(t,["bytesBase64Encoded"],Yn(o));let r=l(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function dk(n,e,t,i){let o={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);let a=l(e,["filter"]);t!==void 0&&a!=null&&d(t,["_query","filter"],a);let c=l(e,["queryBase"]);return t!==void 0&&c!=null&&d(t,["_url","models_url"],Kv(n,c)),o}function ck(n,e,t,i){let o={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);let a=l(e,["filter"]);t!==void 0&&a!=null&&d(t,["_query","filter"],a);let c=l(e,["queryBase"]);return t!==void 0&&c!=null&&d(t,["_url","models_url"],Kv(n,c)),o}function uk(n,e,t){let i={},o=l(e,["config"]);return o!=null&&dk(n,o,i),i}function fk(n,e,t){let i={},o=l(e,["config"]);return o!=null&&ck(n,o,i),i}function pk(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);let r=l(n,["_self"]);if(r!=null){let s=Zv(r);Array.isArray(s)&&(s=s.map(a=>Mf(a))),d(t,["models"],s)}return t}function mk(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);let r=l(n,["_self"]);if(r!=null){let s=Zv(r);Array.isArray(s)&&(s=s.map(a=>Af(a))),d(t,["models"],s)}return t}function hk(n,e){let t={},i=l(n,["maskMode"]);i!=null&&d(t,["maskMode"],i);let o=l(n,["segmentationClasses"]);o!=null&&d(t,["maskClasses"],o);let r=l(n,["maskDilation"]);return r!=null&&d(t,["dilation"],r),t}function Mf(n,e){let t={},i=l(n,["name"]);i!=null&&d(t,["name"],i);let o=l(n,["displayName"]);o!=null&&d(t,["displayName"],o);let r=l(n,["description"]);r!=null&&d(t,["description"],r);let s=l(n,["version"]);s!=null&&d(t,["version"],s);let a=l(n,["_self"]);a!=null&&d(t,["tunedModelInfo"],kk(a));let c=l(n,["inputTokenLimit"]);c!=null&&d(t,["inputTokenLimit"],c);let u=l(n,["outputTokenLimit"]);u!=null&&d(t,["outputTokenLimit"],u);let f=l(n,["supportedGenerationMethods"]);f!=null&&d(t,["supportedActions"],f);let g=l(n,["temperature"]);g!=null&&d(t,["temperature"],g);let x=l(n,["maxTemperature"]);x!=null&&d(t,["maxTemperature"],x);let E=l(n,["topP"]);E!=null&&d(t,["topP"],E);let w=l(n,["topK"]);w!=null&&d(t,["topK"],w);let A=l(n,["thinking"]);return A!=null&&d(t,["thinking"],A),t}function Af(n,e){let t={},i=l(n,["name"]);i!=null&&d(t,["name"],i);let o=l(n,["displayName"]);o!=null&&d(t,["displayName"],o);let r=l(n,["description"]);r!=null&&d(t,["description"],r);let s=l(n,["versionId"]);s!=null&&d(t,["version"],s);let a=l(n,["deployedModels"]);if(a!=null){let x=a;Array.isArray(x)&&(x=x.map(E=>TA(E))),d(t,["endpoints"],x)}let c=l(n,["labels"]);c!=null&&d(t,["labels"],c);let u=l(n,["_self"]);u!=null&&d(t,["tunedModelInfo"],Nk(u));let f=l(n,["defaultCheckpointId"]);f!=null&&d(t,["defaultCheckpointId"],f);let g=l(n,["checkpoints"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(E=>E)),d(t,["checkpoints"],x)}return t}function gk(n,e){let t={},i=l(n,["mediaResolution"]);i!=null&&d(t,["mediaResolution"],i);let o=l(n,["codeExecutionResult"]);o!=null&&d(t,["codeExecutionResult"],o);let r=l(n,["executableCode"]);r!=null&&d(t,["executableCode"],r);let s=l(n,["fileData"]);s!=null&&d(t,["fileData"],MA(s));let a=l(n,["functionCall"]);a!=null&&d(t,["functionCall"],AA(a));let c=l(n,["functionResponse"]);c!=null&&d(t,["functionResponse"],c);let u=l(n,["inlineData"]);u!=null&&d(t,["inlineData"],tA(u));let f=l(n,["text"]);f!=null&&d(t,["text"],f);let g=l(n,["thought"]);g!=null&&d(t,["thought"],g);let x=l(n,["thoughtSignature"]);x!=null&&d(t,["thoughtSignature"],x);let E=l(n,["videoMetadata"]);return E!=null&&d(t,["videoMetadata"],E),t}function vk(n,e){let t={},i=l(n,["productImage"]);return i!=null&&d(t,["image"],Jt(i)),t}function _k(n,e,t){let i={},o=l(n,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);let r=l(n,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);let s=l(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);let a=l(n,["seed"]);e!==void 0&&a!=null&&d(e,["parameters","seed"],a);let c=l(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);let u=l(n,["personGeneration"]);e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u);let f=l(n,["addWatermark"]);e!==void 0&&f!=null&&d(e,["parameters","addWatermark"],f);let g=l(n,["outputMimeType"]);e!==void 0&&g!=null&&d(e,["parameters","outputOptions","mimeType"],g);let x=l(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","compressionQuality"],x);let E=l(n,["enhancePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E);let w=l(n,["labels"]);return e!==void 0&&w!=null&&d(e,["labels"],w),i}function yk(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["source"]);r!=null&&Ek(r,i);let s=l(e,["config"]);return s!=null&&_k(s,i),i}function xk(n,e){let t={},i=l(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>wl(r))),d(t,["generatedImages"],o)}return t}function Ek(n,e,t){let i={},o=l(n,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);let r=l(n,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],Jt(r));let s=l(n,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>vk(c))),d(e,["instances[0]","productImages"],a)}return i}function Ck(n,e){let t={},i=l(n,["referenceImage"]);i!=null&&d(t,["referenceImage"],Jt(i));let o=l(n,["referenceId"]);o!=null&&d(t,["referenceId"],o);let r=l(n,["referenceType"]);r!=null&&d(t,["referenceType"],r);let s=l(n,["maskImageConfig"]);s!=null&&d(t,["maskImageConfig"],hk(s));let a=l(n,["controlImageConfig"]);a!=null&&d(t,["controlImageConfig"],lA(a));let c=l(n,["styleImageConfig"]);c!=null&&d(t,["styleImageConfig"],c);let u=l(n,["subjectImageConfig"]);return u!=null&&d(t,["subjectImageConfig"],u),t}function o_(n,e){let t={},i=l(n,["safetyAttributes","categories"]);i!=null&&d(t,["categories"],i);let o=l(n,["safetyAttributes","scores"]);o!=null&&d(t,["scores"],o);let r=l(n,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function r_(n,e){let t={},i=l(n,["safetyAttributes","categories"]);i!=null&&d(t,["categories"],i);let o=l(n,["safetyAttributes","scores"]);o!=null&&d(t,["scores"],o);let r=l(n,["contentType"]);return r!=null&&d(t,["contentType"],r),t}function bk(n,e){let t={},i=l(n,["category"]);if(i!=null&&d(t,["category"],i),l(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=l(n,["threshold"]);return o!=null&&d(t,["threshold"],o),t}function wk(n,e){let t={},i=l(n,["image"]);return i!=null&&d(t,["image"],Jt(i)),t}function Ik(n,e,t){let i={},o=l(n,["mode"]);e!==void 0&&o!=null&&d(e,["parameters","mode"],o);let r=l(n,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);let s=l(n,["confidenceThreshold"]);e!==void 0&&s!=null&&d(e,["parameters","confidenceThreshold"],s);let a=l(n,["maskDilation"]);e!==void 0&&a!=null&&d(e,["parameters","maskDilation"],a);let c=l(n,["binaryColorThreshold"]);e!==void 0&&c!=null&&d(e,["parameters","binaryColorThreshold"],c);let u=l(n,["labels"]);return e!==void 0&&u!=null&&d(e,["labels"],u),i}function Sk(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["source"]);r!=null&&Tk(r,i);let s=l(e,["config"]);return s!=null&&Ik(s,i),i}function Dk(n,e){let t={},i=l(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>QA(r))),d(t,["generatedMasks"],o)}return t}function Tk(n,e,t){let i={},o=l(n,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);let r=l(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Jt(r));let s=l(n,["scribbleImage"]);return e!==void 0&&s!=null&&d(e,["instances[0]","scribble"],wk(s)),i}function Mk(n,e){let t={},i=l(n,["retrievalConfig"]);i!=null&&d(t,["retrievalConfig"],i);let o=l(n,["functionCallingConfig"]);return o!=null&&d(t,["functionCallingConfig"],kA(o)),t}function Ak(n,e){let t={};if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=l(n,["computerUse"]);i!=null&&d(t,["computerUse"],i);let o=l(n,["fileSearch"]);o!=null&&d(t,["fileSearch"],o);let r=l(n,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=l(n,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(x=>x)),d(t,["functionDeclarations"],g)}let a=l(n,["googleMaps"]);a!=null&&d(t,["googleMaps"],ok(a));let c=l(n,["googleSearch"]);c!=null&&d(t,["googleSearch"],rk(c));let u=l(n,["googleSearchRetrieval"]);u!=null&&d(t,["googleSearchRetrieval"],u);let f=l(n,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function s_(n,e){let t={},i=l(n,["retrieval"]);i!=null&&d(t,["retrieval"],i);let o=l(n,["computerUse"]);if(o!=null&&d(t,["computerUse"],o),l(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let r=l(n,["codeExecution"]);r!=null&&d(t,["codeExecution"],r);let s=l(n,["enterpriseWebSearch"]);s!=null&&d(t,["enterpriseWebSearch"],s);let a=l(n,["functionDeclarations"]);if(a!=null){let x=a;Array.isArray(x)&&(x=x.map(E=>NA(E))),d(t,["functionDeclarations"],x)}let c=l(n,["googleMaps"]);c!=null&&d(t,["googleMaps"],c);let u=l(n,["googleSearch"]);u!=null&&d(t,["googleSearch"],u);let f=l(n,["googleSearchRetrieval"]);f!=null&&d(t,["googleSearchRetrieval"],f);let g=l(n,["urlContext"]);return g!=null&&d(t,["urlContext"],g),t}function kk(n,e){let t={},i=l(n,["baseModel"]);i!=null&&d(t,["baseModel"],i);let o=l(n,["createTime"]);o!=null&&d(t,["createTime"],o);let r=l(n,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function Nk(n,e){let t={},i=l(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&d(t,["baseModel"],i);let o=l(n,["createTime"]);o!=null&&d(t,["createTime"],o);let r=l(n,["updateTime"]);return r!=null&&d(t,["updateTime"],r),t}function Rk(n,e,t){let i={},o=l(n,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let r=l(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);let s=l(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),i}function Pk(n,e,t){let i={},o=l(n,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let r=l(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);let s=l(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),i}function Fk(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","name"],Ce(n,o));let r=l(e,["config"]);return r!=null&&Rk(r,i),i}function Ok(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["config"]);return r!=null&&Pk(r,i),i}function Vk(n,e,t){let i={},o=l(n,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);let r=l(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);let s=l(n,["personGeneration"]);e!==void 0&&s!=null&&d(e,["parameters","personGeneration"],s);let a=l(n,["includeRaiReason"]);e!==void 0&&a!=null&&d(e,["parameters","includeRaiReason"],a);let c=l(n,["outputMimeType"]);e!==void 0&&c!=null&&d(e,["parameters","outputOptions","mimeType"],c);let u=l(n,["outputCompressionQuality"]);e!==void 0&&u!=null&&d(e,["parameters","outputOptions","compressionQuality"],u);let f=l(n,["enhanceInputImage"]);e!==void 0&&f!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],f);let g=l(n,["imagePreservationFactor"]);e!==void 0&&g!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],g);let x=l(n,["labels"]);e!==void 0&&x!=null&&d(e,["labels"],x);let E=l(n,["numberOfImages"]);e!==void 0&&E!=null&&d(e,["parameters","sampleCount"],E);let w=l(n,["mode"]);return e!==void 0&&w!=null&&d(e,["parameters","mode"],w),i}function Lk(n,e,t){let i={},o=l(e,["model"]);o!=null&&d(i,["_url","model"],Ce(n,o));let r=l(e,["image"]);r!=null&&d(i,["instances[0]","image"],Jt(r));let s=l(e,["upscaleFactor"]);s!=null&&d(i,["parameters","upscaleConfig","upscaleFactor"],s);let a=l(e,["config"]);return a!=null&&Vk(a,i),i}function Uk(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>wl(s))),d(t,["generatedImages"],r)}return t}function Bk(n,e){let t={},i=l(n,["uri"]);i!=null&&d(t,["uri"],i);let o=l(n,["encodedVideo"]);o!=null&&d(t,["videoBytes"],Yn(o));let r=l(n,["encoding"]);return r!=null&&d(t,["mimeType"],r),t}function Hk(n,e){let t={},i=l(n,["gcsUri"]);i!=null&&d(t,["uri"],i);let o=l(n,["bytesBase64Encoded"]);o!=null&&d(t,["videoBytes"],Yn(o));let r=l(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function $k(n,e){let t={},i=l(n,["image"]);i!=null&&d(t,["_self"],Jt(i));let o=l(n,["maskMode"]);return o!=null&&d(t,["maskMode"],o),t}function Gk(n,e){let t={},i=l(n,["image"]);i!=null&&d(t,["image"],Il(i));let o=l(n,["referenceType"]);return o!=null&&d(t,["referenceType"],o),t}function zk(n,e){let t={},i=l(n,["image"]);i!=null&&d(t,["image"],Jt(i));let o=l(n,["referenceType"]);return o!=null&&d(t,["referenceType"],o),t}function a_(n,e){let t={},i=l(n,["uri"]);i!=null&&d(t,["uri"],i);let o=l(n,["videoBytes"]);o!=null&&d(t,["encodedVideo"],Yn(o));let r=l(n,["mimeType"]);return r!=null&&d(t,["encoding"],r),t}function l_(n,e){let t={},i=l(n,["uri"]);i!=null&&d(t,["gcsUri"],i);let o=l(n,["videoBytes"]);o!=null&&d(t,["bytesBase64Encoded"],Yn(o));let r=l(n,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function qk(n,e){let t={},i=l(n,["displayName"]);return e!==void 0&&i!=null&&d(e,["displayName"],i),t}function jk(n){let e={},t=l(n,["config"]);return t!=null&&qk(t,e),e}function Wk(n,e){let t={},i=l(n,["force"]);return e!==void 0&&i!=null&&d(e,["_query","force"],i),t}function Yk(n){let e={},t=l(n,["name"]);t!=null&&d(e,["_url","name"],t);let i=l(n,["config"]);return i!=null&&Wk(i,e),e}function Jk(n){let e={},t=l(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function Kk(n,e){let t={},i=l(n,["customMetadata"]);if(e!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["customMetadata"],r)}let o=l(n,["chunkingConfig"]);return e!==void 0&&o!=null&&d(e,["chunkingConfig"],o),t}function Zk(n){let e={},t=l(n,["name"]);t!=null&&d(e,["name"],t);let i=l(n,["metadata"]);i!=null&&d(e,["metadata"],i);let o=l(n,["done"]);o!=null&&d(e,["done"],o);let r=l(n,["error"]);r!=null&&d(e,["error"],r);let s=l(n,["response"]);return s!=null&&d(e,["response"],Xk(s)),e}function Qk(n){let e={},t=l(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);let i=l(n,["fileName"]);i!=null&&d(e,["fileName"],i);let o=l(n,["config"]);return o!=null&&Kk(o,e),e}function Xk(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["parent"]);i!=null&&d(e,["parent"],i);let o=l(n,["documentName"]);return o!=null&&d(e,["documentName"],o),e}function eN(n,e){let t={},i=l(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=l(n,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),t}function tN(n){let e={},t=l(n,["config"]);return t!=null&&eN(t,e),e}function nN(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);let o=l(n,["fileSearchStores"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["fileSearchStores"],r)}return e}function d_(n,e){let t={},i=l(n,["mimeType"]);e!==void 0&&i!=null&&d(e,["mimeType"],i);let o=l(n,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let r=l(n,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),d(e,["customMetadata"],a)}let s=l(n,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),t}function iN(n){let e={},t=l(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);let i=l(n,["config"]);return i!=null&&d_(i,e),e}function oN(n){let e={},t=l(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}var rN="Content-Type",sN="X-Server-Timeout",aN="User-Agent",kf="x-goog-api-client",lN="1.40.0",dN=`google-genai-sdk/${lN}`,cN="v1beta1",uN="v1beta",Nf=class{constructor(e){var t,i,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:cN}else{if(!this.clientOptions.apiKey)throw new Sr({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:uN,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){let o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===$v.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e,t),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(let[s,a]of Object.entries(e.queryParams))o.searchParams.append(s,String(a));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,o.toString(),e.abortSignal),this.unaryApiCall(o,r,e.httpMethod)}patchHttpOptions(e,t){let i=JSON.parse(JSON.stringify(e));for(let[o,r]of Object.entries(t))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e,t),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,o.toString(),e.abortSignal),this.streamApiCall(o,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){let r=new AbortController,s=r.signal;if(t.timeout&&t?.timeout>0){let a=setTimeout(()=>r.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=s}return t&&t.extraBody!==null&&fN(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await Dv(o),new Ir(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await Dv(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return jt(this,arguments,function*(){var i;let o=(i=e?.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="",a="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:u,value:f}=yield ce(o.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let g=r.decode(f,{stream:!0});try{let w=JSON.parse(g);if("error"in w){let A=JSON.parse(JSON.stringify(w.error)),F=A.status,P=A.code,q=`got status: ${F}. ${JSON.stringify(w)}`;if(P>=400&&P<600)throw new Sr({message:q,status:P})}}catch(w){if(w.name==="ApiError")throw w}s+=g;let x=-1,E=0;for(;;){x=-1,E=0;for(let F of c){let P=s.indexOf(F);P!==-1&&(x===-1||P<x)&&(x=P,E=F.length)}if(x===-1)break;let w=s.substring(0,x);s=s.substring(x+E);let A=w.trim();if(A.startsWith(a)){let F=A.substring(a.length).trim();try{let P=new Response(F,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield ce(new Ir(P))}catch(P){throw new Error(`exception parsing stream chunk ${F}. ${P}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},t=dN+" "+this.clientOptions.userAgentExtra;return e[aN]=t,e[kf]=t,e[rN]="application/json",e}async getHeadersInternal(e,t){let i=new Headers;if(e&&e.headers){for(let[o,r]of Object.entries(e.headers))i.append(o,r);e.timeout&&e.timeout>0&&i.append(sN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;let o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let r=this.clientOptions.uploader,s=await r.stat(e);o.sizeBytes=String(s.size);let a=(i=t?.mimeType)!==null&&i!==void 0?i:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;let c={file:o},u=this.getFileName(e),f=J("upload/v1beta/files",c._url),g=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,u,c,t?.httpOptions);return r.upload(e,g,this)}async uploadFileToFileSearchStore(e,t,i){var o;let r=this.clientOptions.uploader,s=await r.stat(t),a=String(s.size),c=(o=i?.mimeType)!==null&&o!==void 0?o:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(t),g={};i!=null&&d_(i,g);let x=await this.fetchUploadUrl(u,a,c,f,g,i?.httpOptions);return r.uploadToFileSearchStore(t,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,r,s){var a;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};let u=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:c});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let f=(a=u?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}};async function Dv(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){let t=n.status,i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};let o=JSON.stringify(i);throw t>=400&&t<600?new Sr({message:o,status:t}):new Error(o)}}function fN(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{let r=JSON.parse(n.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))t=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,s){let a=Object.assign({},r);for(let c in s)if(Object.prototype.hasOwnProperty.call(s,c)){let u=s[c],f=a[c];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?a[c]=i(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),a[c]=u)}return a}let o=i(t,e);n.body=JSON.stringify(o)}var pN="mcp_used/unknown",mN=!1;function c_(n){for(let e of n)if(hN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return mN}function u_(n){var e;let t=(e=n[kf])!==null&&e!==void 0?e:"";n[kf]=(t+` ${pN}`).trimStart()}function hN(n){return n!==null&&typeof n=="object"&&n instanceof Rf}function gN(n){return jt(this,arguments,function*(t,i=100){let o,r=0;for(;r<i;){let s=yield ce(t.listTools({cursor:o}));for(let a of s.tools)yield yield ce(a),r++;if(!s.nextCursor)break;o=s.nextCursor}})}var Rf=class n{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new n(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;let r={},s=[];for(let f of this.mcpClients)try{for(var a=!0,c=(t=void 0,Wt(gN(f))),u;u=await c.next(),e=u.done,!e;a=!0){o=u.value,a=!1;let g=o;s.push(g);let x=g.name;if(r[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);r[x]=f}}catch(g){t={error:g}}finally{try{!a&&!e&&(i=c.return)&&await i.call(c)}finally{if(t)throw t.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),ZT(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],r;this.config.timeout&&(r={timeout:this.config.timeout});let s=await o.callTool({name:i.name,arguments:i.args},void 0,r);t.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return t}};async function vN(n,e,t){let i=new xf,o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}var Pf=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=yN(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`,u=()=>{},f=new Promise(Y=>{u=Y}),g=e.callbacks,x=function(){u({})},E=this.apiClient,w={onopen:x,onmessage:Y=>{vN(E,g.onmessage,Y)},onerror:(t=g?.onerror)!==null&&t!==void 0?t:function(Y){},onclose:(i=g?.onclose)!==null&&i!==void 0?i:function(Y){}},A=this.webSocketFactory.create(c,_N(s),w);A.connect(),await f;let q={setup:{model:Ce(this.apiClient,e.model)}};return A.send(JSON.stringify(q)),new Ff(A,this.apiClient)}},Ff=class{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let t=q2(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let t=z2(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){let t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(br.PLAY)}pause(){this.sendPlaybackControl(br.PAUSE)}stop(){this.sendPlaybackControl(br.STOP)}resetContext(){this.sendPlaybackControl(br.RESET_CONTEXT)}close(){this.conn.close()}};function _N(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function yN(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var xN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function EN(n,e,t){let i=new yf,o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;let r=JSON.parse(o);if(n.isVertexAI()){let s=Y2(r);Object.assign(i,s)}else Object.assign(i,r);e(i)}var Of=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Pf(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,r,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),f,g=this.apiClient.getHeaders();e.config&&e.config.tools&&c_(e.config.tools)&&u_(g);let x=wN(g);if(this.apiClient.isVertexAI()){let se=this.apiClient.getProject(),_e=this.apiClient.getLocation(),ze=this.apiClient.getApiKey(),Et=!!se&&!!_e||!!ze;this.apiClient.getCustomBaseUrl()&&!Et?f=c:(f=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,f))}else{let se=this.apiClient.getApiKey(),_e="BidiGenerateContent",ze="key";se?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),_e="BidiGenerateContentConstrained",ze="access_token"),f=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${_e}?${ze}=${se}`}let E=()=>{},w=new Promise(se=>{E=se}),A=e.callbacks,F=function(){var se;(se=A?.onopen)===null||se===void 0||se.call(A),E({})},P=this.apiClient,q={onopen:F,onmessage:se=>{EN(P,A.onmessage,se)},onerror:(t=A?.onerror)!==null&&t!==void 0?t:function(se){},onclose:(i=A?.onclose)!==null&&i!==void 0?i:function(se){}},Y=this.webSocketFactory.create(f,bN(x),q);Y.connect(),await w;let K=Ce(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&K.startsWith("publishers/")){let se=this.apiClient.getProject(),_e=this.apiClient.getLocation();se&&_e&&(K=`projects/${se}/locations/${_e}/`+K)}let G={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[rf.AUDIO]}:e.config.responseModalities=[rf.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let ve=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],me=[];for(let se of ve)if(this.isCallableTool(se)){let _e=se;me.push(await _e.tool())}else me.push(se);me.length>0&&(e.config.tools=me);let Ne={model:K,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?G=G2(this.apiClient,Ne):G=$2(this.apiClient,Ne),delete G.config,Y.send(JSON.stringify(G)),new Vf(Y,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},CN={turnComplete:!0},Vf=class{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Nt(t.turns),e.isVertexAI()||(i=i.map(o=>bl(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(xN)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},CN),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:W2(e)}:t={realtimeInput:j2(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}};function bN(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function wN(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var Tv=10;function Mv(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(let s of(t=n?.tools)!==null&&t!==void 0?t:[])if(po(s)){o=!0;break}if(!o)return!0;let r=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function po(n){return"callTool"in n&&typeof n.callTool=="function"}function IN(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>po(o)))!==null&&i!==void 0?i:!1}function Av(n){var e;let t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(po(i))return;let r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&t.push(o)}),t}function kv(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var Lf=class extends Yt{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,r,s,a;let c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!IN(t)||Mv(t.config))return await this.generateContentInternal(c);let u=Av(t);if(u.length>0){let A=u.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let f,g,x=Nt(c.contents),E=(r=(o=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Tv,w=0;for(;w<E&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){let A=f.candidates[0].content,F=[];for(let P of(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(po(P)){let Y=await P.callTool(f.functionCalls);F.push(...Y)}w++,g={role:"user",parts:F},c.contents=Nt(c.contents),c.contents.push(A),c.contents.push(g),kv(c.config)&&(x.push(A),x.push(g))}return kv(c.config)&&(f.automaticFunctionCallingHistory=x),f},this.generateContentStream=async t=>{var i,o,r,s,a;if(this.maybeMoveToResponseJsonSchem(t),Mv(t.config)){let g=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(g)}let c=Av(t);if(c.length>0){let g=c.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${g}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let u=(r=(o=(i=t?.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,f=(a=(s=t?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let r,s=[];if(i?.generatedImages)for(let c of i.generatedImages)c&&c?.safetyAttributes&&((o=c?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=c?.safetyAttributes:s.push(c);let a;return r?a={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async t=>{var i;let s={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Sn(Jn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async t=>{let i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));let o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,r,s,a,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((s=(r=t.source)===null||r===void 0?void 0:r.video)===null||s===void 0)&&s.uri&&(!((c=(a=t.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;let r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;let s=await Promise.all(r.map(async c=>po(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&c_(e.config.tools)){let c=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),u_(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var t,i,o;let r=new Map;for(let s of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(po(s)){let a=s,c=await a.tool();for(let u of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!u.name)throw new Error("Function declaration name is required.");if(r.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);r.set(u.name,a)}}return r}async processAfcStream(e){var t,i,o;let r=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Tv,s=!1,a=0,c=await this.initAfcToolsMap(e);return(function(u,f,g){return jt(this,arguments,function*(){for(var x,E,w,A,F,P;a<r;){s&&(a++,s=!1);let G=yield ce(u.processParamsMaybeAddMcpUsage(g)),ve=yield ce(u.generateContentStreamInternal(G)),me=[],Ne=[];try{for(var q=!0,Y=(E=void 0,Wt(ve)),K;K=yield ce(Y.next()),x=K.done,!x;q=!0){A=K.value,q=!1;let se=A;if(yield yield ce(se),se.candidates&&(!((F=se.candidates[0])===null||F===void 0)&&F.content)){Ne.push(se.candidates[0].content);for(let _e of(P=se.candidates[0].content.parts)!==null&&P!==void 0?P:[])if(a<r&&_e.functionCall){if(!_e.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(_e.functionCall.name)){let ze=yield ce(f.get(_e.functionCall.name).callTool([_e.functionCall]));me.push(...ze)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${_e.functionCall.name}`)}}}}catch(se){E={error:se}}finally{try{!q&&!x&&(w=Y.return)&&(yield ce(w.call(Y)))}finally{if(E)throw E.error}}if(me.length>0){s=!0;let se=new Mi;se.candidates=[{content:{role:"user",parts:me}}],yield yield ce(se);let _e=[];_e.push(...Ne),_e.push({role:"user",parts:me});let ze=Nt(g.contents).concat(_e);g.contents=ze}else break}})})(this,c,e)}async generateContentInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=wv(this.apiClient,e);return a=J("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=Sv(f),x=new Mi;return Object.assign(x,g),x})}else{let u=bv(this.apiClient,e);return a=J("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=Iv(f),x=new Mi;return Object.assign(x,g),x})}}async generateContentStreamInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=wv(this.apiClient,e);return a=J("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(g){return jt(this,arguments,function*(){var x,E,w,A;try{for(var F=!0,P=Wt(g),q;q=yield ce(P.next()),x=q.done,!x;F=!0){A=q.value,F=!1;let Y=A,K=Sv(yield ce(Y.json()),e);K.sdkHttpResponse={headers:Y.headers};let G=new Mi;Object.assign(G,K),yield yield ce(G)}}catch(Y){E={error:Y}}finally{try{!F&&!x&&(w=P.return)&&(yield ce(w.call(P)))}finally{if(E)throw E.error}}})})}else{let u=bv(this.apiClient,e);return a=J("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(g){return jt(this,arguments,function*(){var x,E,w,A;try{for(var F=!0,P=Wt(g),q;q=yield ce(P.next()),x=q.done,!x;F=!0){A=q.value,F=!1;let Y=A,K=Iv(yield ce(Y.json()),e);K.sdkHttpResponse={headers:Y.headers};let G=new Mi;Object.assign(G,K),yield yield ce(G)}}catch(Y){E={error:Y}}finally{try{!F&&!x&&(w=P.return)&&(yield ce(w.call(P)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=IA(this.apiClient,e);return a=J("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=DA(f),x=new Ka;return Object.assign(x,g),x})}else{let u=wA(this.apiClient,e);return a=J("{model}:batchEmbedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=SA(f),x=new Ka;return Object.assign(x,g),x})}}async generateImagesInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=LA(this.apiClient,e);return a=J("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=BA(f),x=new Za;return Object.assign(x,g),x})}else{let u=VA(this.apiClient,e);return a=J("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=UA(f),x=new Za;return Object.assign(x,g),x})}}async editImageInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=xA(this.apiClient,e);return r=J("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let u=EA(c),f=new sf;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=Lk(this.apiClient,e);return r=J("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let u=Uk(c),f=new af;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=yk(this.apiClient,e);return r=J("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let u=xk(c),f=new lf;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=Sk(this.apiClient,e);return r=J("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let u=Dk(c),f=new df;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=ik(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Af(f))}else{let u=nk(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Mf(f))}}async listInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=fk(this.apiClient,e);return a=J("{models_url}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=mk(f),x=new Qa;return Object.assign(x,g),x})}else{let u=uk(this.apiClient,e);return a=J("{models_url}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=pk(f),x=new Qa;return Object.assign(x,g),x})}}async update(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=Ok(this.apiClient,e);return a=J("{model}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Af(f))}else{let u=Fk(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Mf(f))}}async delete(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=gA(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=_A(f),x=new Xa;return Object.assign(x,g),x})}else{let u=hA(this.apiClient,e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=vA(f),x=new Xa;return Object.assign(x,g),x})}}async countTokens(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=fA(this.apiClient,e);return a=J("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=mA(f),x=new el;return Object.assign(x,g),x})}else{let u=uA(this.apiClient,e);return a=J("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=pA(f),x=new el;return Object.assign(x,g),x})}}async computeTokens(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=oA(this.apiClient,e);return r=J("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let u=rA(c),f=new cf;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=jA(this.apiClient,e);return a=J("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{let g=zA(f),x=new tl;return Object.assign(x,g),x})}else{let u=qA(this.apiClient,e);return a=J("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{let g=GA(f),x=new tl;return Object.assign(x,g),x})}}};var Uf=class extends Yt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=t.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=t.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=LT(e);return a=J("{operationName}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else{let u=VT(e);return a=J("{operationName}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=AT(e);return r=J("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function SN(n){let e={},t=l(n,["data"]);if(t!=null&&d(e,["data"],t),l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=l(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function DN(n){let e={},t=l(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ON(r))),d(e,["parts"],o)}let i=l(n,["role"]);return i!=null&&d(e,["role"],i),e}function TN(n,e,t){let i={},o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);let r=l(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&d(t,["newSessionExpireTime"],r);let s=l(e,["uses"]);t!==void 0&&s!=null&&d(t,["uses"],s);let a=l(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&d(t,["bidiGenerateContentSetup"],FN(n,a));let c=l(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&d(t,["fieldMask"],c),i}function MN(n,e){let t={},i=l(e,["config"]);return i!=null&&d(t,["config"],TN(n,i,t)),t}function AN(n){let e={};if(l(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=l(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);let i=l(n,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function kN(n){let e={},t=l(n,["id"]);t!=null&&d(e,["id"],t);let i=l(n,["args"]);i!=null&&d(e,["args"],i);let o=l(n,["name"]);if(o!=null&&d(e,["name"],o),l(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NN(n){let e={};if(l(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=l(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function RN(n){let e={};if(l(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=l(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function PN(n,e){let t={},i=l(n,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);let o=l(n,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);let r=l(n,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);let s=l(n,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=l(n,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let c=l(n,["maxOutputTokens"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","maxOutputTokens"],c);let u=l(n,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=l(n,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let g=l(n,["speechConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","speechConfig"],ap(g));let x=l(n,["thinkingConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","thinkingConfig"],x);let E=l(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);let w=l(n,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],DN(nt(w)));let A=l(n,["tools"]);if(e!==void 0&&A!=null){let ve=vo(A);Array.isArray(ve)&&(ve=ve.map(me=>LN(go(me)))),d(e,["setup","tools"],ve)}let F=l(n,["sessionResumption"]);e!==void 0&&F!=null&&d(e,["setup","sessionResumption"],VN(F));let P=l(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&d(e,["setup","inputAudioTranscription"],P);let q=l(n,["outputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","outputAudioTranscription"],q);let Y=l(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&d(e,["setup","realtimeInputConfig"],Y);let K=l(n,["contextWindowCompression"]);e!==void 0&&K!=null&&d(e,["setup","contextWindowCompression"],K);let G=l(n,["proactivity"]);if(e!==void 0&&G!=null&&d(e,["setup","proactivity"],G),l(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function FN(n,e){let t={},i=l(e,["model"]);i!=null&&d(t,["setup","model"],Ce(n,i));let o=l(e,["config"]);return o!=null&&d(t,["config"],PN(o,t)),t}function ON(n){let e={},t=l(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);let i=l(n,["codeExecutionResult"]);i!=null&&d(e,["codeExecutionResult"],i);let o=l(n,["executableCode"]);o!=null&&d(e,["executableCode"],o);let r=l(n,["fileData"]);r!=null&&d(e,["fileData"],AN(r));let s=l(n,["functionCall"]);s!=null&&d(e,["functionCall"],kN(s));let a=l(n,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let c=l(n,["inlineData"]);c!=null&&d(e,["inlineData"],SN(c));let u=l(n,["text"]);u!=null&&d(e,["text"],u);let f=l(n,["thought"]);f!=null&&d(e,["thought"],f);let g=l(n,["thoughtSignature"]);g!=null&&d(e,["thoughtSignature"],g);let x=l(n,["videoMetadata"]);return x!=null&&d(e,["videoMetadata"],x),e}function VN(n){let e={},t=l(n,["handle"]);if(t!=null&&d(e,["handle"],t),l(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function LN(n){let e={};if(l(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=l(n,["computerUse"]);t!=null&&d(e,["computerUse"],t);let i=l(n,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);let o=l(n,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),l(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=l(n,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(g=>g)),d(e,["functionDeclarations"],f)}let s=l(n,["googleMaps"]);s!=null&&d(e,["googleMaps"],NN(s));let a=l(n,["googleSearch"]);a!=null&&d(e,["googleSearch"],RN(a));let c=l(n,["googleSearchRetrieval"]);c!=null&&d(e,["googleSearchRetrieval"],c);let u=l(n,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function UN(n){let e=[];for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(r=>`${t}.${r}`);e.push(...o)}else e.push(t)}return e.join(",")}function BN(n,e){let t=null,i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let r=i.setup;typeof r=="object"&&r!==null?(n.bidiGenerateContentSetup=r,t=r):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;let o=n.fieldMask;if(t){let r=UN(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)r?n.fieldMask=r:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];o.length>0&&(a=o.map(u=>s.includes(u)?`generationConfig.${u}`:u));let c=[];r&&c.push(r),a.length>0&&c.push(...a),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}var Bf=class extends Yt{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=MN(this.apiClient,e);r=J("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let c=BN(a,e.config);return o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}};function HN(n,e){let t={},i=l(n,["force"]);return e!==void 0&&i!=null&&d(e,["_query","force"],i),t}function $N(n){let e={},t=l(n,["name"]);t!=null&&d(e,["_url","name"],t);let i=l(n,["config"]);return i!=null&&HN(i,e),e}function GN(n){let e={},t=l(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function zN(n,e){let t={},i=l(n,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=l(n,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),t}function qN(n){let e={},t=l(n,["parent"]);t!=null&&d(e,["_url","parent"],t);let i=l(n,["config"]);return i!=null&&zN(i,e),e}function jN(n){let e={},t=l(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);let i=l(n,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);let o=l(n,["documents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["documents"],r)}return e}var Hf=class extends Yt{constructor(e){super(),this.apiClient=e,this.list=async t=>new Sn(Jn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=GN(e);return r=J("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var t,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=$N(e);o=J("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=qN(e);return r=J("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let u=jN(c),f=new uf;return Object.assign(f,u),f})}}};var $f=class extends Yt{constructor(e,t=new Hf(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Sn(Jn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=jk(e);return r=J("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Jk(e);return r=J("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var t,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=Yk(e);o=J("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=tN(e);return r=J("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let u=nN(c),f=new ff;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=iN(e);return r=J("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let u=oN(c),f=new pf;return Object.assign(f,u),f})}}async importFile(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Qk(e);return r=J("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let u=Zk(c),f=new mf;return Object.assign(f,u),f})}}};var f_=function(){let{crypto:n}=globalThis;if(n?.randomUUID)return f_=n.randomUUID.bind(n),n.randomUUID();let e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))},WN=()=>f_();function Gf(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}var zf=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){let e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};var yt=class extends Error{},xt=class n extends yt{constructor(e,t,i,o){super(`${n.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){let o=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new mo({message:i,cause:zf(t)});let r=t;return e===400?new cl(e,r,i,o):e===401?new ul(e,r,i,o):e===403?new fl(e,r,i,o):e===404?new pl(e,r,i,o):e===409?new ml(e,r,i,o):e===422?new hl(e,r,i,o):e===429?new gl(e,r,i,o):e>=500?new vl(e,r,i,o):new n(e,r,i,o)}},Dr=class extends xt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},mo=class extends xt{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},dl=class extends mo{constructor({message:e}={}){super({message:e??"Request timed out."})}},cl=class extends xt{},ul=class extends xt{},fl=class extends xt{},pl=class extends xt{},ml=class extends xt{},hl=class extends xt{},gl=class extends xt{},vl=class extends xt{};var YN=/^[a-z][a-z0-9+.-]*:/i,JN=n=>YN.test(n),qf=n=>(qf=Array.isArray,qf(n)),KN=qf,ZN=KN,Nv=ZN;function QN(n){if(!n)return!0;for(let e in n)return!1;return!0}function XN(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var eR=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new yt(`${n} must be an integer`);if(e<0)throw new yt(`${n} must be a positive integer`);return e},tR=n=>{try{return JSON.parse(n)}catch{return}};var nR=n=>new Promise(e=>setTimeout(e,n));var uo="0.0.1";function iR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var oR=()=>{var n,e,t,i,o;let r=iR();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":Pv(Deno.build.os),"X-Stainless-Arch":Rv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":Pv((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":Rv((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let s=rR();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function rR(){if(typeof navigator>"u"||!navigator)return null;let n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:t}of n){let i=t.exec(navigator.userAgent);if(i){let o=i[1]||0,r=i[2]||0,s=i[3]||0;return{browser:e,version:`${o}.${r}.${s}`}}}return null}var Rv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Pv=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown"),Ga,sR=()=>Ga??(Ga=oR());function aR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function p_(...n){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function lR(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return p_({start(){},async pull(t){let{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function m_(n){if(n[Symbol.asyncIterator])return n;let e=n.getReader();return{async next(){try{let t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){let t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function dR(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}let i=n.getReader(),o=i.cancel();i.releaseLock(),await o}var cR=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var h_=()=>{var n;if(typeof File>"u"){let{process:e}=globalThis,t=typeof((n=e?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ef(n,e,t){return h_(),new File(n,e??"unknown_file",t)}function uR(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}var fR=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";var g_=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",pR=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&g_(n),mR=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function hR(n,e,t){if(h_(),n=await n,pR(n))return n instanceof File?n:ef([await n.arrayBuffer()],n.name);if(mR(n)){let o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),ef(await jf(o),e,t)}let i=await jf(n);if(e||(e=uR(n)),!t?.type){let o=i.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return ef(i,e,t)}async function jf(n){var e,t,i,o,r;let s=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)s.push(n);else if(g_(n))s.push(n instanceof Blob?n:await n.arrayBuffer());else if(fR(n))try{for(var a=!0,c=Wt(n),u;u=await c.next(),e=u.done,!e;a=!0){o=u.value,a=!1;let f=o;s.push(...await jf(f))}}catch(f){t={error:f}}finally{try{!a&&!e&&(i=c.return)&&await i.call(c)}finally{if(t)throw t.error}}else{let f=(r=n?.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof n}${f?`; constructor: ${f}`:""}${gR(n)}`)}return s}function gR(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}var vR=(()=>{class n{constructor(t){this._client=t}}n._key=[];return n})();function v_(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Fv=Object.freeze(Object.create(null)),_R=(n=v_)=>function(t,...i){if(t.length===1)return t[0];let o=!1,r=[],s=t.reduce((f,g,x)=>{var E,w,A;/[?#]/.test(g)&&(o=!0);let F=i[x],P=(o?encodeURIComponent:n)(""+F);return x!==i.length&&(F==null||typeof F=="object"&&F.toString===((A=Object.getPrototypeOf((w=Object.getPrototypeOf((E=F.hasOwnProperty)!==null&&E!==void 0?E:Fv))!==null&&w!==void 0?w:Fv))===null||A===void 0?void 0:A.toString))&&(P=F+"",r.push({start:f.length+g.length,length:P.length,error:`Value of type ${Object.prototype.toString.call(F).slice(8,-1)} is not a valid path parameter`})),f+g+(x===i.length?"":P)},""),a=s.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=c.exec(a))!==null;)r.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(r.sort((f,g)=>f.start-g.start),r.length>0){let f=0,g=r.reduce((x,E)=>{let w=" ".repeat(E.start-f),A="^".repeat(E.length);return f=E.start+E.length,x+w+A},"");throw new yt(`Path parameters result in path with invalid segments:
${r.map(x=>x.error).join(`
`)}
${s}
${g}`)}return s},za=_R(v_);var _l=class extends vR{create(e,t){var i;let{api_version:o=this._client.apiVersion}=e,r=ll(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new yt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new yt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(za`/${o}/interactions`,Object.assign(Object.assign({body:r},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){let{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(za`/${o}/interactions/${e}`,i)}cancel(e,t={},i){let{api_version:o=this._client.apiVersion}=t??{};return this._client.post(za`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;let r=t??{},{api_version:s=this._client.apiVersion}=r,a=ll(r,["api_version"]);return this._client.get(za`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},i),{stream:(o=t?.stream)!==null&&o!==void 0?o:!1}))}};_l._key=Object.freeze(["interactions"]);var yl=class extends _l{};function yR(n){let e=0;for(let o of n)e+=o.length;let t=new Uint8Array(e),i=0;for(let o of n)t.set(o,i),i+=o.length;return t}var qa;function lp(n){let e;return(qa??(e=new globalThis.TextEncoder,qa=e.encode.bind(e)))(n)}var ja;function Ov(n){let e;return(ja??(e=new globalThis.TextDecoder,ja=e.decode.bind(e)))(n)}var ho=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?lp(e):e;this.buffer=yR([this.buffer,t]);let i=[],o;for(;(o=xR(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(Ov(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let r=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=Ov(this.buffer.subarray(0,r));i.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};ho.NEWLINE_CHARS=new Set([`
`,"\r"]);ho.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function xR(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function ER(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}var xl={off:0,error:200,warn:300,info:400,debug:500},Vv=(n,e,t)=>{if(n){if(XN(xl,n))return n;ut(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(xl))}`)}};function wr(){}function Wa(n,e,t){return!e||xl[n]>xl[t]?wr:e[n].bind(e)}var CR={error:wr,warn:wr,info:wr,debug:wr},Lv=new WeakMap;function ut(n){var e;let t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return CR;let o=Lv.get(t);if(o&&o[0]===i)return o[1];let r={error:Wa("error",t,i),warn:Wa("warn",t,i),info:Wa("info",t,i),debug:Wa("debug",t,i)};return Lv.set(t,[i,r]),r}var Ti=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Wf=class n{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1,r=i?ut(i):console;function s(){return jt(this,arguments,function*(){var c,u,f,g;if(o)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let x=!1;try{try{for(var E=!0,w=Wt(bR(e,t)),A;A=yield ce(w.next()),c=A.done,!c;E=!0){g=A.value,E=!1;let F=g;if(!x)if(F.data.startsWith("[DONE]")){x=!0;continue}else try{yield yield ce(JSON.parse(F.data))}catch(P){throw r.error("Could not parse message into JSON:",F.data),r.error("From chunk:",F.raw),P}}}catch(F){u={error:F}}finally{try{!E&&!c&&(f=w.return)&&(yield ce(f.call(w)))}finally{if(u)throw u.error}}x=!0}catch(F){if(Gf(F))return yield ce(void 0);throw F}finally{x||t.abort()}})}return new n(s,t,i)}static fromReadableStream(e,t,i){let o=!1;function r(){return jt(this,arguments,function*(){var c,u,f,g;let x=new ho,E=m_(e);try{for(var w=!0,A=Wt(E),F;F=yield ce(A.next()),c=F.done,!c;w=!0){g=F.value,w=!1;let P=g;for(let q of x.decode(P))yield yield ce(q)}}catch(P){u={error:P}}finally{try{!w&&!c&&(f=A.return)&&(yield ce(f.call(A)))}finally{if(u)throw u.error}}for(let P of x.flush())yield yield ce(P)})}function s(){return jt(this,arguments,function*(){var c,u,f,g;if(o)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let x=!1;try{try{for(var E=!0,w=Wt(r()),A;A=yield ce(w.next()),c=A.done,!c;E=!0){g=A.value,E=!1;let F=g;x||F&&(yield yield ce(JSON.parse(F)))}}catch(F){u={error:F}}finally{try{!E&&!c&&(f=w.return)&&(yield ce(f.call(w)))}finally{if(u)throw u.error}}x=!0}catch(F){if(Gf(F))return yield ce(void 0);throw F}finally{x||t.abort()}})}return new n(s,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],i=this.iterator(),o=r=>({next:()=>{if(r.length===0){let s=i.next();e.push(s),t.push(s)}return r.shift()}});return[new n(()=>o(e),this.controller,this.client),new n(()=>o(t),this.controller,this.client)]}toReadableStream(){let e=this,t;return p_({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{let{value:o,done:r}=await t.next();if(r)return i.close();let s=lp(JSON.stringify(o)+`
`);i.enqueue(s)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}};function bR(n,e){return jt(this,arguments,function*(){var i,o,r,s;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new yt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new yt("Attempted to iterate over a response with no body");let a=new Yf,c=new ho,u=m_(n.body);try{for(var f=!0,g=Wt(wR(u)),x;x=yield ce(g.next()),i=x.done,!i;f=!0){s=x.value,f=!1;let E=s;for(let w of c.decode(E)){let A=a.decode(w);A&&(yield yield ce(A))}}}catch(E){o={error:E}}finally{try{!f&&!i&&(r=g.return)&&(yield ce(r.call(g)))}finally{if(o)throw o.error}}for(let E of c.flush()){let w=a.decode(E);w&&(yield yield ce(w))}})}function wR(n){return jt(this,arguments,function*(){var t,i,o,r;let s=new Uint8Array;try{for(var a=!0,c=Wt(n),u;u=yield ce(c.next()),t=u.done,!t;a=!0){r=u.value,a=!1;let f=r;if(f==null)continue;let g=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?lp(f):f,x=new Uint8Array(s.length+g.length);x.set(s),x.set(g,s.length),s=x;let E;for(;(E=ER(s))!==-1;)yield yield ce(s.slice(0,E)),s=s.slice(E)}}catch(f){i={error:f}}finally{try{!a&&!t&&(o=c.return)&&(yield ce(o.call(c)))}finally{if(i)throw i.error}}s.length>0&&(yield yield ce(s))})}var Yf=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=IR(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}};function IR(n,e){let t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function SR(n,e){let{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:r}=e,s=await(async()=>{var a;if(e.options.stream)return ut(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Wf.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let c=t.headers.get("content-type"),u=(a=c?.split(";")[0])===null||a===void 0?void 0:a.trim();return u?.includes("application/json")||u?.endsWith("+json")?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return ut(n).debug(`[${i}] response parsed`,Ti({retryOfRequestLogID:o,url:t.url,status:t.status,body:s,durationMs:Date.now()-r})),s}var Jf=class n extends Promise{constructor(e,t,i=SR){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new n(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var __=Symbol("brand.privateNullableHeaders");function*DR(n){if(!n)return;if(__ in n){let{values:i,nulls:o}=n;yield*i.entries();for(let r of o)yield[r,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Nv(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){let o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let r=Nv(i[1])?i[1]:[i[1]],s=!1;for(let a of r)a!==void 0&&(e&&!s&&(s=!0,yield[o,null]),yield[o,a])}}var Cr=n=>{let e=new Headers,t=new Set;for(let i of n){let o=new Set;for(let[r,s]of DR(i)){let a=r.toLowerCase();o.has(a)||(e.delete(r),o.add(a)),s===null?(e.delete(r),t.add(a)):(e.append(r,s),t.delete(a))}}return{[__]:!0,values:e,nulls:t}};var tf=n=>{var e,t,i,o,r,s;if(typeof globalThis.process<"u")return(i=(t=(e=globalThis.process.env)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(r=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||r===void 0?void 0:r.call(o,n))===null||s===void 0?void 0:s.trim()};var y_,TR=(()=>{class n{constructor(t){var i,o,r,s,a,c,u,{baseURL:f=tf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(i=tf("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:x="v1beta"}=t,E=ll(t,["baseURL","apiKey","apiVersion"]);let w=Object.assign(Object.assign({apiKey:g,apiVersion:x},E),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(o=w.timeout)!==null&&o!==void 0?o:n.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;let A="warn";this.logLevel=A,this.logLevel=(a=(s=Vv(w.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:Vv(tf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:A,this.fetchOptions=w.fetchOptions,this.maxRetries=(c=w.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(u=w.fetch)!==null&&u!==void 0?u:aR(),this.encoder=cR,this._options=w,this.apiKey=g,this.apiVersion=x,this.clientAdapter=w.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:i}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){let i=Cr([t.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return Cr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Cr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([i,o])=>typeof o<"u").map(([i,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(i)}=`;throw new yt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${uo}`}defaultIdempotencyKey(){return`stainless-node-retry-${WN()}`}makeStatusError(t,i,o,r){return xt.generate(t,i,o,r)}buildURL(t,i,o){let r=!this.baseURLOverridden()&&o||this.baseURL,s=JN(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return QN(a)||(i=Object.assign(Object.assign({},a),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(s.search=this.stringifyQuery(i)),s.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){let i=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(t,{url:i,options:o}){}get(t,i){return this.methodRequest("get",t,i)}post(t,i){return this.methodRequest("post",t,i)}patch(t,i){return this.methodRequest("patch",t,i)}put(t,i){return this.methodRequest("put",t,i)}delete(t,i){return this.methodRequest("delete",t,i)}methodRequest(t,i,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:t,path:i},r)))}request(t,i=null){return new Jf(this,this.makeRequest(t,i,void 0))}async makeRequest(t,i,o){var r,s,a;let c=await t,u=(r=c.maxRetries)!==null&&r!==void 0?r:this.maxRetries;i==null&&(i=u),await this.prepareOptions(c);let{req:f,url:g,timeout:x}=await this.buildRequest(c,{retryCount:u-i});await this.prepareRequest(f,{url:g,options:c});let E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=o===void 0?"":`, retryOf: ${o}`,A=Date.now();if(ut(this).debug(`[${E}] sending request`,Ti({retryOfRequestLogID:o,method:c.method,url:g,options:c,headers:f.headers})),!((s=c.signal)===null||s===void 0)&&s.aborted)throw new Dr;let F=new AbortController,P=await this.fetchWithTimeout(g,f,x,F).catch(zf),q=Date.now();if(P instanceof globalThis.Error){let K=`retrying, ${i} attempts remaining`;if(!((a=c.signal)===null||a===void 0)&&a.aborted)throw new Dr;let G=Gf(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(i)return ut(this).info(`[${E}] connection ${G?"timed out":"failed"} - ${K}`),ut(this).debug(`[${E}] connection ${G?"timed out":"failed"} (${K})`,Ti({retryOfRequestLogID:o,url:g,durationMs:q-A,message:P.message})),this.retryRequest(c,i,o??E);throw ut(this).info(`[${E}] connection ${G?"timed out":"failed"} - error; no more retries left`),ut(this).debug(`[${E}] connection ${G?"timed out":"failed"} (error; no more retries left)`,Ti({retryOfRequestLogID:o,url:g,durationMs:q-A,message:P.message})),G?new dl:new mo({cause:P})}let Y=`[${E}${w}] ${f.method} ${g} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${q-A}ms`;if(!P.ok){let K=await this.shouldRetry(P);if(i&&K){let _e=`retrying, ${i} attempts remaining`;return await dR(P.body),ut(this).info(`${Y} - ${_e}`),ut(this).debug(`[${E}] response error (${_e})`,Ti({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,durationMs:q-A})),this.retryRequest(c,i,o??E,P.headers)}let G=K?"error; no more retries left":"error; not retryable";ut(this).info(`${Y} - ${G}`);let ve=await P.text().catch(_e=>zf(_e).message),me=tR(ve),Ne=me?void 0:ve;throw ut(this).debug(`[${E}] response error (${G})`,Ti({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,message:Ne,durationMs:Date.now()-A})),this.makeStatusError(P.status,me,Ne,P.headers)}return ut(this).info(Y),ut(this).debug(`[${E}] response start`,Ti({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,durationMs:q-A})),{response:P,options:c,controller:F,requestLogID:E,retryOfRequestLogID:o,startTime:A}}async fetchWithTimeout(t,i,o,r){let s=i||{},{signal:a,method:c}=s,u=ll(s,["signal","method"]),f=r.abort.bind(r);a&&a.addEventListener("abort",f,{once:!0});let g=setTimeout(f,o),x=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},x?{duplex:"half"}:{}),{method:"GET"}),u);c&&(E.method=c.toUpperCase());try{return await this.fetch.call(void 0,t,E)}finally{clearTimeout(g)}}async shouldRetry(t){let i=t.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,i,o,r){var s;let a,c=r?.get("retry-after-ms");if(c){let f=parseFloat(c);Number.isNaN(f)||(a=f)}let u=r?.get("retry-after");if(u&&!a){let f=parseFloat(u);Number.isNaN(f)?a=Date.parse(u)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){let f=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(i,f)}return await nR(a),this.makeRequest(t,i-1,o)}calculateDefaultRetryTimeoutMillis(t,i){let s=i-t,a=Math.min(.5*Math.pow(2,s),8),c=1-Math.random()*.25;return a*c*1e3}async buildRequest(t,{retryCount:i=0}={}){var o,r,s;let a=Object.assign({},t),{method:c,path:u,query:f,defaultBaseURL:g}=a,x=this.buildURL(u,f,g);"timeout"in a&&eR("timeout",a.timeout),a.timeout=(o=a.timeout)!==null&&o!==void 0?o:this.timeout;let{bodyHeaders:E,body:w}=this.buildBody({options:a}),A=await this.buildHeaders({options:t,method:c,bodyHeaders:E,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:A},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:x,timeout:a.timeout}}async buildHeaders({options:t,method:i,bodyHeaders:o,retryCount:r}){let s={};this.idempotencyHeader&&i!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);let a=await this.authHeaders(t),c=Cr([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),sR()),this._options.defaultHeaders,o,t.headers,a]);return this.validateHeaders(c),c.values}buildBody({options:{body:t,headers:i}}){if(!t)return{bodyHeaders:void 0,body:void 0};let o=Cr([i]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&o.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:lR(t)}:this.encoder({body:t,headers:o})}}return n.DEFAULT_TIMEOUT=6e4,n})(),We=class extends TR{constructor(){super(...arguments),this.interactions=new yl(this)}};y_=We;We.GeminiNextGenAPIClient=y_;We.GeminiNextGenAPIClientError=yt;We.APIError=xt;We.APIConnectionError=mo;We.APIConnectionTimeoutError=dl;We.APIUserAbortError=Dr;We.NotFoundError=pl;We.ConflictError=ml;We.RateLimitError=gl;We.BadRequestError=cl;We.AuthenticationError=ul;We.InternalServerError=vl;We.PermissionDeniedError=fl;We.UnprocessableEntityError=hl;We.toFile=hR;We.Interactions=yl;function MR(n,e){let t={},i=l(n,["name"]);return i!=null&&d(t,["_url","name"],i),t}function AR(n,e){let t={},i=l(n,["name"]);return i!=null&&d(t,["_url","name"],i),t}function kR(n,e){let t={},i=l(n,["sdkHttpResponse"]);return i!=null&&d(t,["sdkHttpResponse"],i),t}function NR(n,e){let t={},i=l(n,["sdkHttpResponse"]);return i!=null&&d(t,["sdkHttpResponse"],i),t}function RR(n,e,t){let i={};if(l(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=l(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&d(e,["displayName"],o),l(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let r=l(n,["epochCount"]);e!==void 0&&r!=null&&d(e,["tuningTask","hyperparameters","epochCount"],r);let s=l(n,["learningRateMultiplier"]);if(s!=null&&d(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(l(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(l(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");let a=l(n,["batchSize"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","batchSize"],a);let c=l(n,["learningRate"]);if(e!==void 0&&c!=null&&d(e,["tuningTask","hyperparameters","learningRate"],c),l(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(l(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(l(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(l(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(l(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function PR(n,e,t){let i={},o=l(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let G=l(n,["validationDataset"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec"],nf(G))}else if(o==="PREFERENCE_TUNING"){let G=l(n,["validationDataset"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec"],nf(G))}else if(o==="DISTILLATION"){let G=l(n,["validationDataset"]);e!==void 0&&G!=null&&d(e,["distillationSpec"],nf(G))}let r=l(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&d(e,["tunedModelDisplayName"],r);let s=l(n,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let a=l(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let G=l(n,["epochCount"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],G)}else if(a==="PREFERENCE_TUNING"){let G=l(n,["epochCount"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],G)}else if(a==="DISTILLATION"){let G=l(n,["epochCount"]);e!==void 0&&G!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],G)}let c=l(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let G=l(n,["learningRateMultiplier"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],G)}else if(c==="PREFERENCE_TUNING"){let G=l(n,["learningRateMultiplier"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],G)}else if(c==="DISTILLATION"){let G=l(n,["learningRateMultiplier"]);e!==void 0&&G!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],G)}let u=l(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let G=l(n,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],G)}else if(u==="PREFERENCE_TUNING"){let G=l(n,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],G)}else if(u==="DISTILLATION"){let G=l(n,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],G)}let f=l(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let G=l(n,["adapterSize"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],G)}else if(f==="PREFERENCE_TUNING"){let G=l(n,["adapterSize"]);e!==void 0&&G!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],G)}else if(f==="DISTILLATION"){let G=l(n,["adapterSize"]);e!==void 0&&G!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],G)}let g=l(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){let G=l(n,["tuningMode"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","tuningMode"],G)}let x=l(n,["customBaseModel"]);e!==void 0&&x!=null&&d(e,["customBaseModel"],x);let E=l(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){let G=l(n,["batchSize"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],G)}let w=l(t,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){let G=l(n,["learningRate"]);e!==void 0&&G!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],G)}let A=l(n,["labels"]);e!==void 0&&A!=null&&d(e,["labels"],A);let F=l(n,["beta"]);e!==void 0&&F!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],F);let P=l(n,["baseTeacherModel"]);e!==void 0&&P!=null&&d(e,["distillationSpec","baseTeacherModel"],P);let q=l(n,["tunedTeacherModelSource"]);e!==void 0&&q!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],q);let Y=l(n,["sftLossWeightMultiplier"]);e!==void 0&&Y!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],Y);let K=l(n,["outputUri"]);return e!==void 0&&K!=null&&d(e,["outputUri"],K),i}function FR(n,e){let t={},i=l(n,["baseModel"]);i!=null&&d(t,["baseModel"],i);let o=l(n,["preTunedModel"]);o!=null&&d(t,["preTunedModel"],o);let r=l(n,["trainingDataset"]);r!=null&&jR(r);let s=l(n,["config"]);return s!=null&&RR(s,t),t}function OR(n,e){let t={},i=l(n,["baseModel"]);i!=null&&d(t,["baseModel"],i);let o=l(n,["preTunedModel"]);o!=null&&d(t,["preTunedModel"],o);let r=l(n,["trainingDataset"]);r!=null&&WR(r,t,e);let s=l(n,["config"]);return s!=null&&PR(s,t,e),t}function VR(n,e){let t={},i=l(n,["name"]);return i!=null&&d(t,["_url","name"],i),t}function LR(n,e){let t={},i=l(n,["name"]);return i!=null&&d(t,["_url","name"],i),t}function UR(n,e,t){let i={},o=l(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);let r=l(n,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);let s=l(n,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),i}function BR(n,e,t){let i={},o=l(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);let r=l(n,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);let s=l(n,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),i}function HR(n,e){let t={},i=l(n,["config"]);return i!=null&&UR(i,t),t}function $R(n,e){let t={},i=l(n,["config"]);return i!=null&&BR(i,t),t}function GR(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);let r=l(n,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>x_(a))),d(t,["tuningJobs"],s)}return t}function zR(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);let r=l(n,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Kf(a))),d(t,["tuningJobs"],s)}return t}function qR(n,e){let t={},i=l(n,["name"]);i!=null&&d(t,["model"],i);let o=l(n,["name"]);return o!=null&&d(t,["endpoint"],o),t}function jR(n,e){let t={};if(l(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=l(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["examples","examples"],o)}return t}function WR(n,e,t){let i={},o=l(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=l(n,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=l(n,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){let s=l(n,["gcsUri"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}let r=l(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=l(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=l(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(r==="DISTILLATION"){let s=l(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}if(l(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function x_(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["name"]);o!=null&&d(t,["name"],o);let r=l(n,["state"]);r!=null&&d(t,["state"],Yv(r));let s=l(n,["createTime"]);s!=null&&d(t,["createTime"],s);let a=l(n,["tuningTask","startTime"]);a!=null&&d(t,["startTime"],a);let c=l(n,["tuningTask","completeTime"]);c!=null&&d(t,["endTime"],c);let u=l(n,["updateTime"]);u!=null&&d(t,["updateTime"],u);let f=l(n,["description"]);f!=null&&d(t,["description"],f);let g=l(n,["baseModel"]);g!=null&&d(t,["baseModel"],g);let x=l(n,["_self"]);return x!=null&&d(t,["tunedModel"],qR(x)),t}function Kf(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["name"]);o!=null&&d(t,["name"],o);let r=l(n,["state"]);r!=null&&d(t,["state"],Yv(r));let s=l(n,["createTime"]);s!=null&&d(t,["createTime"],s);let a=l(n,["startTime"]);a!=null&&d(t,["startTime"],a);let c=l(n,["endTime"]);c!=null&&d(t,["endTime"],c);let u=l(n,["updateTime"]);u!=null&&d(t,["updateTime"],u);let f=l(n,["error"]);f!=null&&d(t,["error"],f);let g=l(n,["description"]);g!=null&&d(t,["description"],g);let x=l(n,["baseModel"]);x!=null&&d(t,["baseModel"],x);let E=l(n,["tunedModel"]);E!=null&&d(t,["tunedModel"],E);let w=l(n,["preTunedModel"]);w!=null&&d(t,["preTunedModel"],w);let A=l(n,["supervisedTuningSpec"]);A!=null&&d(t,["supervisedTuningSpec"],A);let F=l(n,["preferenceOptimizationSpec"]);F!=null&&d(t,["preferenceOptimizationSpec"],F);let P=l(n,["distillationSpec"]);P!=null&&d(t,["distillationSpec"],P);let q=l(n,["tuningDataStats"]);q!=null&&d(t,["tuningDataStats"],q);let Y=l(n,["encryptionSpec"]);Y!=null&&d(t,["encryptionSpec"],Y);let K=l(n,["partnerModelTuningSpec"]);K!=null&&d(t,["partnerModelTuningSpec"],K);let G=l(n,["customBaseModel"]);G!=null&&d(t,["customBaseModel"],G);let ve=l(n,["experiment"]);ve!=null&&d(t,["experiment"],ve);let me=l(n,["labels"]);me!=null&&d(t,["labels"],me);let Ne=l(n,["outputUri"]);Ne!=null&&d(t,["outputUri"],Ne);let se=l(n,["pipelineJob"]);se!=null&&d(t,["pipelineJob"],se);let _e=l(n,["serviceAccount"]);_e!=null&&d(t,["serviceAccount"],_e);let ze=l(n,["tunedModelDisplayName"]);ze!=null&&d(t,["tunedModelDisplayName"],ze);let Et=l(n,["veoTuningSpec"]);return Et!=null&&d(t,["veoTuningSpec"],Et),t}function YR(n,e){let t={},i=l(n,["sdkHttpResponse"]);i!=null&&d(t,["sdkHttpResponse"],i);let o=l(n,["name"]);o!=null&&d(t,["name"],o);let r=l(n,["metadata"]);r!=null&&d(t,["metadata"],r);let s=l(n,["done"]);s!=null&&d(t,["done"],s);let a=l(n,["error"]);return a!=null&&d(t,["error"],a),t}function nf(n,e){let t={},i=l(n,["gcsUri"]);i!=null&&d(t,["validationDatasetUri"],i);let o=l(n,["vertexDatasetResource"]);return o!=null&&d(t,["validationDatasetUri"],o),t}var Zf=class extends Yt{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sn(Jn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){let o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);let r=Object.assign(Object.assign({},t),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{let o=Object.assign({},t);return await this.tuneInternal(o)}else{let o=Object.assign({},t),r=await this.tuneMldevInternal(o),s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:Hv.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=LR(e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>Kf(f))}else{let u=VR(e);return a=J("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>x_(f))}}async listInternal(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=$R(e);return a=J("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=zR(f),x=new nl;return Object.assign(x,g),x})}else{let u=HR(e);return a=J("tunedModels",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=GR(f),x=new nl;return Object.assign(x,g),x})}}async cancel(e){var t,i,o,r;let s,a="",c={};if(this.apiClient.isVertexAI()){let u=AR(e);return a=J("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=NR(f),x=new il;return Object.assign(x,g),x})}else{let u=MR(e);return a=J("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(g=>{let x=g;return x.sdkHttpResponse={headers:f.headers},x})),s.then(f=>{let g=kR(f),x=new il;return Object.assign(x,g),x})}}async tuneInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=OR(e,e);return r=J("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>Kf(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=FR(e);return r=J("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>YR(c))}}};var Qf=class{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},JR=1024*1024*8,KR=3,ZR=1e3,QR=2,El="x-goog-upload-status";async function XR(n,e,t){var i;let o=await E_(n,e,t),r=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[El])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function eP(n,e,t){var i;let o=await E_(n,e,t),r=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[El])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=Bv(r),a=new Ef;return Object.assign(a,s),a}async function E_(n,e,t){var i,o;let r=0,s=0,a=new Ir(new Response),c="upload";for(r=n.size;s<r;){let u=Math.min(JR,r-s),f=n.slice(s,s+u);s+u>=r&&(c+=", finalize");let g=0,x=ZR;for(;g<KR&&(a=await t.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((i=a?.headers)===null||i===void 0)&&i[El]));)g++,await nP(x),x=x*QR;if(s+=u,((o=a?.headers)===null||o===void 0?void 0:o[El])!=="active")break;if(r<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function tP(n){return{size:n.size,type:n.type}}function nP(n){return new Promise(e=>setTimeout(e,n))}var Xf=class{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XR(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eP(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tP(e)}};var ep=class{create(e,t,i){return new tp(e,t,i)}},tp=class{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var Uv="x-goog-api-key",np=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Uv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Uv,this.apiKey)}}};var iP="gl-node/",Cl=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let t=new We({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;let i=TT(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let o=new np(this.apiKey);this.apiClient=new Nf({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:iP+"web",uploader:new Xf,downloader:new Qf}),this.models=new Lf(this.apiClient),this.live=new Of(this.apiClient,o,new ep),this.batches=new wf(this.apiClient),this.chats=new Sf(this.models,this.apiClient),this.caches=new If(this.apiClient),this.files=new Tf(this.apiClient),this.operations=new Uf(this.apiClient),this.authTokens=new Bf(this.apiClient),this.tunings=new Zf(this.apiClient),this.fileSearchStores=new $f(this.apiClient)}};var Sl=class n{constructor(){this.apiKey="";this.apiKey=this.getApiKey()}getApiKey(){let e=import.meta.env||{},t=window.process?.env||{},i=e.VITE_GEMINI_API_KEY||e.GEMINI_API_KEY||t.VITE_GEMINI_API_KEY||t.GEMINI_API_KEY;return i&&i!=="PLACEHOLDER_API_KEY"?i:"AIzaSyArBmcV0kZEwFbrlyXUlHrgSybMuQYurc0"}async analyzeImage(e){if(!this.apiKey||this.apiKey==="PLACEHOLDER_API_KEY")throw new Error("API_KEY_MISSING");let t=new Cl({apiKey:this.apiKey}),i=["gemini-2.0-flash","gemini-1.5-flash","gemini-1.5-flash-latest"],o=null;for(let r of i)try{let s=await this.fileToBase64(e),u=(await t.models.generateContent({model:r,contents:[{role:"user",parts:[{inlineData:{mimeType:e.type,data:s.split(",")[1]}},{text:`Agisci come un esperto di tracciabilit\xE0 alimentare (HACCP). 
          Analizza questa immagine di un'etichetta di un ingrediente. Estrai: productName, lotNumber, expiryDate (YYYY-MM-DD), notes.`}]}],config:{responseMimeType:"application/json",responseSchema:{type:St.OBJECT,properties:{productName:{type:St.STRING},lotNumber:{type:St.STRING},expiryDate:{type:St.STRING},notes:{type:St.STRING}},required:["productName","lotNumber","expiryDate","notes"]}}})).text;if(!u)continue;return JSON.parse(u)}catch(s){o=s,console.warn(`Tentativo fallito con ${r}:`,s.message);continue}throw new Error(o?.message||"Errore tecnico AI")}fileToBase64(e){return new Promise((t,i)=>{let o=new FileReader;o.onload=()=>t(o.result),o.onerror=i,o.readAsDataURL(e)})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}};var C_=(n,e)=>e.id;function oP(n,e){if(n&1){let t=H();y(0,"button",12),L("click",function(){I(t);let o=C();return S(o.createNewProduction())}),D(1,"i",13),p(2," Nuova Produzione "),_()}if(n&2){let t=C();X("disabled",!t.state.isContextEditable())}}function rP(n,e){if(n&1){let t=H();y(0,"button",14),L("click",function(){I(t);let o=C();return S(o.closeProduction())}),D(1,"i",15),p(2," Torna alla Lista "),_()}}function sP(n,e){if(n&1){let t=H();y(0,"tr",27),L("click",function(){let o=I(t).$implicit,r=C(2);return S(r.openProduction(o))}),y(1,"td",28),p(2),ie(3,"date"),_(),y(4,"td",29)(5,"div",30),p(6),_(),y(7,"div",18),p(8),ie(9,"date"),_()(),y(10,"td",29)(11,"span",31),p(12),_()(),y(13,"td",32)(14,"span",33),p(15),_()(),y(16,"td",34),L("click",function(o){return I(t),S(o.stopPropagation())}),y(17,"button",35),L("click",function(){let o=I(t).$implicit,r=C(2);return S(r.deleteBatch(o.id))}),D(18,"i",36),_()()()}if(n&2){let t=e.$implicit,i=C(2);m(2),k(" ",oe(3,6,t.preparationDate,"dd/MM/yyyy")," "),m(4),V(t.productName),m(2),k("Scad: ",oe(9,9,t.expiryDate,"dd/MM/yyyy")),m(4),k(" ",t.internalLot," "),m(3),k(" ",t.ingredients.length," "),m(2),X("disabled",!i.state.isContextEditable())}}function aP(n,e){n&1&&(y(0,"tr")(1,"td",37)(2,"div",38),D(3,"i",39),_(),p(4," Nessuna produzione registrata. Crea la prima scheda per iniziare. "),_()())}function lP(n,e){if(n&1&&(y(0,"div",9)(1,"div",16)(2,"h3",17),p(3,"Produzioni Recenti"),_(),y(4,"div",18),p(5,"Ordina per: Data Prep."),_()(),y(6,"div",19)(7,"table",20)(8,"thead")(9,"tr",21)(10,"th",22),p(11,"Data"),_(),y(12,"th",22),p(13,"Prodotto Finito"),_(),y(14,"th",22),p(15,"Lotto Interno"),_(),y(16,"th",23),p(17,"Ingredienti"),_(),y(18,"th",24),p(19,"Azioni"),_()()(),y(20,"tbody",25),j(21,sP,19,12,"tr",26,C_),T(23,aP,5,0,"tr"),_()()()()),n&2){let t=C();m(21),W(t.allBatches()),m(2),M(t.allBatches().length===0?23:-1)}}function dP(n,e){if(n&1){let t=H();D(0,"img",87),y(1,"button",88),L("click",function(o){return I(t),C(2).resetScan(),S(o.stopPropagation())}),D(2,"i",89),_()}if(n&2){let t=C(2);X("src",t.scannedImage(),Xe)}}function cP(n,e){n&1&&(y(0,"div",90),D(1,"i",91),_(),y(2,"div",92),p(3,"Carica Foto"),_(),y(4,"div",93),p(5,"Etichetta o DDT"),_())}function uP(n,e){n&1&&(D(0,"i",94),p(1," Analisi... "))}function fP(n,e){n&1&&(D(0,"i",95),p(1," Analizza "))}function pP(n,e){if(n&1){let t=H();y(0,"tr",86)(1,"td",96),p(2),_(),y(3,"td",97),p(4),_(),y(5,"td",98),p(6),ie(7,"date"),_(),y(8,"td",84)(9,"button",99),L("click",function(){let o=I(t).$implicit,r=C(2);return S(r.removeIngredient(o.id))}),D(10,"i",100),_()()()}if(n&2){let t=e.$implicit,i=C(2);m(2),V(t.productName),m(2),V(t.lotNumber),m(),N("text-red-500",i.isExpired(t.expiryDate)),m(),k(" ",oe(7,5,t.expiryDate,"dd/MM/yy")," ")}}function mP(n,e){n&1&&(y(0,"tr")(1,"td",101),p(2," Nessun ingrediente associato. Usa lo scanner AI sopra. "),_()())}function hP(n,e){if(n&1){let t=H();y(0,"div",10)(1,"div",40)(2,"div",41)(3,"h3",42),D(4,"i",43),p(5," Dati Prodotto Finito "),_(),y(6,"div",44)(7,"div")(8,"label",45),p(9,"Nome Preparazione"),_(),y(10,"input",46),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.currentBatch().productName,o)||(r.currentBatch().productName=o),S(o)}),_()(),y(11,"div",47)(12,"div")(13,"label",45),p(14,"Data Prep."),_(),y(15,"input",48),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.currentBatch().preparationDate,o)||(r.currentBatch().preparationDate=o),S(o)}),_()(),y(16,"div")(17,"label",45),p(18,"Scadenza"),_(),y(19,"input",48),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.currentBatch().expiryDate,o)||(r.currentBatch().expiryDate=o),S(o)}),_()()(),y(20,"div")(21,"label",45),p(22,"Lotto Interno"),_(),y(23,"div",49)(24,"span",50),p(25,"INT-"),_(),y(26,"input",51),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.currentBatch().internalLot,o)||(r.currentBatch().internalLot=o),S(o)}),_()()(),y(27,"div")(28,"label",45),p(29,"Note / Operatore"),_(),y(30,"textarea",52),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.currentBatch().notes,o)||(r.currentBatch().notes=o),S(o)}),_()()(),y(31,"div",53)(32,"button",54),L("click",function(){I(t);let o=C();return S(o.saveBatch())}),D(33,"i",55),p(34," Salva Intera Scheda "),_()()()(),y(35,"div",56)(36,"div",57),D(37,"div",58),y(38,"div",59)(39,"h4",60),D(40,"i",61),p(41," Aggiungi Ingrediente (AI Scan) "),_(),y(42,"div",62)(43,"div",63)(44,"div",64),L("click",function(){I(t);let o=En(48);return S(o.click())}),T(45,dP,3,1)(46,cP,6,0),y(47,"input",65,0),L("change",function(o){I(t);let r=C();return S(r.onFileSelected(o))}),_()(),y(49,"button",66),L("click",function(){I(t);let o=C();return S(o.analyzeImage())}),T(50,uP,2,0)(51,fP,2,0),_()(),y(52,"div",67)(53,"div",68)(54,"div",69)(55,"label",70),p(56,"Ingrediente Identificato"),_(),y(57,"input",71),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.newIngredient.productName,o)||(r.newIngredient.productName=o),S(o)}),_()(),y(58,"div")(59,"label",70),p(60,"Lotto"),_(),y(61,"input",72),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.newIngredient.lotNumber,o)||(r.newIngredient.lotNumber=o),S(o)}),_()(),y(62,"div")(63,"label",70),p(64,"Scadenza"),_(),y(65,"input",73),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.newIngredient.expiryDate,o)||(r.newIngredient.expiryDate=o),S(o)}),_()()(),y(66,"div",74)(67,"button",75),L("click",function(){I(t);let o=C();return S(o.addIngredient())}),D(68,"i",13),p(69," Aggiungi alla Lista "),_()()()()()(),y(70,"div",76)(71,"div",77)(72,"h4",78),D(73,"i",79),p(74," Ingredienti Associati "),_(),y(75,"span",80),p(76),_()(),y(77,"div",19)(78,"table",81)(79,"thead",82)(80,"tr")(81,"th",83),p(82,"Ingrediente"),_(),y(83,"th",83),p(84,"Lotto"),_(),y(85,"th",83),p(86,"Scadenza"),_(),D(87,"th",84),_()(),y(88,"tbody",85),j(89,pP,11,8,"tr",86,C_),T(91,mP,3,0,"tr"),_()()()()()()}if(n&2){let t,i,o,r=C();m(10),Fe("ngModel",r.currentBatch().productName),m(5),Fe("ngModel",r.currentBatch().preparationDate),m(4),Fe("ngModel",r.currentBatch().expiryDate),m(7),Fe("ngModel",r.currentBatch().internalLot),m(4),Fe("ngModel",r.currentBatch().notes),m(15),M(r.scannedImage()?45:46),m(4),X("disabled",!r.selectedFile()||r.isAnalyzing()),m(),M(r.isAnalyzing()?50:51),m(7),Fe("ngModel",r.newIngredient.productName),m(4),Fe("ngModel",r.newIngredient.lotNumber),m(4),Fe("ngModel",r.newIngredient.expiryDate),m(2),X("disabled",!r.newIngredient.productName),m(9),V(((t=r.currentBatch())==null||t.ingredients==null?null:t.ingredients.length)||0),m(13),W((i=r.currentBatch())==null?null:i.ingredients),m(2),M(!((o=r.currentBatch())==null||o.ingredients==null)&&o.ingredients.length?-1:91)}}function gP(n,e){if(n&1){let t=H();y(0,"div",11)(1,"div",102),L("click",function(){I(t);let o=C();return S(o.cancelConfirmation())}),_(),y(2,"div",103)(3,"div",104)(4,"div",105),D(5,"i",106),_(),y(6,"div")(7,"h3",107),p(8),_(),y(9,"p",108),p(10),_()()(),y(11,"div",109)(12,"button",110),L("click",function(){I(t);let o=C();return S(o.cancelConfirmation())}),p(13," Annulla "),_(),y(14,"button",111),L("click",function(){I(t);let o=C();return S(o.confirmAction())}),D(15,"i",112),p(16," Conferma "),_()()()()}if(n&2){let t,i,o=C();m(8),V((t=o.confirmationState())==null?null:t.title),m(2),V((i=o.confirmationState())==null?null:i.message)}}var Dl=class n{constructor(){this.state=$(ee);this.geminiService=$(Sl);this.toastService=$(Be);this.confirmationState=B(null);this.viewMode=B("list");this.allBatches=B([]);this.currentBatch=B(null);this.selectedFile=B(null);this.scannedImage=B(null);this.isAnalyzing=B(!1);this.newIngredient={id:"",productName:"",lotNumber:"",expiryDate:""}}ngOnInit(){this.loadData()}loadData(){let e=localStorage.getItem("haccp_traceability_productions");if(e)try{this.allBatches.set(JSON.parse(e))}catch(t){console.error("Error loading productions",t)}}saveAll(){localStorage.setItem("haccp_traceability_productions",JSON.stringify(this.allBatches()))}createNewProduction(){let e={id:crypto.randomUUID(),productName:"",preparationDate:new Date().toISOString().split("T")[0],expiryDate:"",internalLot:"",operator:this.state.currentUser()?.name||"",notes:"",ingredients:[]};this.currentBatch.set(e),this.viewMode.set("detail"),this.resetIngredientForm()}openProduction(e){this.currentBatch.set(JSON.parse(JSON.stringify(e))),this.viewMode.set("detail"),this.resetIngredientForm()}saveBatch(){let e=this.currentBatch();!e||!e.productName||(this.allBatches.update(t=>{let i=t.findIndex(o=>o.id===e.id);if(i>=0){let o=[...t];return o[i]=e,o}return[e,...t]}),this.saveAll(),this.state.saveRecord("traceability",{Attivit\u00E0:"\u{1F6D2} Registrazione Lotto / Produzione",Prodotto:e.productName,Lotto:e.internalLot||"N/A",Scadenza:e.expiryDate||"N/A",Ingredienti:e.ingredients.length}),this.toastService.success("Produzione Salvata","La scheda di produzione \xE8 stata aggiornata correttamente."),this.viewMode.set("list"))}closeProduction(){this.askConfirmation("Chiudere senza salvare?","Le modifiche non salvate andranno perse. Sei sicuro di voler uscire?",()=>{this.viewMode.set("list"),this.currentBatch.set(null)})}deleteBatch(e){this.askConfirmation("Eliminare Produzione?","Questa azione \xE8 irreversibile. La scheda verra rimossa definitivamente.",()=>{this.allBatches.update(t=>t.filter(i=>i.id!==e)),this.saveAll(),this.toastService.success("Eliminato","Scheda produzione rimossa con successo.")})}askConfirmation(e,t,i){this.confirmationState.set({title:e,message:t,action:i})}confirmAction(){let e=this.confirmationState();e&&e.action(),this.confirmationState.set(null)}cancelConfirmation(){this.confirmationState.set(null)}resetIngredientForm(){this.newIngredient={id:"",productName:"",lotNumber:"",expiryDate:""},this.resetScan()}onFileSelected(e){let t=e.target;if(t.files&&t.files[0]){let i=t.files[0];this.selectedFile.set(i);let o=new FileReader;o.onload=r=>this.scannedImage.set(r.target?.result),o.readAsDataURL(i)}}resetScan(){this.selectedFile.set(null),this.scannedImage.set(null)}async analyzeImage(){let e=this.selectedFile();if(e){this.isAnalyzing.set(!0);try{let t=await this.geminiService.analyzeImage(e);t&&(this.newIngredient.productName=t.productName||"",this.newIngredient.lotNumber=t.lotNumber||"",this.newIngredient.expiryDate=t.expiryDate||"")}catch(t){if(t.message==="API_KEY_MISSING")this.toastService.error("Configurazione Mancante","Chiave API Gemini non trovata. Imposta GEMINI_API_KEY nel file .env.local");else if(t.message==="JSON_PARSE_FAILED")this.toastService.warning("Analisi Parziale","L'AI ha risposto ma non \xE8 riuscita a formattare i dati. Prova con un'altra foto.");else{console.error("Analysis error details:",t);let i=t.message||"Errore sconosciuto";this.toastService.error("Errore Analisi",`Dettaglio: ${i}. Verifica la qualit\xE0 della foto.`)}}finally{this.isAnalyzing.set(!1)}}}addIngredient(){if(!this.newIngredient.productName)return;let e=O(R({},this.newIngredient),{id:crypto.randomUUID()});this.currentBatch.update(t=>t?O(R({},t),{ingredients:[...t.ingredients,e]}):null),this.resetIngredientForm(),this.toastService.success("Ingrediente Aggiunto",`${e.productName} aggiunto alla lista.`)}removeIngredient(e){this.askConfirmation("Rimuovere Ingrediente?","Vuoi rimuovere questo ingrediente dalla lista?",()=>{this.currentBatch.update(t=>t?O(R({},t),{ingredients:t.ingredients.filter(i=>i.id!==e)}):null),this.toastService.info("Rimosso","Ingrediente rimosso dalla lista.")})}isExpired(e){return e?new Date(e)<new Date:!1}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-traceability-view"]],decls:14,vars:4,consts:[["fileInput",""],[1,"space-y-6"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border","border-slate-100","flex","flex-col","xl:flex-row","justify-between","items-start","xl:items-center","gap-4"],[1,"text-2xl","font-bold","text-slate-800","flex","items-center"],[1,"fa-solid","fa-boxes-packing","mr-3","text-emerald-600"],[1,"text-slate-500","text-sm","mt-1"],[1,"flex","items-center","gap-4"],[1,"px-4","py-2","bg-emerald-600","hover:bg-emerald-700","text-white","rounded-lg","font-bold","shadow-md","transition-all","flex","items-center","disabled:opacity-50",3,"disabled"],[1,"px-4","py-2","bg-slate-100","hover:bg-slate-200","text-slate-700","rounded-lg","font-bold","transition-all","flex","items-center"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","overflow-hidden","animate-fade-in-up"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6","animate-fade-in-up"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4"],[1,"px-4","py-2","bg-emerald-600","hover:bg-emerald-700","text-white","rounded-lg","font-bold","shadow-md","transition-all","flex","items-center","disabled:opacity-50",3,"click","disabled"],[1,"fa-solid","fa-plus","mr-2"],[1,"px-4","py-2","bg-slate-100","hover:bg-slate-200","text-slate-700","rounded-lg","font-bold","transition-all","flex","items-center",3,"click"],[1,"fa-solid","fa-arrow-left","mr-2"],[1,"p-4","bg-slate-50","border-b","border-slate-100","flex","justify-between","items-center"],[1,"font-bold","text-slate-700"],[1,"text-xs","text-slate-400"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"bg-slate-50","text-slate-500","text-xs","uppercase","tracking-wider","border-b","border-slate-100"],[1,"px-4","py-3","font-bold"],[1,"px-4","py-3","font-bold","text-center"],[1,"px-4","py-3","font-bold","text-right"],[1,"divide-y","divide-slate-100"],[1,"hover:bg-slate-50","transition-colors","group","cursor-pointer"],[1,"hover:bg-slate-50","transition-colors","group","cursor-pointer",3,"click"],[1,"px-4","py-3","text-slate-600","font-medium","whitespace-nowrap"],[1,"px-4","py-3"],[1,"font-bold","text-slate-800","text-base"],[1,"bg-emerald-50","text-emerald-700","px-2","py-1","rounded","text-xs","font-mono","font-bold","border","border-emerald-100"],[1,"px-4","py-3","text-center"],[1,"inline-flex","items-center","justify-center","w-6","h-6","rounded-full","bg-slate-100","text-slate-600","text-xs","font-bold"],[1,"px-4","py-3","text-right",3,"click"],[1,"p-2","text-slate-400","hover:text-red-500","transition-colors","disabled:opacity-30",3,"click","disabled"],[1,"fa-solid","fa-trash-can"],["colspan","5",1,"p-10","text-center","text-slate-400"],[1,"mb-2"],[1,"fa-solid","fa-clipboard-list","text-3xl","opacity-20"],[1,"lg:col-span-1","space-y-6"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","p-6"],[1,"font-bold","text-slate-800","mb-4","flex","items-center","border-b","pb-2"],[1,"fa-solid","fa-file-pen","mr-2","text-emerald-600"],[1,"space-y-4"],[1,"block","text-xs","font-bold","text-slate-500","uppercase","mb-1"],["type","text","placeholder","Es. Rag\xF9 Bolognese",1,"w-full","p-2","rounded","border","border-slate-300","focus:border-emerald-500","focus:ring-2","focus:ring-emerald-100","outline-none","font-bold","text-slate-700","capitalize",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-3"],["type","date",1,"w-full","p-2","rounded","border","border-slate-300","focus:border-emerald-500","outline-none","text-sm",3,"ngModelChange","ngModel"],[1,"flex"],[1,"bg-slate-100","border","border-r-0","border-slate-300","rounded-l","p-2","text-slate-500","font-mono","text-sm"],["type","text",1,"w-full","p-2","rounded-r","border","border-slate-300","focus:border-emerald-500","outline-none","font-mono","text-sm","capitalize",3,"ngModelChange","ngModel"],["rows","3",1,"w-full","p-2","rounded","border","border-slate-300","text-sm","resize-none",3,"ngModelChange","ngModel"],[1,"mt-6","pt-4","border-t","border-slate-100"],[1,"w-full","py-2","bg-slate-800","hover:bg-slate-900","text-white","rounded-lg","font-bold","text-sm","transition-all","flex","justify-center","items-center",3,"click"],[1,"fa-solid","fa-save","mr-2"],[1,"lg:col-span-2","space-y-6"],[1,"bg-indigo-50/50","border","border-indigo-100","rounded-xl","p-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","w-32","h-32","bg-indigo-100/50","rounded-full","blur-3xl","-translate-y-1/2","translate-x-1/2"],[1,"relative","z-10"],[1,"font-bold","text-indigo-900","mb-4","flex","items-center"],[1,"fa-solid","fa-robot","mr-2","text-indigo-500"],[1,"flex","flex-col","md:flex-row","gap-6"],[1,"w-full","md:w-1/3","shrink-0"],[1,"aspect-square","bg-white","border-2","border-dashed","border-indigo-200","rounded-xl","flex","flex-col","items-center","justify-center","cursor-pointer","hover:border-indigo-400","transition-all","group","relative","overflow-hidden",3,"click"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"w-full","mt-3","py-2","bg-indigo-600","hover:bg-indigo-700","text-white","rounded-lg","font-bold","text-xs","uppercase","shadow-md","disabled:opacity-50","disabled:cursor-not-allowed","flex","justify-center","items-center",3,"click","disabled"],[1,"flex-1","space-y-4"],[1,"grid","grid-cols-2","gap-4"],[1,"col-span-2"],[1,"block","text-[10px]","font-bold","text-indigo-400","uppercase","mb-1"],["type","text","placeholder","Es. Farina 00",1,"w-full","p-2","rounded","bg-white","border","border-indigo-100","focus:border-indigo-400","outline-none","text-sm","font-bold","text-indigo-900","capitalize",3,"ngModelChange","ngModel"],["type","text","placeholder","L-...",1,"w-full","p-2","rounded","bg-white","border","border-indigo-100","focus:border-indigo-400","outline-none","text-sm","font-mono","capitalize",3,"ngModelChange","ngModel"],["type","date",1,"w-full","p-2","rounded","bg-white","border","border-indigo-100","focus:border-indigo-400","outline-none","text-sm",3,"ngModelChange","ngModel"],[1,"flex","justify-end","pt-2"],[1,"px-6","py-2","bg-white","text-indigo-600","border","border-indigo-200","hover:bg-indigo-50","rounded-lg","font-bold","text-sm","transition-all","shadow-sm",3,"click","disabled"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","overflow-hidden"],[1,"p-4","border-b","border-slate-100","bg-slate-50","flex","justify-between","items-center"],[1,"font-bold","text-slate-700","flex","items-center"],[1,"fa-solid","fa-list-ul","mr-2","text-slate-400"],[1,"bg-slate-200","text-slate-600","text-xs","font-bold","px-2","py-1","rounded-full"],[1,"w-full","text-left"],[1,"bg-slate-50/50","text-slate-400","text-[10px]","uppercase","font-bold","border-b","border-slate-100"],[1,"px-4","py-2"],[1,"px-4","py-2","text-right"],[1,"divide-y","divide-slate-50"],[1,"hover:bg-slate-50"],[1,"w-full","h-full","object-contain","p-2",3,"src"],[1,"absolute","top-2","right-2","bg-red-500","text-white","w-6","h-6","rounded-full","flex","items-center","justify-center","shadow-lg","hover:bg-red-600",3,"click"],[1,"fa-solid","fa-times","text-xs"],[1,"w-12","h-12","bg-indigo-50","text-indigo-400","rounded-full","flex","items-center","justify-center","mb-2","group-hover:scale-110","transition-transform"],[1,"fa-solid","fa-camera","text-xl"],[1,"text-xs","font-bold","text-indigo-800","uppercase"],[1,"text-[10px]","text-indigo-400"],[1,"fa-solid","fa-circle-notch","fa-spin","mr-2"],[1,"fa-solid","fa-wand-magic-sparkles","mr-2"],[1,"px-4","py-2","font-medium","text-slate-700"],[1,"px-4","py-2","font-mono","text-xs","text-slate-500"],[1,"px-4","py-2","text-sm","text-slate-600"],[1,"text-slate-300","hover:text-red-500","transition-colors",3,"click"],[1,"fa-solid","fa-times-circle"],["colspan","4",1,"p-6","text-center","text-slate-400","text-sm","italic"],[1,"absolute","inset-0","bg-slate-900/60","backdrop-blur-sm","transition-opacity",3,"click"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-md","p-6","relative","z-10","animate-fade-in-up","border","border-slate-100"],[1,"flex","items-start","gap-4","mb-4"],[1,"w-12","h-12","rounded-full","bg-amber-50","text-amber-500","flex","items-center","justify-center","shrink-0"],[1,"fa-solid","fa-triangle-exclamation","text-xl"],[1,"text-lg","font-bold","text-slate-800"],[1,"text-slate-600","text-sm","mt-1","leading-relaxed"],[1,"flex","justify-end","gap-3","mt-6"],[1,"px-4","py-2","rounded-lg","text-slate-600","font-bold","text-sm","hover:bg-slate-100","transition-colors",3,"click"],[1,"px-4","py-2","rounded-lg","bg-red-500","hover:bg-red-600","text-white","font-bold","text-sm","shadow-md","transition-colors","flex","items-center",3,"click"],[1,"fa-solid","fa-check","mr-2"]],template:function(t,i){t&1&&(y(0,"div",1)(1,"div",2)(2,"div")(3,"h2",3),D(4,"i",4),p(5," Schede Produzione & Tracciabilit\xE0 "),_(),y(6,"p",5),p(7," Gestione lotti di produzione e tracciabilit\xE0 ingredienti (scan AI) "),_()(),y(8,"div",6),T(9,oP,3,1,"button",7)(10,rP,3,0,"button",8),_()(),T(11,lP,24,1,"div",9),T(12,hP,92,14,"div",10),T(13,gP,17,2,"div",11),_()),t&2&&(m(9),M(i.viewMode()==="list"?9:10),m(2),M(i.viewMode()==="list"?11:-1),m(),M(i.viewMode()==="detail"&&i.currentBatch()?12:-1),m(),M(i.confirmationState()?13:-1))},dependencies:[Z,jn,vt,_t,bn,ge],styles:["@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out forwards}"]})}};var vP=(n,e)=>e.id;function _P(n,e){if(n&1&&(h(0,"span",18),p(1,"\u2022"),v(),b(2,"i",19),p(3)),n&2){let t=C();m(3),k(" ",t.getDisplayName()," ")}}function yP(n,e){n&1&&(h(0,"span",27),b(1,"i",29),p(2," VERIFICATO "),v())}function xP(n,e){n&1&&(h(0,"span",28),b(1,"i",30),p(2," DA VERIFICARE "),v())}function EP(n,e){if(n&1){let t=H();h(0,"div",20),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",21)(2,"div",22),b(3,"i",23),v(),h(4,"div",24)(5,"h3",25),p(6),v(),h(7,"div",26),T(8,yP,3,0,"span",27)(9,xP,3,0,"span",28),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-red-200",!t.checked)("border-red-500",t.checked)("bg-red-50",t.checked)("shadow-lg",t.checked)("shadow-red-200/50",t.checked),m(2),N("bg-red-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-red-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-bug-slash",!t.checked),m(3),V(t.label),m(2),M(t.checked?8:9)}}function CP(n,e){n&1&&(h(0,"div",17),b(1,"i",31),h(2,"p",32),p(3,"Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati."),v()())}var Tl=class n{constructor(){this.state=$(ee);this.moduleId="pest-control";this.checks=B([{id:"visual",label:"ISPEZIONE VISIVA DEGLI AMBIENTI DI LAVORO",checked:!1},{id:"nets",label:"RETI ANTI INSETTI",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return!(this.state.isAdmin()&&this.state.filterCollaboratorId())}getDisplayName(){return this.state.filterCollaboratorId()?this.state.systemUsers().find(e=>e.id===this.state.filterCollaboratorId())?.name:this.state.currentUser()?.name}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-pest-control-view"]],decls:25,vars:8,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-red-600","via-orange-600","to-amber-600","p-8","rounded-3xl","shadow-xl","border","border-red-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-bug","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-bug"],[1,"text-orange-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-shield-virus","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-orange-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-red-200","border-red-500","bg-red-50","shadow-lg","shadow-red-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"mx-1"],[1,"fa-regular","fa-user"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-red-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Controllo Infestanti "),v(),h(9,"p",8),p(10,"Monitoraggio ratti, blatte e volatili"),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),T(20,_P,4,1),v()()(),h(21,"div",15),j(22,EP,10,34,"div",16,vP),v(),T(24,CP,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,5,i.state.filterDate(),"dd/MM/yyyy")," "),m(2),M(i.getDisplayName()?20:-1),m(2),W(i.checks()),m(2),M(i.canEdit()?-1:24))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var bP=(n,e)=>e.id;function wP(n,e){if(n&1&&(h(0,"span",18),p(1,"\u2022"),v(),b(2,"i",19),p(3)),n&2){let t=C();m(3),k(" ",t.getDisplayName()," ")}}function IP(n,e){n&1&&(h(0,"span",27),b(1,"i",29),p(2," VERIFICATO "),v())}function SP(n,e){n&1&&(h(0,"span",28),b(1,"i",30),p(2," DA VERIFICARE "),v())}function DP(n,e){if(n&1){let t=H();h(0,"div",20),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",21)(2,"div",22),b(3,"i",23),v(),h(4,"div",24)(5,"h3",25),p(6),v(),h(7,"div",26),T(8,IP,3,0,"span",27)(9,SP,3,0,"span",28),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-yellow-200",!t.checked)("border-yellow-500",t.checked)("bg-yellow-50",t.checked)("shadow-lg",t.checked)("shadow-yellow-200/50",t.checked),m(2),N("bg-yellow-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-yellow-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-exclamation-triangle",!t.checked),m(3),V(t.label),m(2),M(t.checked?8:9)}}function TP(n,e){n&1&&(h(0,"div",17),b(1,"i",31),h(2,"p",32),p(3,"Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati."),v()())}var Ml=class n{constructor(){this.state=$(ee);this.moduleId="non-compliance";this.checks=B([{id:"recall",label:"COMPILARE MODELLO DI RITIRO / RICHIAMO",checked:!1},{id:"broken-equipment",label:"REGISTRARE ATTREZZATURE NON FUNZIONANTI",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return!(this.state.isAdmin()&&this.state.filterCollaboratorId())}getDisplayName(){return this.state.filterCollaboratorId()?this.state.systemUsers().find(e=>e.id===this.state.filterCollaboratorId())?.name:this.state.currentUser()?.name}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-non-compliance-view"]],decls:25,vars:8,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-yellow-600","via-amber-600","to-orange-600","p-8","rounded-3xl","shadow-xl","border","border-yellow-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-triangle-exclamation","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-triangle-exclamation"],[1,"text-yellow-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-clipboard-list","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-yellow-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-yellow-200","border-yellow-500","bg-yellow-50","shadow-lg","shadow-yellow-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"mx-1"],[1,"fa-regular","fa-user"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-yellow-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Non Conformit\xE0 "),v(),h(9,"p",8),p(10,"Gestione anomalie e richiami"),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),T(20,wP,4,1),v()()(),h(21,"div",15),j(22,DP,10,34,"div",16,bP),v(),T(24,TP,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,5,i.state.filterDate(),"dd/MM/yyyy")," "),m(2),M(i.getDisplayName()?20:-1),m(2),W(i.checks()),m(2),M(i.canEdit()?-1:24))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var MP=(n,e)=>e.id;function AP(n,e){if(n&1&&(h(0,"span",18),p(1,"\u2022"),v(),b(2,"i",19),p(3)),n&2){let t=C();m(3),k(" ",t.getDisplayName()," ")}}function kP(n,e){n&1&&(h(0,"span",27),b(1,"i",29),p(2," VERIFICATO "),v())}function NP(n,e){n&1&&(h(0,"span",28),b(1,"i",30),p(2," DA VERIFICARE "),v())}function RP(n,e){if(n&1){let t=H();h(0,"div",20),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",21)(2,"div",22),b(3,"i",23),v(),h(4,"div",24)(5,"h3",25),p(6),v(),h(7,"div",26),T(8,kP,3,0,"span",27)(9,NP,3,0,"span",28),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-lime-200",!t.checked)("border-lime-500",t.checked)("bg-lime-50",t.checked)("shadow-lg",t.checked)("shadow-lime-200/50",t.checked),m(2),N("bg-lime-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-lime-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-clipboard-list",!t.checked),m(3),V(t.label),m(2),M(t.checked?8:9)}}function PP(n,e){n&1&&(h(0,"div",17),b(1,"i",31),h(2,"p",32),p(3,"Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati."),v()())}var Al=class n{constructor(){this.state=$(ee);this.moduleId="allergens-ue1169";this.checks=B([{id:"inform-register",label:"INFORMARE E REGISTRARE ALLERGIE / INTOLLERANZE",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return!(this.state.isAdmin()&&this.state.filterCollaboratorId())}getDisplayName(){return this.state.filterCollaboratorId()?this.state.systemUsers().find(e=>e.id===this.state.filterCollaboratorId())?.name:this.state.currentUser()?.name}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-allergens-config-view"]],decls:25,vars:8,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-lime-600","via-green-600","to-emerald-600","p-8","rounded-3xl","shadow-xl","border","border-lime-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-wheat-awn","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-wheat-awn"],[1,"text-lime-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-book-medical","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-lime-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-lime-200","border-lime-500","bg-lime-50","shadow-lg","shadow-lime-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"mx-1"],[1,"fa-regular","fa-user"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-lime-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Reg. U.E. 1169/2011 "),v(),h(9,"p",8),p(10,"Informazioni e registro allergeni / intolleranze"),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),T(20,AP,4,1),v()()(),h(21,"div",15),j(22,RP,10,34,"div",16,MP),v(),T(24,PP,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,5,i.state.filterDate(),"dd/MM/yyyy")," "),m(2),M(i.getDisplayName()?20:-1),m(2),W(i.checks()),m(2),M(i.canEdit()?-1:24))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var FP=(n,e)=>e.id;function OP(n,e){if(n&1&&(h(0,"span",18),p(1,"\u2022"),v(),b(2,"i",19),p(3)),n&2){let t=C();m(3),k(" ",t.getDisplayName()," ")}}function VP(n,e){n&1&&(h(0,"span",27),b(1,"i",29),p(2," VERIFICATO "),v())}function LP(n,e){n&1&&(h(0,"span",28),b(1,"i",30),p(2," DA VERIFICARE "),v())}function UP(n,e){if(n&1){let t=H();h(0,"div",20),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",21)(2,"div",22),b(3,"i",23),v(),h(4,"div",24)(5,"h3",25),p(6),v(),h(7,"div",26),T(8,VP,3,0,"span",27)(9,LP,3,0,"span",28),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-violet-200",!t.checked)("border-violet-500",t.checked)("bg-violet-50",t.checked)("shadow-lg",t.checked)("shadow-violet-200/50",t.checked),m(2),N("bg-violet-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-violet-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-spray-can",!t.checked),m(3),V(t.label),m(2),M(t.checked?8:9)}}function BP(n,e){n&1&&(h(0,"div",17),b(1,"i",31),h(2,"p",32),p(3,"Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati."),v()())}var kl=class n{constructor(){this.state=$(ee);this.moduleId="cleaning-maintenance";this.checks=B([{id:"equip",label:"ATTREZZATURE",checked:!1},{id:"work-env",label:"AMBIENTI DI LAVORO",checked:!1},{id:"toilets",label:"SERVIZI IGIENICI",checked:!1},{id:"changing-room",label:"SPOGLIATOIO",checked:!1},{id:"storage",label:"DEPOSITO / MAGAZZINO",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return!(this.state.isAdmin()&&this.state.filterCollaboratorId())}getDisplayName(){return this.state.filterCollaboratorId()?this.state.systemUsers().find(e=>e.id===this.state.filterCollaboratorId())?.name:this.state.currentUser()?.name}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-cleaning-maintenance-view"]],decls:25,vars:8,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-violet-600","via-purple-600","to-fuchsia-600","p-8","rounded-3xl","shadow-xl","border","border-violet-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-broom","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-broom"],[1,"text-violet-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-spray-can","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-violet-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-violet-200","border-violet-500","bg-violet-50","shadow-lg","shadow-violet-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"mx-1"],[1,"fa-regular","fa-user"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-violet-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Pulizia / Manutenzione "),v(),h(9,"p",8),p(10,"Registro attivit\xE0 di pulizia e manutenzione"),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),T(20,OP,4,1),v()()(),h(21,"div",15),j(22,UP,10,34,"div",16,FP),v(),T(24,BP,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,5,i.state.filterDate(),"dd/MM/yyyy")," "),m(2),M(i.getDisplayName()?20:-1),m(2),W(i.checks()),m(2),M(i.canEdit()?-1:24))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var HP=(n,e)=>e.id;function $P(n,e){if(n&1&&(h(0,"span",18),p(1,"\u2022"),v(),b(2,"i",19),p(3)),n&2){let t=C();m(3),k(" ",t.getDisplayName()," ")}}function GP(n,e){n&1&&(h(0,"span",27),b(1,"i",29),p(2," VERIFICATO "),v())}function zP(n,e){n&1&&(h(0,"span",28),b(1,"i",30),p(2," DA VERIFICARE "),v())}function qP(n,e){if(n&1){let t=H();h(0,"div",20),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",21)(2,"div",22),b(3,"i",23),v(),h(4,"div",24)(5,"h3",25),p(6),v(),h(7,"div",26),T(8,GP,3,0,"span",27)(9,zP,3,0,"span",28),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-pink-200",!t.checked)("border-pink-500",t.checked)("bg-pink-50",t.checked)("shadow-lg",t.checked)("shadow-pink-200/50",t.checked),m(2),N("bg-pink-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-pink-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-flask",!t.checked),m(3),V(t.label),m(2),M(t.checked?8:9)}}function jP(n,e){n&1&&(h(0,"div",17),b(1,"i",31),h(2,"p",32),p(3,"Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati."),v()())}var Nl=class n{constructor(){this.state=$(ee);this.moduleId="micro-bio";this.checks=B([{id:"lab-test",label:"TESTS DI LABORATORIO",checked:!1},{id:"rapid-tests",label:"TESTS RAPIDI (RILEVAMENTO RESIDUI PROTEINE, GRASSI E ZUCCHERI)",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return!(this.state.isAdmin()&&this.state.filterCollaboratorId())}getDisplayName(){return this.state.filterCollaboratorId()?this.state.systemUsers().find(e=>e.id===this.state.filterCollaboratorId())?.name:this.state.currentUser()?.name}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-microbio-monitor-view"]],decls:25,vars:8,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-pink-600","via-rose-600","to-red-600","p-8","rounded-3xl","shadow-xl","border","border-pink-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-vial","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-vial"],[1,"text-pink-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-microscope","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-pink-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-pink-200","border-pink-500","bg-pink-50","shadow-lg","shadow-pink-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"mx-1"],[1,"fa-regular","fa-user"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-pink-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Monitoraggio Microbiologico "),v(),h(9,"p",8),p(10,"Analisi e test di igiene"),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),T(20,$P,4,1),v()()(),h(21,"div",15),j(22,qP,10,34,"div",16,HP),v(),T(24,jP,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,5,i.state.filterDate(),"dd/MM/yyyy")," "),m(2),M(i.getDisplayName()?20:-1),m(2),W(i.checks()),m(2),M(i.canEdit()?-1:24))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var WP=(n,e)=>e.id;function YP(n,e){if(n&1&&(h(0,"span",18),p(1,"\u2022"),v(),b(2,"i",19),p(3)),n&2){let t=C();m(3),k(" ",t.getDisplayName()," ")}}function JP(n,e){n&1&&(h(0,"span",27),b(1,"i",29),p(2," VERIFICATO "),v())}function KP(n,e){n&1&&(h(0,"span",28),b(1,"i",30),p(2," DA VERIFICARE "),v())}function ZP(n,e){if(n&1){let t=H();h(0,"div",20),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleCheck(o.id))}),h(1,"div",21)(2,"div",22),b(3,"i",23),v(),h(4,"div",24)(5,"h3",25),p(6),v(),h(7,"div",26),T(8,JP,3,0,"span",27)(9,KP,3,0,"span",28),v()()()()}if(n&2){let t=e.$implicit,i=C();N("cursor-pointer",i.canEdit())("cursor-not-allowed",!i.canEdit())("opacity-60",!i.canEdit())("border-emerald-200",!t.checked)("border-emerald-500",t.checked)("bg-emerald-50",t.checked)("shadow-lg",t.checked)("shadow-emerald-200/50",t.checked),m(2),N("bg-emerald-500",t.checked)("text-white",t.checked)("shadow-lg",t.checked)("shadow-emerald-200",t.checked)("bg-slate-100",!t.checked)("text-slate-400",!t.checked),m(),N("fa-check-circle",t.checked)("fa-hand-sparkles",!t.checked),m(3),k(" ",t.label," "),m(2),M(t.checked?8:9)}}function QP(n,e){n&1&&(h(0,"div",17),b(1,"i",31),h(2,"p",32),p(3," Modalit\xE0 di sola lettura. Seleziona un'unit\xE0 operativa per modificare i dati. "),v()())}var Rl=class n{constructor(){this.state=$(ee);this.moduleId="staff-hygiene";this.checks=B([{id:"work-clothes",label:"PULIZIA ABITI DA LAVORO",checked:!1},{id:"personal-hygiene",label:"IGIENE DELLA PERSONA (CAPELLI RACCOLTI, UNGHIE PULITE, ASSENZA FERITE, TOSSE O ALTRO)",checked:!1}]);this.checkedCount=z(()=>this.checks().filter(e=>e.checked).length);ye(()=>{this.state.filterDate(),this.state.filterCollaboratorId(),this.state.currentUser(),this.loadData()},{allowSignalWrites:!0})}loadData(){let e=this.state.getRecord(this.moduleId);e&&Array.isArray(e)?this.checks.update(t=>t.map(i=>{let o=e.find(r=>r.id===i.id);return o?O(R({},i),{checked:o.checked}):O(R({},i),{checked:!1})})):this.checks.update(t=>t.map(i=>O(R({},i),{checked:!1})))}canEdit(){return this.state.isContextEditable()}getDisplayName(){return this.state.filterCollaboratorId()?this.state.systemUsers().find(e=>e.id===this.state.filterCollaboratorId())?.name:this.state.currentUser()?.name}toggleCheck(e){this.canEdit()&&(this.checks.update(t=>t.map(i=>i.id===e?O(R({},i),{checked:!i.checked}):i)),this.state.saveRecord(this.moduleId,this.checks()))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-staff-hygiene-view"]],decls:25,vars:8,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-emerald-600","via-teal-600","to-green-600","p-8","rounded-3xl","shadow-xl","border","border-emerald-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-hands-bubbles","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-hands-bubbles"],[1,"text-emerald-100","text-sm","mt-2","font-medium","ml-1"],[1,"relative","z-10","flex","flex-col","gap-2"],[1,"flex","items-center","gap-3","bg-white/10","backdrop-blur-md","px-4","py-2","rounded-xl","border","border-white/20"],[1,"fa-solid","fa-user-check","text-white","text-lg"],[1,"text-white","font-bold"],[1,"text-xs","text-emerald-100","font-medium","flex","items-center","gap-2"],[1,"fa-regular","fa-calendar"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"cursor-pointer","cursor-not-allowed","opacity-60","border-emerald-200","border-emerald-500","bg-emerald-50","shadow-lg","shadow-emerald-200/50"],[1,"bg-yellow-50","border","border-yellow-200","rounded-xl","p-4","flex","items-start","gap-3"],[1,"mx-1"],[1,"fa-regular","fa-user"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300","group",3,"click"],[1,"flex","items-start","gap-4"],[1,"flex-shrink-0","w-14","h-14","rounded-2xl","flex","items-center","justify-center","transition-all","duration-300"],[1,"fa-solid","text-2xl"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-base","leading-tight","mb-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-emerald-500","text-white","text-xs","font-bold","rounded-full"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1","bg-slate-200","text-slate-600","text-xs","font-bold","rounded-full"],[1,"fa-solid","fa-circle-check"],[1,"fa-regular","fa-circle"],[1,"fa-solid","fa-lock","text-yellow-600","mt-0.5"],[1,"text-sm","text-yellow-800","font-medium"]],template:function(t,i){t&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),v(),h(4,"div",4)(5,"h2",5)(6,"span",6),b(7,"i",7),v(),p(8," Igiene Personale "),v(),h(9,"p",8),p(10," Verifica igiene e abbigliamento operatori "),v()(),h(11,"div",9)(12,"div",10),b(13,"i",11),h(14,"span",12),p(15),v()(),h(16,"div",13),b(17,"i",14),p(18),ie(19,"date"),T(20,YP,4,1),v()()(),h(21,"div",15),j(22,ZP,10,34,"div",16,WP),v(),T(24,QP,4,0,"div",17),v()),t&2&&(m(15),re("",i.checkedCount()," / ",i.checks().length),m(3),k(" ",oe(19,5,i.state.filterDate(),"dd/MM/yyyy")," "),m(2),M(i.getDisplayName()?20:-1),m(2),W(i.checks()),m(2),M(i.canEdit()?-1:24))},dependencies:[Z,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var Fl=(n,e)=>e.id;function XP(n,e){if(n&1&&(y(0,"option",37),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),V(t.name)}}function eF(n,e){if(n&1&&(y(0,"option",37),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),re("",t.name," (",t.department,")")}}function tF(n,e){if(n&1){let t=H();y(0,"div")(1,"label",20),p(2,"Operaio / Referente (Opzionale)"),_(),y(3,"select",38),Oe("ngModelChange",function(o){I(t);let r=C(4);return Ve(r.newMessage.recipientUserId,o)||(r.newMessage.recipientUserId=o),S(o)}),y(4,"option",36),p(5,"-- Tutta l'Azienda --"),_(),j(6,eF,2,3,"option",37,Fl),_()()}if(n&2){let t=C(4);m(3),Fe("ngModel",t.newMessage.recipientUserId),m(3),W(t.getUsersForClient(t.newMessage.recipientId))}}function nF(n,e){if(n&1){let t=H();y(0,"div",34)(1,"div")(2,"label",20),p(3,"Seleziona Azienda"),_(),y(4,"select",35),Oe("ngModelChange",function(o){I(t);let r=C(3);return Ve(r.newMessage.recipientId,o)||(r.newMessage.recipientId=o),S(o)}),L("change",function(){I(t);let o=C(3);return S(o.newMessage.recipientUserId="")}),y(5,"option",36),p(6,"-- Seleziona Azienda --"),_(),j(7,XP,2,2,"option",37,Fl),_()(),T(9,tF,8,1,"div"),_()}if(n&2){let t=C(3);m(4),Fe("ngModel",t.newMessage.recipientId),m(3),W(t.state.clients()),m(2),M(t.newMessage.recipientId&&t.newMessage.recipientId!=="ADMIN_OFFICE"?9:-1)}}function iF(n,e){if(n&1){let t=H();y(0,"div")(1,"label",20),p(2,"Destinatario"),_(),y(3,"div",29)(4,"label",30)(5,"input",31),Oe("ngModelChange",function(o){I(t);let r=C(2);return Ve(r.newMessage.recipientType,o)||(r.newMessage.recipientType=o),S(o)}),_(),y(6,"span",32),p(7,"Tutte le Aziende"),_()(),y(8,"label",30)(9,"input",33),Oe("ngModelChange",function(o){I(t);let r=C(2);return Ve(r.newMessage.recipientType,o)||(r.newMessage.recipientType=o),S(o)}),_(),y(10,"span",32),p(11,"Azienda Specifica"),_()()()(),T(12,nF,10,2,"div",34)}if(n&2){let t=C(2);m(5),Fe("ngModel",t.newMessage.recipientType),m(4),Fe("ngModel",t.newMessage.recipientType),m(3),M(t.newMessage.recipientType==="SINGLE"?12:-1)}}function oF(n,e){n&1&&(y(0,"div",19)(1,"div",39),D(2,"i",40),_(),y(3,"div")(4,"p",41),p(5,"Destinatario"),_(),y(6,"p",42),p(7,"Amministrazione / Supporto"),_()()())}function rF(n,e){if(n&1&&(y(0,"p",24),D(1,"i",43),p(2),_()),n&2){let t=C(2);m(2),k(" ",t.newMessage.attachmentName," ")}}function sF(n,e){if(n&1){let t=H();y(0,"div",11)(1,"div",15)(2,"h3",16),p(3,"Nuovo Messaggio"),_(),y(4,"button",17),L("click",function(){I(t);let o=C();return S(o.cancelNewMessage())}),D(5,"i",18),_()(),y(6,"div",12),T(7,iF,13,3)(8,oF,8,0,"div",19),y(9,"div")(10,"label",20),p(11,"Oggetto"),_(),y(12,"input",21),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.newMessage.subject,o)||(r.newMessage.subject=o),S(o)}),_()(),y(13,"div")(14,"label",20),p(15,"Messaggio"),_(),y(16,"textarea",22),Oe("ngModelChange",function(o){I(t);let r=C();return Ve(r.newMessage.content,o)||(r.newMessage.content=o),S(o)}),_()(),y(17,"div")(18,"label",20),p(19,"Allegato (opzionale)"),_(),y(20,"input",23),L("change",function(o){I(t);let r=C();return S(r.onFileSelected(o))}),_(),T(21,rF,3,1,"p",24),_(),y(22,"div",25)(23,"button",26),L("click",function(){I(t);let o=C();return S(o.cancelNewMessage())}),p(24," Annulla "),_(),y(25,"button",27),L("click",function(){I(t);let o=C();return S(o.sendNewMessage())}),D(26,"i",28),p(27," Invia Messaggio "),_()()()()}if(n&2){let t=C();m(7),M(t.state.isAdmin()?7:8),m(5),Fe("ngModel",t.newMessage.subject),m(4),Fe("ngModel",t.newMessage.content),m(5),M(t.newMessage.attachmentName?21:-1),m(4),N("opacity-50",!t.canSendMessage())("cursor-not-allowed",!t.canSendMessage()),X("disabled",!t.canSendMessage())}}function aF(n,e){n&1&&(y(0,"div",13),D(1,"i",44),y(2,"p",45),p(3,"Nessun messaggio presente"),_()())}function lF(n,e){n&1&&(y(0,"span",51),p(1,"NUOVO"),_())}function dF(n,e){n&1&&(y(0,"span",55),D(1,"i",60),p(2," BROADCAST "),_())}function cF(n,e){if(n&1&&(y(0,"span",62),p(1,"\u2022"),_(),D(2,"i",63),p(3)),n&2){let t=C(2).$implicit,i=C();m(3),k(" ",i.getUserName(t.recipientUserId)," ")}}function uF(n,e){if(n&1&&(y(0,"span",56),D(1,"i",61),p(2),T(3,cF,4,1),_()),n&2){let t=C().$implicit,i=C();m(2),k(" ",i.getClientName(t.recipientId)," "),m(),M(t.recipientUserId?3:-1)}}function fF(n,e){if(n&1&&(y(0,"div",65),D(1,"i",69),y(2,"span",70),p(3),_(),y(4,"button",71),D(5,"i",72),p(6," Scarica "),_()()),n&2){let t=C(2).$implicit;m(3),V(t.attachmentName)}}function pF(n,e){if(n&1&&(y(0,"div",80),D(1,"i",69),y(2,"span",81),p(3),_()()),n&2){let t=C().$implicit;m(3),V(t.attachmentName)}}function mF(n,e){if(n&1&&(y(0,"div",74)(1,"div",75),D(2,"i",76),y(3,"span",77),p(4),_(),y(5,"span",78),p(6,"\u2022"),_(),y(7,"span"),p(8),ie(9,"date"),_()(),y(10,"p",79),p(11),_(),T(12,pF,4,1,"div",80),_()),n&2){let t=e.$implicit;m(4),V(t.senderName),m(4),V(oe(9,4,t.timestamp,"dd/MM/yyyy HH:mm")),m(3),V(t.content),m(),M(t.attachmentName?12:-1)}}function hF(n,e){if(n&1&&(y(0,"div",66)(1,"h4",73),p(2),_(),j(3,mF,13,7,"div",74,Fl),_()),n&2){let t=C(2).$implicit;m(2),k("Risposte (",t.replies.length,")"),m(),W(t.replies)}}function gF(n,e){if(n&1){let t=H();y(0,"div",67)(1,"textarea",82),Oe("ngModelChange",function(o){I(t);let r=C(3);return Ve(r.replyContent,o)||(r.replyContent=o),S(o)}),_(),y(2,"div",83)(3,"button",84),L("click",function(){I(t);let o=C(3);return S(o.cancelReply())}),p(4," Annulla "),_(),y(5,"button",85),L("click",function(){I(t);let o=C(2).$implicit,r=C();return S(r.sendReply(o.id))}),D(6,"i",86),p(7," Rispondi "),_()()()}if(n&2){let t=C(3);m(),Fe("ngModel",t.replyContent),m(4),N("opacity-50",!t.replyContent.trim()),X("disabled",!t.replyContent.trim())}}function vF(n,e){if(n&1){let t=H();y(0,"button",87),L("click",function(){I(t);let o=C(2).$implicit,r=C();return S(r.startReply(o.id))}),D(1,"i",86),p(2," Rispondi "),_()}}function _F(n,e){if(n&1&&(y(0,"div",59)(1,"p",64),p(2),_(),T(3,fF,7,1,"div",65),T(4,hF,5,1,"div",66),T(5,gF,8,4,"div",67)(6,vF,3,0,"button",68),_()),n&2){let t=C().$implicit,i=C();m(2),V(t.content),m(),M(t.attachmentName?3:-1),m(),M(t.replies.length>0?4:-1),m(),M(i.showReplyForm()===t.id?5:6)}}function yF(n,e){if(n&1){let t=H();y(0,"div",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"h3",50),p(5),_(),T(6,lF,2,0,"span",51),_(),y(7,"div",52)(8,"span"),D(9,"i",53),p(10),_(),y(11,"span"),D(12,"i",54),p(13),ie(14,"date"),_(),T(15,dF,3,0,"span",55)(16,uF,4,2,"span",56),_()(),y(17,"button",57),L("click",function(){let o=I(t).$implicit,r=C();return S(r.toggleMessageExpanded(o.id))}),D(18,"i",58),_()(),T(19,_F,7,4,"div",59),_()}if(n&2){let t=e.$implicit,i=C();N("border-blue-200",!t.read)("border-slate-200",t.read)("bg-blue-50",!t.read),m(5),V(t.subject),m(),M(t.read?-1:6),m(4),k(" ",t.senderName),m(3),k(" ",oe(14,16,t.timestamp,"dd/MM/yyyy HH:mm")),m(2),M(t.recipientType==="ALL"?15:16),m(3),N("fa-chevron-down",!i.isMessageExpanded(t.id))("fa-chevron-up",i.isMessageExpanded(t.id)),m(),M(i.isMessageExpanded(t.id)?19:-1)}}var Pl=class n{constructor(){this.state=$(ee);this.showNewMessageForm=!1;this.newMessage={recipientType:"ALL",recipientId:"",recipientUserId:"",subject:"",content:"",attachmentUrl:"",attachmentName:""};this.expandedMessages=B(new Set);this.showReplyForm=B(null);this.replyContent="";this.messages=B([]);this.loadMessages()}loadMessages(){this.messages.set(this.state.getMessagesForCurrentUser())}openNewMessageForm(){if(this.showNewMessageForm=!0,this.state.isAdmin())this.newMessage.recipientType="ALL",this.newMessage.recipientId="";else{let e=this.state.systemUsers().find(t=>t.role==="ADMIN");this.newMessage.recipientType="SINGLE",this.newMessage.recipientId="ADMIN_OFFICE"}}canSendMessage(){return!(!this.newMessage.subject.trim()||!this.newMessage.content.trim()||this.newMessage.recipientType==="SINGLE"&&!this.newMessage.recipientId)}sendNewMessage(){if(!this.canSendMessage())return;let e=this.newMessage.attachmentName?{url:this.newMessage.attachmentUrl,name:this.newMessage.attachmentName}:void 0;this.state.sendMessage(this.newMessage.subject,this.newMessage.content,this.newMessage.recipientType,this.newMessage.recipientId||void 0,this.newMessage.recipientUserId||void 0,e),this.cancelNewMessage(),this.loadMessages()}cancelNewMessage(){this.showNewMessageForm=!1,this.newMessage={recipientType:"ALL",recipientId:"",recipientUserId:"",subject:"",content:"",attachmentUrl:"",attachmentName:""}}onFileSelected(e){let t=e.target.files[0];t&&(this.newMessage.attachmentName=t.name,this.newMessage.attachmentUrl="https://example.com/files/"+t.name)}toggleMessageExpanded(e){this.expandedMessages.update(t=>{let i=new Set(t);return i.has(e)?i.delete(e):(i.add(e),this.state.markMessageAsRead(e),this.loadMessages()),i})}isMessageExpanded(e){return this.expandedMessages().has(e)}startReply(e){this.showReplyForm.set(e),this.replyContent=""}cancelReply(){this.showReplyForm.set(null),this.replyContent=""}sendReply(e){this.replyContent.trim()&&(this.state.replyToMessage(e,this.replyContent),this.cancelReply(),this.loadMessages())}getClientName(e){return e?e==="ADMIN_OFFICE"?"Amministrazione":this.state.clients().find(t=>t.id===e)?.name||"Sconosciuto":""}getUserName(e){return e?this.state.systemUsers().find(t=>t.id===e)?.name||"Utente":""}getUsersForClient(e){return this.state.systemUsers().filter(t=>t.clientId===e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-messages-view"]],decls:20,vars:2,consts:[[1,"space-y-8","pb-10"],[1,"bg-gradient-to-r","from-blue-600","via-indigo-600","to-purple-600","p-8","rounded-3xl","shadow-xl","border","border-blue-500/30","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-6","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10","pointer-events-none"],[1,"fa-solid","fa-comments","text-9xl","text-white"],[1,"relative","z-10"],[1,"text-3xl","font-black","text-white","flex","items-center","tracking-tight"],[1,"w-12","h-12","rounded-2xl","bg-white/20","backdrop-blur-md","flex","items-center","justify-center","mr-4","shadow-lg","border","border-white/30"],[1,"fa-solid","fa-comments"],[1,"text-blue-100","text-sm","mt-2","font-medium","ml-1"],[1,"px-6","py-3","bg-white","text-blue-600","font-bold","rounded-xl","hover:bg-blue-50","transition-all","shadow-lg","flex","items-center","gap-2",3,"click"],[1,"fa-solid","fa-plus"],[1,"bg-white","p-6","rounded-2xl","shadow-lg","border-2","border-blue-200"],[1,"space-y-4"],[1,"bg-slate-50","p-12","rounded-2xl","text-center"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300",3,"border-blue-200","border-slate-200","bg-blue-50"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-bold","text-slate-800"],[1,"text-slate-400","hover:text-slate-600",3,"click"],[1,"fa-solid","fa-times","text-xl"],[1,"bg-blue-50","p-4","rounded-xl","border","border-blue-200","flex","items-center","gap-3"],[1,"block","text-sm","font-bold","text-slate-700","mb-2"],["type","text","placeholder","Oggetto del messaggio",1,"w-full","px-4","py-2","border","border-slate-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["rows","4","placeholder","Scrivi il tuo messaggio...",1,"w-full","px-4","py-2","border","border-slate-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","file",1,"w-full","px-4","py-2","border","border-slate-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"change"],[1,"text-sm","text-slate-600","mt-2"],[1,"flex","gap-3","justify-end"],[1,"px-6","py-2","bg-slate-200","text-slate-700","font-bold","rounded-xl","hover:bg-slate-300","transition-all",3,"click"],[1,"px-6","py-2","bg-blue-600","text-white","font-bold","rounded-xl","hover:bg-blue-700","transition-all","shadow-lg","flex","items-center","gap-2",3,"click","disabled"],[1,"fa-solid","fa-paper-plane"],[1,"flex","gap-4"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","radio","name","recipientType","value","ALL",1,"w-4","h-4",3,"ngModelChange","ngModel"],[1,"text-sm","font-medium"],["type","radio","name","recipientType","value","SINGLE",1,"w-4","h-4",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"w-full","px-4","py-2","border","border-slate-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","change","ngModel"],["value",""],[3,"value"],[1,"w-full","px-4","py-2","border","border-slate-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"w-10","h-10","rounded-full","bg-blue-100","flex","items-center","justify-center","text-blue-600"],[1,"fa-solid","fa-shield-halved"],[1,"text-xs","font-bold","text-blue-600","uppercase"],[1,"font-bold","text-slate-800"],[1,"fa-solid","fa-paperclip","mr-1"],[1,"fa-solid","fa-inbox","text-6xl","text-slate-300","mb-4"],[1,"text-slate-500","font-medium"],[1,"bg-white","p-6","rounded-2xl","shadow-sm","border-2","transition-all","duration-300"],[1,"flex","justify-between","items-start","mb-4"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-lg","font-bold","text-slate-800"],[1,"px-2","py-1","bg-blue-500","text-white","text-xs","font-bold","rounded-full"],[1,"flex","items-center","gap-4","text-sm","text-slate-600"],[1,"fa-solid","fa-user","mr-1"],[1,"fa-regular","fa-clock","mr-1"],[1,"px-2","py-1","bg-purple-100","text-purple-700","text-xs","font-bold","rounded-full"],[1,"px-2","py-1","bg-blue-100","text-blue-700","text-xs","font-bold","rounded-full"],[1,"text-slate-400","hover:text-slate-600","transition-colors",3,"click"],[1,"fa-solid","text-xl"],[1,"border-t","border-slate-200","pt-4","space-y-4"],[1,"fa-solid","fa-broadcast-tower","mr-1"],[1,"fa-solid","fa-building","mr-1"],[1,"ml-1","text-blue-400"],[1,"fa-solid","fa-user-tag","ml-1"],[1,"text-slate-700","whitespace-pre-wrap"],[1,"flex","items-center","gap-2","p-3","bg-slate-50","rounded-xl"],[1,"space-y-3","pl-6","border-l-2","border-slate-200"],[1,"bg-slate-50","p-4","rounded-xl","space-y-3"],[1,"px-4","py-2","bg-blue-600","text-white","font-bold","rounded-xl","hover:bg-blue-700","transition-all","text-sm"],[1,"fa-solid","fa-paperclip","text-slate-400"],[1,"text-sm","font-medium","text-slate-700"],[1,"ml-auto","text-blue-600","hover:text-blue-700","text-sm","font-bold"],[1,"fa-solid","fa-download","mr-1"],[1,"text-sm","font-bold","text-slate-600","uppercase","tracking-wide"],[1,"bg-slate-50","p-4","rounded-xl"],[1,"flex","items-center","gap-2","mb-2","text-sm","text-slate-600"],[1,"fa-solid","fa-user"],[1,"font-bold"],[1,"text-slate-400"],[1,"text-slate-700"],[1,"flex","items-center","gap-2","mt-2","text-sm"],[1,"text-slate-600"],["rows","3","placeholder","Scrivi una risposta...",1,"w-full","px-4","py-2","border","border-slate-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","gap-2","justify-end"],[1,"px-4","py-2","bg-slate-200","text-slate-700","font-bold","rounded-xl","hover:bg-slate-300","transition-all","text-sm",3,"click"],[1,"px-4","py-2","bg-blue-600","text-white","font-bold","rounded-xl","hover:bg-blue-700","transition-all","text-sm",3,"click","disabled"],[1,"fa-solid","fa-reply","mr-1"],[1,"px-4","py-2","bg-blue-600","text-white","font-bold","rounded-xl","hover:bg-blue-700","transition-all","text-sm",3,"click"]],template:function(t,i){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),D(3,"i",3),_(),y(4,"div",4)(5,"h2",5)(6,"span",6),D(7,"i",7),_(),p(8," Messaggistica "),_(),y(9,"p",8),p(10,"Comunicazione diretta con le aziende"),_()(),y(11,"div",4)(12,"button",9),L("click",function(){return i.openNewMessageForm()}),D(13,"i",10),p(14," Nuovo Messaggio "),_()()(),T(15,sF,28,9,"div",11),y(16,"div",12),T(17,aF,4,0,"div",13),j(18,yF,20,19,"div",14,Fl),_()()),t&2&&(m(15),M(i.showNewMessageForm?15:-1),m(2),M(i.messages().length===0?17:-1),m(),W(i.messages()))},dependencies:[Z,jn,cn,un,vt,kt,Zu,_t,bn,ge],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};var xF=(n,e)=>e.id;function EF(n,e){n&1&&b(0,"i",5)}function CF(n,e){n&1&&b(0,"i",6)}function bF(n,e){n&1&&b(0,"i",7)}function wF(n,e){n&1&&b(0,"i",8)}function IF(n,e){if(n&1){let t=H();h(0,"div",2)(1,"div",3)(2,"div",4),T(3,EF,1,0,"i",5)(4,CF,1,0,"i",6)(5,bF,1,0,"i",7)(6,wF,1,0,"i",8),v(),h(7,"div",9)(8,"h4",10),p(9),v(),h(10,"p",11),p(11),v()(),h(12,"button",12),U("click",function(){let o=I(t).$implicit,r=C();return S(r.toastService.remove(o.id))}),b(13,"i",13),v()(),h(14,"div",14),b(15,"div",15),v()()}if(n&2){let t,i=e.$implicit;N("border-l-emerald-500",i.type==="success")("border-l-red-500",i.type==="error")("border-l-orange-500",i.type==="warning")("border-l-blue-500",i.type==="info"),m(2),N("bg-emerald-100",i.type==="success")("text-emerald-600",i.type==="success")("bg-red-100",i.type==="error")("text-red-600",i.type==="error")("bg-orange-100",i.type==="warning")("text-orange-600",i.type==="warning")("bg-blue-100",i.type==="info")("text-blue-600",i.type==="info"),m(),M((t=i.type)==="success"?3:t==="error"?4:t==="warning"?5:t==="info"?6:-1),m(6),V(i.title),m(2),V(i.message),m(4),Me("animation-duration",i.duration,"ms"),N("bg-emerald-500",i.type==="success")("bg-red-500",i.type==="error")("bg-orange-500",i.type==="warning")("bg-blue-500",i.type==="info")}}var Ol=class n{constructor(){this.toastService=$(Be)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-toast-container"]],decls:3,vars:0,consts:[[1,"fixed","top-4","right-4","z-[9999]","flex","flex-col","gap-3","pointer-events-none","print:hidden"],[1,"pointer-events-auto","animate-slide-in-right","bg-white","rounded-xl","shadow-2xl","border-l-4","overflow-hidden","max-w-sm",3,"border-l-emerald-500","border-l-red-500","border-l-orange-500","border-l-blue-500"],[1,"pointer-events-auto","animate-slide-in-right","bg-white","rounded-xl","shadow-2xl","border-l-4","overflow-hidden","max-w-sm"],[1,"p-4","flex","items-start","gap-3"],[1,"flex-shrink-0","w-10","h-10","rounded-full","flex","items-center","justify-center"],[1,"fa-solid","fa-check","text-lg"],[1,"fa-solid","fa-circle-xmark","text-lg"],[1,"fa-solid","fa-triangle-exclamation","text-lg"],[1,"fa-solid","fa-circle-info","text-lg"],[1,"flex-1","min-w-0"],[1,"font-bold","text-slate-800","text-sm"],[1,"text-xs","text-slate-600","mt-0.5"],[1,"flex-shrink-0","text-slate-400","hover:text-slate-600","transition-colors",3,"click"],[1,"fa-solid","fa-xmark"],[1,"h-1","bg-slate-100"],[1,"h-full","transition-all","ease-linear","animate-shrink"]],template:function(t,i){t&1&&(h(0,"div",0),j(1,IF,16,37,"div",1,xF),v()),t&2&&(m(),W(i.toastService.toasts()))},dependencies:[Z],styles:["@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(400px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_shrink{0%{width:100%}to{width:0%}}.animate-slide-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .3s ease-out}.animate-shrink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shrink linear}"]})}};var SF=(n,e)=>e.id;function DF(n,e){if(n&1){let t=H();h(0,"div",1)(1,"div",24),U("click",function(){I(t);let o=C();return S(o.cancelDelete())}),v(),h(2,"div",25)(3,"div",26)(4,"div",27),b(5,"i",28),v(),h(6,"h3",29),p(7,"Elimina Registrazione?"),v(),h(8,"p",30),p(9,"Questa azione \xE8 irreversibile. La registrazione verr\xE0 rimossa permanentemente dall'archivio."),v(),h(10,"div",31)(11,"button",32),U("click",function(){I(t);let o=C();return S(o.cancelDelete())}),p(12," Annulla "),v(),h(13,"button",33),U("click",function(){I(t);let o=C();return S(o.executeDelete())}),p(14," ELIMINA "),v()()()()()}}function TF(n,e){if(n&1){let t=H();h(0,"div",1)(1,"div",24),U("click",function(){I(t);let o=C();return S(o.recordToShare.set(null))}),v(),h(2,"div",34)(3,"div",35)(4,"button",36),U("click",function(){I(t);let o=C();return S(o.recordToShare.set(null))}),b(5,"i",37),v(),h(6,"div",38),b(7,"i",39),v(),h(8,"h3",40),p(9,"Condividi Checklist"),v(),h(10,"p",41),p(11),ie(12,"date"),v()(),h(13,"div",42)(14,"button",43),U("click",function(){I(t);let o=C();return S(o.shareAction("whatsapp"))}),h(15,"div",44),b(16,"i",45),v(),h(17,"span",46),p(18,"WhatsApp"),v()(),h(19,"button",47),U("click",function(){I(t);let o=C();return S(o.shareAction("email"))}),h(20,"div",48),b(21,"i",49),v(),h(22,"span",50),p(23,"Email"),v()(),h(24,"button",51),U("click",function(){I(t);let o=C();return S(o.shareAction("chat"))}),h(25,"div",52),b(26,"i",53),v(),h(27,"span",54),p(28,"Chat Interna"),v()(),h(29,"button",55),U("click",function(){I(t);let o=C();return S(o.shareAction("print"))}),h(30,"div",56),b(31,"i",57),v(),h(32,"span",58),p(33,"Stampa PDF"),v()()(),h(34,"div",59)(35,"button",60),U("click",function(){I(t);let o=C();return S(o.recordToShare.set(null))}),p(36," Chiudi "),v()()()()}if(n&2){let t=C();m(11),re(" ",t.getModuleName(t.recordToShare().moduleId)," - ",oe(12,2,t.recordToShare().timestamp,"dd/MM/yyyy")," ")}}function MF(n,e){if(n&1&&(h(0,"span",69),p(1),v()),n&2){let t=C().$implicit;m(),V(t.data.summary)}}function AF(n,e){if(n&1){let t=H();h(0,"tr",23)(1,"td",61)(2,"div",62)(3,"span",63),p(4),ie(5,"date"),v(),h(6,"span",64),p(7),ie(8,"date"),v()()(),h(9,"td",20)(10,"span",65),p(11),v()(),h(12,"td",20)(13,"div",66)(14,"span",67),b(15,"i",68),p(16),v(),T(17,MF,2,1,"span",69),v()(),h(18,"td",21)(19,"div",70)(20,"button",71),U("click",function(){let o=I(t).$implicit,r=C();return S(r.editRecord(o))}),b(21,"i",72),v(),h(22,"button",73),U("click",function(){let o=I(t).$implicit,r=C();return S(r.openShareMenu(o))}),b(23,"i",39),v(),h(24,"button",74),U("click",function(){let o=I(t).$implicit,r=C();return S(r.deleteRecord(o.id))}),b(25,"i",28),v()()()()}if(n&2){let t=e.$implicit,i=C();m(4),V(oe(5,17,t.timestamp,"dd/MM/yyyy")),m(3),V(oe(8,20,t.timestamp,"HH:mm")),m(4),k(" ",i.getModuleName(t.moduleId)," "),m(3),N("bg-emerald-100",t.data.status==="Conforme")("text-emerald-700",t.data.status==="Conforme")("bg-red-100",t.data.status!=="Conforme")("text-red-700",t.data.status!=="Conforme"),m(),N("fa-check",t.data.status==="Conforme")("fa-triangle-exclamation",t.data.status!=="Conforme"),m(),k(" ",t.data.status||"Completata"," "),m(),M(t.data.summary?17:-1)}}function kF(n,e){n&1&&(h(0,"tr")(1,"td",75)(2,"div",76)(3,"div",77),b(4,"i",78),v(),h(5,"p",79),p(6,"Nessuna registrazione trovata nell'archivio."),v()()()())}var Vl=class n{constructor(){this.state=$(ee);this.filterModule=B("all");this.filteredHistory=z(()=>{let e=this.state.checklistRecords(),t=this.filterModule();return t!=="all"&&(t==="pre-op-checklist"?e=e.filter(i=>i.moduleId==="pre-op-checklist"||i.moduleId==="pre-operative"):e=e.filter(i=>i.moduleId===t)),e.sort((i,o)=>new Date(o.timestamp).getTime()-new Date(i.timestamp).getTime())});this.toast=$(Be);this.recordToDelete=B(null);this.recordToShare=B(null)}getModuleName(e){switch(e){case"pre-op-checklist":return"Fase Pre-operativa";case"pre-operative":return"Fase Pre-operativa";case"operative-checklist":return"Fase Operativa";case"operative":return"Fase Operativa";case"post-op-checklist":return"Fase Post-operativa";case"post-operative":return"Fase Post-operativa";default:return e}}editRecord(e){let t=R({},e);t.moduleId==="pre-operative"&&(t.moduleId="pre-op-checklist"),this.state.startEditingRecord(t)}deleteRecord(e){this.confirmDelete(e)}confirmDelete(e){this.recordToDelete.set(e)}executeDelete(){let e=this.recordToDelete();e&&(this.state.deleteChecklist(e),this.toast.success("Eliminato","Registrazione rimossa con successo."),this.recordToDelete.set(null))}cancelDelete(){this.recordToDelete.set(null)}openShareMenu(e){this.recordToShare.set(e)}shareAction(e){let t=this.recordToShare();if(!t)return;let i=this.getModuleName(t.moduleId),o=new Date(t.timestamp).toLocaleDateString("it-IT");switch(e){case"whatsapp":this.toast.info("Condivisione WhatsApp","Apertura WhatsApp in corso...");break;case"email":this.toast.info("Invio Email","Preparazione report email...");break;case"chat":this.toast.success("Inviato","Checklist condivisa nella chat aziendale.");break;case"print":this.editRecord(t),setTimeout(()=>{window.print()},500);break}this.recordToShare.set(null)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-checklist-history"]],decls:40,vars:4,consts:[[1,"space-y-6","animate-fade-in","relative","pb-20"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4","animate-fade-in"],[1,"bg-white","p-6","rounded-3xl","shadow-sm","border","border-slate-100","flex","flex-col","md:flex-row","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-2xl","bg-indigo-100","flex","items-center","justify-center","text-indigo-600"],[1,"fa-solid","fa-clock-rotate-left","text-xl"],[1,"text-xl","font-bold","text-slate-800"],[1,"text-slate-500","text-xs"],[1,"relative"],[1,"fa-solid","fa-filter","absolute","left-3","top-3","text-slate-400","text-xs"],[1,"pl-9","pr-4","py-2","bg-slate-50","border","border-slate-200","text-slate-700","text-sm","rounded-xl","focus:ring-2","focus:ring-indigo-500","focus:outline-none","appearance-none","font-medium","cursor-pointer",3,"change","value"],["value","all"],["value","pre-op-checklist"],["value","operative-checklist"],["value","post-op-checklist"],[1,"bg-white","rounded-3xl","shadow-xl","overflow-hidden","border","border-slate-100"],[1,"overflow-x-auto"],[1,"w-full","text-left","text-sm"],[1,"bg-slate-50","text-slate-500","border-b","border-slate-100","uppercase","text-[10px]","tracking-wider","font-bold"],[1,"py-4","pl-6"],[1,"py-4"],[1,"py-4","text-right","pr-6"],[1,"divide-y","divide-slate-100"],[1,"group","hover:bg-indigo-50/30","transition-colors"],[1,"absolute","inset-0","bg-slate-900/60","backdrop-blur-sm","transition-opacity",3,"click"],[1,"relative","bg-white","rounded-3xl","shadow-2xl","w-full","max-w-sm","overflow-hidden","animate-slide-up","transform","transition-all"],[1,"p-8","text-center"],[1,"w-16","h-16","rounded-full","bg-red-50","text-red-500","mx-auto","flex","items-center","justify-center","mb-4","text-2xl","animate-bounce-short"],[1,"fa-solid","fa-trash-can"],[1,"text-xl","font-black","text-slate-800","mb-2"],[1,"text-slate-500","text-sm","mb-8","leading-relaxed"],[1,"grid","grid-cols-2","gap-3"],[1,"w-full","py-3.5","rounded-2xl","bg-slate-100","text-slate-600","font-bold","text-sm","hover:bg-slate-200","transition-colors",3,"click"],[1,"w-full","py-3.5","rounded-2xl","bg-red-500","text-white","font-bold","text-sm","hover:bg-red-600","shadow-lg","shadow-red-500/30","transition-all","font-black",3,"click"],[1,"relative","bg-white","rounded-3xl","shadow-2xl","w-full","max-w-sm","overflow-hidden","animate-slide-up"],[1,"bg-indigo-600","p-6","text-white","text-center","relative"],[1,"absolute","right-4","top-4","w-8","h-8","rounded-full","bg-white/20","hover:bg-white/30","flex","items-center","justify-center","transition-colors",3,"click"],[1,"fa-solid","fa-times","text-xs"],[1,"w-16","h-16","rounded-2xl","bg-white/20","flex","items-center","justify-center","mx-auto","mb-3","text-3xl"],[1,"fa-solid","fa-share-nodes"],[1,"text-xl","font-black","mb-1"],[1,"text-indigo-100","text-[10px]","uppercase","font-bold","tracking-widest","opacity-80"],[1,"p-6","grid","grid-cols-2","gap-4"],[1,"flex","flex-col","items-center","gap-2","p-4","rounded-2xl","bg-emerald-50","hover:bg-emerald-100","transition-all","group","border","border-emerald-100","hover:scale-105",3,"click"],[1,"w-12","h-12","rounded-full","bg-emerald-500","text-white","flex","items-center","justify-center","text-xl","shadow-lg","shadow-emerald-500/20","group-hover:animate-bounce-short"],[1,"fa-brands","fa-whatsapp"],[1,"text-xs","font-black","text-emerald-800"],[1,"flex","flex-col","items-center","gap-2","p-4","rounded-2xl","bg-blue-50","hover:bg-blue-100","transition-all","group","border","border-blue-100","hover:scale-105",3,"click"],[1,"w-12","h-12","rounded-full","bg-blue-500","text-white","flex","items-center","justify-center","text-xl","shadow-lg","shadow-blue-500/20","group-hover:animate-bounce-short"],[1,"fa-solid","fa-envelope"],[1,"text-xs","font-black","text-blue-800"],[1,"flex","flex-col","items-center","gap-2","p-4","rounded-2xl","bg-indigo-50","hover:bg-indigo-100","transition-all","group","border","border-indigo-100","hover:scale-105",3,"click"],[1,"w-12","h-12","rounded-full","bg-indigo-500","text-white","flex","items-center","justify-center","text-xl","shadow-lg","shadow-indigo-500/20","group-hover:animate-bounce-short"],[1,"fa-solid","fa-comments"],[1,"text-xs","font-black","text-indigo-800"],[1,"flex","flex-col","items-center","gap-2","p-4","rounded-2xl","bg-slate-50","hover:bg-slate-100","transition-all","group","border","border-slate-200","hover:scale-105",3,"click"],[1,"w-12","h-12","rounded-full","bg-slate-600","text-white","flex","items-center","justify-center","text-xl","shadow-lg","shadow-slate-600/20","group-hover:animate-bounce-short"],[1,"fa-solid","fa-print"],[1,"text-xs","font-black","text-slate-800"],[1,"px-6","pb-6","mt-2"],[1,"w-full","py-4","rounded-2xl","bg-slate-50","text-slate-400","font-bold","text-xs","uppercase","tracking-widest","hover:bg-slate-100","transition-all",3,"click"],[1,"py-4","pl-6","font-medium","text-slate-700"],[1,"flex","flex-col"],[1,"text-slate-900","font-bold"],[1,"text-slate-400","text-xs"],[1,"px-2","py-1","rounded-lg","bg-slate-100","text-slate-600","font-bold","text-[10px]","uppercase","tracking-wide","border","border-slate-200"],[1,"flex","flex-col","gap-1"],[1,"px-3","py-1","rounded-full","text-[10px]","font-bold","uppercase","inline-flex","items-center","gap-1","w-fit"],[1,"fa-solid"],[1,"text-[10px]","text-slate-400","font-medium","ml-1","italic"],[1,"flex","items-center","justify-end","gap-2","opacity-60","group-hover:opacity-100","transition-opacity"],["title","Modifica",1,"w-9","h-9","rounded-xl","bg-blue-50","text-blue-600","hover:bg-blue-600","hover:text-white","flex","items-center","justify-center","transition-all","shadow-sm","border","border-blue-100",3,"click"],[1,"fa-solid","fa-pen-to-square"],["title","Condividi",1,"w-9","h-9","rounded-xl","bg-emerald-50","text-emerald-600","hover:bg-emerald-600","hover:text-white","flex","items-center","justify-center","transition-all","shadow-sm","border","border-emerald-100",3,"click"],["title","Elimina",1,"w-9","h-9","rounded-xl","bg-red-50","text-red-600","hover:bg-red-600","hover:text-white","flex","items-center","justify-center","transition-all","shadow-sm","border","border-red-100",3,"click"],["colspan","4",1,"py-12","text-center"],[1,"flex","flex-col","items-center","gap-3"],[1,"w-16","h-16","rounded-full","bg-slate-50","flex","items-center","justify-center","text-slate-300"],[1,"fa-solid","fa-box-open","text-3xl"],[1,"text-slate-400","font-medium","italic"]],template:function(t,i){t&1&&(h(0,"div",0),T(1,DF,15,0,"div",1),T(2,TF,37,5,"div",1),h(3,"div",2)(4,"div",3)(5,"div",4),b(6,"i",5),v(),h(7,"div")(8,"h2",6),p(9,"Archivio Registrazioni"),v(),h(10,"p",7),p(11,"Consulta e gestisci lo storico delle attivit\xE0."),v()()(),h(12,"div",8),b(13,"i",9),h(14,"select",10),U("change",function(r){return i.filterModule.set(r.target.value)}),h(15,"option",11),p(16,"Tutte le Liste"),v(),h(17,"option",12),p(18,"Fase Pre-operativa"),v(),h(19,"option",13),p(20,"Fase Operativa"),v(),h(21,"option",14),p(22,"Fase Post-operativa"),v()()()(),h(23,"div",15)(24,"div",16)(25,"table",17)(26,"thead")(27,"tr",18)(28,"th",19),p(29,"Data & Ora"),v(),h(30,"th",20),p(31,"Tipo Lista"),v(),h(32,"th",20),p(33,"Esito"),v(),h(34,"th",21),p(35,"Azioni"),v()()(),h(36,"tbody",22),j(37,AF,26,23,"tr",23,SF),T(39,kF,7,0,"tr"),v()()()()()),t&2&&(m(),M(i.recordToDelete()?1:-1),m(),M(i.recordToShare()?2:-1),m(12),pt("value",i.filterModule()),m(23),W(i.filteredHistory()),m(2),M(i.filteredHistory().length===0?39:-1))},dependencies:[Z,ge],encapsulation:2})}};var b_=(n,e)=>e.id;function NF(n,e){if(n&1){let t=H();y(0,"h2",15),p(1,"Benvenuto"),_(),y(2,"p",16),p(3,"Seleziona la modalit\xE0 di accesso."),_(),y(4,"div",17)(5,"button",18),L("click",function(){I(t);let o=C(2);return S(o.setLoginMode("ADMIN"))}),y(6,"div",19),D(7,"i",20),_(),y(8,"div",21)(9,"h3",22),p(10,"Accesso Amministrazione"),_(),y(11,"p",23),p(12,"Gestione sedi, configurazioni e utenti."),_()(),D(13,"i",24),_(),y(14,"button",25),L("click",function(){I(t);let o=C(2);return S(o.setLoginMode("OPERATOR"))}),y(15,"div",26),D(16,"i",27),_(),y(17,"div",21)(18,"h3",28),p(19,"Accesso Operatore"),_(),y(20,"p",23),p(21,"Compilazione checklist e registri."),_()(),D(22,"i",29),_()()}}function RF(n,e){n&1&&p(0," Area Amministrativa ")}function PF(n,e){n&1&&p(0," Area Operativa ")}function FF(n,e){n&1&&(y(0,"div",41),D(1,"i",43),p(2," Credenziali non valide. Riprova. "),_())}function OF(n,e){if(n&1){let t=H();y(0,"button",30),L("click",function(){I(t);let o=C(2);return S(o.setLoginMode("SELECT"))}),D(1,"i",31),p(2," Indietro "),_(),y(3,"div",32)(4,"h2",33),T(5,RF,1,0)(6,PF,1,0),_(),y(7,"p",34),p(8,"Inserisci le tue credenziali per accedere."),_(),y(9,"div",17)(10,"div")(11,"label",35),p(12,"Nome Utente"),_(),y(13,"div",36),D(14,"i",37),y(15,"input",38),L("input",function(o){I(t);let r=C(2);return S(r.loginUsername.set(o.target.value))})("keyup.enter",function(){I(t);let o=C(2);return S(o.doLogin())}),_()()(),y(16,"div")(17,"label",35),p(18,"Password"),_(),y(19,"div",36),D(20,"i",39),y(21,"input",40),L("input",function(o){I(t);let r=C(2);return S(r.loginPassword.set(o.target.value))})("keyup.enter",function(){I(t);let o=C(2);return S(o.doLogin())}),_()()(),T(22,FF,3,0,"div",41),y(23,"button",42),L("click",function(){I(t);let o=C(2);return S(o.doLogin())}),p(24," ACCEDI "),_()()()}if(n&2){let t=C(2);m(5),M(t.loginMode()==="ADMIN"?5:6),m(10),X("value",t.loginUsername()),m(6),X("value",t.loginPassword()),m(),M(t.loginError()?22:-1)}}function VF(n,e){if(n&1&&(y(0,"div",0),D(1,"div",2),y(2,"div",3)(3,"div",4),D(4,"div",5)(5,"div",6),y(6,"div",7),D(7,"img",8),y(8,"h1",9),p(9,"HACCP Pro"),_(),y(10,"p",10),p(11,"Enterprise Solution"),_()(),y(12,"div",11)(13,"p",12),p(14," La piattaforma integrata per la gestione della sicurezza alimentare, igiene e conformit\xE0 normativa. "),_()(),y(15,"div",13),p(16," \xA9 2026 HACCP Pro System "),_()(),y(17,"div",14),T(18,NF,23,0)(19,OF,25,4),_()()()),n&2){let t=C();m(18),M(t.loginMode()==="SELECT"?18:19)}}function LF(n,e){if(n&1){let t=H();y(0,"div",83),L("click",function(){I(t);let o=C(2);return S(o.toggleMobileMenu())}),_()}}function UF(n,e){if(n&1&&(y(0,"div",84),p(1),_()),n&2){let t=C().$implicit,i=C(2);m(),k(" ",i.getCategoryLabel(t.category)," ")}}function BF(n,e){n&1&&D(0,"i",87)}function HF(n,e){if(n&1){let t=H();T(0,UF,2,1,"div",84),y(1,"button",85),L("click",function(){let o=I(t).$implicit,r=C(2);return r.state.setModule(o.id),S(r.isMobileMenuOpen.set(!1))}),D(2,"i"),y(3,"span",86),p(4),_(),T(5,BF,1,0,"i",87),_()}if(n&2){let t=e.$implicit,i=e.$index,o=C(2);M(i===0||t.category!==o.visibleMenuItems()[i-1].category?0:-1),m(),Pe("w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden justify-start text-left "+(o.state.currentModuleId()===t.id?"bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow-lg shadow-blue-500/30":"text-slate-400 hover:bg-slate-800 hover:text-white")),m(),Pe("fa-solid text-lg w-6 text-left "+t.icon+" "+(o.state.currentModuleId()===t.id?"text-white":"text-slate-500 group-hover:text-white")),m(2),V(t.label),m(),M(o.state.currentModuleId()===t.id?5:-1)}}function $F(n,e){if(n&1&&(y(0,"span",73),p(1),_()),n&2){let t=C(2);m(),k(" ",t.state.unreadMessagesCount()," ")}}function GF(n,e){if(n&1&&(y(0,"option",91),p(1),_()),n&2){let t=e.$implicit;X("value",t.id),m(),V(t.displayName)}}function zF(n,e){if(n&1){let t=H();y(0,"div",74),D(1,"i",88),y(2,"select",89),L("change",function(o){I(t);let r=C(2);return S(r.state.setCollaboratorFilter(o.target.value))}),y(3,"option",90),p(4,"-- Seleziona Unit\xE0 Operativa --"),_(),j(5,GF,2,2,"option",91,b_),_()()}if(n&2){let t=C(2);N("border-orange-300",!t.state.isContextEditable())("bg-orange-50",!t.state.isContextEditable()),m(),N("text-orange-400",!t.state.isContextEditable()),m(),N("text-orange-800",!t.state.isContextEditable()),X("value",t.state.filterCollaboratorId()),m(3),W(t.contextUsers())}}function qF(n,e){if(n&1&&(y(0,"div",78),D(1,"i",92),p(2),y(3,"span",93),p(4,"|"),_(),p(5),_()),n&2){let t,i=C(2);m(2),k(" ",(t=i.state.currentUser())==null?null:t.name," "),m(3),k(" ",i.state.companyConfig().name," ")}}function jF(n,e){n&1&&(y(0,"div",79),D(1,"i",94),p(2," Sola Lettura "),_())}function WF(n,e){n&1&&D(0,"app-dashboard-view")}function YF(n,e){n&1&&D(0,"app-operator-dashboard-view")}function JF(n,e){n&1&&D(0,"app-reports-view")}function KF(n,e){n&1&&D(0,"app-general-checks-view")}function ZF(n,e){n&1&&D(0,"app-post-operative-checklist")}function QF(n,e){n&1&&D(0,"app-pre-operative-checklist")}function XF(n,e){n&1&&D(0,"app-checklist-history")}function e3(n,e){n&1&&D(0,"app-operative-checklist")}function t3(n,e){n&1&&D(0,"app-staff-training-checklist")}function n3(n,e){n&1&&D(0,"app-suppliers-view")}function i3(n,e){n&1&&D(0,"app-cleaning-products-view")}function o3(n,e){n&1&&D(0,"app-equipment-view")}function r3(n,e){n&1&&D(0,"app-allergens-config-view")}function s3(n,e){n&1&&D(0,"app-cleaning-maintenance-view")}function a3(n,e){n&1&&D(0,"app-goods-receipt-view")}function l3(n,e){n&1&&D(0,"app-food-conservation-view")}function d3(n,e){n&1&&D(0,"app-temperatures-view")}function c3(n,e){n&1&&D(0,"app-traceability-view")}function u3(n,e){n&1&&D(0,"app-pest-control-view")}function f3(n,e){n&1&&D(0,"app-microbio-monitor-view")}function p3(n,e){n&1&&D(0,"app-staff-hygiene-view")}function m3(n,e){n&1&&D(0,"app-non-compliance-view")}function h3(n,e){n&1&&D(0,"app-settings-view")}function g3(n,e){n&1&&D(0,"app-collaborators-view")}function v3(n,e){n&1&&D(0,"app-messages-view")}function _3(n,e){n&1&&D(0,"app-accounting-view")}function y3(n,e){if(n&1&&D(0,"app-generic-module",82),n&2){let t=C(2);X("moduleId",t.state.currentModuleId())}}function x3(n,e){if(n&1){let t=H();y(0,"div",1),T(1,LF,1,0,"div",44),y(2,"aside")(3,"div",45)(4,"div",46),D(5,"img",47),_(),y(6,"div",48)(7,"h1",49),p(8,"HACCP Pro"),_(),y(9,"p",50),p(10,"Enterprise Solution "),_()()(),y(11,"nav",51),j(12,HF,6,7,null,null,b_),_(),y(14,"div",52)(15,"button",53),L("click",function(){I(t);let o=C();return S(o.state.logout())}),y(16,"div",36),D(17,"img",54)(18,"div",55),_(),y(19,"div",56)(20,"div",57),p(21),_(),y(22,"div",58),p(23,"Disconnetti"),_()(),D(24,"i",59),_()()(),y(25,"main",60)(26,"header",61)(27,"div",62),D(28,"img",63),y(29,"span",64),p(30,"HACCP Pro"),_()(),y(31,"button",65),L("click",function(){I(t);let o=C();return S(o.toggleMobileMenu())}),D(32,"i",66),_()(),y(33,"header",67)(34,"div",68)(35,"h2",69),p(36),_()(),y(37,"div",70)(38,"button",71),L("click",function(){I(t);let o=C();return S(o.state.setModule("messages"))}),D(39,"i",72),T(40,$F,2,1,"span",73),_(),y(41,"div",74),D(42,"i",75),y(43,"input",76),L("change",function(o){I(t);let r=C();return S(r.state.setDateFilter(o.target.value))}),_()(),T(44,zF,7,9,"div",77)(45,qF,6,2,"div",78),T(46,jF,3,0,"div",79),_()(),y(47,"div",80)(48,"div",81),T(49,WF,1,0,"app-dashboard-view")(50,YF,1,0,"app-operator-dashboard-view")(51,JF,1,0,"app-reports-view")(52,KF,1,0,"app-general-checks-view")(53,ZF,1,0,"app-post-operative-checklist")(54,QF,1,0,"app-pre-operative-checklist")(55,XF,1,0,"app-checklist-history")(56,e3,1,0,"app-operative-checklist")(57,t3,1,0,"app-staff-training-checklist")(58,n3,1,0,"app-suppliers-view")(59,i3,1,0,"app-cleaning-products-view")(60,o3,1,0,"app-equipment-view")(61,r3,1,0,"app-allergens-config-view")(62,s3,1,0,"app-cleaning-maintenance-view")(63,a3,1,0,"app-goods-receipt-view")(64,l3,1,0,"app-food-conservation-view")(65,d3,1,0,"app-temperatures-view")(66,c3,1,0,"app-traceability-view")(67,u3,1,0,"app-pest-control-view")(68,f3,1,0,"app-microbio-monitor-view")(69,p3,1,0,"app-staff-hygiene-view")(70,m3,1,0,"app-non-compliance-view")(71,h3,1,0,"app-settings-view")(72,g3,1,0,"app-collaborators-view")(73,v3,1,0,"app-messages-view")(74,_3,1,0,"app-accounting-view")(75,y3,1,1,"app-generic-module",82),_()()(),D(76,"app-toast-container"),_()}if(n&2){let t,i,o,r=C();m(),M(r.isMobileMenuOpen()?1:-1),m(),Pe("print:hidden w-72 bg-slate-900 text-slate-300 flex-shrink-0 flex flex-col border-r border-slate-800 fixed md:relative h-full z-50 transition-transform duration-300 md:translate-x-0 "+(r.isMobileMenuOpen()?"translate-x-0":"-translate-x-full")),m(3),X("src",r.state.currentLogo(),Xe),m(7),W(r.visibleMenuItems()),m(5),X("src",(t=r.state.currentUser())==null?null:t.avatar,Xe),m(4),V((i=r.state.currentUser())==null?null:i.name),m(7),X("src",r.state.currentLogo(),Xe),m(8),k(" ",r.getDataboardTitle()," "),m(4),M(r.state.unreadMessagesCount()>0?40:-1),m(3),X("value",r.state.filterDate()),m(),M(r.state.isAdmin()?44:45),m(2),M(r.state.isAdmin()&&!r.state.isContextEditable()?46:-1),m(3),M((o=r.state.currentModuleId())==="dashboard"?49:o==="operator-dashboard"?50:o==="reports"?51:o==="general-checks"?52:o==="post-op-checklist"?53:o==="pre-op-checklist"?54:o==="history"?55:o==="operative-checklist"?56:o==="staff-training"?57:o==="suppliers"?58:o==="products-cleaning"?59:o==="equipment"?60:o==="allergens-ue1169"?61:o==="cleaning-maintenance"?62:o==="goods-receipt"?63:o==="food-conservation"?64:o==="temperatures"?65:o==="traceability"?66:o==="pest-control"?67:o==="micro-bio"?68:o==="staff-hygiene"?69:o==="non-compliance"?70:o==="settings"?71:o==="collaborators"?72:o==="messages"?73:o==="accounting"?74:75)}}var Ll=class n{constructor(){this.state=$(ee);this.loginMode=B("SELECT");this.loginUsername=B("");this.loginPassword=B("");this.loginError=B(!1);this.isMobileMenuOpen=B(!1);this.visibleMenuItems=z(()=>this.state.menuItems.filter(e=>this.shouldShowMenuItem(e)));this.contextUsers=z(()=>this.state.systemUsers().map(e=>{let t=this.state.clients().find(i=>i.id===e.clientId);return O(R({},e),{displayName:t?`${t.name} - ${e.name}`:e.name})}).sort((e,t)=>e.displayName.localeCompare(t.displayName)))}getItemsByCategory(e){return this.state.menuItems.filter(t=>t.category===e)}hasAccessToCategory(e){return this.state.isAdmin()?["dashboard","monitoring","history","config","communication"].includes(e):["operations","history","config","communication"].includes(e)}getClientName(e){if(!e)return"";let t=this.state.clients().find(i=>i.id===e);return t?t.name:""}toggleMobileMenu(){this.isMobileMenuOpen.update(e=>!e)}setLoginMode(e){this.loginMode.set(e),e==="ADMIN"?(this.loginUsername.set("dev"),this.loginPassword.set("dev")):e==="OPERATOR"?(this.loginUsername.set("mario"),this.loginPassword.set("password")):(this.loginUsername.set(""),this.loginPassword.set("")),this.loginError.set(!1)}doLogin(){this.state.loginWithCredentials(this.loginUsername(),this.loginPassword())?this.setLoginMode("SELECT"):this.loginError.set(!0)}shouldShowMenuItem(e){return e.adminOnly&&!this.state.isAdmin()||e.operatorOnly&&this.state.isAdmin()?!1:this.hasAccessToCategory(e.category)}getCategoryLabel(e){return{operations:"Registri Operativi",monitoring:"Monitoraggio Operatori",history:"Archivio Storico",config:"Configurazione",communication:"Comunicazioni"}[e]||e}getDataboardTitle(){let e=this.state.currentModuleId(),t=this.state.menuItems.find(i=>i.id===e);return t?t.label:e==="dashboard"?"Dashboard Admin":e==="operator-dashboard"?"Centro Operativo":e}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=Q({type:n,selectors:[["app-root"]],decls:2,vars:1,consts:[[1,"min-h-screen","bg-slate-50","relative","flex","flex-col","justify-center","items-center","p-4","md:p-12"],[1,"flex","h-screen","bg-slate-50","relative","overflow-hidden"],[1,"absolute","top-0","left-0","w-full","h-96","bg-gradient-to-br","from-emerald-600","to-teal-900","z-0","rounded-b-[50px]","shadow-2xl"],[1,"relative","z-10","w-full","max-w-4xl","grid","grid-cols-1","md:grid-cols-2","bg-white","rounded-3xl","shadow-2xl","min-h-[500px]","overflow-hidden"],[1,"p-10","bg-slate-900","text-white","flex","flex-col","justify-between","items-center","text-center","relative","overflow-hidden"],[1,"absolute","top-0","left-0","w-64","h-64","bg-emerald-500/10","rounded-full","blur-3xl","-translate-x-1/2","-translate-y-1/2"],[1,"absolute","bottom-0","right-0","w-64","h-64","bg-blue-500/10","rounded-full","blur-3xl","translate-x-1/2","translate-y-1/2"],[1,"relative","z-10","flex","flex-col","items-center"],["src","assets/logo.png?v=2",1,"w-32","h-32","mb-6","drop-shadow-2xl","animate-fade-in"],[1,"text-3xl","font-bold","tracking-tight","mb-2"],[1,"text-slate-400","text-sm","font-medium","tracking-widest","uppercase"],[1,"relative","z-10","mt-8"],[1,"text-slate-300","text-sm","leading-relaxed","max-w-xs","mx-auto"],[1,"relative","z-10","text-xs","text-slate-500","mt-8"],[1,"p-10","flex","flex-col","justify-center","bg-white","relative"],[1,"text-2xl","font-bold","text-slate-900","mb-2"],[1,"text-slate-500","mb-8","text-sm"],[1,"space-y-4"],[1,"w-full","text-left","p-4","rounded-xl","border","border-slate-200","hover:border-blue-600","hover:bg-blue-50","transition-all","group","flex","items-center","gap-4","shadow-sm","hover:shadow-md",3,"click"],[1,"w-12","h-12","rounded-full","bg-blue-100/50","flex","items-center","justify-center","text-blue-600","group-hover:scale-110","transition-transform"],[1,"fa-solid","fa-user-shield","text-xl"],[1,"flex-1"],[1,"font-bold","text-slate-800","group-hover:text-blue-700"],[1,"text-xs","text-slate-500","mt-1"],[1,"fa-solid","fa-arrow-right","text-slate-300","group-hover:text-blue-500"],[1,"w-full","text-left","p-4","rounded-xl","border","border-slate-200","hover:border-emerald-600","hover:bg-emerald-50","transition-all","group","flex","items-center","gap-4","shadow-sm","hover:shadow-md",3,"click"],[1,"w-12","h-12","rounded-full","bg-emerald-100/50","flex","items-center","justify-center","text-emerald-600","group-hover:scale-110","transition-transform"],[1,"fa-solid","fa-users-gear","text-xl"],[1,"font-bold","text-slate-800","group-hover:text-emerald-600"],[1,"fa-solid","fa-arrow-right","text-slate-300","group-hover:text-emerald-500"],[1,"absolute","top-6","left-6","text-slate-400","hover:text-slate-600","flex","items-center","gap-2","text-sm","font-medium","transition-colors",3,"click"],[1,"fa-solid","fa-chevron-left"],[1,"mt-8","animate-fade-in-up"],[1,"text-2xl","font-bold","text-slate-900","mb-1"],[1,"text-slate-500","mb-6","text-sm"],[1,"block","text-xs","font-bold","text-slate-700","uppercase","mb-1"],[1,"relative"],[1,"fa-solid","fa-user","absolute","left-3","top-3","text-slate-400"],["type","text","placeholder","Username",1,"w-full","pl-10","pr-4","py-2","rounded-lg","border","border-slate-300","focus:outline-none","focus:ring-2","focus:ring-emerald-500","focus:border-transparent","transition-all",3,"input","keyup.enter","value"],[1,"fa-solid","fa-lock","absolute","left-3","top-3","text-slate-400"],["type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","pl-10","pr-4","py-2","rounded-lg","border","border-slate-300","focus:outline-none","focus:ring-2","focus:ring-emerald-500","focus:border-transparent","transition-all",3,"input","keyup.enter","value"],[1,"p-3","bg-red-50","text-red-600","text-sm","rounded-lg","flex","items-center","gap-2","animate-shake"],[1,"w-full","py-3","bg-slate-900","text-white","font-bold","rounded-lg","hover:bg-slate-800","transition-all","shadow-lg","shadow-slate-200","mt-4",3,"click"],[1,"fa-solid","fa-circle-exclamation"],[1,"fixed","inset-0","bg-slate-900/60","backdrop-blur-sm","z-40","md:hidden","animate-fade-in"],[1,"p-6","flex","items-center","gap-4","border-b","border-slate-700/50"],[1,"relative","w-12","h-12","flex","items-center","justify-center","bg-white","rounded-xl","shadow-lg","overflow-hidden","shrink-0"],[1,"w-full","h-full","object-contain","p-1.5",3,"src"],[1,"overflow-hidden"],[1,"text-white","font-bold","tracking-tight","text-lg","leading-tight","truncate"],[1,"text-slate-400","text-[10px]","uppercase","font-bold","tracking-widest","mt-0.5","truncate"],[1,"flex-1","overflow-y-auto","py-6","px-4","space-y-1","custom-scrollbar"],[1,"p-4","border-t","border-slate-700/50","bg-slate-900/50"],[1,"w-full","flex","items-center","gap-3","p-3","rounded-xl","hover:bg-red-500/10","hover:text-red-400","text-slate-400","transition-colors","group",3,"click"],[1,"w-9","h-9","rounded-full","border-2","border-slate-700","group-hover:border-red-400/50","transition-colors",3,"src"],[1,"absolute","bottom-0","right-0","w-3","h-3","bg-emerald-500","border-2","border-slate-900","rounded-full"],[1,"text-left","flex-1","min-w-0"],[1,"font-bold","text-xs","truncate","text-white"],[1,"text-[10px]","truncate","opacity-60"],[1,"fa-solid","fa-power-off","text-xs","opacity-40","group-hover:opacity-100","transition-opacity"],[1,"flex-1","flex","flex-col","h-screen","overflow-hidden","relative","print:overflow-visible","print:h-auto"],[1,"print:hidden","h-16","bg-white","border-b","border-slate-200","flex","md:hidden","items-center","justify-between","px-4","z-40","flex-shrink-0"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","object-contain",3,"src"],[1,"font-bold","text-slate-900","tracking-tight"],[1,"text-slate-500","p-2","hover:bg-slate-100","rounded-lg","transition-colors",3,"click"],[1,"fa-solid","fa-bars-staggered","text-xl"],[1,"print:hidden","bg-white/95","backdrop-blur-md","border-b","border-slate-200","h-16","hidden","md:flex","items-center","justify-between","px-8","sticky","top-0","z-20","flex-shrink-0"],[1,"flex","items-center","gap-4"],[1,"text-lg","font-bold","text-slate-800","tracking-tight"],[1,"flex","items-center","gap-6"],[1,"relative","p-2","hover:bg-slate-100","rounded-xl","transition-all","group",3,"click"],[1,"fa-solid","fa-bell","text-slate-600","text-xl","group-hover:text-blue-600","transition-colors"],[1,"absolute","-top-1","-right-1","w-5","h-5","bg-red-500","text-white","text-xs","font-bold","rounded-full","flex","items-center","justify-center","shadow-lg","animate-pulse"],[1,"flex","items-center","bg-slate-50","rounded-xl","border","border-slate-200","px-4","py-2","hover:border-slate-300","transition-colors","cursor-pointer","group"],[1,"fa-solid","fa-calendar-alt","text-slate-400","text-sm","mr-3","group-hover:text-blue-500"],["type","date",1,"bg-transparent","text-sm","text-slate-700","font-semibold","focus:outline-none","cursor-pointer","border-none","p-0","outline-none",3,"change","value"],[1,"flex","items-center","bg-slate-50","rounded-xl","border","border-slate-200","px-4","py-2","hover:border-slate-300","transition-colors","cursor-pointer","group",3,"border-orange-300","bg-orange-50"],[1,"flex","items-center","px-4","py-2","bg-slate-50","rounded-xl","border","border-slate-200","text-slate-600","font-medium","text-sm"],["title","Seleziona un'unit\xE0 per modificare i dati",1,"hidden","xl:flex","items-center","px-3","py-1","bg-slate-100","rounded","text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider","border","border-slate-200"],[1,"flex-1","overflow-auto","p-4","md:p-8","bg-slate-50","relative"],[1,"max-w-7xl","mx-auto","pb-10"],[3,"moduleId"],[1,"fixed","inset-0","bg-slate-900/60","backdrop-blur-sm","z-40","md:hidden","animate-fade-in",3,"click"],[1,"mt-8","mb-3","px-3","text-[10px]","font-black","text-slate-500","uppercase","tracking-widest","text-left"],[3,"click"],[1,"font-medium","text-sm","tracking-wide","flex-1"],[1,"fa-solid","fa-chevron-right","text-[10px]","opacity-70"],[1,"fa-solid","fa-building-user","text-slate-400","text-sm","mr-3","group-hover:text-emerald-500"],[1,"bg-transparent","text-sm","text-slate-700","font-semibold","focus:outline-none","cursor-pointer","border-none","p-0","outline-none","pr-4","min-w-[200px]",3,"change","value"],["value",""],[3,"value"],[1,"fa-solid","fa-user-tag","text-slate-400","mr-2"],[1,"mx-2","text-slate-300"],[1,"fa-solid","fa-lock","mr-2"]],template:function(t,i){t&1&&T(0,VF,20,1,"div",0)(1,x3,77,13,"div",1),t&2&&M(i.state.isLoggedIn()?1:0)},dependencies:[Z,ha,ga,va,Da,Ta,Ma,Aa,ka,Na,Ra,Fa,Oa,Va,La,Ua,Ba,Ha,$a,Dl,Tl,Ml,Al,kl,Nl,Rl,Pl,Ol,Vl],encapsulation:2})}};Ou(Ll,{providers:[vu()]}).catch(n=>console.error(n));
